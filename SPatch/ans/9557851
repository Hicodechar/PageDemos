
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>[63/89] sched/headers: Remove the &lt;linux/mm_types.h&gt; dependency from &lt;linux/sched.h&gt; - Patchwork</title>
  <link rel="stylesheet" type="text/css" href="/static/css/style.css"/>
  <script type="text/javascript" src="/static/js/common.js"></script>
  <script type="text/javascript" src="/static/js/jquery-1.10.1.min.js"></script>

 </head>
 <body>
  <div id="title">
  <h1 style="float: left;">
     <a
      href="/">Patchwork</a>
    [63/89] sched/headers: Remove the &lt;linux/mm_types.h&gt; dependency from &lt;linux/sched.h&gt;</h1>
  <div id="auth">

     <a href="/user/login/">login</a>
     <br/>
     <a href="/register/">register</a>
     <br/>
     <a href="/mail/">mail settings</a>

   </div>
   <div style="clear: both;"></div>
  </div>
  <div id="nav">
   <div id="navleft">
   
    <strong>Project</strong>: LKML
     :
     <a href="/project/LKML/list/"
      >patches</a>
     :
     <a href="/project/LKML/"
      >project info</a>
    
     :
     <a href="/"
     >other projects</a>
     
    
   </div>
   <div id="navright">
    <a href="/help/about/">about</a>
   </div>
   <div style="clear: both"></div>
  </div>

  <div id="content">

<script language="JavaScript" type="text/javascript">
function toggle_headers(link_id, headers_id)
{
    var link = document.getElementById(link_id)
    var headers = document.getElementById(headers_id)

    var hidden = headers.style['display'] == 'none';

    if (hidden) {
        link.innerHTML = 'hide';
        headers.style['display'] = 'block';
    } else {
        link.innerHTML = 'show';
        headers.style['display'] = 'none';
    }

}
</script>

<table class="patchmeta">
 <tr>
  <th>Submitter</th>
  <td><a href="/project/LKML/list/?submitter=35552">Ingo Molnar</a></td>
 </tr>
 <tr>
  <th>Date</th>
  <td>Feb. 6, 2017, 1:29 p.m.</td>
 </tr>
 <tr>
  <th>Message ID</th>
  <td>&lt;1486387772-18837-64-git-send-email-mingo@kernel.org&gt;</td>
 </tr>
 <tr>
  <th>Download</th>
  <td>
   <a href="/patch/9557851/mbox/"
   >mbox</a>
|
   <a href="/patch/9557851/raw/"
   >patch</a>

   </td>
 </tr>
 <tr>
  <th>Permalink</th>
  <td><a href="/patch/9557851/">/patch/9557851/</a>
 </tr>
  <tr>
   <th>State</th>
   <td>New</td>
  </tr>


 <tr>
  <th>Headers</th>
  <td><a id="togglepatchheaders"
   href="javascript:toggle_headers('togglepatchheaders', 'patchheaders')"
   >show</a>
   <div id="patchheaders" class="patchheaders" style="display:none;">
    <pre>Return-Path: &lt;linux-kernel-owner@kernel.org&gt;
Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org
	[172.30.200.125])
	by pdx-korg-patchwork.web.codeaurora.org (Postfix) with ESMTP id
	5D3E060413 for &lt;patchwork-LKML@patchwork.kernel.org&gt;;
	Mon,  6 Feb 2017 13:39:18 +0000 (UTC)
Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 45BEE20453
	for &lt;patchwork-LKML@patchwork.kernel.org&gt;;
	Mon,  6 Feb 2017 13:39:18 +0000 (UTC)
Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486)
	id 38F2E205A4; Mon,  6 Feb 2017 13:39:18 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	pdx-wl-mail.web.codeaurora.org
X-Spam-Level: 
X-Spam-Status: No, score=-6.3 required=2.0 tests=BAYES_00,DKIM_SIGNED,
	RCVD_IN_DNSWL_HI, RCVD_IN_SORBS_SPAM,
	T_DKIM_INVALID autolearn=ham version=3.3.1
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id C622B20453
	for &lt;patchwork-LKML@patchwork.kernel.org&gt;;
	Mon,  6 Feb 2017 13:39:15 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753157AbdBFNhx (ORCPT
	&lt;rfc822;patchwork-LKML@patchwork.kernel.org&gt;);
	Mon, 6 Feb 2017 08:37:53 -0500
Received: from mail-wm0-f68.google.com ([74.125.82.68]:33105 &quot;EHLO
	mail-wm0-f68.google.com&quot; rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751669AbdBFNbN (ORCPT
	&lt;rfc822;linux-kernel@vger.kernel.org&gt;);
	Mon, 6 Feb 2017 08:31:13 -0500
Received: by mail-wm0-f68.google.com with SMTP id v77so21896693wmv.0
	for &lt;linux-kernel@vger.kernel.org&gt;;
	Mon, 06 Feb 2017 05:31:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=gmail.com; s=20161025;
	h=sender:from:to:cc:subject:date:message-id:in-reply-to:references;
	bh=n9Q0cZXnreduIuFEgb2VaxeB52jOjln8zmzTnzrkovo=;
	b=Lr3293134rz2XHXtiVZxJ71RVDwPqATQN1JVTfVBfICGMLfYRcYKUk+mgivFvSB6dn
	1hVF3i76aWl0/U0ompH3TkR2f1dwitP0Z7ctx7wUCk+3R2PnFcnuij1Jyh42QGHNW6g8
	8oeC8fhP9cTOE31BTA7CS/Ulop4VPnG3tQYOTbqgSs9hKQqmPkmtPJoNH0jong6WqjLC
	5gtQILzMQjz2zQj04K8wUoEt5fc3QU6YzKeehSlaVH8neNJ0ivdHqfhFmd/5DqTDDbZP
	w8nKMCltg21lEXDU3bb8ttySJiIGxjNapxTGeRQETg/R4Fdm1LGogWEoG5vlgJCnkLC5
	aQpw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=1e100.net; s=20161025;
	h=x-gm-message-state:sender:from:to:cc:subject:date:message-id
	:in-reply-to:references;
	bh=n9Q0cZXnreduIuFEgb2VaxeB52jOjln8zmzTnzrkovo=;
	b=HJl2KWWvA2CMon40cJiOKRLZ8TyPC2/VHRxvWDZznYg1ePMkBTjyDw8YNoB0Jro6Gu
	GHDp8K3cyS2RR3BGnN7m/W1KnsrHgDhkSPYOl9rjaT+aTzTPNBJrfrQOPTfHz9CDhgob
	oLf3zjrKtQ0S/p2X1p3a7iw0jZuEaB1lH1rpF/CP1SLljMUqn7I26TzCg/vtTksa2j21
	lek8JzuA0IuA4wXRwr3DItsDss/7lOerXyV82eHwi/zuc7/6GAdgF0R7phI8lGPz1Lmb
	LKH3S6nqtDsPn2i2dsJLN4UNO5gesD9oF3tbJJ4Z0ojuQV5cXyrNOfFOYy9itQy0vfeX
	sOxQ==
X-Gm-Message-State: AMke39mHld2p8vggS5XAg1xK7utLCmcj90/ReaKS+ObnRbdvg68pmMN1VKl6KVO45aJgFQ==
X-Received: by 10.28.20.144 with SMTP id 138mr8031238wmu.41.1486387871256;
	Mon, 06 Feb 2017 05:31:11 -0800 (PST)
Received: from localhost.localdomain (2E8B0CD5.catv.pool.telekom.hu.
	[46.139.12.213]) by smtp.gmail.com with ESMTPSA id
	m84sm12904146wmf.10.2017.02.06.05.31.09
	(version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
	Mon, 06 Feb 2017 05:31:10 -0800 (PST)
From: Ingo Molnar &lt;mingo@kernel.org&gt;
To: linux-kernel@vger.kernel.org
Cc: Andrew Morton &lt;akpm@linux-foundation.org&gt;,
	Linus Torvalds &lt;torvalds@linux-foundation.org&gt;,
	Mike Galbraith &lt;efault@gmx.de&gt;, Oleg Nesterov &lt;oleg@redhat.com&gt;,
	Peter Zijlstra &lt;peterz@infradead.org&gt;,
	Thomas Gleixner &lt;tglx@linutronix.de&gt;
Subject: [PATCH 63/89] sched/headers: Remove the &lt;linux/mm_types.h&gt;
	dependency from &lt;linux/sched.h&gt;
Date: Mon,  6 Feb 2017 14:29:06 +0100
Message-Id: &lt;1486387772-18837-64-git-send-email-mingo@kernel.org&gt;
X-Mailer: git-send-email 2.7.4
In-Reply-To: &lt;1486387772-18837-1-git-send-email-mingo@kernel.org&gt;
References: &lt;1486387772-18837-1-git-send-email-mingo@kernel.org&gt;
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: &lt;linux-kernel.vger.kernel.org&gt;
X-Mailing-List: linux-kernel@vger.kernel.org
X-Virus-Scanned: ClamAV using ClamSMTP
</pre>
   </div>
  </td>
 </tr>
</table>

<div class="patchforms">





 <div style="clear: both;">
 </div>
</div>



<h2>Comments</h2>

<div class="comment">
<div class="meta"><a href="/project/LKML/list/?submitter=35552">Ingo Molnar</a> - Feb. 6, 2017, 1:29 p.m.</div>
<pre class="content">
Use the freshly introduced, reduced size &lt;linux/mm_types_task.h&gt; header instead.

Update the code that relied on sched.h including the MM types for them.

Cc: Peter Zijlstra &lt;peterz@infradead.org&gt;
Cc: Mike Galbraith &lt;efault@gmx.de&gt;
Cc: Thomas Gleixner &lt;tglx@linutronix.de&gt;
Cc: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
Cc: linux-kernel@vger.kernel.org
<span class="signed-off-by">Signed-off-by: Ingo Molnar &lt;mingo@kernel.org&gt;</span>
---
 arch/alpha/include/asm/a.out-core.h              | 1 +
 arch/alpha/include/asm/mmu_context.h             | 2 ++
 arch/arc/mm/tlb.c                                | 2 ++
 arch/arm/include/asm/mmu_context.h               | 2 ++
 arch/arm/include/asm/tlbflush.h                  | 7 ++++---
 arch/arm/kernel/suspend.c                        | 1 +
 arch/arm/kernel/swp_emulate.c                    | 1 +
 arch/arm/mm/idmap.c                              | 1 +
 arch/arm64/include/asm/mmu_context.h             | 1 +
 arch/arm64/kernel/traps.c                        | 1 +
 arch/avr32/include/asm/mmu_context.h             | 2 ++
 arch/blackfin/include/asm/mmu_context.h          | 2 ++
 arch/blackfin/kernel/flat.c                      | 1 +
 arch/blackfin/kernel/process.c                   | 1 +
 arch/blackfin/mm/sram-alloc.c                    | 2 ++
 arch/cris/arch-v10/mm/tlb.c                      | 2 ++
 arch/cris/arch-v32/mm/tlb.c                      | 1 +
 arch/cris/include/asm/pgtable.h                  | 2 +-
 arch/cris/mm/tlb.c                               | 2 ++
 arch/h8300/kernel/traps.c                        | 1 +
 arch/hexagon/include/asm/mmu_context.h           | 2 ++
 arch/hexagon/kernel/smp.c                        | 1 +
 arch/ia64/include/asm/mmu_context.h              | 1 +
 arch/ia64/include/asm/pgtable.h                  | 2 +-
 arch/ia64/sn/kernel/sn2/sn2_smp.c                | 1 +
 arch/m32r/include/asm/mmu_context.h              | 2 ++
 arch/m68k/include/asm/a.out-core.h               | 1 +
 arch/m68k/include/asm/mmu_context.h              | 1 +
 arch/metag/include/asm/mmu_context.h             | 1 +
 arch/microblaze/include/asm/mmu_context_mm.h     | 2 ++
 arch/microblaze/mm/pgtable.c                     | 1 +
 arch/mips/include/asm/elf.h                      | 2 ++
 arch/mips/include/asm/mmu_context.h              | 2 ++
 arch/mips/kernel/smp.c                           | 2 +-
 arch/mips/math-emu/dsemul.c                      | 1 +
 arch/mips/mm/ioremap.c                           | 1 +
 arch/mn10300/include/asm/mmu_context.h           | 2 ++
 arch/mn10300/kernel/smp.c                        | 2 +-
 arch/mn10300/mm/tlb-smp.c                        | 2 +-
 arch/nios2/include/asm/mmu_context.h             | 2 ++
 arch/nios2/kernel/process.c                      | 1 +
 arch/powerpc/kernel/io-workarounds.c             | 2 +-
 arch/powerpc/kvm/e500_mmu_host.c                 | 2 +-
 arch/powerpc/lib/feature-fixups.c                | 1 +
 arch/powerpc/mm/hash_utils_64.c                  | 2 +-
 arch/powerpc/mm/pgtable-book3s64.c               | 2 ++
 arch/powerpc/mm/pgtable-hash64.c                 | 2 ++
 arch/powerpc/mm/pgtable-radix.c                  | 2 +-
 arch/powerpc/mm/slb.c                            | 2 ++
 arch/s390/include/asm/elf.h                      | 2 +-
 arch/s390/include/asm/mmu_context.h              | 1 +
 arch/s390/kernel/processor.c                     | 1 +
 arch/s390/kvm/gaccess.c                          | 2 ++
 arch/s390/kvm/priv.c                             | 2 ++
 arch/score/include/asm/mmu_context.h             | 2 ++
 arch/score/kernel/traps.c                        | 1 +
 arch/sh/include/asm/mmu_context.h                | 2 ++
 arch/sparc/include/asm/mmu_context_64.h          | 2 ++
 arch/sparc/include/asm/pgtable_64.h              | 3 +++
 arch/sparc/kernel/asm-offsets.c                  | 1 +
 arch/sparc/kernel/traps_32.c                     | 1 +
 arch/sparc/mm/tsb.c                              | 2 ++
 arch/tile/include/asm/mmu_context.h              | 2 ++
 arch/um/include/asm/mmu_context.h                | 2 ++
 arch/um/kernel/exec.c                            | 2 +-
 arch/um/kernel/reboot.c                          | 1 +
 arch/um/kernel/skas/process.c                    | 3 ++-
 arch/x86/entry/vsyscall/vsyscall_64.c            | 1 +
 arch/x86/events/core.c                           | 2 +-
 arch/x86/include/asm/a.out-core.h                | 2 ++
 arch/x86/include/asm/mpx.h                       | 2 ++
 arch/x86/mm/mpx.c                                | 1 +
 arch/x86/um/syscalls_64.c                        | 1 +
 arch/x86/xen/mmu.c                               | 2 +-
 arch/xtensa/include/asm/mmu_context.h            | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c | 2 ++
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c  | 2 ++
 drivers/infiniband/hw/cxgb3/iwch_provider.c      | 2 +-
 drivers/infiniband/hw/cxgb4/iw_cxgb4.h           | 2 +-
 drivers/media/v4l2-core/videobuf-dma-sg.c        | 2 +-
 fs/binfmt_misc.c                                 | 2 +-
 fs/kernfs/file.c                                 | 2 +-
 include/drm/drm_mm.h                             | 1 +
 include/linux/init_task.h                        | 1 +
 include/linux/sched.h                            | 2 +-
 include/linux/sched/mm.h                         | 1 +
 kernel/sched/debug.c                             | 2 +-
 kernel/sched/fair.c                              | 2 +-
 kernel/signal.c                                  | 2 +-
 lib/is_single_threaded.c                         | 1 +
 90 files changed, 126 insertions(+), 26 deletions(-)
</pre>
</div>



<h2>Patch</h2>
<div class="patch">
<pre class="content">
<span class="p_header">diff --git a/arch/alpha/include/asm/a.out-core.h b/arch/alpha/include/asm/a.out-core.h</span>
<span class="p_header">index 9e33e92e524c..1610d078b064 100644</span>
<span class="p_header">--- a/arch/alpha/include/asm/a.out-core.h</span>
<span class="p_header">+++ b/arch/alpha/include/asm/a.out-core.h</span>
<span class="p_chunk">@@ -15,6 +15,7 @@</span> <span class="p_context"></span>
 #ifdef __KERNEL__
 
 #include &lt;linux/user.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 /*
  * Fill in the user structure for an ECOFF core dump.
<span class="p_header">diff --git a/arch/alpha/include/asm/mmu_context.h b/arch/alpha/include/asm/mmu_context.h</span>
<span class="p_header">index 4c51c05333c6..384bd47b5187 100644</span>
<span class="p_header">--- a/arch/alpha/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/alpha/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -7,6 +7,8 @@</span> <span class="p_context"></span>
  * Copyright (C) 1996, Linus Torvalds
  */
 
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/machvec.h&gt;
 #include &lt;asm/compiler.h&gt;
 #include &lt;asm-generic/mm_hooks.h&gt;
<span class="p_header">diff --git a/arch/arc/mm/tlb.c b/arch/arc/mm/tlb.c</span>
<span class="p_header">index bdb295e09160..d0126fdfe2d8 100644</span>
<span class="p_header">--- a/arch/arc/mm/tlb.c</span>
<span class="p_header">+++ b/arch/arc/mm/tlb.c</span>
<span class="p_chunk">@@ -53,6 +53,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/module.h&gt;
 #include &lt;linux/bug.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/arcregs.h&gt;
 #include &lt;asm/setup.h&gt;
 #include &lt;asm/mmu_context.h&gt;
<span class="p_header">diff --git a/arch/arm/include/asm/mmu_context.h b/arch/arm/include/asm/mmu_context.h</span>
<span class="p_header">index 3cc14dd8587c..7f303295ef19 100644</span>
<span class="p_header">--- a/arch/arm/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/arm/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -15,7 +15,9 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/compiler.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/preempt.h&gt;
<span class="p_add">+</span>
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/cachetype.h&gt;
 #include &lt;asm/proc-fns.h&gt;
<span class="p_header">diff --git a/arch/arm/include/asm/tlbflush.h b/arch/arm/include/asm/tlbflush.h</span>
<span class="p_header">index def9e570199f..1897b5196fb5 100644</span>
<span class="p_header">--- a/arch/arm/include/asm/tlbflush.h</span>
<span class="p_header">+++ b/arch/arm/include/asm/tlbflush.h</span>
<span class="p_chunk">@@ -10,6 +10,10 @@</span> <span class="p_context"></span>
 #ifndef _ASMARM_TLBFLUSH_H
 #define _ASMARM_TLBFLUSH_H
 
<span class="p_add">+#ifndef __ASSEMBLY__</span>
<span class="p_add">+# include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+#endif</span>
<span class="p_add">+</span>
 #ifdef CONFIG_MMU
 
 #include &lt;asm/glue.h&gt;
<span class="p_chunk">@@ -644,9 +648,6 @@</span> <span class="p_context"> static inline void update_mmu_cache(struct vm_area_struct *vma,</span>
 #elif defined(CONFIG_SMP)	/* !CONFIG_MMU */
 
 #ifndef __ASSEMBLY__
<span class="p_del">-</span>
<span class="p_del">-#include &lt;linux/mm_types.h&gt;</span>
<span class="p_del">-</span>
 static inline void local_flush_tlb_all(void)									{ }
 static inline void local_flush_tlb_mm(struct mm_struct *mm)							{ }
 static inline void local_flush_tlb_page(struct vm_area_struct *vma, unsigned long uaddr)			{ }
<span class="p_header">diff --git a/arch/arm/kernel/suspend.c b/arch/arm/kernel/suspend.c</span>
<span class="p_header">index 9a2f882a0a2d..ef794c799cb6 100644</span>
<span class="p_header">--- a/arch/arm/kernel/suspend.c</span>
<span class="p_header">+++ b/arch/arm/kernel/suspend.c</span>
<span class="p_chunk">@@ -1,5 +1,6 @@</span> <span class="p_context"></span>
 #include &lt;linux/init.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/idmap.h&gt;
<span class="p_header">diff --git a/arch/arm/kernel/swp_emulate.c b/arch/arm/kernel/swp_emulate.c</span>
<span class="p_header">index 853221f81104..3bda08bee674 100644</span>
<span class="p_header">--- a/arch/arm/kernel/swp_emulate.c</span>
<span class="p_header">+++ b/arch/arm/kernel/swp_emulate.c</span>
<span class="p_chunk">@@ -23,6 +23,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/proc_fs.h&gt;
 #include &lt;linux/seq_file.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/syscalls.h&gt;
 #include &lt;linux/perf_event.h&gt;
 
<span class="p_header">diff --git a/arch/arm/mm/idmap.c b/arch/arm/mm/idmap.c</span>
<span class="p_header">index c1a48f88764e..3e511bec69b8 100644</span>
<span class="p_header">--- a/arch/arm/mm/idmap.c</span>
<span class="p_header">+++ b/arch/arm/mm/idmap.c</span>
<span class="p_chunk">@@ -1,6 +1,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/module.h&gt;
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/cputype.h&gt;
 #include &lt;asm/idmap.h&gt;
<span class="p_header">diff --git a/arch/arm64/include/asm/mmu_context.h b/arch/arm64/include/asm/mmu_context.h</span>
<span class="p_header">index c517c3c2f194..e63d1b6232c0 100644</span>
<span class="p_header">--- a/arch/arm64/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/arm64/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -22,6 +22,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/compiler.h&gt;
 #include &lt;linux/sched.h&gt;
 #include &lt;linux/sched/hotplug.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/cpufeature.h&gt;
<span class="p_header">diff --git a/arch/arm64/kernel/traps.c b/arch/arm64/kernel/traps.c</span>
<span class="p_header">index 2a256e5ae57f..698174ddaf09 100644</span>
<span class="p_header">--- a/arch/arm64/kernel/traps.c</span>
<span class="p_header">+++ b/arch/arm64/kernel/traps.c</span>
<span class="p_chunk">@@ -33,6 +33,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/sched/debug.h&gt;
 #include &lt;linux/sched/task_stack.h&gt;
 #include &lt;linux/syscalls.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/atomic.h&gt;
 #include &lt;asm/bug.h&gt;
<span class="p_header">diff --git a/arch/avr32/include/asm/mmu_context.h b/arch/avr32/include/asm/mmu_context.h</span>
<span class="p_header">index 27ff23407100..cd87abba8db7 100644</span>
<span class="p_header">--- a/arch/avr32/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/avr32/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -12,6 +12,8 @@</span> <span class="p_context"></span>
 #ifndef __ASM_AVR32_MMU_CONTEXT_H
 #define __ASM_AVR32_MMU_CONTEXT_H
 
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/tlbflush.h&gt;
 #include &lt;asm/sysreg.h&gt;
 #include &lt;asm-generic/mm_hooks.h&gt;
<span class="p_header">diff --git a/arch/blackfin/include/asm/mmu_context.h b/arch/blackfin/include/asm/mmu_context.h</span>
<span class="p_header">index 15b16d3e8de8..0ce6de873b27 100644</span>
<span class="p_header">--- a/arch/blackfin/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/blackfin/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -9,6 +9,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/setup.h&gt;
 #include &lt;asm/page.h&gt;
 #include &lt;asm/pgalloc.h&gt;
<span class="p_header">diff --git a/arch/blackfin/kernel/flat.c b/arch/blackfin/kernel/flat.c</span>
<span class="p_header">index a88daddbf074..b5b658449616 100644</span>
<span class="p_header">--- a/arch/blackfin/kernel/flat.c</span>
<span class="p_header">+++ b/arch/blackfin/kernel/flat.c</span>
<span class="p_chunk">@@ -6,6 +6,7 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/module.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/flat.h&gt;
 
 #define FLAT_BFIN_RELOC_TYPE_16_BIT 0
<span class="p_header">diff --git a/arch/blackfin/kernel/process.c b/arch/blackfin/kernel/process.c</span>
<span class="p_header">index b691ef875a40..89d5162d4ca6 100644</span>
<span class="p_header">--- a/arch/blackfin/kernel/process.c</span>
<span class="p_header">+++ b/arch/blackfin/kernel/process.c</span>
<span class="p_chunk">@@ -15,6 +15,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/sched/debug.h&gt;
 #include &lt;linux/sched/task.h&gt;
 #include &lt;linux/sched/task_stack.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/tick.h&gt;
 #include &lt;linux/fs.h&gt;
 #include &lt;linux/err.h&gt;
<span class="p_header">diff --git a/arch/blackfin/mm/sram-alloc.c b/arch/blackfin/mm/sram-alloc.c</span>
<span class="p_header">index 1f3b3ef3e103..d2a96c2c02a3 100644</span>
<span class="p_header">--- a/arch/blackfin/mm/sram-alloc.c</span>
<span class="p_header">+++ b/arch/blackfin/mm/sram-alloc.c</span>
<span class="p_chunk">@@ -19,6 +19,8 @@</span> <span class="p_context"></span>
 #include &lt;linux/spinlock.h&gt;
 #include &lt;linux/rtc.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/blackfin.h&gt;
 #include &lt;asm/mem_map.h&gt;
 #include &quot;blackfin_sram.h&quot;
<span class="p_header">diff --git a/arch/cris/arch-v10/mm/tlb.c b/arch/cris/arch-v10/mm/tlb.c</span>
<span class="p_header">index 21d78c599bab..3225d38bdaea 100644</span>
<span class="p_header">--- a/arch/cris/arch-v10/mm/tlb.c</span>
<span class="p_header">+++ b/arch/cris/arch-v10/mm/tlb.c</span>
<span class="p_chunk">@@ -10,6 +10,8 @@</span> <span class="p_context"></span>
  *
  */
 
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/tlb.h&gt;
 #include &lt;asm/mmu_context.h&gt;
 #include &lt;arch/svinto.h&gt;
<span class="p_header">diff --git a/arch/cris/arch-v32/mm/tlb.c b/arch/cris/arch-v32/mm/tlb.c</span>
<span class="p_header">index c030d020660a..bc3de5b5e27c 100644</span>
<span class="p_header">--- a/arch/cris/arch-v32/mm/tlb.c</span>
<span class="p_header">+++ b/arch/cris/arch-v32/mm/tlb.c</span>
<span class="p_chunk">@@ -6,6 +6,7 @@</span> <span class="p_context"></span>
  * Authors:   Bjorn Wesen &lt;bjornw@axis.com&gt;
  *            Tobias Anderberg &lt;tobiasa@axis.com&gt;, CRISv32 port.
  */
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/tlb.h&gt;
 #include &lt;asm/mmu_context.h&gt;
<span class="p_header">diff --git a/arch/cris/include/asm/pgtable.h b/arch/cris/include/asm/pgtable.h</span>
<span class="p_header">index ceefc314d64d..2a3210ba4c72 100644</span>
<span class="p_header">--- a/arch/cris/include/asm/pgtable.h</span>
<span class="p_header">+++ b/arch/cris/include/asm/pgtable.h</span>
<span class="p_chunk">@@ -9,7 +9,7 @@</span> <span class="p_context"></span>
 #include &lt;asm-generic/pgtable-nopmd.h&gt;
 
 #ifndef __ASSEMBLY__
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;asm/mmu.h&gt;
 #endif
 #include &lt;arch/pgtable.h&gt;
<span class="p_header">diff --git a/arch/cris/mm/tlb.c b/arch/cris/mm/tlb.c</span>
<span class="p_header">index b7f8de576777..8413741cfa0f 100644</span>
<span class="p_header">--- a/arch/cris/mm/tlb.c</span>
<span class="p_header">+++ b/arch/cris/mm/tlb.c</span>
<span class="p_chunk">@@ -9,6 +9,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/init.h&gt;
 #include &lt;linux/kernel.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/tlb.h&gt;
 
 #define D(x)
<span class="p_header">diff --git a/arch/h8300/kernel/traps.c b/arch/h8300/kernel/traps.c</span>
<span class="p_header">index ee7e3ce40d78..e47a9e0dc278 100644</span>
<span class="p_header">--- a/arch/h8300/kernel/traps.c</span>
<span class="p_header">+++ b/arch/h8300/kernel/traps.c</span>
<span class="p_chunk">@@ -17,6 +17,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/types.h&gt;
 #include &lt;linux/sched.h&gt;
 #include &lt;linux/sched/debug.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/errno.h&gt;
 #include &lt;linux/init.h&gt;
<span class="p_header">diff --git a/arch/hexagon/include/asm/mmu_context.h b/arch/hexagon/include/asm/mmu_context.h</span>
<span class="p_header">index d423d2e73c30..d8a071afdd1d 100644</span>
<span class="p_header">--- a/arch/hexagon/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/hexagon/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -21,6 +21,8 @@</span> <span class="p_context"></span>
 #ifndef _ASM_MMU_CONTEXT_H
 #define _ASM_MMU_CONTEXT_H
 
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/setup.h&gt;
 #include &lt;asm/page.h&gt;
 #include &lt;asm/pgalloc.h&gt;
<span class="p_header">diff --git a/arch/hexagon/kernel/smp.c b/arch/hexagon/kernel/smp.c</span>
<span class="p_header">index 983bae7d2665..3c7f4b1a6372 100644</span>
<span class="p_header">--- a/arch/hexagon/kernel/smp.c</span>
<span class="p_header">+++ b/arch/hexagon/kernel/smp.c</span>
<span class="p_chunk">@@ -29,6 +29,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/smp.h&gt;
 #include &lt;linux/spinlock.h&gt;
 #include &lt;linux/cpu.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/time.h&gt;    /*  timer_interrupt  */
 #include &lt;asm/hexagon_vm.h&gt;
<span class="p_header">diff --git a/arch/ia64/include/asm/mmu_context.h b/arch/ia64/include/asm/mmu_context.h</span>
<span class="p_header">index 7f2a456603cb..9b99368633b5 100644</span>
<span class="p_header">--- a/arch/ia64/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/ia64/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -26,6 +26,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/compiler.h&gt;
 #include &lt;linux/percpu.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/spinlock.h&gt;
 
 #include &lt;asm/processor.h&gt;
<span class="p_header">diff --git a/arch/ia64/include/asm/pgtable.h b/arch/ia64/include/asm/pgtable.h</span>
<span class="p_header">index 9f3ed9ee8f13..384794e665fc 100644</span>
<span class="p_header">--- a/arch/ia64/include/asm/pgtable.h</span>
<span class="p_header">+++ b/arch/ia64/include/asm/pgtable.h</span>
<span class="p_chunk">@@ -147,7 +147,7 @@</span> <span class="p_context"></span>
 
 # ifndef __ASSEMBLY__
 
<span class="p_del">-#include &lt;linux/sched.h&gt;	/* for mm_struct */</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;	/* for mm_struct */</span>
 #include &lt;linux/bitops.h&gt;
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/mmu_context.h&gt;
<span class="p_header">diff --git a/arch/ia64/sn/kernel/sn2/sn2_smp.c b/arch/ia64/sn/kernel/sn2/sn2_smp.c</span>
<span class="p_header">index c98dc965fe82..b73b0ebf8214 100644</span>
<span class="p_header">--- a/arch/ia64/sn/kernel/sn2/sn2_smp.c</span>
<span class="p_header">+++ b/arch/ia64/sn/kernel/sn2/sn2_smp.c</span>
<span class="p_chunk">@@ -13,6 +13,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/spinlock.h&gt;
 #include &lt;linux/threads.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/smp.h&gt;
 #include &lt;linux/interrupt.h&gt;
 #include &lt;linux/irq.h&gt;
<span class="p_header">diff --git a/arch/m32r/include/asm/mmu_context.h b/arch/m32r/include/asm/mmu_context.h</span>
<span class="p_header">index 9fc78fc44445..1230b7050d8e 100644</span>
<span class="p_header">--- a/arch/m32r/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/m32r/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -12,6 +12,8 @@</span> <span class="p_context"></span>
 #ifndef __ASSEMBLY__
 
 #include &lt;linux/atomic.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/pgalloc.h&gt;
 #include &lt;asm/mmu.h&gt;
 #include &lt;asm/tlbflush.h&gt;
<span class="p_header">diff --git a/arch/m68k/include/asm/a.out-core.h b/arch/m68k/include/asm/a.out-core.h</span>
<span class="p_header">index f6bfc1d63ff6..ae91ea6bb303 100644</span>
<span class="p_header">--- a/arch/m68k/include/asm/a.out-core.h</span>
<span class="p_header">+++ b/arch/m68k/include/asm/a.out-core.h</span>
<span class="p_chunk">@@ -16,6 +16,7 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/user.h&gt;
 #include &lt;linux/elfcore.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 /*
  * fill in the user structure for an a.out core dump
<span class="p_header">diff --git a/arch/m68k/include/asm/mmu_context.h b/arch/m68k/include/asm/mmu_context.h</span>
<span class="p_header">index dc3be991d634..4a6ae6dffa34 100644</span>
<span class="p_header">--- a/arch/m68k/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/m68k/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -2,6 +2,7 @@</span> <span class="p_context"></span>
 #define __M68K_MMU_CONTEXT_H
 
 #include &lt;asm-generic/mm_hooks.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 static inline void enter_lazy_tlb(struct mm_struct *mm, struct task_struct *tsk)
 {
<span class="p_header">diff --git a/arch/metag/include/asm/mmu_context.h b/arch/metag/include/asm/mmu_context.h</span>
<span class="p_header">index ae2a71b5e0be..2e0312748197 100644</span>
<span class="p_header">--- a/arch/metag/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/metag/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -9,6 +9,7 @@</span> <span class="p_context"></span>
 #include &lt;asm/cacheflush.h&gt;
 
 #include &lt;linux/io.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 static inline void enter_lazy_tlb(struct mm_struct *mm,
 				  struct task_struct *tsk)
<span class="p_header">diff --git a/arch/microblaze/include/asm/mmu_context_mm.h b/arch/microblaze/include/asm/mmu_context_mm.h</span>
<span class="p_header">index d68647746448..99472d2ca340 100644</span>
<span class="p_header">--- a/arch/microblaze/include/asm/mmu_context_mm.h</span>
<span class="p_header">+++ b/arch/microblaze/include/asm/mmu_context_mm.h</span>
<span class="p_chunk">@@ -12,6 +12,8 @@</span> <span class="p_context"></span>
 #define _ASM_MICROBLAZE_MMU_CONTEXT_H
 
 #include &lt;linux/atomic.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/bitops.h&gt;
 #include &lt;asm/mmu.h&gt;
 #include &lt;asm-generic/mm_hooks.h&gt;
<span class="p_header">diff --git a/arch/microblaze/mm/pgtable.c b/arch/microblaze/mm/pgtable.c</span>
<span class="p_header">index cc732fe357ad..4c0599239915 100644</span>
<span class="p_header">--- a/arch/microblaze/mm/pgtable.c</span>
<span class="p_header">+++ b/arch/microblaze/mm/pgtable.c</span>
<span class="p_chunk">@@ -31,6 +31,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/types.h&gt;
 #include &lt;linux/vmalloc.h&gt;
 #include &lt;linux/init.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/pgtable.h&gt;
 #include &lt;asm/pgalloc.h&gt;
<span class="p_header">diff --git a/arch/mips/include/asm/elf.h b/arch/mips/include/asm/elf.h</span>
<span class="p_header">index 2b3dc2973670..0e192bd9d52b 100644</span>
<span class="p_header">--- a/arch/mips/include/asm/elf.h</span>
<span class="p_header">+++ b/arch/mips/include/asm/elf.h</span>
<span class="p_chunk">@@ -10,6 +10,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/auxvec.h&gt;
 #include &lt;linux/fs.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;uapi/linux/elf.h&gt;
 
 #include &lt;asm/current.h&gt;
<span class="p_header">diff --git a/arch/mips/include/asm/mmu_context.h b/arch/mips/include/asm/mmu_context.h</span>
<span class="p_header">index ddd57ade1aa8..946407246bfc 100644</span>
<span class="p_header">--- a/arch/mips/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/mips/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -13,8 +13,10 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/errno.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/smp.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+</span>
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/dsemul.h&gt;
 #include &lt;asm/hazards.h&gt;
<span class="p_header">diff --git a/arch/mips/kernel/smp.c b/arch/mips/kernel/smp.c</span>
<span class="p_header">index 7ebb1918e2ac..ab3079b83e16 100644</span>
<span class="p_header">--- a/arch/mips/kernel/smp.c</span>
<span class="p_header">+++ b/arch/mips/kernel/smp.c</span>
<span class="p_chunk">@@ -28,7 +28,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/export.h&gt;
 #include &lt;linux/time.h&gt;
 #include &lt;linux/timex.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/cpumask.h&gt;
 #include &lt;linux/cpu.h&gt;
 #include &lt;linux/err.h&gt;
<span class="p_header">diff --git a/arch/mips/math-emu/dsemul.c b/arch/mips/math-emu/dsemul.c</span>
<span class="p_header">index c4469ff4a996..6664908514b3 100644</span>
<span class="p_header">--- a/arch/mips/math-emu/dsemul.c</span>
<span class="p_header">+++ b/arch/mips/math-emu/dsemul.c</span>
<span class="p_chunk">@@ -1,5 +1,6 @@</span> <span class="p_context"></span>
 #include &lt;linux/err.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/branch.h&gt;
 #include &lt;asm/cacheflush.h&gt;
<span class="p_header">diff --git a/arch/mips/mm/ioremap.c b/arch/mips/mm/ioremap.c</span>
<span class="p_header">index 1f189627440f..1986e09fb457 100644</span>
<span class="p_header">--- a/arch/mips/mm/ioremap.c</span>
<span class="p_header">+++ b/arch/mips/mm/ioremap.c</span>
<span class="p_chunk">@@ -12,6 +12,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/sched.h&gt;
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/vmalloc.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/io.h&gt;
 #include &lt;asm/tlbflush.h&gt;
<span class="p_header">diff --git a/arch/mn10300/include/asm/mmu_context.h b/arch/mn10300/include/asm/mmu_context.h</span>
<span class="p_header">index 75dbe696f830..d2034f5e6eda 100644</span>
<span class="p_header">--- a/arch/mn10300/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/mn10300/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -23,6 +23,8 @@</span> <span class="p_context"></span>
 #define _ASM_MMU_CONTEXT_H
 
 #include &lt;linux/atomic.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/pgalloc.h&gt;
 #include &lt;asm/tlbflush.h&gt;
 #include &lt;asm-generic/mm_hooks.h&gt;
<span class="p_header">diff --git a/arch/mn10300/kernel/smp.c b/arch/mn10300/kernel/smp.c</span>
<span class="p_header">index d3559925e6a0..bdc1fea0a017 100644</span>
<span class="p_header">--- a/arch/mn10300/kernel/smp.c</span>
<span class="p_header">+++ b/arch/mn10300/kernel/smp.c</span>
<span class="p_chunk">@@ -21,7 +21,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/err.h&gt;
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/delay.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/sched/task.h&gt;
 #include &lt;linux/profile.h&gt;
 #include &lt;linux/smp.h&gt;
<span class="p_header">diff --git a/arch/mn10300/mm/tlb-smp.c b/arch/mn10300/mm/tlb-smp.c</span>
<span class="p_header">index 9a39ea9031d4..085f2bb691ac 100644</span>
<span class="p_header">--- a/arch/mn10300/mm/tlb-smp.c</span>
<span class="p_header">+++ b/arch/mn10300/mm/tlb-smp.c</span>
<span class="p_chunk">@@ -20,7 +20,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/err.h&gt;
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/delay.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/profile.h&gt;
 #include &lt;linux/smp.h&gt;
 #include &lt;asm/tlbflush.h&gt;
<span class="p_header">diff --git a/arch/nios2/include/asm/mmu_context.h b/arch/nios2/include/asm/mmu_context.h</span>
<span class="p_header">index 294b4b1f81d4..78ab3dacf579 100644</span>
<span class="p_header">--- a/arch/nios2/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/nios2/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -13,6 +13,8 @@</span> <span class="p_context"></span>
 #ifndef _ASM_NIOS2_MMU_CONTEXT_H
 #define _ASM_NIOS2_MMU_CONTEXT_H
 
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm-generic/mm_hooks.h&gt;
 
 extern void mmu_context_init(void);
<span class="p_header">diff --git a/arch/nios2/kernel/process.c b/arch/nios2/kernel/process.c</span>
<span class="p_header">index 869a4d59de32..509e7855e8dc 100644</span>
<span class="p_header">--- a/arch/nios2/kernel/process.c</span>
<span class="p_header">+++ b/arch/nios2/kernel/process.c</span>
<span class="p_chunk">@@ -17,6 +17,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/sched/debug.h&gt;
 #include &lt;linux/sched/task.h&gt;
 #include &lt;linux/sched/task_stack.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/tick.h&gt;
 #include &lt;linux/uaccess.h&gt;
 
<span class="p_header">diff --git a/arch/powerpc/kernel/io-workarounds.c b/arch/powerpc/kernel/io-workarounds.c</span>
<span class="p_header">index 5f8613ceb97f..a582e0d42525 100644</span>
<span class="p_header">--- a/arch/powerpc/kernel/io-workarounds.c</span>
<span class="p_header">+++ b/arch/powerpc/kernel/io-workarounds.c</span>
<span class="p_chunk">@@ -12,7 +12,7 @@</span> <span class="p_context"></span>
 #undef DEBUG
 
 #include &lt;linux/kernel.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;	/* for init_mm */</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;	/* for init_mm */</span>
 
 #include &lt;asm/io.h&gt;
 #include &lt;asm/machdep.h&gt;
<span class="p_header">diff --git a/arch/powerpc/kvm/e500_mmu_host.c b/arch/powerpc/kvm/e500_mmu_host.c</span>
<span class="p_header">index b0333cc737dd..0fda4230f6c0 100644</span>
<span class="p_header">--- a/arch/powerpc/kvm/e500_mmu_host.c</span>
<span class="p_header">+++ b/arch/powerpc/kvm/e500_mmu_host.c</span>
<span class="p_chunk">@@ -25,7 +25,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/highmem.h&gt;
 #include &lt;linux/log2.h&gt;
 #include &lt;linux/uaccess.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/rwsem.h&gt;
 #include &lt;linux/vmalloc.h&gt;
 #include &lt;linux/hugetlb.h&gt;
<span class="p_header">diff --git a/arch/powerpc/lib/feature-fixups.c b/arch/powerpc/lib/feature-fixups.c</span>
<span class="p_header">index 043415f0bdb1..f3917705c686 100644</span>
<span class="p_header">--- a/arch/powerpc/lib/feature-fixups.c</span>
<span class="p_header">+++ b/arch/powerpc/lib/feature-fixups.c</span>
<span class="p_chunk">@@ -17,6 +17,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/string.h&gt;
 #include &lt;linux/init.h&gt;
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;asm/cputable.h&gt;
 #include &lt;asm/code-patching.h&gt;
 #include &lt;asm/page.h&gt;
<span class="p_header">diff --git a/arch/powerpc/mm/hash_utils_64.c b/arch/powerpc/mm/hash_utils_64.c</span>
<span class="p_header">index 67e19a0821be..c38c9244ee04 100644</span>
<span class="p_header">--- a/arch/powerpc/mm/hash_utils_64.c</span>
<span class="p_header">+++ b/arch/powerpc/mm/hash_utils_64.c</span>
<span class="p_chunk">@@ -23,7 +23,7 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/spinlock.h&gt;
 #include &lt;linux/errno.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/proc_fs.h&gt;
 #include &lt;linux/stat.h&gt;
 #include &lt;linux/sysctl.h&gt;
<span class="p_header">diff --git a/arch/powerpc/mm/pgtable-book3s64.c b/arch/powerpc/mm/pgtable-book3s64.c</span>
<span class="p_header">index 653ff6c74ebe..7f5be97b33fb 100644</span>
<span class="p_header">--- a/arch/powerpc/mm/pgtable-book3s64.c</span>
<span class="p_header">+++ b/arch/powerpc/mm/pgtable-book3s64.c</span>
<span class="p_chunk">@@ -8,6 +8,8 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/pgalloc.h&gt;
 #include &lt;asm/tlb.h&gt;
 
<span class="p_header">diff --git a/arch/powerpc/mm/pgtable-hash64.c b/arch/powerpc/mm/pgtable-hash64.c</span>
<span class="p_header">index c23e286a6b8f..8b85a14b08ea 100644</span>
<span class="p_header">--- a/arch/powerpc/mm/pgtable-hash64.c</span>
<span class="p_header">+++ b/arch/powerpc/mm/pgtable-hash64.c</span>
<span class="p_chunk">@@ -10,6 +10,8 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/pgalloc.h&gt;
 #include &lt;asm/tlb.h&gt;
 
<span class="p_header">diff --git a/arch/powerpc/mm/pgtable-radix.c b/arch/powerpc/mm/pgtable-radix.c</span>
<span class="p_header">index cfa53ccc8baf..d593edc836a3 100644</span>
<span class="p_header">--- a/arch/powerpc/mm/pgtable-radix.c</span>
<span class="p_header">+++ b/arch/powerpc/mm/pgtable-radix.c</span>
<span class="p_chunk">@@ -8,7 +8,7 @@</span> <span class="p_context"></span>
  * as published by the Free Software Foundation; either version
  * 2 of the License, or (at your option) any later version.
  */
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/memblock.h&gt;
 #include &lt;linux/of_fdt.h&gt;
 
<span class="p_header">diff --git a/arch/powerpc/mm/slb.c b/arch/powerpc/mm/slb.c</span>
<span class="p_header">index 48fc28bab544..5e01b2ece1d0 100644</span>
<span class="p_header">--- a/arch/powerpc/mm/slb.c</span>
<span class="p_header">+++ b/arch/powerpc/mm/slb.c</span>
<span class="p_chunk">@@ -22,6 +22,8 @@</span> <span class="p_context"></span>
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/smp.h&gt;
 #include &lt;linux/compiler.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/udbg.h&gt;
 #include &lt;asm/code-patching.h&gt;
 
<span class="p_header">diff --git a/arch/s390/include/asm/elf.h b/arch/s390/include/asm/elf.h</span>
<span class="p_header">index f4381e1fb19e..82e2227a5ef7 100644</span>
<span class="p_header">--- a/arch/s390/include/asm/elf.h</span>
<span class="p_header">+++ b/arch/s390/include/asm/elf.h</span>
<span class="p_chunk">@@ -130,7 +130,7 @@</span> <span class="p_context"> typedef s390_fp_regs compat_elf_fpregset_t;</span>
 typedef s390_compat_regs compat_elf_gregset_t;
 
 #include &lt;linux/compat.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;	/* for task_struct */</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;	/* for task_struct */</span>
 #include &lt;asm/mmu_context.h&gt;
 
 #include &lt;asm/vdso.h&gt;
<span class="p_header">diff --git a/arch/s390/include/asm/mmu_context.h b/arch/s390/include/asm/mmu_context.h</span>
<span class="p_header">index 67f7a991c929..dc94b730c1e1 100644</span>
<span class="p_header">--- a/arch/s390/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/s390/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -9,6 +9,7 @@</span> <span class="p_context"></span>
 
 #include &lt;asm/pgalloc.h&gt;
 #include &lt;linux/uaccess.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;asm/tlbflush.h&gt;
 #include &lt;asm/ctl_reg.h&gt;
 
<span class="p_header">diff --git a/arch/s390/kernel/processor.c b/arch/s390/kernel/processor.c</span>
<span class="p_header">index 9e60ef144d03..3333b16275b4 100644</span>
<span class="p_header">--- a/arch/s390/kernel/processor.c</span>
<span class="p_header">+++ b/arch/s390/kernel/processor.c</span>
<span class="p_chunk">@@ -10,6 +10,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/init.h&gt;
 #include &lt;linux/seq_file.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/delay.h&gt;
 #include &lt;linux/cpu.h&gt;
 #include &lt;asm/diag.h&gt;
<span class="p_header">diff --git a/arch/s390/kvm/gaccess.c b/arch/s390/kvm/gaccess.c</span>
<span class="p_header">index 4aa8a7e2a1da..4d469439471a 100644</span>
<span class="p_header">--- a/arch/s390/kvm/gaccess.c</span>
<span class="p_header">+++ b/arch/s390/kvm/gaccess.c</span>
<span class="p_chunk">@@ -6,7 +6,9 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/vmalloc.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/err.h&gt;
<span class="p_add">+</span>
 #include &lt;asm/pgtable.h&gt;
 #include &lt;asm/gmap.h&gt;
 #include &quot;kvm-s390.h&quot;
<span class="p_header">diff --git a/arch/s390/kvm/priv.c b/arch/s390/kvm/priv.c</span>
<span class="p_header">index e18435355c16..86412effc669 100644</span>
<span class="p_header">--- a/arch/s390/kvm/priv.c</span>
<span class="p_header">+++ b/arch/s390/kvm/priv.c</span>
<span class="p_chunk">@@ -15,6 +15,8 @@</span> <span class="p_context"></span>
 #include &lt;linux/gfp.h&gt;
 #include &lt;linux/errno.h&gt;
 #include &lt;linux/compat.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/asm-offsets.h&gt;
 #include &lt;asm/facility.h&gt;
 #include &lt;asm/current.h&gt;
<span class="p_header">diff --git a/arch/score/include/asm/mmu_context.h b/arch/score/include/asm/mmu_context.h</span>
<span class="p_header">index 2644577c96e8..073f95d350de 100644</span>
<span class="p_header">--- a/arch/score/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/score/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -3,7 +3,9 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/errno.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/slab.h&gt;
<span class="p_add">+</span>
 #include &lt;asm-generic/mm_hooks.h&gt;
 
 #include &lt;asm/cacheflush.h&gt;
<span class="p_header">diff --git a/arch/score/kernel/traps.c b/arch/score/kernel/traps.c</span>
<span class="p_header">index 7ba9d67ab0ef..1b74a0c3f25e 100644</span>
<span class="p_header">--- a/arch/score/kernel/traps.c</span>
<span class="p_header">+++ b/arch/score/kernel/traps.c</span>
<span class="p_chunk">@@ -26,6 +26,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/module.h&gt;
 #include &lt;linux/sched/signal.h&gt;
 #include &lt;linux/sched/debug.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/cacheflush.h&gt;
 #include &lt;asm/irq.h&gt;
<span class="p_header">diff --git a/arch/sh/include/asm/mmu_context.h b/arch/sh/include/asm/mmu_context.h</span>
<span class="p_header">index 35ffdd081d26..eb6ac3c10c44 100644</span>
<span class="p_header">--- a/arch/sh/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/sh/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -11,6 +11,8 @@</span> <span class="p_context"></span>
 #include &lt;cpu/mmu_context.h&gt;
 #include &lt;asm/tlbflush.h&gt;
 #include &lt;linux/uaccess.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/io.h&gt;
 #include &lt;asm-generic/mm_hooks.h&gt;
 
<span class="p_header">diff --git a/arch/sparc/include/asm/mmu_context_64.h b/arch/sparc/include/asm/mmu_context_64.h</span>
<span class="p_header">index d0317993e947..22fede6eba11 100644</span>
<span class="p_header">--- a/arch/sparc/include/asm/mmu_context_64.h</span>
<span class="p_header">+++ b/arch/sparc/include/asm/mmu_context_64.h</span>
<span class="p_chunk">@@ -6,6 +6,8 @@</span> <span class="p_context"></span>
 #ifndef __ASSEMBLY__
 
 #include &lt;linux/spinlock.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/spitfire.h&gt;
 #include &lt;asm-generic/mm_hooks.h&gt;
 
<span class="p_header">diff --git a/arch/sparc/include/asm/pgtable_64.h b/arch/sparc/include/asm/pgtable_64.h</span>
<span class="p_header">index 314b66851348..5d01cbf2e076 100644</span>
<span class="p_header">--- a/arch/sparc/include/asm/pgtable_64.h</span>
<span class="p_header">+++ b/arch/sparc/include/asm/pgtable_64.h</span>
<span class="p_chunk">@@ -873,6 +873,9 @@</span> <span class="p_context"> static inline unsigned long pud_pfn(pud_t pud)</span>
 #define pte_offset_map			pte_index
 #define pte_unmap(pte)			do { } while (0)
 
<span class="p_add">+/* We cannot include &lt;linux/mm_types.h&gt; at this point yet: */</span>
<span class="p_add">+extern struct mm_struct init_mm;</span>
<span class="p_add">+</span>
 /* Actual page table PTE updates.  */
 void tlb_batch_add(struct mm_struct *mm, unsigned long vaddr,
 		   pte_t *ptep, pte_t orig, int fullmm);
<span class="p_header">diff --git a/arch/sparc/kernel/asm-offsets.c b/arch/sparc/kernel/asm-offsets.c</span>
<span class="p_header">index f76389a32342..3f09e1c83f58 100644</span>
<span class="p_header">--- a/arch/sparc/kernel/asm-offsets.c</span>
<span class="p_header">+++ b/arch/sparc/kernel/asm-offsets.c</span>
<span class="p_chunk">@@ -11,6 +11,7 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 // #include &lt;linux/mm.h&gt;
 #include &lt;linux/kbuild.h&gt;
 
<span class="p_header">diff --git a/arch/sparc/kernel/traps_32.c b/arch/sparc/kernel/traps_32.c</span>
<span class="p_header">index 304d2c9babb5..bd32d51c8955 100644</span>
<span class="p_header">--- a/arch/sparc/kernel/traps_32.c</span>
<span class="p_header">+++ b/arch/sparc/kernel/traps_32.c</span>
<span class="p_chunk">@@ -11,6 +11,7 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/sched.h&gt;  /* for jiffies */
 #include &lt;linux/sched/debug.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/signal.h&gt;
 #include &lt;linux/smp.h&gt;
<span class="p_header">diff --git a/arch/sparc/mm/tsb.c b/arch/sparc/mm/tsb.c</span>
<span class="p_header">index e20fbbafb0b0..a78017f97191 100644</span>
<span class="p_header">--- a/arch/sparc/mm/tsb.c</span>
<span class="p_header">+++ b/arch/sparc/mm/tsb.c</span>
<span class="p_chunk">@@ -6,6 +6,8 @@</span> <span class="p_context"></span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/preempt.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/page.h&gt;
 #include &lt;asm/pgtable.h&gt;
 #include &lt;asm/mmu_context.h&gt;
<span class="p_header">diff --git a/arch/tile/include/asm/mmu_context.h b/arch/tile/include/asm/mmu_context.h</span>
<span class="p_header">index f67753db1f78..45a4b4c424cf 100644</span>
<span class="p_header">--- a/arch/tile/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/tile/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -16,6 +16,8 @@</span> <span class="p_context"></span>
 #define _ASM_TILE_MMU_CONTEXT_H
 
 #include &lt;linux/smp.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/setup.h&gt;
 #include &lt;asm/page.h&gt;
 #include &lt;asm/pgalloc.h&gt;
<span class="p_header">diff --git a/arch/um/include/asm/mmu_context.h b/arch/um/include/asm/mmu_context.h</span>
<span class="p_header">index 1a60e1328e2f..94ac2739918c 100644</span>
<span class="p_header">--- a/arch/um/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/um/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -7,6 +7,8 @@</span> <span class="p_context"></span>
 #define __UM_MMU_CONTEXT_H
 
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/mmu.h&gt;
 
 extern void uml_setup_stubs(struct mm_struct *mm);
<span class="p_header">diff --git a/arch/um/kernel/exec.c b/arch/um/kernel/exec.c</span>
<span class="p_header">index 31968677a0d0..a43d42bf0a86 100644</span>
<span class="p_header">--- a/arch/um/kernel/exec.c</span>
<span class="p_header">+++ b/arch/um/kernel/exec.c</span>
<span class="p_chunk">@@ -7,7 +7,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/module.h&gt;
 #include &lt;linux/fs.h&gt;
 #include &lt;linux/ptrace.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/sched/task.h&gt;
 #include &lt;linux/sched/task_stack.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_header">diff --git a/arch/um/kernel/reboot.c b/arch/um/kernel/reboot.c</span>
<span class="p_header">index 0bc921cee0b1..71f3e9217cf2 100644</span>
<span class="p_header">--- a/arch/um/kernel/reboot.c</span>
<span class="p_header">+++ b/arch/um/kernel/reboot.c</span>
<span class="p_chunk">@@ -5,6 +5,7 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/sched/signal.h&gt;
 #include &lt;linux/sched/task.h&gt;
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/spinlock.h&gt;
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/oom.h&gt;
<span class="p_header">diff --git a/arch/um/kernel/skas/process.c b/arch/um/kernel/skas/process.c</span>
<span class="p_header">index ddecf326dab2..3a952a4f7965 100644</span>
<span class="p_header">--- a/arch/um/kernel/skas/process.c</span>
<span class="p_header">+++ b/arch/um/kernel/skas/process.c</span>
<span class="p_chunk">@@ -4,8 +4,9 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/init.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/sched/task_stack.h&gt;
<span class="p_add">+</span>
 #include &lt;as-layout.h&gt;
 #include &lt;kern.h&gt;
 #include &lt;os.h&gt;
<span class="p_header">diff --git a/arch/x86/entry/vsyscall/vsyscall_64.c b/arch/x86/entry/vsyscall/vsyscall_64.c</span>
<span class="p_header">index df91fb393a01..ce1d7534fa53 100644</span>
<span class="p_header">--- a/arch/x86/entry/vsyscall/vsyscall_64.c</span>
<span class="p_header">+++ b/arch/x86/entry/vsyscall/vsyscall_64.c</span>
<span class="p_chunk">@@ -28,6 +28,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/timer.h&gt;
 #include &lt;linux/sched/signal.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/syscalls.h&gt;
 #include &lt;linux/ratelimit.h&gt;
 
<span class="p_header">diff --git a/arch/x86/events/core.c b/arch/x86/events/core.c</span>
<span class="p_header">index 2ecc0e97772b..349d4d17aa7f 100644</span>
<span class="p_header">--- a/arch/x86/events/core.c</span>
<span class="p_header">+++ b/arch/x86/events/core.c</span>
<span class="p_chunk">@@ -20,7 +20,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/export.h&gt;
 #include &lt;linux/init.h&gt;
 #include &lt;linux/kdebug.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/sched/clock.h&gt;
 #include &lt;linux/uaccess.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_header">diff --git a/arch/x86/include/asm/a.out-core.h b/arch/x86/include/asm/a.out-core.h</span>
<span class="p_header">index 7a15588e45d4..7d3ece8bfb61 100644</span>
<span class="p_header">--- a/arch/x86/include/asm/a.out-core.h</span>
<span class="p_header">+++ b/arch/x86/include/asm/a.out-core.h</span>
<span class="p_chunk">@@ -17,6 +17,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/user.h&gt;
 #include &lt;linux/elfcore.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/debugreg.h&gt;
 
 /*
<span class="p_header">diff --git a/arch/x86/include/asm/mpx.h b/arch/x86/include/asm/mpx.h</span>
<span class="p_header">index 0b416d4cf73b..a0d662be4c5b 100644</span>
<span class="p_header">--- a/arch/x86/include/asm/mpx.h</span>
<span class="p_header">+++ b/arch/x86/include/asm/mpx.h</span>
<span class="p_chunk">@@ -2,6 +2,8 @@</span> <span class="p_context"></span>
 #define _ASM_X86_MPX_H
 
 #include &lt;linux/types.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &lt;asm/ptrace.h&gt;
 #include &lt;asm/insn.h&gt;
 
<span class="p_header">diff --git a/arch/x86/mm/mpx.c b/arch/x86/mm/mpx.c</span>
<span class="p_header">index af59f808742f..86c2d961b5f1 100644</span>
<span class="p_header">--- a/arch/x86/mm/mpx.c</span>
<span class="p_header">+++ b/arch/x86/mm/mpx.c</span>
<span class="p_chunk">@@ -7,6 +7,7 @@</span> <span class="p_context"></span>
  */
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/syscalls.h&gt;
 #include &lt;linux/sched/sysctl.h&gt;
 
<span class="p_header">diff --git a/arch/x86/um/syscalls_64.c b/arch/x86/um/syscalls_64.c</span>
<span class="p_header">index e6552275320b..10d907098c26 100644</span>
<span class="p_header">--- a/arch/x86/um/syscalls_64.c</span>
<span class="p_header">+++ b/arch/x86/um/syscalls_64.c</span>
<span class="p_chunk">@@ -6,6 +6,7 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/uaccess.h&gt;
 #include &lt;asm/prctl.h&gt; /* XXX This should get the constants from libc */
 #include &lt;os.h&gt;
<span class="p_header">diff --git a/arch/x86/xen/mmu.c b/arch/x86/xen/mmu.c</span>
<span class="p_header">index 7d5afdb417cc..e96809e1fc5c 100644</span>
<span class="p_header">--- a/arch/x86/xen/mmu.c</span>
<span class="p_header">+++ b/arch/x86/xen/mmu.c</span>
<span class="p_chunk">@@ -38,7 +38,7 @@</span> <span class="p_context"></span>
  *
  * Jeremy Fitzhardinge &lt;jeremy@xensource.com&gt;, XenSource Inc, 2007
  */
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/highmem.h&gt;
 #include &lt;linux/debugfs.h&gt;
 #include &lt;linux/bug.h&gt;
<span class="p_header">diff --git a/arch/xtensa/include/asm/mmu_context.h b/arch/xtensa/include/asm/mmu_context.h</span>
<span class="p_header">index 04c8ebdc4517..f7e186dfc4e4 100644</span>
<span class="p_header">--- a/arch/xtensa/include/asm/mmu_context.h</span>
<span class="p_header">+++ b/arch/xtensa/include/asm/mmu_context.h</span>
<span class="p_chunk">@@ -17,6 +17,7 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/stringify.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/vectors.h&gt;
 
<span class="p_header">diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c</span>
<span class="p_header">index d83de985e88c..6acc4313363e 100644</span>
<span class="p_header">--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c</span>
<span class="p_header">+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c</span>
<span class="p_chunk">@@ -23,6 +23,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/printk.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &quot;kfd_priv.h&quot;
 #include &quot;kfd_mqd_manager.h&quot;
 #include &quot;cik_regs.h&quot;
<span class="p_header">diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c</span>
<span class="p_header">index fa32c32fa1c2..a9b9882a9a77 100644</span>
<span class="p_header">--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c</span>
<span class="p_header">+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c</span>
<span class="p_chunk">@@ -23,6 +23,8 @@</span> <span class="p_context"></span>
 
 #include &lt;linux/printk.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+</span>
 #include &quot;kfd_priv.h&quot;
 #include &quot;kfd_mqd_manager.h&quot;
 #include &quot;vi_structs.h&quot;
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb3/iwch_provider.c b/drivers/infiniband/hw/cxgb3/iwch_provider.c</span>
<span class="p_header">index 6262dc035f3c..8ac91901b9cb 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb3/iwch_provider.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb3/iwch_provider.c</span>
<span class="p_chunk">@@ -37,7 +37,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/delay.h&gt;
 #include &lt;linux/errno.h&gt;
 #include &lt;linux/list.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/spinlock.h&gt;
 #include &lt;linux/ethtool.h&gt;
 #include &lt;linux/rtnetlink.h&gt;
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/iw_cxgb4.h b/drivers/infiniband/hw/cxgb4/iw_cxgb4.h</span>
<span class="p_header">index d19662f635b1..5846c47c8d55 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/iw_cxgb4.h</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/iw_cxgb4.h</span>
<span class="p_chunk">@@ -37,7 +37,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/idr.h&gt;
 #include &lt;linux/completion.h&gt;
 #include &lt;linux/netdevice.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/pci.h&gt;
 #include &lt;linux/dma-mapping.h&gt;
 #include &lt;linux/inet.h&gt;
<span class="p_header">diff --git a/drivers/media/v4l2-core/videobuf-dma-sg.c b/drivers/media/v4l2-core/videobuf-dma-sg.c</span>
<span class="p_header">index ba63ca57ed7e..7bb08a741fee 100644</span>
<span class="p_header">--- a/drivers/media/v4l2-core/videobuf-dma-sg.c</span>
<span class="p_header">+++ b/drivers/media/v4l2-core/videobuf-dma-sg.c</span>
<span class="p_chunk">@@ -21,7 +21,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/init.h&gt;
 #include &lt;linux/module.h&gt;
 #include &lt;linux/moduleparam.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/interrupt.h&gt;
 
<span class="p_header">diff --git a/fs/binfmt_misc.c b/fs/binfmt_misc.c</span>
<span class="p_header">index 9b4688ab1d8e..bee1a36bc2ec 100644</span>
<span class="p_header">--- a/fs/binfmt_misc.c</span>
<span class="p_header">+++ b/fs/binfmt_misc.c</span>
<span class="p_chunk">@@ -12,7 +12,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/module.h&gt;
 #include &lt;linux/init.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/magic.h&gt;
 #include &lt;linux/binfmts.h&gt;
 #include &lt;linux/slab.h&gt;
<span class="p_header">diff --git a/fs/kernfs/file.c b/fs/kernfs/file.c</span>
<span class="p_header">index 78219d5644e9..fe4f9107b1cb 100644</span>
<span class="p_header">--- a/fs/kernfs/file.c</span>
<span class="p_header">+++ b/fs/kernfs/file.c</span>
<span class="p_chunk">@@ -13,7 +13,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/poll.h&gt;
 #include &lt;linux/pagemap.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/fsnotify.h&gt;
 
 #include &quot;kernfs-internal.h&quot;
<span class="p_header">diff --git a/include/drm/drm_mm.h b/include/drm/drm_mm.h</span>
<span class="p_header">index 0b8371795aeb..cbcf138c9d44 100644</span>
<span class="p_header">--- a/include/drm/drm_mm.h</span>
<span class="p_header">+++ b/include/drm/drm_mm.h</span>
<span class="p_chunk">@@ -39,6 +39,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/bug.h&gt;
 #include &lt;linux/rbtree.h&gt;
 #include &lt;linux/kernel.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/list.h&gt;
 #include &lt;linux/spinlock.h&gt;
 #ifdef CONFIG_DEBUG_FS
<span class="p_header">diff --git a/include/linux/init_task.h b/include/linux/init_task.h</span>
<span class="p_header">index fda57da8731b..91d9049f0039 100644</span>
<span class="p_header">--- a/include/linux/init_task.h</span>
<span class="p_header">+++ b/include/linux/init_task.h</span>
<span class="p_chunk">@@ -15,6 +15,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/sched/autogroup.h&gt;
 #include &lt;net/net_namespace.h&gt;
 #include &lt;linux/sched/rt.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 
 #include &lt;asm/thread_info.h&gt;
 
<span class="p_header">diff --git a/include/linux/sched.h b/include/linux/sched.h</span>
<span class="p_header">index bcfda8a42d88..5324feb49a04 100644</span>
<span class="p_header">--- a/include/linux/sched.h</span>
<span class="p_header">+++ b/include/linux/sched.h</span>
<span class="p_chunk">@@ -6,7 +6,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/sched/prio.h&gt;
 
 #include &lt;linux/plist.h&gt;
<span class="p_del">-#include &lt;linux/mm_types.h&gt;</span>
<span class="p_add">+#include &lt;linux/mm_types_task.h&gt;</span>
 
 #include &lt;linux/sem.h&gt;
 #include &lt;linux/shm.h&gt;
<span class="p_header">diff --git a/include/linux/sched/mm.h b/include/linux/sched/mm.h</span>
<span class="p_header">index acbd122bb1ab..522a1aa070a3 100644</span>
<span class="p_header">--- a/include/linux/sched/mm.h</span>
<span class="p_header">+++ b/include/linux/sched/mm.h</span>
<span class="p_chunk">@@ -4,6 +4,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/atomic.h&gt;
 #include &lt;linux/sched.h&gt;
<span class="p_add">+#include &lt;linux/mm_types.h&gt;</span>
 #include &lt;linux/gfp.h&gt;
 
 /*
<span class="p_header">diff --git a/kernel/sched/debug.c b/kernel/sched/debug.c</span>
<span class="p_header">index 109adc0e9cb9..e865d8bfb881 100644</span>
<span class="p_header">--- a/kernel/sched/debug.c</span>
<span class="p_header">+++ b/kernel/sched/debug.c</span>
<span class="p_chunk">@@ -11,7 +11,7 @@</span> <span class="p_context"></span>
  */
 
 #include &lt;linux/proc_fs.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/seq_file.h&gt;
 #include &lt;linux/kallsyms.h&gt;
 #include &lt;linux/utsname.h&gt;
<span class="p_header">diff --git a/kernel/sched/fair.c b/kernel/sched/fair.c</span>
<span class="p_header">index fcd520db8e32..6ab887fbf0ef 100644</span>
<span class="p_header">--- a/kernel/sched/fair.c</span>
<span class="p_header">+++ b/kernel/sched/fair.c</span>
<span class="p_chunk">@@ -20,7 +20,7 @@</span> <span class="p_context"></span>
  *  Copyright (C) 2007 Red Hat, Inc., Peter Zijlstra
  */
 
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/sched/topology.h&gt;
 
 #include &lt;linux/latencytop.h&gt;
<span class="p_header">diff --git a/kernel/signal.c b/kernel/signal.c</span>
<span class="p_header">index dce87889527a..9701d4dc074e 100644</span>
<span class="p_header">--- a/kernel/signal.c</span>
<span class="p_header">+++ b/kernel/signal.c</span>
<span class="p_chunk">@@ -13,7 +13,7 @@</span> <span class="p_context"></span>
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/export.h&gt;
 #include &lt;linux/init.h&gt;
<span class="p_del">-#include &lt;linux/sched.h&gt;</span>
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 #include &lt;linux/sched/user.h&gt;
 #include &lt;linux/sched/debug.h&gt;
 #include &lt;linux/sched/task.h&gt;
<span class="p_header">diff --git a/lib/is_single_threaded.c b/lib/is_single_threaded.c</span>
<span class="p_header">index 9745cfffcb69..8d4678edcc0e 100644</span>
<span class="p_header">--- a/lib/is_single_threaded.c</span>
<span class="p_header">+++ b/lib/is_single_threaded.c</span>
<span class="p_chunk">@@ -10,6 +10,7 @@</span> <span class="p_context"></span>
  * 2 of the Licence, or (at your option) any later version.
  */
 #include &lt;linux/sched/signal.h&gt;
<span class="p_add">+#include &lt;linux/sched/mm.h&gt;</span>
 
 /*
  * Returns true if the task does not share -&gt;mm with another thread/process.

</pre>
</div>




  </div>
  <div id="footer">
   <a href="http://jk.ozlabs.org/projects/patchwork/">patchwork</a>
   patch tracking system
  </div>
 </body>
</html>



