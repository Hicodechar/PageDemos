
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>treewide: Use &#39;sizeof(x)&#39; instead of &#39;sizeof x&#39; - Patchwork</title>
  <link rel="stylesheet" type="text/css" href="/static/css/style.css"/>
  <script type="text/javascript" src="/static/js/common.js"></script>
  <script type="text/javascript" src="/static/js/jquery-1.10.1.min.js"></script>

 </head>
 <body>
  <div id="title">
  <h1 style="float: left;">
     <a
      href="/">Patchwork</a>
    treewide: Use &#39;sizeof(x)&#39; instead of &#39;sizeof x&#39;</h1>
  <div id="auth">

     <a href="/user/login/">login</a>
     <br/>
     <a href="/register/">register</a>
     <br/>
     <a href="/mail/">mail settings</a>

   </div>
   <div style="clear: both;"></div>
  </div>
  <div id="nav">
   <div id="navleft">
   
    <strong>Project</strong>: LKML
     :
     <a href="/project/LKML/list/"
      >patches</a>
     :
     <a href="/project/LKML/"
      >project info</a>
    
     :
     <a href="/"
     >other projects</a>
     
    
   </div>
   <div id="navright">
    <a href="/help/about/">about</a>
   </div>
   <div style="clear: both"></div>
  </div>

  <div id="content">

<script language="JavaScript" type="text/javascript">
function toggle_headers(link_id, headers_id)
{
    var link = document.getElementById(link_id)
    var headers = document.getElementById(headers_id)

    var hidden = headers.style['display'] == 'none';

    if (hidden) {
        link.innerHTML = 'hide';
        headers.style['display'] = 'block';
    } else {
        link.innerHTML = 'show';
        headers.style['display'] = 'none';
    }

}
</script>

<table class="patchmeta">
 <tr>
  <th>Submitter</th>
  <td><a href="/project/LKML/list/?submitter=35552">Ingo Molnar</a></td>
 </tr>
 <tr>
  <th>Date</th>
  <td>Feb. 2, 2016, 11:28 a.m.</td>
 </tr>
 <tr>
  <th>Message ID</th>
  <td>&lt;20160202112841.GA14524@gmail.com&gt;</td>
 </tr>
 <tr>
  <th>Download</th>
  <td>
   <a href="/patch/8189071/mbox/"
   >mbox</a>
|
   <a href="/patch/8189071/raw/"
   >patch</a>

   </td>
 </tr>
 <tr>
  <th>Permalink</th>
  <td><a href="/patch/8189071/">/patch/8189071/</a>
 </tr>
  <tr>
   <th>State</th>
   <td>New</td>
  </tr>


 <tr>
  <th>Headers</th>
  <td><a id="togglepatchheaders"
   href="javascript:toggle_headers('togglepatchheaders', 'patchheaders')"
   >show</a>
   <div id="patchheaders" class="patchheaders" style="display:none;">
    <pre>Return-Path: &lt;linux-kernel-owner@kernel.org&gt;
X-Original-To: patchwork-LKML@patchwork.kernel.org
Delivered-To: patchwork-parsemail@patchwork1.web.kernel.org
Received: from mail.kernel.org (mail.kernel.org [198.145.29.136])
	by patchwork1.web.kernel.org (Postfix) with ESMTP id CB6D09F1C1
	for &lt;patchwork-LKML@patchwork.kernel.org&gt;;
	Tue,  2 Feb 2016 11:29:21 +0000 (UTC)
Received: from mail.kernel.org (localhost [127.0.0.1])
	by mail.kernel.org (Postfix) with ESMTP id 08CF120251
	for &lt;patchwork-LKML@patchwork.kernel.org&gt;;
	Tue,  2 Feb 2016 11:29:20 +0000 (UTC)
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.kernel.org (Postfix) with ESMTP id BC12320259
	for &lt;patchwork-LKML@patchwork.kernel.org&gt;;
	Tue,  2 Feb 2016 11:29:18 +0000 (UTC)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1754771AbcBBL3L (ORCPT
	&lt;rfc822;patchwork-LKML@patchwork.kernel.org&gt;);
	Tue, 2 Feb 2016 06:29:11 -0500
Received: from mail-wm0-f68.google.com ([74.125.82.68]:36708 &quot;EHLO
	mail-wm0-f68.google.com&quot; rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1754279AbcBBL2t (ORCPT
	&lt;rfc822;linux-kernel@vger.kernel.org&gt;);
	Tue, 2 Feb 2016 06:28:49 -0500
Received: by mail-wm0-f68.google.com with SMTP id 128so1940665wmz.3
	for &lt;linux-kernel@vger.kernel.org&gt;;
	Tue, 02 Feb 2016 03:28:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=gmail.com; s=20120113;
	h=sender:date:from:to:cc:subject:message-id:references:mime-version
	:content-type:content-disposition:in-reply-to:user-agent;
	bh=zuEtUvzbGhIfteE74NSg1PIcueExR+tsXivLepECUxo=;
	b=bGepR6xkDkoT0j60qJlyERr9s5DrSD+rwbJyBwYpgSwlyF4Dm54+1uTQAKnhL/qlAG
	l9ATwSWu9f9HRXjP/nc7IG9i9E7Y2mPQ9LvJRBF+wjKNhsgMFoOV9kYCZGearnUuEK0G
	cPOLI94l9NTJSp3QJXIhbsV1x6U9VAuGnlt7zXLT06x40LSHfoXYZ/yxO7hzWd6Z7mxU
	TE1AAVESFsaAQ/MboUR5DnivJ1qmNe5L1cqqIiAsRgiPFtq4I7VwW6rtQa1kJM3E9pfJ
	9yMp5o90qx8FsK9Be0dZCx077PekD1k174rgO2CBm59TpVVKsffycV7hJUhSUP8yS7u/
	mz+g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=1e100.net; s=20130820;
	h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
	:references:mime-version:content-type:content-disposition
	:in-reply-to:user-agent;
	bh=zuEtUvzbGhIfteE74NSg1PIcueExR+tsXivLepECUxo=;
	b=ClEYh2pPx6haYZbknQ8FkTeCfylOwtBOApClz/zazyLOkuijp20hgBBDf0dPl3bLj/
	os3HN84KRUXamUeL01vmh2FxRhORCKKIXQQ++R9rQg2Syvu5dFpC5ivNxzOPnptdEhpd
	C4DXo9pSZq6KChFWQdtQHHux4sxCsiTuzNGVmgEFP1SOkfOQdB/iMCbACQ9/qRWrFbkw
	Ac6Xm7DTy1ZjofaGwkIpe6j1lsTHCQEtW/eqLfucU9Ftl3Lt09h/6MogymWNXEC0SjgT
	skZVOYAd+3qQW862CsRQbJUnWS4HkrvvuFb3pbNucrkKZBp6XX3xVcILDxYwijGi5IRn
	nhkQ==
X-Gm-Message-State: AG10YOSrTFA/H8oVb/Ye6ofRYPOL6AmhsSAjOtsvy1vMMHgUkilZvkJy7aoMpUV81s2GXg==
X-Received: by 10.28.210.143 with SMTP id j137mr16985011wmg.13.1454412526550;
	Tue, 02 Feb 2016 03:28:46 -0800 (PST)
Received: from gmail.com (54033495.catv.pool.telekom.hu. [84.3.52.149])
	by smtp.gmail.com with ESMTPSA id
	uo9sm985572wjc.49.2016.02.02.03.28.43
	(version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
	Tue, 02 Feb 2016 03:28:44 -0800 (PST)
Date: Tue, 2 Feb 2016 12:28:41 +0100
From: Ingo Molnar &lt;mingo@kernel.org&gt;
To: Wei Tang &lt;tangwei@cmss.chinamobile.com&gt;
Cc: akpm@linux-foundation.org, peterz@infradead.org, tj@kernel.org,
	kirill.shutemov@linux.intel.com, jason.low2@hp.com,
	xypron.glpk@gmx.de, oleg@redhat.com, koct9i@gmail.com,
	josh@joshtriplett.org, ebiederm@xmission.com, cyphar@cyphar.com,
	linux-kernel@vger.kernel.org,
	Linus Torvalds &lt;torvalds@linux-foundation.org&gt;,
	Thomas Gleixner &lt;tglx@linutronix.de&gt;,
	Peter Zijlstra &lt;a.p.zijlstra@chello.nl&gt;
Subject: [PATCH] treewide: Use &#39;sizeof(x)&#39; instead of &#39;sizeof x&#39;
Message-ID: &lt;20160202112841.GA14524@gmail.com&gt;
References: &lt;1454399594-14307-1-git-send-email-tangwei@cmss.chinamobile.com&gt;
	&lt;20160202091118.GB30393@gmail.com&gt;
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: &lt;20160202091118.GB30393@gmail.com&gt;
User-Agent: Mutt/1.5.23 (2014-03-12)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: &lt;linux-kernel.vger.kernel.org&gt;
X-Mailing-List: linux-kernel@vger.kernel.org
X-Virus-Scanned: ClamAV using ClamSMTP
</pre>
   </div>
  </td>
 </tr>
</table>

<div class="patchforms">





 <div style="clear: both;">
 </div>
</div>



<h2>Comments</h2>

<div class="comment">
<div class="meta"><a href="/project/LKML/list/?submitter=35552">Ingo Molnar</a> - Feb. 2, 2016, 11:28 a.m.</div>
<pre class="content">
* Ingo Molnar &lt;mingo@kernel.org&gt; wrote:
<span class="quote">
&gt; If anyone feels strongly about accepting such patches, then the right solution </span>
<span class="quote">&gt; is to create a Coccinelle semantic patch to run over the whole kernel and get </span>
<span class="quote">&gt; over with the churn once and for all.</span>

So applying a semantic patch like this to all .c files:

  @@ expression E; @@
  -sizeof E
  +sizeof(E)
  @@ expression E2; @@
  -sizeof((E2))
  +sizeof(E2)

Produces the single patch below for the whole kernel - instead of generating a 
churn of 1,000+ patches ...

Since it&#39;s Coccinelle that generated the patch we can be reasonably sure that it&#39;s 
an identity transformation - or if it fails, it&#39;s a visible failure.

Thanks,

	Ingo
<span class="signed-off-by">
Signed-off-by: Ingo Molnar &lt;mingo@kernel.org&gt;</span>
---
 arch/alpha/kernel/setup.c                          |   4 +-
 arch/alpha/oprofile/common.c                       |   2 +-
 arch/arm/common/mcpm_entry.c                       |   2 +-
 arch/arm/mach-davinci/board-dm644x-evm.c           |   2 +-
 arch/arm/mach-ixp4xx/common.c                      |   2 +-
 arch/arm/mach-pxa/devices.c                        |   2 +-
 arch/arm/mach-u300/dummyspichip.c                  |   2 +-
 arch/cris/arch-v10/kernel/traps.c                  |   2 +-
 arch/cris/arch-v32/mach-a3/pinmux.c                |  12 +-
 arch/cris/arch-v32/mach-fs/pinmux.c                |  12 +-
 arch/cris/arch-v32/mm/intmem.c                     |   6 +-
 arch/cris/boot/tools/build.c                       |   8 +-
 arch/ia64/kernel/mca_drv.c                         |   2 +-
 arch/m68k/bvme6000/rtc.c                           |   2 +-
 arch/m68k/mvme16x/rtc.c                            |   2 +-
 arch/mips/boot/elf2ecoff.c                         |  29 ++-
 arch/mips/kernel/module.c                          |   2 +-
 arch/mips/oprofile/common.c                        |   2 +-
 arch/mips/sgi-ip22/ip22-gio.c                      |   2 +-
 arch/parisc/kernel/cache.c                         |   2 +-
 arch/parisc/kernel/process.c                       |   2 +-
 arch/parisc/math-emu/driver.c                      |   4 +-
 arch/powerpc/crypto/sha1.c                         |   2 +-
 arch/powerpc/kernel/kgdb.c                         |   6 +-
 arch/powerpc/oprofile/common.c                     |   2 +-
 arch/powerpc/platforms/52xx/mpc52xx_gpt.c          |   2 +-
 arch/powerpc/platforms/cell/spufs/context.c        |   2 +-
 arch/powerpc/platforms/cell/spufs/file.c           |  22 +-
 arch/powerpc/platforms/cell/spufs/gang.c           |   2 +-
 arch/s390/crypto/sha_common.c                      |   2 +-
 arch/sparc/lib/bitext.c                            |   2 +-
 arch/tile/kernel/backtrace.c                       |   6 +-
 arch/um/kernel/um_arch.c                           |   2 +-
 arch/x86/boot/cpucheck.c                           |   2 +-
 arch/x86/boot/early_serial_console.c               |   4 +-
 arch/x86/boot/edd.c                                |   6 +-
 arch/x86/boot/main.c                               |   4 +-
 arch/x86/boot/memory.c                             |   2 +-
 arch/x86/boot/regs.c                               |   2 +-
 arch/x86/boot/video-vesa.c                         |   6 +-
 arch/x86/boot/video.c                              |   2 +-
 arch/x86/kernel/cpu/common.c                       |   4 +-
 arch/x86/kernel/cpu/mcheck/mce.c                   |   2 +-
 arch/x86/kernel/cpu/mtrr/generic.c                 |   2 +-
 arch/x86/kernel/cpu/mtrr/if.c                      |   8 +-
 arch/x86/kernel/e820.c                             |   2 +-
 arch/x86/kernel/head64.c                           |   2 +-
 arch/x86/kernel/msr.c                              |   8 +-
 arch/x86/kvm/assigned-dev.c                        |  14 +-
 arch/x86/kvm/emulate.c                             |  22 +-
 arch/x86/kvm/lapic.c                               |   2 +-
 arch/x86/kvm/x86.c                                 |  46 ++--
 arch/x86/tools/relocs.c                            |   4 +-
 drivers/acpi/acpi_video.c                          |   2 +-
 drivers/ata/sata_promise.c                         |   2 +-
 drivers/atm/iphase.c                               |   2 +-
 drivers/atm/lanai.c                                |   2 +-
 drivers/base/isa.c                                 |   2 +-
 drivers/base/power/sysfs.c                         |  16 +-
 drivers/base/regmap/regcache-lzo.c                 |   2 +-
 drivers/base/regmap/regcache-rbtree.c              |   2 +-
 drivers/block/aoe/aoeblk.c                         |   4 +-
 drivers/block/aoe/aoechr.c                         |   4 +-
 drivers/block/aoe/aoecmd.c                         |  26 +--
 drivers/block/aoe/aoedev.c                         |   6 +-
 drivers/block/cciss.c                              |   2 +-
 drivers/char/genrtc.c                              |   2 +-
 drivers/char/rtc.c                                 |   2 +-
 drivers/crypto/nx/nx-aes-xcbc.c                    |   2 +-
 drivers/crypto/nx/nx-sha256.c                      |   2 +-
 drivers/crypto/nx/nx-sha512.c                      |   2 +-
 drivers/firewire/nosy.c                            |   6 +-
 drivers/gpu/drm/amd/amdgpu/amdgpu_display.c        |   2 +-
 drivers/gpu/drm/drm_atomic.c                       |  12 +-
 drivers/gpu/drm/i915/intel_display.c               |   4 +-
 drivers/gpu/drm/radeon/radeon_display.c            |   2 +-
 drivers/i2c/i2c-core.c                             |   2 +-
 drivers/iio/industrialio-trigger.c                 |   4 +-
 drivers/infiniband/core/addr.c                     |   4 +-
 drivers/infiniband/core/agent.c                    |   2 +-
 drivers/infiniband/core/cache.c                    |  12 +-
 drivers/infiniband/core/cm.c                       |  32 +--
 drivers/infiniband/core/cma.c                      |  78 +++----
 drivers/infiniband/core/device.c                   |   8 +-
 drivers/infiniband/core/fmr_pool.c                 |   8 +-
 drivers/infiniband/core/mad.c                      |  38 +--
 drivers/infiniband/core/mad_rmpp.c                 |   2 +-
 drivers/infiniband/core/multicast.c                |  16 +-
 drivers/infiniband/core/netlink.c                  |   2 +-
 drivers/infiniband/core/sa_query.c                 |  12 +-
 drivers/infiniband/core/sysfs.c                    |   6 +-
 drivers/infiniband/core/ucm.c                      |   8 +-
 drivers/infiniband/core/ucma.c                     |  18 +-
 drivers/infiniband/core/ud_header.c                |   8 +-
 drivers/infiniband/core/umem.c                     |   2 +-
 drivers/infiniband/core/user_mad.c                 |  16 +-
 drivers/infiniband/core/uverbs_cmd.c               | 260 ++++++++++-----------
 drivers/infiniband/core/uverbs_main.c              |  10 +-
 drivers/infiniband/core/uverbs_marshall.c          |  10 +-
 drivers/infiniband/core/verbs.c                    |   4 +-
 drivers/infiniband/hw/cxgb3/cxio_hal.c             |   4 +-
 drivers/infiniband/hw/cxgb3/iwch_cm.c              |   2 +-
 drivers/infiniband/hw/cxgb3/iwch_provider.c        |  26 +--
 drivers/infiniband/hw/cxgb4/cm.c                   |  14 +-
 drivers/infiniband/hw/cxgb4/cq.c                   |  10 +-
 drivers/infiniband/hw/cxgb4/device.c               |  10 +-
 drivers/infiniband/hw/cxgb4/mem.c                  |   4 +-
 drivers/infiniband/hw/cxgb4/provider.c             |   4 +-
 drivers/infiniband/hw/cxgb4/qp.c                   |  64 ++---
 drivers/infiniband/hw/cxgb4/resource.c             |  16 +-
 drivers/infiniband/hw/mlx4/ah.c                    |   4 +-
 drivers/infiniband/hw/mlx4/alias_GUID.c            |  11 +-
 drivers/infiniband/hw/mlx4/cq.c                    |  14 +-
 drivers/infiniband/hw/mlx4/doorbell.c              |   2 +-
 drivers/infiniband/hw/mlx4/mad.c                   |  30 +--
 drivers/infiniband/hw/mlx4/main.c                  |  36 +--
 drivers/infiniband/hw/mlx4/mcg.c                   |  30 +--
 drivers/infiniband/hw/mlx4/mr.c                    |   2 +-
 drivers/infiniband/hw/mlx4/qp.c                    |  40 ++--
 drivers/infiniband/hw/mlx4/srq.c                   |   6 +-
 drivers/infiniband/hw/mlx4/sysfs.c                 |   8 +-
 drivers/infiniband/hw/mthca/mthca_allocator.c      |   8 +-
 drivers/infiniband/hw/mthca/mthca_av.c             |   6 +-
 drivers/infiniband/hw/mthca/mthca_cmd.c            |   2 +-
 drivers/infiniband/hw/mthca/mthca_cq.c             |   2 +-
 drivers/infiniband/hw/mthca/mthca_eq.c             |   6 +-
 drivers/infiniband/hw/mthca/mthca_mad.c            |   6 +-
 drivers/infiniband/hw/mthca/mthca_main.c           |   4 +-
 drivers/infiniband/hw/mthca/mthca_mcg.c            |   2 +-
 drivers/infiniband/hw/mthca/mthca_memfree.c        |  12 +-
 drivers/infiniband/hw/mthca/mthca_mr.c             |  12 +-
 drivers/infiniband/hw/mthca/mthca_profile.c        |   2 +-
 drivers/infiniband/hw/mthca/mthca_provider.c       |  70 +++---
 drivers/infiniband/hw/mthca/mthca_qp.c             |   8 +-
 drivers/infiniband/hw/mthca/mthca_srq.c            |   6 +-
 drivers/infiniband/hw/nes/nes_cm.c                 |   2 +-
 drivers/infiniband/hw/nes/nes_hw.c                 |   2 +-
 drivers/infiniband/hw/nes/nes_mgt.c                |   4 +-
 drivers/infiniband/hw/nes/nes_verbs.c              |  12 +-
 drivers/infiniband/hw/ocrdma/ocrdma_stats.c        |   2 +-
 drivers/infiniband/hw/ocrdma/ocrdma_verbs.c        |   2 +-
 drivers/infiniband/ulp/ipoib/ipoib_cm.c            |  22 +-
 drivers/infiniband/ulp/ipoib/ipoib_fs.c            |  10 +-
 drivers/infiniband/ulp/ipoib/ipoib_ib.c            |   4 +-
 drivers/infiniband/ulp/ipoib/ipoib_main.c          |  16 +-
 drivers/infiniband/ulp/ipoib/ipoib_multicast.c     |   6 +-
 drivers/infiniband/ulp/ipoib/ipoib_verbs.c         |   2 +-
 drivers/infiniband/ulp/ipoib/ipoib_vlan.c          |   2 +-
 drivers/infiniband/ulp/iser/iser_verbs.c           |   6 +-
 drivers/infiniband/ulp/srp/ib_srp.c                |  30 +--
 drivers/infiniband/ulp/srpt/ib_srpt.c              |  42 ++--
 drivers/input/keyboard/lm8323.c                    |   2 +-
 drivers/input/misc/dm355evm_keys.c                 |   2 +-
 drivers/input/touchscreen/ad7877.c                 |   6 +-
 drivers/input/touchscreen/ads7846.c                |   4 +-
 drivers/isdn/gigaset/bas-gigaset.c                 |   2 +-
 drivers/isdn/gigaset/capi.c                        |   2 +-
 drivers/isdn/gigaset/common.c                      |   6 +-
 drivers/isdn/gigaset/ev-layer.c                    |   2 +-
 drivers/isdn/gigaset/i4l.c                         |  12 +-
 drivers/isdn/gigaset/interface.c                   |   8 +-
 drivers/isdn/i4l/isdn_tty.c                        |   2 +-
 drivers/md/dm-bufio.c                              |   4 +-
 drivers/md/dm-kcopyd.c                             |   2 +-
 drivers/media/dvb-core/dvb_net.c                   |   4 +-
 drivers/media/i2c/tvp5150.c                        |   2 +-
 drivers/media/pci/ngene/ngene-dvb.c                |   2 +-
 drivers/media/pci/saa7134/saa7134-video.c          |   4 +-
 drivers/media/pci/ttpci/av7110_ir.c                |   8 +-
 drivers/media/pci/ttpci/av7110_v4l.c               |   4 +-
 drivers/media/platform/m2m-deinterlace.c           |   2 +-
 drivers/media/platform/mx2_emmaprp.c               |   2 +-
 drivers/media/rc/ir-rc6-decoder.c                  |   4 +-
 drivers/media/usb/gspca/etoms.c                    |  16 +-
 drivers/media/usb/gspca/gspca.c                    |  22 +-
 drivers/media/usb/gspca/jeilinj.c                  |   2 +-
 drivers/media/usb/gspca/mars.c                     |   2 +-
 drivers/media/usb/gspca/mr97310a.c                 |   6 +-
 drivers/media/usb/gspca/ov519.c                    |   2 +-
 drivers/media/usb/gspca/pac207.c                   |   4 +-
 drivers/media/usb/gspca/pac7302.c                  |   6 +-
 drivers/media/usb/gspca/pac7311.c                  |   4 +-
 drivers/media/usb/gspca/sn9c2028.c                 |   6 +-
 drivers/media/usb/gspca/sonixj.c                   |  14 +-
 drivers/media/usb/gspca/sq930x.c                   |   2 +-
 drivers/media/usb/gspca/t613.c                     |  72 +++---
 drivers/media/usb/gspca/topro.c                    |  10 +-
 drivers/media/usb/gspca/zc3xx.c                    |   2 +-
 drivers/media/usb/uvc/uvc_ctrl.c                   |   6 +-
 drivers/media/usb/uvc/uvc_driver.c                 |  52 ++---
 drivers/media/usb/uvc/uvc_v4l2.c                   |  12 +-
 drivers/media/usb/uvc/uvc_video.c                  |   2 +-
 drivers/media/v4l2-core/v4l2-mem2mem.c             |   4 +-
 drivers/media/v4l2-core/videobuf2-dma-contig.c     |   6 +-
 drivers/media/v4l2-core/videobuf2-dma-sg.c         |   4 +-
 drivers/mfd/t7l66xb.c                              |   2 +-
 drivers/mfd/tc6393xb.c                             |   2 +-
 drivers/mfd/tps65010.c                             |  16 +-
 drivers/misc/apds990x.c                            |   2 +-
 drivers/misc/bh1770glc.c                           |   2 +-
 drivers/misc/eeprom/at25.c                         |   2 +-
 drivers/misc/ibmasm/r_heartbeat.c                  |   4 +-
 drivers/mtd/devices/m25p80.c                       |   2 +-
 drivers/mtd/devices/mtd_dataflash.c                |   6 +-
 drivers/net/ethernet/marvell/skge.c                |   2 +-
 drivers/net/ethernet/mellanox/mlx4/alloc.c         |   4 +-
 drivers/net/ethernet/mellanox/mlx4/cmd.c           |   2 +-
 drivers/net/ethernet/mellanox/mlx4/en_resources.c  |   4 +-
 drivers/net/ethernet/mellanox/mlx4/en_rx.c         |   2 +-
 drivers/net/ethernet/mellanox/mlx4/en_tx.c         |   2 +-
 drivers/net/ethernet/mellanox/mlx4/eq.c            |  18 +-
 drivers/net/ethernet/mellanox/mlx4/icm.c           |   2 +-
 drivers/net/ethernet/mellanox/mlx4/intf.c          |   2 +-
 drivers/net/ethernet/mellanox/mlx4/main.c          |   4 +-
 drivers/net/ethernet/mellanox/mlx4/mcg.c           |  12 +-
 drivers/net/ethernet/mellanox/mlx4/mr.c            |   6 +-
 drivers/net/ethernet/mellanox/mlx4/qp.c            |   4 +-
 .../net/ethernet/mellanox/mlx4/resource_tracker.c  |  24 +-
 drivers/net/usb/mcs7830.c                          |   4 +-
 drivers/net/usb/net1080.c                          |  14 +-
 drivers/net/usb/pegasus.c                          |   2 +-
 drivers/net/usb/rndis_host.c                       |  42 ++--
 drivers/net/usb/sierra_net.c                       |   4 +-
 drivers/net/usb/usbnet.c                           |  12 +-
 drivers/net/usb/zaurus.c                           |   6 +-
 drivers/net/virtio_net.c                           |   2 +-
 drivers/net/wan/sbni.c                             |   6 +-
 drivers/net/wireless/marvell/mwifiex/scan.c        |   3 +-
 drivers/net/wireless/rndis_wlan.c                  |   6 +-
 drivers/oprofile/oprofile_perf.c                   |   2 +-
 drivers/parport/parport_serial.c                   |   2 +-
 drivers/parport/probe.c                            |   2 +-
 drivers/pcmcia/bfin_cf_pcmcia.c                    |   2 +-
 drivers/pcmcia/omap_cf.c                           |   2 +-
 drivers/rapidio/rio.c                              |   2 +-
 drivers/s390/crypto/zcrypt_api.c                   |   4 +-
 drivers/scsi/aha152x.c                             |   2 +-
 drivers/scsi/lpfc/lpfc_init.c                      |   8 +-
 drivers/scsi/ultrastor.c                           |   2 +-
 drivers/scsi/virtio_scsi.c                         |   2 +-
 drivers/scsi/vmw_pvscsi.c                          |   4 +-
 drivers/spi/spi-lm70llp.c                          |   2 +-
 drivers/spi/spi-mpc512x-psc.c                      |   4 +-
 drivers/spi/spi-mpc52xx-psc.c                      |   4 +-
 drivers/spi/spi-mpc52xx.c                          |   2 +-
 drivers/spi/spi-omap-uwire.c                       |   2 +-
 drivers/spi/spi-omap2-mcspi.c                      |   4 +-
 drivers/spi/spi-ppc4xx.c                           |   4 +-
 drivers/staging/most/hdm-dim2/dim2_hdm.c           |   4 +-
 drivers/staging/rdma/ehca/ehca_qp.c                |   2 +-
 drivers/staging/rdma/ehca/ehca_uverbs.c            |   2 +-
 drivers/staging/rdma/ipath/ipath_driver.c          |   4 +-
 drivers/staging/rdma/ipath/ipath_eeprom.c          |  12 +-
 drivers/staging/rdma/ipath/ipath_file_ops.c        |   4 +-
 drivers/staging/rdma/ipath/ipath_fs.c              |   8 +-
 drivers/staging/rdma/ipath/ipath_iba6110.c         |   6 +-
 drivers/staging/rdma/ipath/ipath_init_chip.c       |   2 +-
 drivers/staging/rdma/ipath/ipath_intr.c            |  10 +-
 drivers/staging/rdma/ipath/ipath_mmap.c            |   2 +-
 drivers/staging/rdma/ipath/ipath_mr.c              |  10 +-
 drivers/staging/rdma/ipath/ipath_rc.c              |   4 +-
 drivers/staging/rdma/ipath/ipath_ruc.c             |   4 +-
 drivers/staging/rdma/ipath/ipath_stats.c           |   8 +-
 drivers/staging/rdma/ipath/ipath_sysfs.c           |   4 +-
 drivers/staging/rdma/ipath/ipath_uc.c              |   2 +-
 drivers/staging/rdma/ipath/ipath_ud.c              |   2 +-
 drivers/staging/rdma/ipath/ipath_verbs.c           |  10 +-
 drivers/staging/rdma/ipath/ipath_verbs_mcast.c     |   4 +-
 drivers/target/target_core_spc.c                   |   2 +-
 drivers/tty/pty.c                                  |   4 +-
 drivers/tty/serial/8250/8250_of.c                  |   2 +-
 drivers/tty/serial/crisv10.c                       |   6 +-
 drivers/tty/vt/vt_ioctl.c                          |   4 +-
 drivers/usb/class/cdc-acm.c                        |   6 +-
 drivers/usb/core/hcd.c                             |  12 +-
 drivers/usb/core/hub.c                             |  12 +-
 drivers/usb/core/sysfs.c                           |   4 +-
 drivers/usb/core/usb.c                             |   4 +-
 drivers/usb/gadget/composite.c                     |   7 +-
 drivers/usb/gadget/function/f_acm.c                |   4 +-
 drivers/usb/gadget/function/f_ecm.c                |  20 +-
 drivers/usb/gadget/function/f_eem.c                |   4 +-
 drivers/usb/gadget/function/f_fs.c                 |  10 +-
 drivers/usb/gadget/function/f_hid.c                |   4 +-
 drivers/usb/gadget/function/f_loopback.c           |   2 +-
 drivers/usb/gadget/function/f_mass_storage.c       |   2 +-
 drivers/usb/gadget/function/f_ncm.c                |  22 +-
 drivers/usb/gadget/function/f_phonet.c             |  12 +-
 drivers/usb/gadget/function/f_rndis.c              |  16 +-
 drivers/usb/gadget/function/f_serial.c             |   2 +-
 drivers/usb/gadget/function/f_subset.c             |  10 +-
 drivers/usb/gadget/function/f_uac1.c               |   2 +-
 drivers/usb/gadget/function/f_uac2.c               |  50 ++--
 drivers/usb/gadget/function/rndis.c                |   4 +-
 drivers/usb/gadget/function/storage_common.c       |   2 +-
 drivers/usb/gadget/function/u_ether.c              |   2 +-
 drivers/usb/gadget/legacy/acm_ms.c                 |   2 +-
 drivers/usb/gadget/legacy/audio.c                  |   2 +-
 drivers/usb/gadget/legacy/cdc2.c                   |   2 +-
 drivers/usb/gadget/legacy/dbgp.c                   |   8 +-
 drivers/usb/gadget/legacy/ether.c                  |   2 +-
 drivers/usb/gadget/legacy/g_ffs.c                  |   2 +-
 drivers/usb/gadget/legacy/hid.c                    |   2 +-
 drivers/usb/gadget/legacy/inode.c                  |  18 +-
 drivers/usb/gadget/legacy/mass_storage.c           |   2 +-
 drivers/usb/gadget/legacy/multi.c                  |   2 +-
 drivers/usb/gadget/legacy/ncm.c                    |   2 +-
 drivers/usb/gadget/legacy/printer.c                |   2 +-
 drivers/usb/gadget/legacy/zero.c                   |   2 +-
 drivers/usb/gadget/udc/dummy_hcd.c                 |   6 +-
 drivers/usb/gadget/udc/fsl_udc_core.c              |   2 +-
 drivers/usb/gadget/udc/goku_udc.c                  |   4 +-
 drivers/usb/gadget/udc/mv_u3d_core.c               |   2 +-
 drivers/usb/gadget/udc/mv_udc_core.c               |   2 +-
 drivers/usb/gadget/udc/omap_udc.c                  |   6 +-
 drivers/usb/gadget/udc/pch_udc.c                   |  12 +-
 drivers/usb/gadget/udc/pxa25x_udc.c                |   2 +-
 drivers/usb/gadget/udc/pxa27x_udc.c                |   4 +-
 drivers/usb/host/ehci-dbg.c                        |  16 +-
 drivers/usb/host/ehci-mem.c                        |   8 +-
 drivers/usb/host/ehci-sched.c                      |   8 +-
 drivers/usb/host/isp116x-hcd.c                     |   2 +-
 drivers/usb/host/isp1362-hcd.c                     |   2 +-
 drivers/usb/host/ohci-dbg.c                        |   2 +-
 drivers/usb/host/ohci-hcd.c                        |   2 +-
 drivers/usb/host/ohci-mem.c                        |   4 +-
 drivers/usb/host/oxu210hp-hcd.c                    |  12 +-
 drivers/usb/host/sl811-hcd.c                       |   2 +-
 drivers/usb/host/xhci-mem.c                        |   6 +-
 drivers/usb/musb/cppi_dma.c                        |   2 +-
 drivers/usb/musb/musb_gadget.c                     |   4 +-
 drivers/usb/musb/musb_gadget_ep0.c                 |   2 +-
 drivers/usb/musb/musb_host.c                       |   2 +-
 drivers/usb/phy/phy-isp1301-omap.c                 |   4 +-
 drivers/usb/renesas_usbhs/mod_gadget.c             |   2 +-
 drivers/usb/serial/pl2303.c                        |   4 +-
 drivers/usb/storage/sddr55.c                       |  10 +-
 drivers/vhost/net.c                                |  16 +-
 drivers/vhost/scsi.c                               |  10 +-
 drivers/vhost/test.c                               |   8 +-
 drivers/vhost/vhost.c                              |  62 ++---
 drivers/video/console/sticore.c                    |   4 +-
 drivers/video/fbdev/carminefb.c                    |   4 +-
 drivers/video/fbdev/omap2/omapfb/omapfb-main.c     |   2 +-
 drivers/video/fbdev/tmiofb.c                       |   2 +-
 drivers/virtio/virtio_balloon.c                    |   2 +-
 drivers/virtio/virtio_mmio.c                       |  24 +-
 drivers/virtio/virtio_pci_common.c                 |  16 +-
 drivers/virtio/virtio_pci_modern.c                 |  24 +-
 fs/autofs4/expire.c                                |   2 +-
 fs/autofs4/waitq.c                                 |   2 +-
 fs/binfmt_elf.c                                    |   4 +-
 fs/char_dev.c                                      |   2 +-
 fs/cifs/connect.c                                  |   2 +-
 fs/compat.c                                        |   6 +-
 fs/hpfs/namei.c                                    |   8 +-
 fs/isofs/inode.c                                   |   4 +-
 fs/proc/task_mmu.c                                 |   2 +-
 fs/pstore/inode.c                                  |   2 +-
 fs/statfs.c                                        |   2 +-
 fs/xfs/uuid.c                                      |   2 +-
 init/initramfs.c                                   |   2 +-
 ipc/compat_mq.c                                    |   4 +-
 kernel/fork.c                                      |   2 +-
 kernel/power/suspend_test.c                        |   2 +-
 kernel/ptrace.c                                    |   4 +-
 kernel/signal.c                                    |   2 +-
 kernel/sys.c                                       |   2 +-
 kernel/time/posix-cpu-timers.c                     |   8 +-
 lib/mpi/mpi-pow.c                                  |   2 +-
 lib/mpi/mpih-mul.c                                 |   4 +-
 lib/mpi/mpiutil.c                                  |   2 +-
 net/9p/trans_rdma.c                                |   6 +-
 net/atm/br2684.c                                   |   6 +-
 net/atm/pppoatm.c                                  |   2 +-
 net/compat.c                                       |   2 +-
 net/core/scm.c                                     |   2 +-
 net/openvswitch/flow_table.c                       |   2 +-
 net/rds/ib_rdma.c                                  |   2 +-
 net/rds/iw.c                                       |   2 +-
 net/rds/iw_rdma.c                                  |   2 +-
 net/sunrpc/xprtrdma/svc_rdma_sendto.c              |   4 +-
 net/sunrpc/xprtrdma/svc_rdma_transport.c           |   8 +-
 security/keys/encrypted-keys/encrypted.c           |  20 +-
 security/keys/trusted.c                            |  20 +-
 security/selinux/hooks.c                           |   4 +-
 security/selinux/ss/conditional.c                  |   4 +-
 security/selinux/ss/ebitmap.c                      |   2 +-
 security/selinux/ss/policydb.c                     |  15 +-
 sound/core/sound.c                                 |   2 +-
 sound/soc/codecs/tlv320aic26.c                     |   2 +-
 sound/soc/codecs/wm8983.c                          |   4 +-
 sound/soc/codecs/wm8985.c                          |   4 +-
 sound/soc/fsl/mpc5200_dma.c                        |   8 +-
 sound/soc/soc-core.c                               |   6 +-
 sound/spi/at73c213.c                               |   2 +-
 tools/firewire/nosy-dump.c                         |  12 +-
 tools/power/cpupower/utils/helpers/msr.c           |   4 +-
 tools/power/x86/turbostat/turbostat.c              |   4 +-
 .../x86_energy_perf_policy.c                       |  12 +-
 tools/spi/spidev_fdx.c                             |  10 +-
 tools/testing/selftests/vm/thuge-gen.c             |   4 +-
 tools/usb/testusb.c                                |  14 +-
 tools/virtio/ringtest/main.c                       |   8 +-
 tools/virtio/ringtest/ring.c                       |  10 +-
 tools/virtio/ringtest/virtio_ring_0_9.c            |   4 +-
 tools/virtio/virtio_test.c                         |  12 +-
 usr/gen_init_cpio.c                                |   2 +-
 408 files changed, 1613 insertions(+), 1618 deletions(-)
</pre>
</div>

<div class="comment">
<div class="meta"><a href="/project/LKML/list/?submitter=325">Joe Perches</a> - Feb. 2, 2016, 1:58 p.m.</div>
<pre class="content">
On Tue, 2016-02-02 at 12:28 +0100, Ingo Molnar wrote:
<span class="quote">&gt; * Ingo Molnar &lt;mingo@kernel.org&gt; wrote:</span>
<span class="quote">&gt; </span>
<span class="quote">&gt; &gt; If anyone feels strongly about accepting such patches, then the right solution </span>
<span class="quote">&gt; &gt; is to create a Coccinelle semantic patch to run over the whole kernel and get </span>
<span class="quote">&gt; &gt; over with the churn once and for all.</span>
<span class="quote">&gt; </span>
<span class="quote">&gt; So applying a semantic patch like this to all .c files:</span>
<span class="quote">&gt; </span>
<span class="quote">&gt;   @@ expression E; @@</span>
<span class="quote">&gt;   -sizeof E</span>
<span class="quote">&gt;   +sizeof(E)</span>
<span class="quote">&gt;   @@ expression E2; @@</span>
<span class="quote">&gt;   -sizeof((E2))</span>
<span class="quote">&gt;   +sizeof(E2)</span>
<span class="quote">&gt; </span>
<span class="quote">&gt; Produces the single patch below for the whole kernel - instead of generating a </span>
<span class="quote">&gt; churn of 1,000+ patches ...</span>

If this isn&#39;t a joke, a nicer way to submit this is
by subsystem and not as a single huge patch.

This allows subsystem maintainers to reduce patch
contention as this patch already doesn&#39;t apply
to -next.
</pre>
</div>



<h2>Patch</h2>
<div class="patch">
<pre class="content">
<span class="p_header">diff --git a/arch/alpha/kernel/setup.c b/arch/alpha/kernel/setup.c</span>
<span class="p_header">index b20af76f12c1..4b69ebf30bc2 100644</span>
<span class="p_header">--- a/arch/alpha/kernel/setup.c</span>
<span class="p_header">+++ b/arch/alpha/kernel/setup.c</span>
<span class="p_chunk">@@ -559,9 +559,9 @@</span> <span class="p_context"> setup_arch(char **cmdline_p)</span>
 	   boot flags depending on the boot mode, we need some shorthand.
 	   This should do for installation.  */
 	if (strcmp(COMMAND_LINE, &quot;INSTALL&quot;) == 0) {
<span class="p_del">-		strlcpy(command_line, &quot;root=/dev/fd0 load_ramdisk=1&quot;, sizeof command_line);</span>
<span class="p_add">+		strlcpy(command_line, &quot;root=/dev/fd0 load_ramdisk=1&quot;, sizeof(command_line));</span>
 	} else {
<span class="p_del">-		strlcpy(command_line, COMMAND_LINE, sizeof command_line);</span>
<span class="p_add">+		strlcpy(command_line, COMMAND_LINE, sizeof(command_line));</span>
 	}
 	strcpy(boot_command_line, command_line);
 	*cmdline_p = command_line;
<span class="p_header">diff --git a/arch/alpha/oprofile/common.c b/arch/alpha/oprofile/common.c</span>
<span class="p_header">index 310a4ce1dccc..6ea17fc12255 100644</span>
<span class="p_header">--- a/arch/alpha/oprofile/common.c</span>
<span class="p_header">+++ b/arch/alpha/oprofile/common.c</span>
<span class="p_chunk">@@ -114,7 +114,7 @@</span> <span class="p_context"> op_axp_create_files(struct dentry *root)</span>
 		struct dentry *dir;
 		char buf[4];
 
<span class="p_del">-		snprintf(buf, sizeof buf, &quot;%d&quot;, i);</span>
<span class="p_add">+		snprintf(buf, sizeof(buf), &quot;%d&quot;, i);</span>
 		dir = oprofilefs_mkdir(root, buf);
 
 		oprofilefs_create_ulong(dir, &quot;enabled&quot;, &amp;ctr[i].enabled);
<span class="p_header">diff --git a/arch/arm/common/mcpm_entry.c b/arch/arm/common/mcpm_entry.c</span>
<span class="p_header">index a923524d1040..5b05511204d5 100644</span>
<span class="p_header">--- a/arch/arm/common/mcpm_entry.c</span>
<span class="p_header">+++ b/arch/arm/common/mcpm_entry.c</span>
<span class="p_chunk">@@ -426,7 +426,7 @@</span> <span class="p_context"> int __init mcpm_sync_init(</span>
 {
 	unsigned int i, j, mpidr, this_cluster;
 
<span class="p_del">-	BUILD_BUG_ON(MCPM_SYNC_CLUSTER_SIZE * MAX_NR_CLUSTERS != sizeof mcpm_sync);</span>
<span class="p_add">+	BUILD_BUG_ON(MCPM_SYNC_CLUSTER_SIZE * MAX_NR_CLUSTERS != sizeof(mcpm_sync));</span>
 	BUG_ON((unsigned long)&amp;mcpm_sync &amp; (__CACHE_WRITEBACK_GRANULE - 1));
 
 	/*
<span class="p_header">diff --git a/arch/arm/mach-davinci/board-dm644x-evm.c b/arch/arm/mach-davinci/board-dm644x-evm.c</span>
<span class="p_header">index 7a20507a3eef..68fd04841cdd 100644</span>
<span class="p_header">--- a/arch/arm/mach-davinci/board-dm644x-evm.c</span>
<span class="p_header">+++ b/arch/arm/mach-davinci/board-dm644x-evm.c</span>
<span class="p_chunk">@@ -314,7 +314,7 @@</span> <span class="p_context"> evm_led_setup(struct i2c_client *client, int gpio, unsigned ngpio, void *c)</span>
 	 */
 	evm_led_dev = platform_device_alloc(&quot;leds-gpio&quot;, 0);
 	platform_device_add_data(evm_led_dev,
<span class="p_del">-			&amp;evm_led_data, sizeof evm_led_data);</span>
<span class="p_add">+			&amp;evm_led_data, sizeof(evm_led_data));</span>
 
 	evm_led_dev-&gt;dev.parent = &amp;client-&gt;dev;
 	status = platform_device_add(evm_led_dev);
<span class="p_header">diff --git a/arch/arm/mach-ixp4xx/common.c b/arch/arm/mach-ixp4xx/common.c</span>
<span class="p_header">index 1cb6f2f02880..7434525d1a2a 100644</span>
<span class="p_header">--- a/arch/arm/mach-ixp4xx/common.c</span>
<span class="p_header">+++ b/arch/arm/mach-ixp4xx/common.c</span>
<span class="p_chunk">@@ -348,7 +348,7 @@</span> <span class="p_context"> static struct pxa2xx_udc_mach_info ixp4xx_udc_info;</span>
 
 void __init ixp4xx_set_udc_info(struct pxa2xx_udc_mach_info *info)
 {
<span class="p_del">-	memcpy(&amp;ixp4xx_udc_info, info, sizeof *info);</span>
<span class="p_add">+	memcpy(&amp;ixp4xx_udc_info, info, sizeof(*info));</span>
 }
 
 static struct resource ixp4xx_udc_resources[] = {
<span class="p_header">diff --git a/arch/arm/mach-pxa/devices.c b/arch/arm/mach-pxa/devices.c</span>
<span class="p_header">index 37d8d85662f0..2d390b52f98c 100644</span>
<span class="p_header">--- a/arch/arm/mach-pxa/devices.c</span>
<span class="p_header">+++ b/arch/arm/mach-pxa/devices.c</span>
<span class="p_chunk">@@ -95,7 +95,7 @@</span> <span class="p_context"> static struct pxa2xx_udc_mach_info pxa_udc_info = {</span>
 
 void __init pxa_set_udc_info(struct pxa2xx_udc_mach_info *info)
 {
<span class="p_del">-	memcpy(&amp;pxa_udc_info, info, sizeof *info);</span>
<span class="p_add">+	memcpy(&amp;pxa_udc_info, info, sizeof(*info));</span>
 }
 
 static struct resource pxa2xx_udc_resources[] = {
<span class="p_header">diff --git a/arch/arm/mach-u300/dummyspichip.c b/arch/arm/mach-u300/dummyspichip.c</span>
<span class="p_header">index 68fe986ca42e..4e23239c21e7 100644</span>
<span class="p_header">--- a/arch/arm/mach-u300/dummyspichip.c</span>
<span class="p_header">+++ b/arch/arm/mach-u300/dummyspichip.c</span>
<span class="p_chunk">@@ -222,7 +222,7 @@</span> <span class="p_context"> static int pl022_dummy_probe(struct spi_device *spi)</span>
 
 	dev_info(&amp;spi-&gt;dev, &quot;probing dummy SPI device\n&quot;);
 
<span class="p_del">-	p_dummy = kzalloc(sizeof *p_dummy, GFP_KERNEL);</span>
<span class="p_add">+	p_dummy = kzalloc(sizeof(*p_dummy), GFP_KERNEL);</span>
 	if (!p_dummy)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/arch/cris/arch-v10/kernel/traps.c b/arch/cris/arch-v10/kernel/traps.c</span>
<span class="p_header">index 7001beda716c..929e0d07e861 100644</span>
<span class="p_header">--- a/arch/cris/arch-v10/kernel/traps.c</span>
<span class="p_header">+++ b/arch/cris/arch-v10/kernel/traps.c</span>
<span class="p_chunk">@@ -119,7 +119,7 @@</span> <span class="p_context"> handle_BUG(struct pt_regs *regs)</span>
 	unsigned char c;
 	unsigned long irp = regs-&gt;irp;
 
<span class="p_del">-	if (__copy_from_user(&amp;f, (const void __user *)(irp - 8), sizeof f))</span>
<span class="p_add">+	if (__copy_from_user(&amp;f, (const void __user *)(irp - 8), sizeof(f)))</span>
 		return;
 	if (f.prefix != BUG_PREFIX || f.magic != BUG_MAGIC)
 		return;
<span class="p_header">diff --git a/arch/cris/arch-v32/mach-a3/pinmux.c b/arch/cris/arch-v32/mach-a3/pinmux.c</span>
<span class="p_header">index 591f77526746..5993aea23c68 100644</span>
<span class="p_header">--- a/arch/cris/arch-v32/mach-a3/pinmux.c</span>
<span class="p_header">+++ b/arch/cris/arch-v32/mach-a3/pinmux.c</span>
<span class="p_chunk">@@ -83,7 +83,7 @@</span> <span class="p_context"> int</span>
 crisv32_pinmux_alloc_fixed(enum fixed_function function)
 {
 	int ret = -EINVAL;
<span class="p_del">-	char saved[sizeof pins];</span>
<span class="p_add">+	char saved[sizeof(pins)];</span>
 	unsigned long flags;
 	reg_pinmux_rw_hwprot hwprot;
 	reg_clkgen_rw_clk_ctrl clk_ctrl;
<span class="p_chunk">@@ -91,7 +91,7 @@</span> <span class="p_context"> crisv32_pinmux_alloc_fixed(enum fixed_function function)</span>
 	spin_lock_irqsave(&amp;pinmux_lock, flags);
 
 	/* Save internal data for recovery */
<span class="p_del">-	memcpy(saved, pins, sizeof pins);</span>
<span class="p_add">+	memcpy(saved, pins, sizeof(pins));</span>
 
 	crisv32_pinmux_init(); /* must be done before we read rw_hwprot */
 
<span class="p_chunk">@@ -203,7 +203,7 @@</span> <span class="p_context"> crisv32_pinmux_alloc_fixed(enum fixed_function function)</span>
 		REG_WR(pinmux, regi_pinmux, rw_hwprot, hwprot);
 		REG_WR(clkgen, regi_clkgen, rw_clk_ctrl, clk_ctrl);
 	} else
<span class="p_del">-		memcpy(pins, saved, sizeof pins);</span>
<span class="p_add">+		memcpy(pins, saved, sizeof(pins));</span>
 
   spin_unlock_irqrestore(&amp;pinmux_lock, flags);
 
<span class="p_chunk">@@ -261,14 +261,14 @@</span> <span class="p_context"> int</span>
 crisv32_pinmux_dealloc_fixed(enum fixed_function function)
 {
 	int ret = -EINVAL;
<span class="p_del">-	char saved[sizeof pins];</span>
<span class="p_add">+	char saved[sizeof(pins)];</span>
 	unsigned long flags;
 	reg_pinmux_rw_hwprot hwprot;
 
 	spin_lock_irqsave(&amp;pinmux_lock, flags);
 
 	/* Save internal data for recovery */
<span class="p_del">-	memcpy(saved, pins, sizeof pins);</span>
<span class="p_add">+	memcpy(saved, pins, sizeof(pins));</span>
 
 	crisv32_pinmux_init(); /* must be done before we read rw_hwprot */
 
<span class="p_chunk">@@ -361,7 +361,7 @@</span> <span class="p_context"> crisv32_pinmux_dealloc_fixed(enum fixed_function function)</span>
 	if (!ret)
 		REG_WR(pinmux, regi_pinmux, rw_hwprot, hwprot);
 	else
<span class="p_del">-		memcpy(pins, saved, sizeof pins);</span>
<span class="p_add">+		memcpy(pins, saved, sizeof(pins));</span>
 
   spin_unlock_irqrestore(&amp;pinmux_lock, flags);
 
<span class="p_header">diff --git a/arch/cris/arch-v32/mach-fs/pinmux.c b/arch/cris/arch-v32/mach-fs/pinmux.c</span>
<span class="p_header">index d8a3a3c439dd..7ae63ec82e63 100644</span>
<span class="p_header">--- a/arch/cris/arch-v32/mach-fs/pinmux.c</span>
<span class="p_header">+++ b/arch/cris/arch-v32/mach-fs/pinmux.c</span>
<span class="p_chunk">@@ -93,14 +93,14 @@</span> <span class="p_context"> int crisv32_pinmux_alloc(int port, int first_pin, int last_pin,</span>
 int crisv32_pinmux_alloc_fixed(enum fixed_function function)
 {
 	int ret = -EINVAL;
<span class="p_del">-	char saved[sizeof pins];</span>
<span class="p_add">+	char saved[sizeof(pins)];</span>
 	unsigned long flags;
 	reg_pinmux_rw_hwprot hwprot;
 
 	spin_lock_irqsave(&amp;pinmux_lock, flags);
 
 	/* Save internal data for recovery */
<span class="p_del">-	memcpy(saved, pins, sizeof pins);</span>
<span class="p_add">+	memcpy(saved, pins, sizeof(pins));</span>
 
 	crisv32_pinmux_init();	/* Must be done before we read rw_hwprot */
 
<span class="p_chunk">@@ -168,7 +168,7 @@</span> <span class="p_context"> int crisv32_pinmux_alloc_fixed(enum fixed_function function)</span>
 	if (!ret)
 		REG_WR(pinmux, regi_pinmux, rw_hwprot, hwprot);
 	else
<span class="p_del">-		memcpy(pins, saved, sizeof pins);</span>
<span class="p_add">+		memcpy(pins, saved, sizeof(pins));</span>
 
 	spin_unlock_irqrestore(&amp;pinmux_lock, flags);
 
<span class="p_chunk">@@ -228,14 +228,14 @@</span> <span class="p_context"> int crisv32_pinmux_dealloc(int port, int first_pin, int last_pin)</span>
 int crisv32_pinmux_dealloc_fixed(enum fixed_function function)
 {
 	int ret = -EINVAL;
<span class="p_del">-	char saved[sizeof pins];</span>
<span class="p_add">+	char saved[sizeof(pins)];</span>
 	unsigned long flags;
 	reg_pinmux_rw_hwprot hwprot;
 
 	spin_lock_irqsave(&amp;pinmux_lock, flags);
 
 	/* Save internal data for recovery */
<span class="p_del">-	memcpy(saved, pins, sizeof pins);</span>
<span class="p_add">+	memcpy(saved, pins, sizeof(pins));</span>
 
 	crisv32_pinmux_init();	/* Must be done before we read rw_hwprot */
 
<span class="p_chunk">@@ -303,7 +303,7 @@</span> <span class="p_context"> int crisv32_pinmux_dealloc_fixed(enum fixed_function function)</span>
 	if (!ret)
 		REG_WR(pinmux, regi_pinmux, rw_hwprot, hwprot);
 	else
<span class="p_del">-		memcpy(pins, saved, sizeof pins);</span>
<span class="p_add">+		memcpy(pins, saved, sizeof(pins));</span>
 
 	spin_unlock_irqrestore(&amp;pinmux_lock, flags);
 
<span class="p_header">diff --git a/arch/cris/arch-v32/mm/intmem.c b/arch/cris/arch-v32/mm/intmem.c</span>
<span class="p_header">index 9ef56092a4c5..fc8c4b075eef 100644</span>
<span class="p_header">--- a/arch/cris/arch-v32/mm/intmem.c</span>
<span class="p_header">+++ b/arch/cris/arch-v32/mm/intmem.c</span>
<span class="p_chunk">@@ -34,7 +34,7 @@</span> <span class="p_context"> static void crisv32_intmem_init(void)</span>
 	static int initiated = 0;
 	if (!initiated) {
 		struct intmem_allocation* alloc;
<span class="p_del">-		alloc = kmalloc(sizeof *alloc, GFP_KERNEL);</span>
<span class="p_add">+		alloc = kmalloc(sizeof(*alloc), GFP_KERNEL);</span>
 		INIT_LIST_HEAD(&amp;intmem_allocations);
 		intmem_virtual = ioremap(MEM_INTMEM_START + RESERVED_SIZE,
 					 MEM_INTMEM_SIZE - RESERVED_SIZE);
<span class="p_chunk">@@ -63,7 +63,7 @@</span> <span class="p_context"> void* crisv32_intmem_alloc(unsigned size, unsigned align)</span>
 		    allocation-&gt;size &gt;= size + alignment) {
 			if (allocation-&gt;size &gt; size + alignment) {
 				struct intmem_allocation* alloc;
<span class="p_del">-				alloc = kmalloc(sizeof *alloc, GFP_ATOMIC);</span>
<span class="p_add">+				alloc = kmalloc(sizeof(*alloc), GFP_ATOMIC);</span>
 				alloc-&gt;status = STATUS_FREE;
 				alloc-&gt;size = allocation-&gt;size - size -
 					alignment;
<span class="p_chunk">@@ -73,7 +73,7 @@</span> <span class="p_context"> void* crisv32_intmem_alloc(unsigned size, unsigned align)</span>
 
 				if (alignment) {
 					struct intmem_allocation *tmp;
<span class="p_del">-					tmp = kmalloc(sizeof *tmp, GFP_ATOMIC);</span>
<span class="p_add">+					tmp = kmalloc(sizeof(*tmp), GFP_ATOMIC);</span>
 					tmp-&gt;offset = allocation-&gt;offset;
 					tmp-&gt;size = alignment;
 					tmp-&gt;status = STATUS_FREE;
<span class="p_header">diff --git a/arch/cris/boot/tools/build.c b/arch/cris/boot/tools/build.c</span>
<span class="p_header">index c8adef364160..af0b5dc2ee39 100644</span>
<span class="p_header">--- a/arch/cris/boot/tools/build.c</span>
<span class="p_header">+++ b/arch/cris/boot/tools/build.c</span>
<span class="p_chunk">@@ -141,7 +141,7 @@</span> <span class="p_context"> int main(int argc, char ** argv)</span>
 		minor_root = DEFAULT_MINOR_ROOT;
 	}
 	fprintf(stderr, &quot;Root device is (%d, %d)\n&quot;, major_root, minor_root);
<span class="p_del">-	for (i=0;i&lt;sizeof buf; i++) buf[i]=0;</span>
<span class="p_add">+	for (i=0;i&lt;sizeof(buf); i++) buf[i]=0;</span>
 	if ((id=open(argv[1],O_RDONLY,0))&lt;0)
 		die(&quot;Unable to open &#39;boot&#39;&quot;);
 	if (read(id,buf,MINIX_HEADER) != MINIX_HEADER)
<span class="p_chunk">@@ -158,7 +158,7 @@</span> <span class="p_context"> int main(int argc, char ** argv)</span>
 		die(&quot;Non-Minix header of &#39;boot&#39;&quot;);
 	if (((long *) buf)[7] != 0)
 		die(&quot;Illegal symbol table in &#39;boot&#39;&quot;);
<span class="p_del">-	i=read(id,buf,sizeof buf);</span>
<span class="p_add">+	i=read(id,buf,sizeof(buf));</span>
 	fprintf(stderr,&quot;Boot sector %d bytes.\n&quot;,i);
 	if (i != 512)
 		die(&quot;Boot block must be exactly 512 bytes&quot;);
<span class="p_chunk">@@ -187,7 +187,7 @@</span> <span class="p_context"> int main(int argc, char ** argv)</span>
 		die(&quot;Non-Minix header of &#39;setup&#39;&quot;);
 	if (((long *) buf)[7] != 0)
 		die(&quot;Illegal symbol table in &#39;setup&#39;&quot;);
<span class="p_del">-	for (i=0 ; (c=read(id,buf,sizeof buf))&gt;0 ; i+=c )</span>
<span class="p_add">+	for (i=0 ; (c=read(id,buf,sizeof(buf)))&gt;0 ; i+=c )</span>
 #ifdef __BIG_KERNEL__
 	{
 		if (!i) {
<span class="p_chunk">@@ -217,7 +217,7 @@</span> <span class="p_context"> int main(int argc, char ** argv)</span>
 	if (setup_sectors &lt; SETUP_SECTS)
 		setup_sectors = SETUP_SECTS;
 	fprintf(stderr,&quot;Setup is %d bytes.\n&quot;,i);
<span class="p_del">-	for (c=0 ; c&lt;sizeof(buf) ; c++)</span>
<span class="p_add">+	for (c=0 ; c&lt;sizeof(buf); c++)</span>
 		buf[c] = &#39;\0&#39;;
 	while (i &lt; setup_sectors * 512) {
 		c = setup_sectors * 512 - i;
<span class="p_header">diff --git a/arch/ia64/kernel/mca_drv.c b/arch/ia64/kernel/mca_drv.c</span>
<span class="p_header">index 94f8bf777afa..452130a4c9b4 100644</span>
<span class="p_header">--- a/arch/ia64/kernel/mca_drv.c</span>
<span class="p_header">+++ b/arch/ia64/kernel/mca_drv.c</span>
<span class="p_chunk">@@ -343,7 +343,7 @@</span> <span class="p_context"> init_record_index_pools(void)</span>
 
 	/* - 2 - */
 	sect_min_size = sal_log_sect_min_sizes[0];
<span class="p_del">-	for (i = 1; i &lt; sizeof sal_log_sect_min_sizes/sizeof(size_t); i++)</span>
<span class="p_add">+	for (i = 1; i &lt; sizeof(sal_log_sect_min_sizes)/sizeof(size_t); i++)</span>
 		if (sect_min_size &gt; sal_log_sect_min_sizes[i])
 			sect_min_size = sal_log_sect_min_sizes[i];
 
<span class="p_header">diff --git a/arch/m68k/bvme6000/rtc.c b/arch/m68k/bvme6000/rtc.c</span>
<span class="p_header">index cf12a17dc289..43a97e7f9afe 100644</span>
<span class="p_header">--- a/arch/m68k/bvme6000/rtc.c</span>
<span class="p_header">+++ b/arch/m68k/bvme6000/rtc.c</span>
<span class="p_chunk">@@ -64,7 +64,7 @@</span> <span class="p_context"> static long rtc_ioctl(struct file *file, unsigned int cmd, unsigned long arg)</span>
 		} while (wtime.tm_sec != bcd2bin(rtc-&gt;bcd_sec));
 		rtc-&gt;msr = msr;
 		local_irq_restore(flags);
<span class="p_del">-		return copy_to_user(argp, &amp;wtime, sizeof wtime) ?</span>
<span class="p_add">+		return copy_to_user(argp, &amp;wtime, sizeof(wtime)) ?</span>
 								-EFAULT : 0;
 	}
 	case RTC_SET_TIME:	/* Set the RTC */
<span class="p_header">diff --git a/arch/m68k/mvme16x/rtc.c b/arch/m68k/mvme16x/rtc.c</span>
<span class="p_header">index 1755e2f7137d..2e41e1684a1e 100644</span>
<span class="p_header">--- a/arch/m68k/mvme16x/rtc.c</span>
<span class="p_header">+++ b/arch/m68k/mvme16x/rtc.c</span>
<span class="p_chunk">@@ -59,7 +59,7 @@</span> <span class="p_context"> static long rtc_ioctl(struct file *file, unsigned int cmd, unsigned long arg)</span>
 		wtime.tm_wday = bcd2bin(rtc-&gt;bcd_dow)-1;
 		rtc-&gt;ctrl = 0;
 		local_irq_restore(flags);
<span class="p_del">-		return copy_to_user(argp, &amp;wtime, sizeof wtime) ?</span>
<span class="p_add">+		return copy_to_user(argp, &amp;wtime, sizeof(wtime)) ?</span>
 								-EFAULT : 0;
 	}
 	case RTC_SET_TIME:	/* Set the RTC */
<span class="p_header">diff --git a/arch/mips/boot/elf2ecoff.c b/arch/mips/boot/elf2ecoff.c</span>
<span class="p_header">index 266c8137e859..ac9b23f8b8ac 100644</span>
<span class="p_header">--- a/arch/mips/boot/elf2ecoff.c</span>
<span class="p_header">+++ b/arch/mips/boot/elf2ecoff.c</span>
<span class="p_chunk">@@ -77,8 +77,8 @@</span> <span class="p_context"> static void copy(int out, int in, off_t offset, off_t size)</span>
 	remaining = size;
 	while (remaining) {
 		cur = remaining;
<span class="p_del">-		if (cur &gt; sizeof ibuf)</span>
<span class="p_del">-			cur = sizeof ibuf;</span>
<span class="p_add">+		if (cur &gt; sizeof(ibuf))</span>
<span class="p_add">+			cur = sizeof(ibuf);</span>
 		remaining -= cur;
 		if ((count = read(in, ibuf, cur)) != cur) {
 			fprintf(stderr, &quot;copy: read: %s\n&quot;,
<span class="p_chunk">@@ -302,8 +302,8 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 	}
 
 	/* Read the header, which is at the beginning of the file... */
<span class="p_del">-	i = read(infile, &amp;ex, sizeof ex);</span>
<span class="p_del">-	if (i != sizeof ex) {</span>
<span class="p_add">+	i = read(infile, &amp;ex, sizeof(ex));</span>
<span class="p_add">+	if (i != sizeof(ex)) {</span>
 		fprintf(stderr, &quot;ex: %s: %s.\n&quot;,
 			argv[1],
 			i ? strerror(errno) : &quot;End of file reached&quot;);
<span class="p_chunk">@@ -425,7 +425,7 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 	eah.data_start = data.vaddr;
 	eah.bss_start = bss.vaddr;
 	eah.gprmask = 0xf3fffffe;
<span class="p_del">-	memset(&amp;eah.cprmask, &#39;\0&#39;, sizeof eah.cprmask);</span>
<span class="p_add">+	memset(&amp;eah.cprmask, &#39;\0&#39;, sizeof(eah.cprmask));</span>
 	eah.gp_value = 0;	/* unused. */
 
 	if (format_bigendian)
<span class="p_chunk">@@ -440,10 +440,10 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 	efh.f_timdat = 0;	/* bogus */
 	efh.f_symptr = 0;
 	efh.f_nsyms = 0;
<span class="p_del">-	efh.f_opthdr = sizeof eah;</span>
<span class="p_add">+	efh.f_opthdr = sizeof(eah);</span>
 	efh.f_flags = 0x100f;	/* Stripped, not sharable. */
 
<span class="p_del">-	memset(esecs, 0, sizeof esecs);</span>
<span class="p_add">+	memset(esecs, 0, sizeof(esecs));</span>
 	strcpy(esecs[0].s_name, &quot;.text&quot;);
 	strcpy(esecs[1].s_name, &quot;.data&quot;);
 	strcpy(esecs[2].s_name, &quot;.bss&quot;);
<span class="p_chunk">@@ -511,8 +511,8 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 	if (must_convert_endian)
 		convert_ecoff_filehdr(&amp;efh);
 	/* Write the headers... */
<span class="p_del">-	i = write(outfile, &amp;efh, sizeof efh);</span>
<span class="p_del">-	if (i != sizeof efh) {</span>
<span class="p_add">+	i = write(outfile, &amp;efh, sizeof(efh));</span>
<span class="p_add">+	if (i != sizeof(efh)) {</span>
 		perror(&quot;efh: write&quot;);
 		exit(1);
 
<span class="p_chunk">@@ -527,8 +527,8 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 
 	if (must_convert_endian)
 		convert_ecoff_aouthdr(&amp;eah);
<span class="p_del">-	i = write(outfile, &amp;eah, sizeof eah);</span>
<span class="p_del">-	if (i != sizeof eah) {</span>
<span class="p_add">+	i = write(outfile, &amp;eah, sizeof(eah));</span>
<span class="p_add">+	if (i != sizeof(eah)) {</span>
 		perror(&quot;eah: write&quot;);
 		exit(1);
 	}
<span class="p_chunk">@@ -576,13 +576,12 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 				fprintf(stderr,
 					&quot;Warning: %ld byte intersegment gap.\n&quot;,
 					gap);
<span class="p_del">-				memset(obuf, 0, sizeof obuf);</span>
<span class="p_add">+				memset(obuf, 0, sizeof(obuf));</span>
 				while (gap) {
 					int count =
 					    write(outfile, obuf,
 						  (gap &gt;
<span class="p_del">-						   sizeof obuf ? sizeof</span>
<span class="p_del">-						   obuf : gap));</span>
<span class="p_add">+						   sizeof(obuf) ? sizeof(obuf) : gap));</span>
 					if (count &lt; 0) {
 						fprintf(stderr,
 							&quot;Error writing gap: %s\n&quot;,
<span class="p_chunk">@@ -607,7 +606,7 @@</span> <span class="p_context"> int main(int argc, char *argv[])</span>
 	 */
 	{
 		char obuf[4096];
<span class="p_del">-		memset(obuf, 0, sizeof obuf);</span>
<span class="p_add">+		memset(obuf, 0, sizeof(obuf));</span>
 		if (write(outfile, obuf, sizeof(obuf)) != sizeof(obuf)) {
 			fprintf(stderr, &quot;Error writing PROM padding: %s\n&quot;,
 				strerror(errno));
<span class="p_header">diff --git a/arch/mips/kernel/module.c b/arch/mips/kernel/module.c</span>
<span class="p_header">index 1833f5171ccd..733219f4486e 100644</span>
<span class="p_header">--- a/arch/mips/kernel/module.c</span>
<span class="p_header">+++ b/arch/mips/kernel/module.c</span>
<span class="p_chunk">@@ -94,7 +94,7 @@</span> <span class="p_context"> static int apply_r_mips_hi16_rel(struct module *me, u32 *location, Elf_Addr v)</span>
 	 * the carry we need to add.  Save the information, and let LO16 do the
 	 * actual relocation.
 	 */
<span class="p_del">-	n = kmalloc(sizeof *n, GFP_KERNEL);</span>
<span class="p_add">+	n = kmalloc(sizeof(*n), GFP_KERNEL);</span>
 	if (!n)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/arch/mips/oprofile/common.c b/arch/mips/oprofile/common.c</span>
<span class="p_header">index 3c9ec3ddca84..1870546fd678 100644</span>
<span class="p_header">--- a/arch/mips/oprofile/common.c</span>
<span class="p_header">+++ b/arch/mips/oprofile/common.c</span>
<span class="p_chunk">@@ -43,7 +43,7 @@</span> <span class="p_context"> static int op_mips_create_files(struct dentry *root)</span>
 		struct dentry *dir;
 		char buf[4];
 
<span class="p_del">-		snprintf(buf, sizeof buf, &quot;%d&quot;, i);</span>
<span class="p_add">+		snprintf(buf, sizeof(buf), &quot;%d&quot;, i);</span>
 		dir = oprofilefs_mkdir(root, buf);
 
 		oprofilefs_create_ulong(dir, &quot;enabled&quot;, &amp;ctr[i].enabled);
<span class="p_header">diff --git a/arch/mips/sgi-ip22/ip22-gio.c b/arch/mips/sgi-ip22/ip22-gio.c</span>
<span class="p_header">index cdf187600010..1835763bb4e2 100644</span>
<span class="p_header">--- a/arch/mips/sgi-ip22/ip22-gio.c</span>
<span class="p_header">+++ b/arch/mips/sgi-ip22/ip22-gio.c</span>
<span class="p_chunk">@@ -358,7 +358,7 @@</span> <span class="p_context"> static void ip22_check_gio(int slotno, unsigned long addr, int irq)</span>
 		}
 		printk(KERN_INFO &quot;GIO: slot %d : %s (id %x)\n&quot;,
 		       slotno, name, id);
<span class="p_del">-		gio_dev = kzalloc(sizeof *gio_dev, GFP_KERNEL);</span>
<span class="p_add">+		gio_dev = kzalloc(sizeof(*gio_dev), GFP_KERNEL);</span>
 		gio_dev-&gt;name = name;
 		gio_dev-&gt;slotno = slotno;
 		gio_dev-&gt;id.id = id;
<span class="p_header">diff --git a/arch/parisc/kernel/cache.c b/arch/parisc/kernel/cache.c</span>
<span class="p_header">index 91c2a39cd5aa..86215afe34ab 100644</span>
<span class="p_header">--- a/arch/parisc/kernel/cache.c</span>
<span class="p_header">+++ b/arch/parisc/kernel/cache.c</span>
<span class="p_chunk">@@ -239,7 +239,7 @@</span> <span class="p_context"> parisc_cache_init(void)</span>
 
 #ifndef CONFIG_PA20
 	if (pdc_btlb_info(&amp;btlb_info) &lt; 0) {
<span class="p_del">-		memset(&amp;btlb_info, 0, sizeof btlb_info);</span>
<span class="p_add">+		memset(&amp;btlb_info, 0, sizeof(btlb_info));</span>
 	}
 #endif
 
<span class="p_header">diff --git a/arch/parisc/kernel/process.c b/arch/parisc/kernel/process.c</span>
<span class="p_header">index 809905a811ed..10b0a896a44d 100644</span>
<span class="p_header">--- a/arch/parisc/kernel/process.c</span>
<span class="p_header">+++ b/arch/parisc/kernel/process.c</span>
<span class="p_chunk">@@ -171,7 +171,7 @@</span> <span class="p_context"> int dump_fpu (struct pt_regs * regs, elf_fpregset_t *r)</span>
 	if (regs == NULL)
 		return 0;
 
<span class="p_del">-	memcpy(r, regs-&gt;fr, sizeof *r);</span>
<span class="p_add">+	memcpy(r, regs-&gt;fr, sizeof(*r));</span>
 	return 1;
 }
 
<span class="p_header">diff --git a/arch/parisc/math-emu/driver.c b/arch/parisc/math-emu/driver.c</span>
<span class="p_header">index 09ef4136c693..30b51d24098b 100644</span>
<span class="p_header">--- a/arch/parisc/math-emu/driver.c</span>
<span class="p_header">+++ b/arch/parisc/math-emu/driver.c</span>
<span class="p_chunk">@@ -92,7 +92,7 @@</span> <span class="p_context"> handle_fpe(struct pt_regs *regs)</span>
 	 */
 	__u64 frcopy[36];
 
<span class="p_del">-	memcpy(frcopy, regs-&gt;fr, sizeof regs-&gt;fr);</span>
<span class="p_add">+	memcpy(frcopy, regs-&gt;fr, sizeof(regs-&gt;fr));</span>
 	frcopy[32] = 0;
 
 	memcpy(&amp;orig_sw, frcopy, sizeof(orig_sw));
<span class="p_chunk">@@ -114,7 +114,7 @@</span> <span class="p_context"> handle_fpe(struct pt_regs *regs)</span>
 		printk(KERN_DEBUG &quot;\n&quot;);
 	}
 
<span class="p_del">-	memcpy(regs-&gt;fr, frcopy, sizeof regs-&gt;fr);</span>
<span class="p_add">+	memcpy(regs-&gt;fr, frcopy, sizeof(regs-&gt;fr));</span>
 	if (signalcode != 0) {
 	    si.si_signo = signalcode &gt;&gt; 24;
 	    si.si_errno = 0;
<span class="p_header">diff --git a/arch/powerpc/crypto/sha1.c b/arch/powerpc/crypto/sha1.c</span>
<span class="p_header">index c154cebc1041..9fa3db4c2af5 100644</span>
<span class="p_header">--- a/arch/powerpc/crypto/sha1.c</span>
<span class="p_header">+++ b/arch/powerpc/crypto/sha1.c</span>
<span class="p_chunk">@@ -99,7 +99,7 @@</span> <span class="p_context"> static int sha1_final(struct shash_desc *desc, u8 *out)</span>
 		dst[i] = cpu_to_be32(sctx-&gt;state[i]);
 
 	/* Wipe context */
<span class="p_del">-	memset(sctx, 0, sizeof *sctx);</span>
<span class="p_add">+	memset(sctx, 0, sizeof(*sctx));</span>
 
 	return 0;
 }
<span class="p_header">diff --git a/arch/powerpc/kernel/kgdb.c b/arch/powerpc/kernel/kgdb.c</span>
<span class="p_header">index e77c3ccf8dcf..abad4a656a39 100644</span>
<span class="p_header">--- a/arch/powerpc/kernel/kgdb.c</span>
<span class="p_header">+++ b/arch/powerpc/kernel/kgdb.c</span>
<span class="p_chunk">@@ -175,15 +175,15 @@</span> <span class="p_context"> static int kgdb_singlestep(struct pt_regs *regs)</span>
 
 	if (thread_info != exception_thread_info) {
 		/* Save the original current_thread_info. */
<span class="p_del">-		memcpy(backup_current_thread_info, exception_thread_info, sizeof *thread_info);</span>
<span class="p_del">-		memcpy(exception_thread_info, thread_info, sizeof *thread_info);</span>
<span class="p_add">+		memcpy(backup_current_thread_info, exception_thread_info, sizeof(*thread_info));</span>
<span class="p_add">+		memcpy(exception_thread_info, thread_info, sizeof(*thread_info));</span>
 	}
 
 	kgdb_handle_exception(0, SIGTRAP, 0, regs);
 
 	if (thread_info != exception_thread_info)
 		/* Restore current_thread_info lastly. */
<span class="p_del">-		memcpy(exception_thread_info, backup_current_thread_info, sizeof *thread_info);</span>
<span class="p_add">+		memcpy(exception_thread_info, backup_current_thread_info, sizeof(*thread_info));</span>
 
 	return 1;
 }
<span class="p_header">diff --git a/arch/powerpc/oprofile/common.c b/arch/powerpc/oprofile/common.c</span>
<span class="p_header">index bf094c5a4bd9..de02342a3c63 100644</span>
<span class="p_header">--- a/arch/powerpc/oprofile/common.c</span>
<span class="p_header">+++ b/arch/powerpc/oprofile/common.c</span>
<span class="p_chunk">@@ -159,7 +159,7 @@</span> <span class="p_context"> static int op_powerpc_create_files(struct dentry *root)</span>
 		struct dentry *dir;
 		char buf[4];
 
<span class="p_del">-		snprintf(buf, sizeof buf, &quot;%d&quot;, i);</span>
<span class="p_add">+		snprintf(buf, sizeof(buf), &quot;%d&quot;, i);</span>
 		dir = oprofilefs_mkdir(root, buf);
 
 		oprofilefs_create_ulong(dir, &quot;enabled&quot;, &amp;ctr[i].enabled);
<span class="p_header">diff --git a/arch/powerpc/platforms/52xx/mpc52xx_gpt.c b/arch/powerpc/platforms/52xx/mpc52xx_gpt.c</span>
<span class="p_header">index 3048e34db6d8..d1a77befdf18 100644</span>
<span class="p_header">--- a/arch/powerpc/platforms/52xx/mpc52xx_gpt.c</span>
<span class="p_header">+++ b/arch/powerpc/platforms/52xx/mpc52xx_gpt.c</span>
<span class="p_chunk">@@ -724,7 +724,7 @@</span> <span class="p_context"> static int mpc52xx_gpt_probe(struct platform_device *ofdev)</span>
 {
 	struct mpc52xx_gpt_priv *gpt;
 
<span class="p_del">-	gpt = devm_kzalloc(&amp;ofdev-&gt;dev, sizeof *gpt, GFP_KERNEL);</span>
<span class="p_add">+	gpt = devm_kzalloc(&amp;ofdev-&gt;dev, sizeof(*gpt), GFP_KERNEL);</span>
 	if (!gpt)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/arch/powerpc/platforms/cell/spufs/context.c b/arch/powerpc/platforms/cell/spufs/context.c</span>
<span class="p_header">index 3b4152faeb1f..64116dd10c24 100644</span>
<span class="p_header">--- a/arch/powerpc/platforms/cell/spufs/context.c</span>
<span class="p_header">+++ b/arch/powerpc/platforms/cell/spufs/context.c</span>
<span class="p_chunk">@@ -37,7 +37,7 @@</span> <span class="p_context"> struct spu_context *alloc_spu_context(struct spu_gang *gang)</span>
 {
 	struct spu_context *ctx;
 
<span class="p_del">-	ctx = kzalloc(sizeof *ctx, GFP_KERNEL);</span>
<span class="p_add">+	ctx = kzalloc(sizeof(*ctx), GFP_KERNEL);</span>
 	if (!ctx)
 		goto out;
 	/* Binding to physical processor deferred
<span class="p_header">diff --git a/arch/powerpc/platforms/cell/spufs/file.c b/arch/powerpc/platforms/cell/spufs/file.c</span>
<span class="p_header">index 2936a0044c04..da5641c151f8 100644</span>
<span class="p_header">--- a/arch/powerpc/platforms/cell/spufs/file.c</span>
<span class="p_header">+++ b/arch/powerpc/platforms/cell/spufs/file.c</span>
<span class="p_chunk">@@ -477,7 +477,7 @@</span> <span class="p_context"> __spufs_regs_read(struct spu_context *ctx, char __user *buffer,</span>
 {
 	struct spu_lscsa *lscsa = ctx-&gt;csa.lscsa;
 	return simple_read_from_buffer(buffer, size, pos,
<span class="p_del">-				      lscsa-&gt;gprs, sizeof lscsa-&gt;gprs);</span>
<span class="p_add">+				      lscsa-&gt;gprs, sizeof(lscsa-&gt;gprs));</span>
 }
 
 static ssize_t
<span class="p_chunk">@@ -668,7 +668,7 @@</span> <span class="p_context"> static ssize_t spufs_mbox_stat_read(struct file *file, char __user *buf,</span>
 
 	spu_release(ctx);
 
<span class="p_del">-	if (copy_to_user(buf, &amp;mbox_stat, sizeof mbox_stat))</span>
<span class="p_add">+	if (copy_to_user(buf, &amp;mbox_stat, sizeof(mbox_stat)))</span>
 		return -EFAULT;
 
 	return 4;
<span class="p_chunk">@@ -817,7 +817,7 @@</span> <span class="p_context"> static ssize_t spufs_ibox_stat_read(struct file *file, char __user *buf,</span>
 	ibox_stat = (ctx-&gt;ops-&gt;mbox_stat_read(ctx) &gt;&gt; 16) &amp; 0xff;
 	spu_release(ctx);
 
<span class="p_del">-	if (copy_to_user(buf, &amp;ibox_stat, sizeof ibox_stat))</span>
<span class="p_add">+	if (copy_to_user(buf, &amp;ibox_stat, sizeof(ibox_stat)))</span>
 		return -EFAULT;
 
 	return 4;
<span class="p_chunk">@@ -967,7 +967,7 @@</span> <span class="p_context"> static ssize_t spufs_wbox_stat_read(struct file *file, char __user *buf,</span>
 	wbox_stat = (ctx-&gt;ops-&gt;mbox_stat_read(ctx) &gt;&gt; 8) &amp; 0xff;
 	spu_release(ctx);
 
<span class="p_del">-	if (copy_to_user(buf, &amp;wbox_stat, sizeof wbox_stat))</span>
<span class="p_add">+	if (copy_to_user(buf, &amp;wbox_stat, sizeof(wbox_stat)))</span>
 		return -EFAULT;
 
 	return 4;
<span class="p_chunk">@@ -1695,11 +1695,11 @@</span> <span class="p_context"> static ssize_t spufs_mfc_write(struct file *file, const char __user *buffer,</span>
 	struct mfc_dma_command cmd;
 	int ret = -EINVAL;
 
<span class="p_del">-	if (size != sizeof cmd)</span>
<span class="p_add">+	if (size != sizeof(cmd))</span>
 		goto out;
 
 	ret = -EFAULT;
<span class="p_del">-	if (copy_from_user(&amp;cmd, buffer, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buffer, sizeof(cmd)))</span>
 		goto out;
 
 	ret = spufs_check_valid_dma(&amp;cmd);
<span class="p_chunk">@@ -2038,7 +2038,7 @@</span> <span class="p_context"> static ssize_t __spufs_mbox_info_read(struct spu_context *ctx,</span>
 
 	data = ctx-&gt;csa.prob.pu_mb_R;
 
<span class="p_del">-	return simple_read_from_buffer(buf, len, pos, &amp;data, sizeof data);</span>
<span class="p_add">+	return simple_read_from_buffer(buf, len, pos, &amp;data, sizeof(data));</span>
 }
 
 static ssize_t spufs_mbox_info_read(struct file *file, char __user *buf,
<span class="p_chunk">@@ -2078,7 +2078,7 @@</span> <span class="p_context"> static ssize_t __spufs_ibox_info_read(struct spu_context *ctx,</span>
 
 	data = ctx-&gt;csa.priv2.puint_mb_R;
 
<span class="p_del">-	return simple_read_from_buffer(buf, len, pos, &amp;data, sizeof data);</span>
<span class="p_add">+	return simple_read_from_buffer(buf, len, pos, &amp;data, sizeof(data));</span>
 }
 
 static ssize_t spufs_ibox_info_read(struct file *file, char __user *buf,
<span class="p_chunk">@@ -2173,7 +2173,7 @@</span> <span class="p_context"> static ssize_t __spufs_dma_info_read(struct spu_context *ctx,</span>
 	}
 
 	return simple_read_from_buffer(buf, len, pos, &amp;info,
<span class="p_del">-				sizeof info);</span>
<span class="p_add">+				sizeof(info));</span>
 }
 
 static ssize_t spufs_dma_info_read(struct file *file, char __user *buf,
<span class="p_chunk">@@ -2207,7 +2207,7 @@</span> <span class="p_context"> static ssize_t __spufs_proxydma_info_read(struct spu_context *ctx,</span>
 {
 	struct spu_proxydma_info info;
 	struct mfc_cq_sr *qp, *puqp;
<span class="p_del">-	int ret = sizeof info;</span>
<span class="p_add">+	int ret = sizeof(info);</span>
 	int i;
 
 	if (len &lt; ret)
<span class="p_chunk">@@ -2230,7 +2230,7 @@</span> <span class="p_context"> static ssize_t __spufs_proxydma_info_read(struct spu_context *ctx,</span>
 	}
 
 	return simple_read_from_buffer(buf, len, pos, &amp;info,
<span class="p_del">-				sizeof info);</span>
<span class="p_add">+				sizeof(info));</span>
 }
 
 static ssize_t spufs_proxydma_info_read(struct file *file, char __user *buf,
<span class="p_header">diff --git a/arch/powerpc/platforms/cell/spufs/gang.c b/arch/powerpc/platforms/cell/spufs/gang.c</span>
<span class="p_header">index 71a443253021..f4252e10c1fc 100644</span>
<span class="p_header">--- a/arch/powerpc/platforms/cell/spufs/gang.c</span>
<span class="p_header">+++ b/arch/powerpc/platforms/cell/spufs/gang.c</span>
<span class="p_chunk">@@ -29,7 +29,7 @@</span> <span class="p_context"> struct spu_gang *alloc_spu_gang(void)</span>
 {
 	struct spu_gang *gang;
 
<span class="p_del">-	gang = kzalloc(sizeof *gang, GFP_KERNEL);</span>
<span class="p_add">+	gang = kzalloc(sizeof(*gang), GFP_KERNEL);</span>
 	if (!gang)
 		goto out;
 
<span class="p_header">diff --git a/arch/s390/crypto/sha_common.c b/arch/s390/crypto/sha_common.c</span>
<span class="p_header">index 8620b0ec9c42..97f6824e4148 100644</span>
<span class="p_header">--- a/arch/s390/crypto/sha_common.c</span>
<span class="p_header">+++ b/arch/s390/crypto/sha_common.c</span>
<span class="p_chunk">@@ -96,7 +96,7 @@</span> <span class="p_context"> int s390_sha_final(struct shash_desc *desc, u8 *out)</span>
 	/* copy digest to out */
 	memcpy(out, ctx-&gt;state, crypto_shash_digestsize(desc-&gt;tfm));
 	/* wipe context */
<span class="p_del">-	memset(ctx, 0, sizeof *ctx);</span>
<span class="p_add">+	memset(ctx, 0, sizeof(*ctx));</span>
 
 	return 0;
 }
<span class="p_header">diff --git a/arch/sparc/lib/bitext.c b/arch/sparc/lib/bitext.c</span>
<span class="p_header">index 8ec4e9c0251a..0bfe37fc7f43 100644</span>
<span class="p_header">--- a/arch/sparc/lib/bitext.c</span>
<span class="p_header">+++ b/arch/sparc/lib/bitext.c</span>
<span class="p_chunk">@@ -120,7 +120,7 @@</span> <span class="p_context"> void bit_map_clear(struct bit_map *t, int offset, int len)</span>
 void bit_map_init(struct bit_map *t, unsigned long *map, int size)
 {
 	bitmap_zero(map, size);
<span class="p_del">-	memset(t, 0, sizeof *t);</span>
<span class="p_add">+	memset(t, 0, sizeof(*t));</span>
 	spin_lock_init(&amp;t-&gt;lock);
 	t-&gt;map = map;
 	t-&gt;size = size;
<span class="p_header">diff --git a/arch/tile/kernel/backtrace.c b/arch/tile/kernel/backtrace.c</span>
<span class="p_header">index f8b74ca83b92..1f2e8342cffc 100644</span>
<span class="p_header">--- a/arch/tile/kernel/backtrace.c</span>
<span class="p_header">+++ b/arch/tile/kernel/backtrace.c</span>
<span class="p_chunk">@@ -311,8 +311,8 @@</span> <span class="p_context"> static void find_caller_pc_and_caller_sp(CallerLocation *location,</span>
 			 * prevent any problems.
 			 */
 			unsigned int bytes_to_prefetch = 4096 - (pc &amp; 4095);
<span class="p_del">-			if (bytes_to_prefetch &gt; sizeof prefetched_bundles)</span>
<span class="p_del">-				bytes_to_prefetch = sizeof prefetched_bundles;</span>
<span class="p_add">+			if (bytes_to_prefetch &gt; sizeof(prefetched_bundles))</span>
<span class="p_add">+				bytes_to_prefetch = sizeof(prefetched_bundles);</span>
 
 			if (!read_memory_func(prefetched_bundles, pc,
 					      bytes_to_prefetch,
<span class="p_chunk">@@ -641,7 +641,7 @@</span> <span class="p_context"> bool backtrace_next(BacktraceIterator *state)</span>
 	}
 
 	/* Try to read the frame linkage data chaining to the next function. */
<span class="p_del">-	if (!state-&gt;read_memory_func(&amp;next_frame, state-&gt;fp, sizeof next_frame,</span>
<span class="p_add">+	if (!state-&gt;read_memory_func(&amp;next_frame, state-&gt;fp, sizeof(next_frame),</span>
 				     state-&gt;read_memory_func_extra)) {
 		return false;
 	}
<span class="p_header">diff --git a/arch/um/kernel/um_arch.c b/arch/um/kernel/um_arch.c</span>
<span class="p_header">index 16630e75f056..b553ee32891a 100644</span>
<span class="p_header">--- a/arch/um/kernel/um_arch.c</span>
<span class="p_header">+++ b/arch/um/kernel/um_arch.c</span>
<span class="p_chunk">@@ -345,7 +345,7 @@</span> <span class="p_context"> void __init setup_arch(char **cmdline_p)</span>
 	paging_init();
 	strlcpy(boot_command_line, command_line, COMMAND_LINE_SIZE);
 	*cmdline_p = command_line;
<span class="p_del">-	setup_hostinfo(host_info, sizeof host_info);</span>
<span class="p_add">+	setup_hostinfo(host_info, sizeof(host_info));</span>
 }
 
 void __init check_bugs(void)
<span class="p_header">diff --git a/arch/x86/boot/cpucheck.c b/arch/x86/boot/cpucheck.c</span>
<span class="p_header">index 1fd7d575092e..8f297c01edc6 100644</span>
<span class="p_header">--- a/arch/x86/boot/cpucheck.c</span>
<span class="p_header">+++ b/arch/x86/boot/cpucheck.c</span>
<span class="p_chunk">@@ -103,7 +103,7 @@</span> <span class="p_context"> int check_cpu(int *cpu_level_ptr, int *req_level_ptr, u32 **err_flags_ptr)</span>
 {
 	int err;
 
<span class="p_del">-	memset(&amp;cpu.flags, 0, sizeof cpu.flags);</span>
<span class="p_add">+	memset(&amp;cpu.flags, 0, sizeof(cpu.flags));</span>
 	cpu.level = 3;
 
 	if (has_eflag(X86_EFLAGS_AC))
<span class="p_header">diff --git a/arch/x86/boot/early_serial_console.c b/arch/x86/boot/early_serial_console.c</span>
<span class="p_header">index 45a07684bbab..f764a466c4e3 100644</span>
<span class="p_header">--- a/arch/x86/boot/early_serial_console.c</span>
<span class="p_header">+++ b/arch/x86/boot/early_serial_console.c</span>
<span class="p_chunk">@@ -45,7 +45,7 @@</span> <span class="p_context"> static void parse_earlyprintk(void)</span>
 	int pos = 0;
 	int port = 0;
 
<span class="p_del">-	if (cmdline_find_option(&quot;earlyprintk&quot;, arg, sizeof arg) &gt; 0) {</span>
<span class="p_add">+	if (cmdline_find_option(&quot;earlyprintk&quot;, arg, sizeof(arg)) &gt; 0) {</span>
 		char *e;
 
 		if (!strncmp(arg, &quot;serial&quot;, 6)) {
<span class="p_chunk">@@ -119,7 +119,7 @@</span> <span class="p_context"> static void parse_console_uart8250(void)</span>
 	 * console=uart8250,io,0x3f8,115200n8
 	 * need to make sure it is last one console !
 	 */
<span class="p_del">-	if (cmdline_find_option(&quot;console&quot;, optstr, sizeof optstr) &lt;= 0)</span>
<span class="p_add">+	if (cmdline_find_option(&quot;console&quot;, optstr, sizeof(optstr)) &lt;= 0)</span>
 		return;
 
 	options = optstr;
<span class="p_header">diff --git a/arch/x86/boot/edd.c b/arch/x86/boot/edd.c</span>
<span class="p_header">index 223e42527077..6c176b6a42ad 100644</span>
<span class="p_header">--- a/arch/x86/boot/edd.c</span>
<span class="p_header">+++ b/arch/x86/boot/edd.c</span>
<span class="p_chunk">@@ -76,7 +76,7 @@</span> <span class="p_context"> static int get_edd_info(u8 devno, struct edd_info *ei)</span>
 {
 	struct biosregs ireg, oreg;
 
<span class="p_del">-	memset(ei, 0, sizeof *ei);</span>
<span class="p_add">+	memset(ei, 0, sizeof(*ei));</span>
 
 	/* Check Extensions Present */
 
<span class="p_chunk">@@ -133,7 +133,7 @@</span> <span class="p_context"> void query_edd(void)</span>
 	struct edd_info ei, *edp;
 	u32 *mbrptr;
 
<span class="p_del">-	if (cmdline_find_option(&quot;edd&quot;, eddarg, sizeof eddarg) &gt; 0) {</span>
<span class="p_add">+	if (cmdline_find_option(&quot;edd&quot;, eddarg, sizeof(eddarg)) &gt; 0) {</span>
 		if (!strcmp(eddarg, &quot;skipmbr&quot;) || !strcmp(eddarg, &quot;skip&quot;)) {
 			do_edd = 1;
 			do_mbr = 0;
<span class="p_chunk">@@ -166,7 +166,7 @@</span> <span class="p_context"> void query_edd(void)</span>
 		 */
 		if (!get_edd_info(devno, &amp;ei)
 		    &amp;&amp; boot_params.eddbuf_entries &lt; EDDMAXNR) {
<span class="p_del">-			memcpy(edp, &amp;ei, sizeof ei);</span>
<span class="p_add">+			memcpy(edp, &amp;ei, sizeof(ei));</span>
 			edp++;
 			boot_params.eddbuf_entries++;
 		}
<span class="p_header">diff --git a/arch/x86/boot/main.c b/arch/x86/boot/main.c</span>
<span class="p_header">index 9bcea386db65..73532543d689 100644</span>
<span class="p_header">--- a/arch/x86/boot/main.c</span>
<span class="p_header">+++ b/arch/x86/boot/main.c</span>
<span class="p_chunk">@@ -36,8 +36,8 @@</span> <span class="p_context"> static void copy_boot_params(void)</span>
 	const struct old_cmdline * const oldcmd =
 		(const struct old_cmdline *)OLD_CL_ADDRESS;
 
<span class="p_del">-	BUILD_BUG_ON(sizeof boot_params != 4096);</span>
<span class="p_del">-	memcpy(&amp;boot_params.hdr, &amp;hdr, sizeof hdr);</span>
<span class="p_add">+	BUILD_BUG_ON(sizeof(boot_params) != 4096);</span>
<span class="p_add">+	memcpy(&amp;boot_params.hdr, &amp;hdr, sizeof(hdr));</span>
 
 	if (!boot_params.hdr.cmd_line_ptr &amp;&amp;
 	    oldcmd-&gt;cl_magic == OLD_CL_MAGIC) {
<span class="p_header">diff --git a/arch/x86/boot/memory.c b/arch/x86/boot/memory.c</span>
<span class="p_header">index db75d07c3645..cf1bd92873b4 100644</span>
<span class="p_header">--- a/arch/x86/boot/memory.c</span>
<span class="p_header">+++ b/arch/x86/boot/memory.c</span>
<span class="p_chunk">@@ -26,7 +26,7 @@</span> <span class="p_context"> static int detect_memory_e820(void)</span>
 
 	initregs(&amp;ireg);
 	ireg.ax  = 0xe820;
<span class="p_del">-	ireg.cx  = sizeof buf;</span>
<span class="p_add">+	ireg.cx  = sizeof(buf);</span>
 	ireg.edx = SMAP;
 	ireg.di  = (size_t)&amp;buf;
 
<span class="p_header">diff --git a/arch/x86/boot/regs.c b/arch/x86/boot/regs.c</span>
<span class="p_header">index c0fb356a3092..2fe3616ba161 100644</span>
<span class="p_header">--- a/arch/x86/boot/regs.c</span>
<span class="p_header">+++ b/arch/x86/boot/regs.c</span>
<span class="p_chunk">@@ -21,7 +21,7 @@</span> <span class="p_context"></span>
 
 void initregs(struct biosregs *reg)
 {
<span class="p_del">-	memset(reg, 0, sizeof *reg);</span>
<span class="p_add">+	memset(reg, 0, sizeof(*reg));</span>
 	reg-&gt;eflags |= X86_EFLAGS_CF;
 	reg-&gt;ds = ds();
 	reg-&gt;es = ds();
<span class="p_header">diff --git a/arch/x86/boot/video-vesa.c b/arch/x86/boot/video-vesa.c</span>
<span class="p_header">index ba3e100654db..3ecc11a9c440 100644</span>
<span class="p_header">--- a/arch/x86/boot/video-vesa.c</span>
<span class="p_header">+++ b/arch/x86/boot/video-vesa.c</span>
<span class="p_chunk">@@ -62,7 +62,7 @@</span> <span class="p_context"> static int vesa_probe(void)</span>
 		if (mode &amp; ~0x1ff)
 			continue;
 
<span class="p_del">-		memset(&amp;vminfo, 0, sizeof vminfo); /* Just in case... */</span>
<span class="p_add">+		memset(&amp;vminfo, 0, sizeof(vminfo)); /* Just in case... */</span>
 
 		ireg.ax = 0x4f01;
 		ireg.cx = mode;
<span class="p_chunk">@@ -109,7 +109,7 @@</span> <span class="p_context"> static int vesa_set_mode(struct mode_info *mode)</span>
 	int is_graphic;
 	u16 vesa_mode = mode-&gt;mode - VIDEO_FIRST_VESA;
 
<span class="p_del">-	memset(&amp;vminfo, 0, sizeof vminfo); /* Just in case... */</span>
<span class="p_add">+	memset(&amp;vminfo, 0, sizeof(vminfo)); /* Just in case... */</span>
 
 	initregs(&amp;ireg);
 	ireg.ax = 0x4f01;
<span class="p_chunk">@@ -241,7 +241,7 @@</span> <span class="p_context"> void vesa_store_edid(void)</span>
 	struct biosregs ireg, oreg;
 
 	/* Apparently used as a nonsense token... */
<span class="p_del">-	memset(&amp;boot_params.edid_info, 0x13, sizeof boot_params.edid_info);</span>
<span class="p_add">+	memset(&amp;boot_params.edid_info, 0x13, sizeof(boot_params.edid_info));</span>
 
 	if (vginfo.version &lt; 0x0200)
 		return;		/* EDID requires VBE 2.0+ */
<span class="p_header">diff --git a/arch/x86/boot/video.c b/arch/x86/boot/video.c</span>
<span class="p_header">index 77780e386e9b..ac89b6624a40 100644</span>
<span class="p_header">--- a/arch/x86/boot/video.c</span>
<span class="p_header">+++ b/arch/x86/boot/video.c</span>
<span class="p_chunk">@@ -115,7 +115,7 @@</span> <span class="p_context"> static unsigned int get_entry(void)</span>
 		} else if ((key &gt;= &#39;0&#39; &amp;&amp; key &lt;= &#39;9&#39;) ||
 			   (key &gt;= &#39;A&#39; &amp;&amp; key &lt;= &#39;Z&#39;) ||
 			   (key &gt;= &#39;a&#39; &amp;&amp; key &lt;= &#39;z&#39;)) {
<span class="p_del">-			if (len &lt; sizeof entry_buf) {</span>
<span class="p_add">+			if (len &lt; sizeof(entry_buf)) {</span>
 				entry_buf[len++] = key;
 				putchar(key);
 			}
<span class="p_header">diff --git a/arch/x86/kernel/cpu/common.c b/arch/x86/kernel/cpu/common.c</span>
<span class="p_header">index 37830de8f60a..acdf06dd655c 100644</span>
<span class="p_header">--- a/arch/x86/kernel/cpu/common.c</span>
<span class="p_header">+++ b/arch/x86/kernel/cpu/common.c</span>
<span class="p_chunk">@@ -727,7 +727,7 @@</span> <span class="p_context"> static void __init early_identify_cpu(struct cpuinfo_x86 *c)</span>
 #endif
 	c-&gt;x86_cache_alignment = c-&gt;x86_clflush_size;
 
<span class="p_del">-	memset(&amp;c-&gt;x86_capability, 0, sizeof c-&gt;x86_capability);</span>
<span class="p_add">+	memset(&amp;c-&gt;x86_capability, 0, sizeof(c-&gt;x86_capability));</span>
 	c-&gt;extended_cpuid_level = 0;
 
 	if (!have_cpuid_p())
<span class="p_chunk">@@ -879,7 +879,7 @@</span> <span class="p_context"> static void identify_cpu(struct cpuinfo_x86 *c)</span>
 	c-&gt;x86_virt_bits = 32;
 #endif
 	c-&gt;x86_cache_alignment = c-&gt;x86_clflush_size;
<span class="p_del">-	memset(&amp;c-&gt;x86_capability, 0, sizeof c-&gt;x86_capability);</span>
<span class="p_add">+	memset(&amp;c-&gt;x86_capability, 0, sizeof(c-&gt;x86_capability));</span>
 
 	generic_identify(c);
 
<span class="p_header">diff --git a/arch/x86/kernel/cpu/mcheck/mce.c b/arch/x86/kernel/cpu/mcheck/mce.c</span>
<span class="p_header">index a006f4cd792b..953eb59bad1b 100644</span>
<span class="p_header">--- a/arch/x86/kernel/cpu/mcheck/mce.c</span>
<span class="p_header">+++ b/arch/x86/kernel/cpu/mcheck/mce.c</span>
<span class="p_chunk">@@ -2312,7 +2312,7 @@</span> <span class="p_context"> static int mce_device_create(unsigned int cpu)</span>
 	if (!mce_available(&amp;boot_cpu_data))
 		return -EIO;
 
<span class="p_del">-	dev = kzalloc(sizeof *dev, GFP_KERNEL);</span>
<span class="p_add">+	dev = kzalloc(sizeof(*dev), GFP_KERNEL);</span>
 	if (!dev)
 		return -ENOMEM;
 	dev-&gt;id  = cpu;
<span class="p_header">diff --git a/arch/x86/kernel/cpu/mtrr/generic.c b/arch/x86/kernel/cpu/mtrr/generic.c</span>
<span class="p_header">index c870af161008..e3a372d37661 100644</span>
<span class="p_header">--- a/arch/x86/kernel/cpu/mtrr/generic.c</span>
<span class="p_header">+++ b/arch/x86/kernel/cpu/mtrr/generic.c</span>
<span class="p_chunk">@@ -795,7 +795,7 @@</span> <span class="p_context"> static void generic_set_all(void)</span>
 	local_irq_restore(flags);
 
 	/* Use the atomic bitops to update the global mask */
<span class="p_del">-	for (count = 0; count &lt; sizeof mask * 8; ++count) {</span>
<span class="p_add">+	for (count = 0; count &lt; sizeof(mask) * 8; ++count) {</span>
 		if (mask &amp; 0x01)
 			set_bit(count, &amp;smp_changes_mask);
 		mask &gt;&gt;= 1;
<span class="p_header">diff --git a/arch/x86/kernel/cpu/mtrr/if.c b/arch/x86/kernel/cpu/mtrr/if.c</span>
<span class="p_header">index d76f13d6d8d6..6c2502524c6a 100644</span>
<span class="p_header">--- a/arch/x86/kernel/cpu/mtrr/if.c</span>
<span class="p_header">+++ b/arch/x86/kernel/cpu/mtrr/if.c</span>
<span class="p_chunk">@@ -43,7 +43,7 @@</span> <span class="p_context"> mtrr_file_add(unsigned long base, unsigned long size,</span>
 
 	max = num_var_ranges;
 	if (fcount == NULL) {
<span class="p_del">-		fcount = kzalloc(max * sizeof *fcount, GFP_KERNEL);</span>
<span class="p_add">+		fcount = kzalloc(max * sizeof(*fcount), GFP_KERNEL);</span>
 		if (!fcount)
 			return -ENOMEM;
 		FILE_FCOUNT(file) = fcount;
<span class="p_chunk">@@ -182,12 +182,12 @@</span> <span class="p_context"> mtrr_ioctl(struct file *file, unsigned int cmd, unsigned long __arg)</span>
 	case MTRRIOC_SET_PAGE_ENTRY:
 	case MTRRIOC_DEL_PAGE_ENTRY:
 	case MTRRIOC_KILL_PAGE_ENTRY:
<span class="p_del">-		if (copy_from_user(&amp;sentry, arg, sizeof sentry))</span>
<span class="p_add">+		if (copy_from_user(&amp;sentry, arg, sizeof(sentry)))</span>
 			return -EFAULT;
 		break;
 	case MTRRIOC_GET_ENTRY:
 	case MTRRIOC_GET_PAGE_ENTRY:
<span class="p_del">-		if (copy_from_user(&amp;gentry, arg, sizeof gentry))</span>
<span class="p_add">+		if (copy_from_user(&amp;gentry, arg, sizeof(gentry)))</span>
 			return -EFAULT;
 		break;
 #ifdef CONFIG_COMPAT
<span class="p_chunk">@@ -340,7 +340,7 @@</span> <span class="p_context"> mtrr_ioctl(struct file *file, unsigned int cmd, unsigned long __arg)</span>
 	switch (cmd) {
 	case MTRRIOC_GET_ENTRY:
 	case MTRRIOC_GET_PAGE_ENTRY:
<span class="p_del">-		if (copy_to_user(arg, &amp;gentry, sizeof gentry))</span>
<span class="p_add">+		if (copy_to_user(arg, &amp;gentry, sizeof(gentry)))</span>
 			err = -EFAULT;
 		break;
 #ifdef CONFIG_COMPAT
<span class="p_header">diff --git a/arch/x86/kernel/e820.c b/arch/x86/kernel/e820.c</span>
<span class="p_header">index 569c1e4f96fe..cc3521216046 100644</span>
<span class="p_header">--- a/arch/x86/kernel/e820.c</span>
<span class="p_header">+++ b/arch/x86/kernel/e820.c</span>
<span class="p_chunk">@@ -302,7 +302,7 @@</span> <span class="p_context"> int __init sanitize_e820_map(struct e820entry *biosmap, int max_nr_map,</span>
 	chg_nr = chgidx;
 
 	/* sort change-point list by memory addresses (low -&gt; high) */
<span class="p_del">-	sort(change_point, chg_nr, sizeof *change_point, cpcompare, NULL);</span>
<span class="p_add">+	sort(change_point, chg_nr, sizeof(*change_point), cpcompare, NULL);</span>
 
 	/* create a new bios memory map, removing overlaps */
 	overlap_entries = 0;	 /* number of entries in the overlap table */
<span class="p_header">diff --git a/arch/x86/kernel/head64.c b/arch/x86/kernel/head64.c</span>
<span class="p_header">index 2c0f3407bd1f..16313eeabf7f 100644</span>
<span class="p_header">--- a/arch/x86/kernel/head64.c</span>
<span class="p_header">+++ b/arch/x86/kernel/head64.c</span>
<span class="p_chunk">@@ -129,7 +129,7 @@</span> <span class="p_context"> static void __init copy_bootdata(char *real_mode_data)</span>
 	char * command_line;
 	unsigned long cmd_line_ptr;
 
<span class="p_del">-	memcpy(&amp;boot_params, real_mode_data, sizeof boot_params);</span>
<span class="p_add">+	memcpy(&amp;boot_params, real_mode_data, sizeof(boot_params));</span>
 	sanitize_boot_params(&amp;boot_params);
 	cmd_line_ptr = get_cmd_line_ptr();
 	if (cmd_line_ptr) {
<span class="p_header">diff --git a/arch/x86/kernel/msr.c b/arch/x86/kernel/msr.c</span>
<span class="p_header">index 64f9616f93f1..f56dcbff3105 100644</span>
<span class="p_header">--- a/arch/x86/kernel/msr.c</span>
<span class="p_header">+++ b/arch/x86/kernel/msr.c</span>
<span class="p_chunk">@@ -114,14 +114,14 @@</span> <span class="p_context"> static long msr_ioctl(struct file *file, unsigned int ioc, unsigned long arg)</span>
 			err = -EBADF;
 			break;
 		}
<span class="p_del">-		if (copy_from_user(&amp;regs, uregs, sizeof regs)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;regs, uregs, sizeof(regs))) {</span>
 			err = -EFAULT;
 			break;
 		}
 		err = rdmsr_safe_regs_on_cpu(cpu, regs);
 		if (err)
 			break;
<span class="p_del">-		if (copy_to_user(uregs, &amp;regs, sizeof regs))</span>
<span class="p_add">+		if (copy_to_user(uregs, &amp;regs, sizeof(regs)))</span>
 			err = -EFAULT;
 		break;
 
<span class="p_chunk">@@ -130,14 +130,14 @@</span> <span class="p_context"> static long msr_ioctl(struct file *file, unsigned int ioc, unsigned long arg)</span>
 			err = -EBADF;
 			break;
 		}
<span class="p_del">-		if (copy_from_user(&amp;regs, uregs, sizeof regs)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;regs, uregs, sizeof(regs))) {</span>
 			err = -EFAULT;
 			break;
 		}
 		err = wrmsr_safe_regs_on_cpu(cpu, regs);
 		if (err)
 			break;
<span class="p_del">-		if (copy_to_user(uregs, &amp;regs, sizeof regs))</span>
<span class="p_add">+		if (copy_to_user(uregs, &amp;regs, sizeof(regs)))</span>
 			err = -EFAULT;
 		break;
 
<span class="p_header">diff --git a/arch/x86/kvm/assigned-dev.c b/arch/x86/kvm/assigned-dev.c</span>
<span class="p_header">index 9dc091acd5fb..38c6d76186c9 100644</span>
<span class="p_header">--- a/arch/x86/kvm/assigned-dev.c</span>
<span class="p_header">+++ b/arch/x86/kvm/assigned-dev.c</span>
<span class="p_chunk">@@ -982,7 +982,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 		struct kvm_assigned_pci_dev assigned_dev;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;assigned_dev, argp, sizeof assigned_dev))</span>
<span class="p_add">+		if (copy_from_user(&amp;assigned_dev, argp, sizeof(assigned_dev)))</span>
 			goto out;
 		r = kvm_vm_ioctl_assign_device(kvm, &amp;assigned_dev);
 		if (r)
<span class="p_chunk">@@ -997,7 +997,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 		struct kvm_assigned_irq assigned_irq;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;assigned_irq, argp, sizeof assigned_irq))</span>
<span class="p_add">+		if (copy_from_user(&amp;assigned_irq, argp, sizeof(assigned_irq)))</span>
 			goto out;
 		r = kvm_vm_ioctl_assign_irq(kvm, &amp;assigned_irq);
 		if (r)
<span class="p_chunk">@@ -1008,7 +1008,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 		struct kvm_assigned_irq assigned_irq;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;assigned_irq, argp, sizeof assigned_irq))</span>
<span class="p_add">+		if (copy_from_user(&amp;assigned_irq, argp, sizeof(assigned_irq)))</span>
 			goto out;
 		r = kvm_vm_ioctl_deassign_dev_irq(kvm, &amp;assigned_irq);
 		if (r)
<span class="p_chunk">@@ -1019,7 +1019,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 		struct kvm_assigned_pci_dev assigned_dev;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;assigned_dev, argp, sizeof assigned_dev))</span>
<span class="p_add">+		if (copy_from_user(&amp;assigned_dev, argp, sizeof(assigned_dev)))</span>
 			goto out;
 		r = kvm_vm_ioctl_deassign_device(kvm, &amp;assigned_dev);
 		if (r)
<span class="p_chunk">@@ -1029,7 +1029,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 	case KVM_ASSIGN_SET_MSIX_NR: {
 		struct kvm_assigned_msix_nr entry_nr;
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;entry_nr, argp, sizeof entry_nr))</span>
<span class="p_add">+		if (copy_from_user(&amp;entry_nr, argp, sizeof(entry_nr)))</span>
 			goto out;
 		r = kvm_vm_ioctl_set_msix_nr(kvm, &amp;entry_nr);
 		if (r)
<span class="p_chunk">@@ -1039,7 +1039,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 	case KVM_ASSIGN_SET_MSIX_ENTRY: {
 		struct kvm_assigned_msix_entry entry;
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;entry, argp, sizeof entry))</span>
<span class="p_add">+		if (copy_from_user(&amp;entry, argp, sizeof(entry)))</span>
 			goto out;
 		r = kvm_vm_ioctl_set_msix_entry(kvm, &amp;entry);
 		if (r)
<span class="p_chunk">@@ -1050,7 +1050,7 @@</span> <span class="p_context"> long kvm_vm_ioctl_assigned_device(struct kvm *kvm, unsigned ioctl,</span>
 		struct kvm_assigned_pci_dev assigned_dev;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;assigned_dev, argp, sizeof assigned_dev))</span>
<span class="p_add">+		if (copy_from_user(&amp;assigned_dev, argp, sizeof(assigned_dev)))</span>
 			goto out;
 		r = kvm_vm_ioctl_set_pci_irq_mask(kvm, &amp;assigned_dev);
 		break;
<span class="p_header">diff --git a/arch/x86/kvm/emulate.c b/arch/x86/kvm/emulate.c</span>
<span class="p_header">index 1505587d06e9..54206cd20635 100644</span>
<span class="p_header">--- a/arch/x86/kvm/emulate.c</span>
<span class="p_header">+++ b/arch/x86/kvm/emulate.c</span>
<span class="p_chunk">@@ -1449,7 +1449,7 @@</span> <span class="p_context"> static int read_interrupt_descriptor(struct x86_emulate_ctxt *ctxt,</span>
 		return emulate_gp(ctxt, index &lt;&lt; 3 | 0x2);
 
 	addr = dt.address + index * 8;
<span class="p_del">-	return ctxt-&gt;ops-&gt;read_std(ctxt, addr, desc, sizeof *desc,</span>
<span class="p_add">+	return ctxt-&gt;ops-&gt;read_std(ctxt, addr, desc, sizeof(*desc),</span>
 				   &amp;ctxt-&gt;exception);
 }
 
<span class="p_chunk">@@ -1463,7 +1463,7 @@</span> <span class="p_context"> static void get_descriptor_table_ptr(struct x86_emulate_ctxt *ctxt,</span>
 		struct desc_struct desc;
 		u16 sel;
 
<span class="p_del">-		memset (dt, 0, sizeof *dt);</span>
<span class="p_add">+		memset (dt, 0, sizeof(*dt));</span>
 		if (!ops-&gt;get_segment(ctxt, &amp;sel, &amp;desc, &amp;base3,
 				      VCPU_SREG_LDTR))
 			return;
<span class="p_chunk">@@ -1528,7 +1528,7 @@</span> <span class="p_context"> static int write_segment_descriptor(struct x86_emulate_ctxt *ctxt,</span>
 	if (rc != X86EMUL_CONTINUE)
 		return rc;
 
<span class="p_del">-	return ctxt-&gt;ops-&gt;write_std(ctxt, addr, desc, sizeof *desc,</span>
<span class="p_add">+	return ctxt-&gt;ops-&gt;write_std(ctxt, addr, desc, sizeof(*desc),</span>
 				    &amp;ctxt-&gt;exception);
 }
 
<span class="p_chunk">@@ -1548,7 +1548,7 @@</span> <span class="p_context"> static int __load_segment_descriptor(struct x86_emulate_ctxt *ctxt,</span>
 	u16 dummy;
 	u32 base3 = 0;
 
<span class="p_del">-	memset(&amp;seg_desc, 0, sizeof seg_desc);</span>
<span class="p_add">+	memset(&amp;seg_desc, 0, sizeof(seg_desc));</span>
 
 	if (ctxt-&gt;mode == X86EMUL_MODE_REAL) {
 		/* set real mode segment descriptor (keep limit etc. for
<span class="p_chunk">@@ -2958,19 +2958,19 @@</span> <span class="p_context"> static int task_switch_16(struct x86_emulate_ctxt *ctxt,</span>
 	int ret;
 	u32 new_tss_base = get_desc_base(new_desc);
 
<span class="p_del">-	ret = ops-&gt;read_std(ctxt, old_tss_base, &amp;tss_seg, sizeof tss_seg,</span>
<span class="p_add">+	ret = ops-&gt;read_std(ctxt, old_tss_base, &amp;tss_seg, sizeof(tss_seg),</span>
 			    &amp;ctxt-&gt;exception);
 	if (ret != X86EMUL_CONTINUE)
 		return ret;
 
 	save_state_to_tss16(ctxt, &amp;tss_seg);
 
<span class="p_del">-	ret = ops-&gt;write_std(ctxt, old_tss_base, &amp;tss_seg, sizeof tss_seg,</span>
<span class="p_add">+	ret = ops-&gt;write_std(ctxt, old_tss_base, &amp;tss_seg, sizeof(tss_seg),</span>
 			     &amp;ctxt-&gt;exception);
 	if (ret != X86EMUL_CONTINUE)
 		return ret;
 
<span class="p_del">-	ret = ops-&gt;read_std(ctxt, new_tss_base, &amp;tss_seg, sizeof tss_seg,</span>
<span class="p_add">+	ret = ops-&gt;read_std(ctxt, new_tss_base, &amp;tss_seg, sizeof(tss_seg),</span>
 			    &amp;ctxt-&gt;exception);
 	if (ret != X86EMUL_CONTINUE)
 		return ret;
<span class="p_chunk">@@ -2980,7 +2980,7 @@</span> <span class="p_context"> static int task_switch_16(struct x86_emulate_ctxt *ctxt,</span>
 
 		ret = ops-&gt;write_std(ctxt, new_tss_base,
 				     &amp;tss_seg.prev_task_link,
<span class="p_del">-				     sizeof tss_seg.prev_task_link,</span>
<span class="p_add">+				     sizeof(tss_seg.prev_task_link),</span>
 				     &amp;ctxt-&gt;exception);
 		if (ret != X86EMUL_CONTINUE)
 			return ret;
<span class="p_chunk">@@ -3104,7 +3104,7 @@</span> <span class="p_context"> static int task_switch_32(struct x86_emulate_ctxt *ctxt,</span>
 	u32 eip_offset = offsetof(struct tss_segment_32, eip);
 	u32 ldt_sel_offset = offsetof(struct tss_segment_32, ldt_selector);
 
<span class="p_del">-	ret = ops-&gt;read_std(ctxt, old_tss_base, &amp;tss_seg, sizeof tss_seg,</span>
<span class="p_add">+	ret = ops-&gt;read_std(ctxt, old_tss_base, &amp;tss_seg, sizeof(tss_seg),</span>
 			    &amp;ctxt-&gt;exception);
 	if (ret != X86EMUL_CONTINUE)
 		return ret;
<span class="p_chunk">@@ -3117,7 +3117,7 @@</span> <span class="p_context"> static int task_switch_32(struct x86_emulate_ctxt *ctxt,</span>
 	if (ret != X86EMUL_CONTINUE)
 		return ret;
 
<span class="p_del">-	ret = ops-&gt;read_std(ctxt, new_tss_base, &amp;tss_seg, sizeof tss_seg,</span>
<span class="p_add">+	ret = ops-&gt;read_std(ctxt, new_tss_base, &amp;tss_seg, sizeof(tss_seg),</span>
 			    &amp;ctxt-&gt;exception);
 	if (ret != X86EMUL_CONTINUE)
 		return ret;
<span class="p_chunk">@@ -3127,7 +3127,7 @@</span> <span class="p_context"> static int task_switch_32(struct x86_emulate_ctxt *ctxt,</span>
 
 		ret = ops-&gt;write_std(ctxt, new_tss_base,
 				     &amp;tss_seg.prev_task_link,
<span class="p_del">-				     sizeof tss_seg.prev_task_link,</span>
<span class="p_add">+				     sizeof(tss_seg.prev_task_link),</span>
 				     &amp;ctxt-&gt;exception);
 		if (ret != X86EMUL_CONTINUE)
 			return ret;
<span class="p_header">diff --git a/arch/x86/kvm/lapic.c b/arch/x86/kvm/lapic.c</span>
<span class="p_header">index 36591faed13b..e78fac6dddf3 100644</span>
<span class="p_header">--- a/arch/x86/kvm/lapic.c</span>
<span class="p_header">+++ b/arch/x86/kvm/lapic.c</span>
<span class="p_chunk">@@ -1900,7 +1900,7 @@</span> <span class="p_context"> void kvm_apic_post_state_restore(struct kvm_vcpu *vcpu,</span>
 	kvm_lapic_set_base(vcpu, vcpu-&gt;arch.apic_base);
 	/* set SPIV separately to get count of SW disabled APICs right */
 	apic_set_spiv(apic, *((u32 *)(s-&gt;regs + APIC_SPIV)));
<span class="p_del">-	memcpy(vcpu-&gt;arch.apic-&gt;regs, s-&gt;regs, sizeof *s);</span>
<span class="p_add">+	memcpy(vcpu-&gt;arch.apic-&gt;regs, s-&gt;regs, sizeof(*s));</span>
 	/* call kvm_apic_set_id() to put apic into apic_map */
 	kvm_apic_set_id(apic, kvm_apic_id(apic));
 	kvm_apic_set_version(vcpu);
<span class="p_header">diff --git a/arch/x86/kvm/x86.c b/arch/x86/kvm/x86.c</span>
<span class="p_header">index 4244c2baf57d..d08837260c78 100644</span>
<span class="p_header">--- a/arch/x86/kvm/x86.c</span>
<span class="p_header">+++ b/arch/x86/kvm/x86.c</span>
<span class="p_chunk">@@ -2491,7 +2491,7 @@</span> <span class="p_context"> static int msr_io(struct kvm_vcpu *vcpu, struct kvm_msrs __user *user_msrs,</span>
 	unsigned size;
 
 	r = -EFAULT;
<span class="p_del">-	if (copy_from_user(&amp;msrs, user_msrs, sizeof msrs))</span>
<span class="p_add">+	if (copy_from_user(&amp;msrs, user_msrs, sizeof(msrs)))</span>
 		goto out;
 
 	r = -E2BIG;
<span class="p_chunk">@@ -2637,11 +2637,11 @@</span> <span class="p_context"> long kvm_arch_dev_ioctl(struct file *filp,</span>
 		unsigned n;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;msr_list, user_msr_list, sizeof msr_list))</span>
<span class="p_add">+		if (copy_from_user(&amp;msr_list, user_msr_list, sizeof(msr_list)))</span>
 			goto out;
 		n = msr_list.nmsrs;
 		msr_list.nmsrs = num_msrs_to_save + num_emulated_msrs;
<span class="p_del">-		if (copy_to_user(user_msr_list, &amp;msr_list, sizeof msr_list))</span>
<span class="p_add">+		if (copy_to_user(user_msr_list, &amp;msr_list, sizeof(msr_list)))</span>
 			goto out;
 		r = -E2BIG;
 		if (n &lt; msr_list.nmsrs)
<span class="p_chunk">@@ -2663,7 +2663,7 @@</span> <span class="p_context"> long kvm_arch_dev_ioctl(struct file *filp,</span>
 		struct kvm_cpuid2 cpuid;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof cpuid))</span>
<span class="p_add">+		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof(cpuid)))</span>
 			goto out;
 
 		r = kvm_dev_ioctl_get_cpuid(&amp;cpuid, cpuid_arg-&gt;entries,
<span class="p_chunk">@@ -2672,7 +2672,7 @@</span> <span class="p_context"> long kvm_arch_dev_ioctl(struct file *filp,</span>
 			goto out;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_to_user(cpuid_arg, &amp;cpuid, sizeof cpuid))</span>
<span class="p_add">+		if (copy_to_user(cpuid_arg, &amp;cpuid, sizeof(cpuid)))</span>
 			goto out;
 		r = 0;
 		break;
<span class="p_chunk">@@ -2682,7 +2682,7 @@</span> <span class="p_context"> long kvm_arch_dev_ioctl(struct file *filp,</span>
 
 		mce_cap = KVM_MCE_CAP_SUPPORTED;
 		r = -EFAULT;
<span class="p_del">-		if (copy_to_user(argp, &amp;mce_cap, sizeof mce_cap))</span>
<span class="p_add">+		if (copy_to_user(argp, &amp;mce_cap, sizeof(mce_cap)))</span>
 			goto out;
 		r = 0;
 		break;
<span class="p_chunk">@@ -2767,7 +2767,7 @@</span> <span class="p_context"> static int kvm_vcpu_ioctl_get_lapic(struct kvm_vcpu *vcpu,</span>
 	if (vcpu-&gt;arch.apicv_active)
 		kvm_x86_ops-&gt;sync_pir_to_irr(vcpu);
 
<span class="p_del">-	memcpy(s-&gt;regs, vcpu-&gt;arch.apic-&gt;regs, sizeof *s);</span>
<span class="p_add">+	memcpy(s-&gt;regs, vcpu-&gt;arch.apic-&gt;regs, sizeof(*s));</span>
 
 	return 0;
 }
<span class="p_chunk">@@ -3271,7 +3271,7 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		struct kvm_interrupt irq;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;irq, argp, sizeof irq))</span>
<span class="p_add">+		if (copy_from_user(&amp;irq, argp, sizeof(irq)))</span>
 			goto out;
 		r = kvm_vcpu_ioctl_interrupt(vcpu, &amp;irq);
 		break;
<span class="p_chunk">@@ -3289,7 +3289,7 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		struct kvm_cpuid cpuid;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof cpuid))</span>
<span class="p_add">+		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof(cpuid)))</span>
 			goto out;
 		r = kvm_vcpu_ioctl_set_cpuid(vcpu, &amp;cpuid, cpuid_arg-&gt;entries);
 		break;
<span class="p_chunk">@@ -3299,7 +3299,7 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		struct kvm_cpuid2 cpuid;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof cpuid))</span>
<span class="p_add">+		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof(cpuid)))</span>
 			goto out;
 		r = kvm_vcpu_ioctl_set_cpuid2(vcpu, &amp;cpuid,
 					      cpuid_arg-&gt;entries);
<span class="p_chunk">@@ -3310,14 +3310,14 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		struct kvm_cpuid2 cpuid;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof cpuid))</span>
<span class="p_add">+		if (copy_from_user(&amp;cpuid, cpuid_arg, sizeof(cpuid)))</span>
 			goto out;
 		r = kvm_vcpu_ioctl_get_cpuid2(vcpu, &amp;cpuid,
 					      cpuid_arg-&gt;entries);
 		if (r)
 			goto out;
 		r = -EFAULT;
<span class="p_del">-		if (copy_to_user(cpuid_arg, &amp;cpuid, sizeof cpuid))</span>
<span class="p_add">+		if (copy_to_user(cpuid_arg, &amp;cpuid, sizeof(cpuid)))</span>
 			goto out;
 		r = 0;
 		break;
<span class="p_chunk">@@ -3332,13 +3332,13 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		struct kvm_tpr_access_ctl tac;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;tac, argp, sizeof tac))</span>
<span class="p_add">+		if (copy_from_user(&amp;tac, argp, sizeof(tac)))</span>
 			goto out;
 		r = vcpu_ioctl_tpr_access_reporting(vcpu, &amp;tac);
 		if (r)
 			goto out;
 		r = -EFAULT;
<span class="p_del">-		if (copy_to_user(argp, &amp;tac, sizeof tac))</span>
<span class="p_add">+		if (copy_to_user(argp, &amp;tac, sizeof(tac)))</span>
 			goto out;
 		r = 0;
 		break;
<span class="p_chunk">@@ -3350,7 +3350,7 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		if (!lapic_in_kernel(vcpu))
 			goto out;
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;va, argp, sizeof va))</span>
<span class="p_add">+		if (copy_from_user(&amp;va, argp, sizeof(va)))</span>
 			goto out;
 		r = kvm_lapic_set_vapic_addr(vcpu, va.vapic_addr);
 		break;
<span class="p_chunk">@@ -3359,7 +3359,7 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		u64 mcg_cap;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;mcg_cap, argp, sizeof mcg_cap))</span>
<span class="p_add">+		if (copy_from_user(&amp;mcg_cap, argp, sizeof(mcg_cap)))</span>
 			goto out;
 		r = kvm_vcpu_ioctl_x86_setup_mce(vcpu, mcg_cap);
 		break;
<span class="p_chunk">@@ -3368,7 +3368,7 @@</span> <span class="p_context"> long kvm_arch_vcpu_ioctl(struct file *filp,</span>
 		struct kvm_x86_mce mce;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;mce, argp, sizeof mce))</span>
<span class="p_add">+		if (copy_from_user(&amp;mce, argp, sizeof(mce)))</span>
 			goto out;
 		r = kvm_vcpu_ioctl_x86_set_mce(vcpu, &amp;mce);
 		break;
<span class="p_chunk">@@ -3789,7 +3789,7 @@</span> <span class="p_context"> long kvm_arch_vm_ioctl(struct file *filp,</span>
 		u64 ident_addr;
 
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;ident_addr, argp, sizeof ident_addr))</span>
<span class="p_add">+		if (copy_from_user(&amp;ident_addr, argp, sizeof(ident_addr)))</span>
 			goto out;
 		r = kvm_vm_ioctl_set_identity_map_addr(kvm, ident_addr);
 		break;
<span class="p_chunk">@@ -3876,7 +3876,7 @@</span> <span class="p_context"> long kvm_arch_vm_ioctl(struct file *filp,</span>
 		if (r)
 			goto get_irqchip_out;
 		r = -EFAULT;
<span class="p_del">-		if (copy_to_user(argp, chip, sizeof *chip))</span>
<span class="p_add">+		if (copy_to_user(argp, chip, sizeof(*chip)))</span>
 			goto get_irqchip_out;
 		r = 0;
 	get_irqchip_out:
<span class="p_chunk">@@ -3922,7 +3922,7 @@</span> <span class="p_context"> long kvm_arch_vm_ioctl(struct file *filp,</span>
 	}
 	case KVM_SET_PIT: {
 		r = -EFAULT;
<span class="p_del">-		if (copy_from_user(&amp;u.ps, argp, sizeof u.ps))</span>
<span class="p_add">+		if (copy_from_user(&amp;u.ps, argp, sizeof(u.ps)))</span>
 			goto out;
 		r = -ENXIO;
 		if (!kvm-&gt;arch.vpit)
<span class="p_chunk">@@ -7013,7 +7013,7 @@</span> <span class="p_context"> int kvm_arch_vcpu_ioctl_get_sregs(struct kvm_vcpu *vcpu,</span>
 	sregs-&gt;efer = vcpu-&gt;arch.efer;
 	sregs-&gt;apic_base = kvm_get_apic_base(vcpu);
 
<span class="p_del">-	memset(sregs-&gt;interrupt_bitmap, 0, sizeof sregs-&gt;interrupt_bitmap);</span>
<span class="p_add">+	memset(sregs-&gt;interrupt_bitmap, 0, sizeof(sregs-&gt;interrupt_bitmap));</span>
 
 	if (vcpu-&gt;arch.interrupt.pending &amp;&amp; !vcpu-&gt;arch.interrupt.soft)
 		set_bit(vcpu-&gt;arch.interrupt.nr,
<span class="p_chunk">@@ -7241,7 +7241,7 @@</span> <span class="p_context"> int kvm_arch_vcpu_ioctl_get_fpu(struct kvm_vcpu *vcpu, struct kvm_fpu *fpu)</span>
 	fpu-&gt;last_opcode = fxsave-&gt;fop;
 	fpu-&gt;last_ip = fxsave-&gt;rip;
 	fpu-&gt;last_dp = fxsave-&gt;rdp;
<span class="p_del">-	memcpy(fpu-&gt;xmm, fxsave-&gt;xmm_space, sizeof fxsave-&gt;xmm_space);</span>
<span class="p_add">+	memcpy(fpu-&gt;xmm, fxsave-&gt;xmm_space, sizeof(fxsave-&gt;xmm_space));</span>
 
 	return 0;
 }
<span class="p_chunk">@@ -7258,7 +7258,7 @@</span> <span class="p_context"> int kvm_arch_vcpu_ioctl_set_fpu(struct kvm_vcpu *vcpu, struct kvm_fpu *fpu)</span>
 	fxsave-&gt;fop = fpu-&gt;last_opcode;
 	fxsave-&gt;rip = fpu-&gt;last_ip;
 	fxsave-&gt;rdp = fpu-&gt;last_dp;
<span class="p_del">-	memcpy(fxsave-&gt;xmm_space, fpu-&gt;xmm, sizeof fxsave-&gt;xmm_space);</span>
<span class="p_add">+	memcpy(fxsave-&gt;xmm_space, fpu-&gt;xmm, sizeof(fxsave-&gt;xmm_space));</span>
 
 	return 0;
 }
<span class="p_header">diff --git a/arch/x86/tools/relocs.c b/arch/x86/tools/relocs.c</span>
<span class="p_header">index 0c2fae8d929d..4a3b61ddecc5 100644</span>
<span class="p_header">--- a/arch/x86/tools/relocs.c</span>
<span class="p_header">+++ b/arch/x86/tools/relocs.c</span>
<span class="p_chunk">@@ -128,7 +128,7 @@</span> <span class="p_context"> static void regex_init(int use_real_mode)</span>
 			      REG_EXTENDED|REG_NOSUB);
 
 		if (err) {
<span class="p_del">-			regerror(err, &amp;sym_regex_c[i], errbuf, sizeof errbuf);</span>
<span class="p_add">+			regerror(err, &amp;sym_regex_c[i], errbuf, sizeof(errbuf));</span>
 			die(&quot;%s&quot;, errbuf);
 		}
         }
<span class="p_chunk">@@ -402,7 +402,7 @@</span> <span class="p_context"> static void read_shdrs(FILE *fp)</span>
 	}
 	for (i = 0; i &lt; ehdr.e_shnum; i++) {
 		struct section *sec = &amp;secs[i];
<span class="p_del">-		if (fread(&amp;shdr, sizeof shdr, 1, fp) != 1)</span>
<span class="p_add">+		if (fread(&amp;shdr, sizeof(shdr), 1, fp) != 1)</span>
 			die(&quot;Cannot read ELF section headers %d/%d: %s\n&quot;,
 			    i, ehdr.e_shnum, strerror(errno));
 		sec-&gt;shdr.sh_name      = elf_word_to_cpu(shdr.sh_name);
<span class="p_header">diff --git a/drivers/acpi/acpi_video.c b/drivers/acpi/acpi_video.c</span>
<span class="p_header">index a76f8be1bfe7..8bfac37f0acf 100644</span>
<span class="p_header">--- a/drivers/acpi/acpi_video.c</span>
<span class="p_header">+++ b/drivers/acpi/acpi_video.c</span>
<span class="p_chunk">@@ -811,7 +811,7 @@</span> <span class="p_context"> acpi_video_init_brightness(struct acpi_video_device *device)</span>
 		goto out;
 	}
 
<span class="p_del">-	br-&gt;levels = kmalloc((obj-&gt;package.count + 2) * sizeof *(br-&gt;levels),</span>
<span class="p_add">+	br-&gt;levels = kmalloc((obj-&gt;package.count + 2) * sizeof(*(br-&gt;levels)),</span>
 				GFP_KERNEL);
 	if (!br-&gt;levels) {
 		result = -ENOMEM;
<span class="p_header">diff --git a/drivers/ata/sata_promise.c b/drivers/ata/sata_promise.c</span>
<span class="p_header">index 0fa211e2831c..f65316db40ff 100644</span>
<span class="p_header">--- a/drivers/ata/sata_promise.c</span>
<span class="p_header">+++ b/drivers/ata/sata_promise.c</span>
<span class="p_chunk">@@ -1223,7 +1223,7 @@</span> <span class="p_context"> static int pdc_ata_init_one(struct pci_dev *pdev,</span>
 		dev_err(&amp;pdev-&gt;dev, &quot;failed to allocate host\n&quot;);
 		return -ENOMEM;
 	}
<span class="p_del">-	hpriv = devm_kzalloc(&amp;pdev-&gt;dev, sizeof *hpriv, GFP_KERNEL);</span>
<span class="p_add">+	hpriv = devm_kzalloc(&amp;pdev-&gt;dev, sizeof(*hpriv), GFP_KERNEL);</span>
 	if (!hpriv)
 		return -ENOMEM;
 	spin_lock_init(&amp;hpriv-&gt;hard_reset_lock);
<span class="p_header">diff --git a/drivers/atm/iphase.c b/drivers/atm/iphase.c</span>
<span class="p_header">index 7d00f2994738..108e6bdeda09 100644</span>
<span class="p_header">--- a/drivers/atm/iphase.c</span>
<span class="p_header">+++ b/drivers/atm/iphase.c</span>
<span class="p_chunk">@@ -2753,7 +2753,7 @@</span> <span class="p_context"> static int ia_ioctl(struct atm_dev *dev, unsigned int cmd, void __user *arg)</span>
       if (!dev-&gt;phy-&gt;ioctl) return -EINVAL;
       return dev-&gt;phy-&gt;ioctl(dev,cmd,arg);
    }
<span class="p_del">-   if (copy_from_user(&amp;ia_cmds, arg, sizeof ia_cmds)) return -EFAULT; </span>
<span class="p_add">+   if (copy_from_user(&amp;ia_cmds, arg, sizeof(ia_cmds))) return -EFAULT; </span>
    board = ia_cmds.status;
    if ((board &lt; 0) || (board &gt; iadev_count))
          board = 0;    
<span class="p_header">diff --git a/drivers/atm/lanai.c b/drivers/atm/lanai.c</span>
<span class="p_header">index ce43ae3e87b3..7bcae6680a34 100644</span>
<span class="p_header">--- a/drivers/atm/lanai.c</span>
<span class="p_header">+++ b/drivers/atm/lanai.c</span>
<span class="p_chunk">@@ -2127,7 +2127,7 @@</span> <span class="p_context"> static int lanai_dev_open(struct atm_dev *atmdev)</span>
 	lanai-&gt;nbound = 0;
 #endif
 	lanai-&gt;cbrvcc = NULL;
<span class="p_del">-	memset(&amp;lanai-&gt;stats, 0, sizeof lanai-&gt;stats);</span>
<span class="p_add">+	memset(&amp;lanai-&gt;stats, 0, sizeof(lanai-&gt;stats));</span>
 	spin_lock_init(&amp;lanai-&gt;endtxlock);
 	spin_lock_init(&amp;lanai-&gt;servicelock);
 	atmdev-&gt;ci_range.vpi_bits = 0;
<span class="p_header">diff --git a/drivers/base/isa.c b/drivers/base/isa.c</span>
<span class="p_header">index 91dba65d7264..536127790a4e 100644</span>
<span class="p_header">--- a/drivers/base/isa.c</span>
<span class="p_header">+++ b/drivers/base/isa.c</span>
<span class="p_chunk">@@ -126,7 +126,7 @@</span> <span class="p_context"> int isa_register_driver(struct isa_driver *isa_driver, unsigned int ndev)</span>
 	for (id = 0; id &lt; ndev; id++) {
 		struct isa_dev *isa_dev;
 
<span class="p_del">-		isa_dev = kzalloc(sizeof *isa_dev, GFP_KERNEL);</span>
<span class="p_add">+		isa_dev = kzalloc(sizeof(*isa_dev), GFP_KERNEL);</span>
 		if (!isa_dev) {
 			error = -ENOMEM;
 			break;
<span class="p_header">diff --git a/drivers/base/power/sysfs.c b/drivers/base/power/sysfs.c</span>
<span class="p_header">index a7b46798c81d..77990d414b9f 100644</span>
<span class="p_header">--- a/drivers/base/power/sysfs.c</span>
<span class="p_header">+++ b/drivers/base/power/sysfs.c</span>
<span class="p_chunk">@@ -115,9 +115,9 @@</span> <span class="p_context"> static ssize_t control_store(struct device * dev, struct device_attribute *attr,</span>
 	if (cp)
 		len = cp - buf;
 	device_lock(dev);
<span class="p_del">-	if (len == sizeof ctrl_auto - 1 &amp;&amp; strncmp(buf, ctrl_auto, len) == 0)</span>
<span class="p_add">+	if (len == sizeof(ctrl_auto) - 1 &amp;&amp; strncmp(buf, ctrl_auto, len) == 0)</span>
 		pm_runtime_allow(dev);
<span class="p_del">-	else if (len == sizeof ctrl_on - 1 &amp;&amp; strncmp(buf, ctrl_on, len) == 0)</span>
<span class="p_add">+	else if (len == sizeof(ctrl_on) - 1 &amp;&amp; strncmp(buf, ctrl_on, len) == 0)</span>
 		pm_runtime_forbid(dev);
 	else
 		n = -EINVAL;
<span class="p_chunk">@@ -355,11 +355,11 @@</span> <span class="p_context"> wake_store(struct device * dev, struct device_attribute *attr,</span>
 	cp = memchr(buf, &#39;\n&#39;, n);
 	if (cp)
 		len = cp - buf;
<span class="p_del">-	if (len == sizeof _enabled - 1</span>
<span class="p_del">-			&amp;&amp; strncmp(buf, _enabled, sizeof _enabled - 1) == 0)</span>
<span class="p_add">+	if (len == sizeof(_enabled) - 1</span>
<span class="p_add">+			&amp;&amp; strncmp(buf, _enabled, sizeof(_enabled) - 1) == 0)</span>
 		device_set_wakeup_enable(dev, 1);
<span class="p_del">-	else if (len == sizeof _disabled - 1</span>
<span class="p_del">-			&amp;&amp; strncmp(buf, _disabled, sizeof _disabled - 1) == 0)</span>
<span class="p_add">+	else if (len == sizeof(_disabled) - 1</span>
<span class="p_add">+			&amp;&amp; strncmp(buf, _disabled, sizeof(_disabled) - 1) == 0)</span>
 		device_set_wakeup_enable(dev, 0);
 	else
 		return -EINVAL;
<span class="p_chunk">@@ -576,9 +576,9 @@</span> <span class="p_context"> static ssize_t async_store(struct device *dev, struct device_attribute *attr,</span>
 	cp = memchr(buf, &#39;\n&#39;, n);
 	if (cp)
 		len = cp - buf;
<span class="p_del">-	if (len == sizeof _enabled - 1 &amp;&amp; strncmp(buf, _enabled, len) == 0)</span>
<span class="p_add">+	if (len == sizeof(_enabled) - 1 &amp;&amp; strncmp(buf, _enabled, len) == 0)</span>
 		device_enable_async_suspend(dev);
<span class="p_del">-	else if (len == sizeof _disabled - 1 &amp;&amp;</span>
<span class="p_add">+	else if (len == sizeof(_disabled) - 1 &amp;&amp;</span>
 		 strncmp(buf, _disabled, len) == 0)
 		device_disable_async_suspend(dev);
 	else
<span class="p_header">diff --git a/drivers/base/regmap/regcache-lzo.c b/drivers/base/regmap/regcache-lzo.c</span>
<span class="p_header">index 6f77d7319fc6..0e675ed1532e 100644</span>
<span class="p_header">--- a/drivers/base/regmap/regcache-lzo.c</span>
<span class="p_header">+++ b/drivers/base/regmap/regcache-lzo.c</span>
<span class="p_chunk">@@ -162,7 +162,7 @@</span> <span class="p_context"> static int regcache_lzo_init(struct regmap *map)</span>
 
 	/* allocate the lzo blocks and initialize them */
 	for (i = 0; i &lt; blkcount; i++) {
<span class="p_del">-		lzo_blocks[i] = kzalloc(sizeof **lzo_blocks,</span>
<span class="p_add">+		lzo_blocks[i] = kzalloc(sizeof(**lzo_blocks),</span>
 					GFP_KERNEL);
 		if (!lzo_blocks[i]) {
 			kfree(sync_bmp);
<span class="p_header">diff --git a/drivers/base/regmap/regcache-rbtree.c b/drivers/base/regmap/regcache-rbtree.c</span>
<span class="p_header">index aa56af87d941..47ca3d82976e 100644</span>
<span class="p_header">--- a/drivers/base/regmap/regcache-rbtree.c</span>
<span class="p_header">+++ b/drivers/base/regmap/regcache-rbtree.c</span>
<span class="p_chunk">@@ -202,7 +202,7 @@</span> <span class="p_context"> static int regcache_rbtree_init(struct regmap *map)</span>
 	int i;
 	int ret;
 
<span class="p_del">-	map-&gt;cache = kmalloc(sizeof *rbtree_ctx, GFP_KERNEL);</span>
<span class="p_add">+	map-&gt;cache = kmalloc(sizeof(*rbtree_ctx), GFP_KERNEL);</span>
 	if (!map-&gt;cache)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/block/aoe/aoeblk.c b/drivers/block/aoe/aoeblk.c</span>
<span class="p_header">index dd73e1ff1759..38305392403d 100644</span>
<span class="p_header">--- a/drivers/block/aoe/aoeblk.c</span>
<span class="p_header">+++ b/drivers/block/aoe/aoeblk.c</span>
<span class="p_chunk">@@ -65,7 +65,7 @@</span> <span class="p_context"> static ssize_t aoedisk_show_netif(struct device *dev,</span>
 	struct aoeif *ifp, *e;
 	char *p;
 
<span class="p_del">-	memset(nds, 0, sizeof nds);</span>
<span class="p_add">+	memset(nds, 0, sizeof(nds));</span>
 	nd = nds;
 	ne = nd + ARRAY_SIZE(nds);
 	t = d-&gt;targets;
<span class="p_chunk">@@ -409,7 +409,7 @@</span> <span class="p_context"> aoeblk_gdalloc(void *vp)</span>
 	gd-&gt;fops = &amp;aoe_bdops;
 	gd-&gt;private_data = d;
 	set_capacity(gd, d-&gt;ssize);
<span class="p_del">-	snprintf(gd-&gt;disk_name, sizeof gd-&gt;disk_name, &quot;etherd/e%ld.%d&quot;,</span>
<span class="p_add">+	snprintf(gd-&gt;disk_name, sizeof(gd-&gt;disk_name), &quot;etherd/e%ld.%d&quot;,</span>
 		d-&gt;aoemajor, d-&gt;aoeminor);
 
 	d-&gt;flags &amp;= ~DEVFL_GDALLOC;
<span class="p_header">diff --git a/drivers/block/aoe/aoechr.c b/drivers/block/aoe/aoechr.c</span>
<span class="p_header">index ab41be625a53..9c52dec327df 100644</span>
<span class="p_header">--- a/drivers/block/aoe/aoechr.c</span>
<span class="p_header">+++ b/drivers/block/aoe/aoechr.c</span>
<span class="p_chunk">@@ -85,9 +85,9 @@</span> <span class="p_context"> revalidate(const char __user *str, size_t size)</span>
 	struct sk_buff *skb;
 	char buf[16];
 
<span class="p_del">-	if (size &gt;= sizeof buf)</span>
<span class="p_add">+	if (size &gt;= sizeof(buf))</span>
 		return -EINVAL;
<span class="p_del">-	buf[sizeof buf - 1] = &#39;\0&#39;;</span>
<span class="p_add">+	buf[sizeof(buf) - 1] = &#39;\0&#39;;</span>
 	if (copy_from_user(buf, str, size))
 		return -EFAULT;
 
<span class="p_header">diff --git a/drivers/block/aoe/aoecmd.c b/drivers/block/aoe/aoecmd.c</span>
<span class="p_header">index d048d2009e89..84553e3b27c5 100644</span>
<span class="p_header">--- a/drivers/block/aoe/aoecmd.c</span>
<span class="p_header">+++ b/drivers/block/aoe/aoecmd.c</span>
<span class="p_chunk">@@ -130,8 +130,8 @@</span> <span class="p_context"> aoehdr_atainit(struct aoedev *d, struct aoetgt *t, struct aoe_hdr *h)</span>
 {
 	u32 host_tag = newtag(d);
 
<span class="p_del">-	memcpy(h-&gt;src, t-&gt;ifp-&gt;nd-&gt;dev_addr, sizeof h-&gt;src);</span>
<span class="p_del">-	memcpy(h-&gt;dst, t-&gt;addr, sizeof h-&gt;dst);</span>
<span class="p_add">+	memcpy(h-&gt;src, t-&gt;ifp-&gt;nd-&gt;dev_addr, sizeof(h-&gt;src));</span>
<span class="p_add">+	memcpy(h-&gt;dst, t-&gt;addr, sizeof(h-&gt;dst));</span>
 	h-&gt;type = __constant_cpu_to_be16(ETH_P_AOE);
 	h-&gt;verfl = AOE_HVER;
 	h-&gt;major = cpu_to_be16(d-&gt;aoemajor);
<span class="p_chunk">@@ -424,19 +424,19 @@</span> <span class="p_context"> aoecmd_cfg_pkts(ushort aoemajor, unsigned char aoeminor, struct sk_buff_head *qu</span>
 		if (!is_aoe_netif(ifp))
 			goto cont;
 
<span class="p_del">-		skb = new_skb(sizeof *h + sizeof *ch);</span>
<span class="p_add">+		skb = new_skb(sizeof(*h) + sizeof(*ch));</span>
 		if (skb == NULL) {
 			printk(KERN_INFO &quot;aoe: skb alloc failure\n&quot;);
 			goto cont;
 		}
<span class="p_del">-		skb_put(skb, sizeof *h + sizeof *ch);</span>
<span class="p_add">+		skb_put(skb, sizeof(*h) + sizeof(*ch));</span>
 		skb-&gt;dev = ifp;
 		__skb_queue_tail(queue, skb);
 		h = (struct aoe_hdr *) skb_mac_header(skb);
<span class="p_del">-		memset(h, 0, sizeof *h + sizeof *ch);</span>
<span class="p_add">+		memset(h, 0, sizeof(*h) + sizeof(*ch));</span>
 
<span class="p_del">-		memset(h-&gt;dst, 0xff, sizeof h-&gt;dst);</span>
<span class="p_del">-		memcpy(h-&gt;src, ifp-&gt;dev_addr, sizeof h-&gt;src);</span>
<span class="p_add">+		memset(h-&gt;dst, 0xff, sizeof(h-&gt;dst));</span>
<span class="p_add">+		memcpy(h-&gt;src, ifp-&gt;dev_addr, sizeof(h-&gt;src));</span>
 		h-&gt;type = __constant_cpu_to_be16(ETH_P_AOE);
 		h-&gt;verfl = AOE_HVER;
 		h-&gt;major = cpu_to_be16(aoemajor);
<span class="p_chunk">@@ -482,8 +482,8 @@</span> <span class="p_context"> resend(struct aoedev *d, struct frame *f)</span>
 	f-&gt;tag = n;
 	fhash(f);
 	h-&gt;tag = cpu_to_be32(n);
<span class="p_del">-	memcpy(h-&gt;dst, t-&gt;addr, sizeof h-&gt;dst);</span>
<span class="p_del">-	memcpy(h-&gt;src, t-&gt;ifp-&gt;nd-&gt;dev_addr, sizeof h-&gt;src);</span>
<span class="p_add">+	memcpy(h-&gt;dst, t-&gt;addr, sizeof(h-&gt;dst));</span>
<span class="p_add">+	memcpy(h-&gt;src, t-&gt;ifp-&gt;nd-&gt;dev_addr, sizeof(h-&gt;src));</span>
 
 	skb-&gt;dev = t-&gt;ifp-&gt;nd;
 	skb = skb_clone(skb, GFP_ATOMIC);
<span class="p_chunk">@@ -562,7 +562,7 @@</span> <span class="p_context"> ejectif(struct aoetgt *t, struct aoeif *ifp)</span>
 
 	nd = ifp-&gt;nd;
 	e = t-&gt;ifs + NAOEIFS - 1;
<span class="p_del">-	n = (e - ifp) * sizeof *ifp;</span>
<span class="p_add">+	n = (e - ifp) * sizeof(*ifp);</span>
 	memmove(ifp, ifp+1, n);
 	e-&gt;nd = NULL;
 	dev_put(nd);
<span class="p_chunk">@@ -1374,7 +1374,7 @@</span> <span class="p_context"> aoecmd_ata_rsp(struct sk_buff *skb)</span>
 	aoemajor = be16_to_cpu(get_unaligned(&amp;h-&gt;major));
 	d = aoedev_by_aoeaddr(aoemajor, h-&gt;minor, 0);
 	if (d == NULL) {
<span class="p_del">-		snprintf(ebuf, sizeof ebuf, &quot;aoecmd_ata_rsp: ata response &quot;</span>
<span class="p_add">+		snprintf(ebuf, sizeof(ebuf), &quot;aoecmd_ata_rsp: ata response &quot;</span>
 			&quot;for unknown device %d.%d\n&quot;,
 			aoemajor, h-&gt;minor);
 		aoechr_error(ebuf);
<span class="p_chunk">@@ -1453,7 +1453,7 @@</span> <span class="p_context"> aoecmd_ata_id(struct aoedev *d)</span>
 	skb = f-&gt;skb;
 	h = (struct aoe_hdr *) skb_mac_header(skb);
 	ah = (struct aoe_atahdr *) (h+1);
<span class="p_del">-	skb_put(skb, sizeof *h + sizeof *ah);</span>
<span class="p_add">+	skb_put(skb, sizeof(*h) + sizeof(*ah));</span>
 	memset(h, 0, skb-&gt;len);
 	f-&gt;tag = aoehdr_atainit(d, t, h);
 	fhash(f);
<span class="p_chunk">@@ -1521,7 +1521,7 @@</span> <span class="p_context"> addtgt(struct aoedev *d, char *addr, ulong nframes)</span>
 		goto nomem;
 	t-&gt;nframes = nframes;
 	t-&gt;d = d;
<span class="p_del">-	memcpy(t-&gt;addr, addr, sizeof t-&gt;addr);</span>
<span class="p_add">+	memcpy(t-&gt;addr, addr, sizeof(t-&gt;addr));</span>
 	t-&gt;ifp = t-&gt;ifs;
 	aoecmd_wreset(t);
 	t-&gt;maxout = t-&gt;nframes / 2;
<span class="p_header">diff --git a/drivers/block/aoe/aoedev.c b/drivers/block/aoe/aoedev.c</span>
<span class="p_header">index ffd1947500c6..0c55bd501875 100644</span>
<span class="p_header">--- a/drivers/block/aoe/aoedev.c</span>
<span class="p_header">+++ b/drivers/block/aoe/aoedev.c</span>
<span class="p_chunk">@@ -313,8 +313,8 @@</span> <span class="p_context"> flush(const char __user *str, size_t cnt, int exiting)</span>
 	skipflags = DEVFL_GDALLOC | DEVFL_NEWSIZE | DEVFL_TKILL;
 
 	if (!exiting &amp;&amp; cnt &gt;= 3) {
<span class="p_del">-		if (cnt &gt; sizeof buf)</span>
<span class="p_del">-			cnt = sizeof buf;</span>
<span class="p_add">+		if (cnt &gt; sizeof(buf))</span>
<span class="p_add">+			cnt = sizeof(buf);</span>
 		if (copy_from_user(buf, str, cnt))
 			return -EFAULT;
 		all = !strncmp(buf, &quot;all&quot;, 3);
<span class="p_chunk">@@ -453,7 +453,7 @@</span> <span class="p_context"> aoedev_by_aoeaddr(ulong maj, int min, int do_alloc)</span>
 		}
 	if (d || !do_alloc || minor_get(&amp;sysminor, maj, min) &lt; 0)
 		goto out;
<span class="p_del">-	d = kcalloc(1, sizeof *d, GFP_ATOMIC);</span>
<span class="p_add">+	d = kcalloc(1, sizeof(*d), GFP_ATOMIC);</span>
 	if (!d)
 		goto out;
 	d-&gt;targets = kcalloc(NTARGETS, sizeof(*d-&gt;targets), GFP_ATOMIC);
<span class="p_header">diff --git a/drivers/block/cciss.c b/drivers/block/cciss.c</span>
<span class="p_header">index 63c2064689f8..88a849179209 100644</span>
<span class="p_header">--- a/drivers/block/cciss.c</span>
<span class="p_header">+++ b/drivers/block/cciss.c</span>
<span class="p_chunk">@@ -519,7 +519,7 @@</span> <span class="p_context"> cciss_proc_write(struct file *file, const char __user *buf,</span>
 		return PTR_ERR(buffer);
 
 #ifdef CONFIG_CISS_SCSI_TAPE
<span class="p_del">-	if (strncmp(ENGAGE_SCSI, buffer, sizeof ENGAGE_SCSI - 1) == 0) {</span>
<span class="p_add">+	if (strncmp(ENGAGE_SCSI, buffer, sizeof(ENGAGE_SCSI) - 1) == 0) {</span>
 		struct seq_file *seq = file-&gt;private_data;
 		ctlr_info_t *h = seq-&gt;private;
 
<span class="p_header">diff --git a/drivers/char/genrtc.c b/drivers/char/genrtc.c</span>
<span class="p_header">index 4f943759d376..d27a7f10df5e 100644</span>
<span class="p_header">--- a/drivers/char/genrtc.c</span>
<span class="p_header">+++ b/drivers/char/genrtc.c</span>
<span class="p_chunk">@@ -276,7 +276,7 @@</span> <span class="p_context"> static int gen_rtc_ioctl(struct file *file,</span>
 	    if (get_rtc_pll(&amp;pll))
 	 	    return -EINVAL;
 	    else
<span class="p_del">-		    return copy_to_user(argp, &amp;pll, sizeof pll) ? -EFAULT : 0;</span>
<span class="p_add">+		    return copy_to_user(argp, &amp;pll, sizeof(pll)) ? -EFAULT : 0;</span>
 
 	case RTC_PLL_SET:
 		if (!capable(CAP_SYS_TIME))
<span class="p_header">diff --git a/drivers/char/rtc.c b/drivers/char/rtc.c</span>
<span class="p_header">index 35259961cc38..11a3005926d0 100644</span>
<span class="p_header">--- a/drivers/char/rtc.c</span>
<span class="p_header">+++ b/drivers/char/rtc.c</span>
<span class="p_chunk">@@ -712,7 +712,7 @@</span> <span class="p_context"> static int rtc_do_ioctl(unsigned int cmd, unsigned long arg, int kernel)</span>
 		return -ENOTTY;
 	}
 	return copy_to_user((void __user *)arg,
<span class="p_del">-			    &amp;wtime, sizeof wtime) ? -EFAULT : 0;</span>
<span class="p_add">+			    &amp;wtime, sizeof(wtime)) ? -EFAULT : 0;</span>
 }
 
 static long rtc_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
<span class="p_header">diff --git a/drivers/crypto/nx/nx-aes-xcbc.c b/drivers/crypto/nx/nx-aes-xcbc.c</span>
<span class="p_header">index c2f7d4befb55..871d69336af7 100644</span>
<span class="p_header">--- a/drivers/crypto/nx/nx-aes-xcbc.c</span>
<span class="p_header">+++ b/drivers/crypto/nx/nx-aes-xcbc.c</span>
<span class="p_chunk">@@ -171,7 +171,7 @@</span> <span class="p_context"> static int nx_xcbc_init(struct shash_desc *desc)</span>
 {
 	struct xcbc_state *sctx = shash_desc_ctx(desc);
 
<span class="p_del">-	memset(sctx, 0, sizeof *sctx);</span>
<span class="p_add">+	memset(sctx, 0, sizeof(*sctx));</span>
 
 	return 0;
 }
<span class="p_header">diff --git a/drivers/crypto/nx/nx-sha256.c b/drivers/crypto/nx/nx-sha256.c</span>
<span class="p_header">index becb738c897b..5c7fdbaba180 100644</span>
<span class="p_header">--- a/drivers/crypto/nx/nx-sha256.c</span>
<span class="p_header">+++ b/drivers/crypto/nx/nx-sha256.c</span>
<span class="p_chunk">@@ -50,7 +50,7 @@</span> <span class="p_context"> static int nx_crypto_ctx_sha256_init(struct crypto_tfm *tfm)</span>
 static int nx_sha256_init(struct shash_desc *desc) {
 	struct sha256_state *sctx = shash_desc_ctx(desc);
 
<span class="p_del">-	memset(sctx, 0, sizeof *sctx);</span>
<span class="p_add">+	memset(sctx, 0, sizeof(*sctx));</span>
 
 	sctx-&gt;state[0] = __cpu_to_be32(SHA256_H0);
 	sctx-&gt;state[1] = __cpu_to_be32(SHA256_H1);
<span class="p_header">diff --git a/drivers/crypto/nx/nx-sha512.c b/drivers/crypto/nx/nx-sha512.c</span>
<span class="p_header">index b6e183d58d73..af2a2c0010ee 100644</span>
<span class="p_header">--- a/drivers/crypto/nx/nx-sha512.c</span>
<span class="p_header">+++ b/drivers/crypto/nx/nx-sha512.c</span>
<span class="p_chunk">@@ -50,7 +50,7 @@</span> <span class="p_context"> static int nx_sha512_init(struct shash_desc *desc)</span>
 {
 	struct sha512_state *sctx = shash_desc_ctx(desc);
 
<span class="p_del">-	memset(sctx, 0, sizeof *sctx);</span>
<span class="p_add">+	memset(sctx, 0, sizeof(*sctx));</span>
 
 	sctx-&gt;state[0] = __cpu_to_be64(SHA512_H0);
 	sctx-&gt;state[1] = __cpu_to_be64(SHA512_H1);
<span class="p_header">diff --git a/drivers/firewire/nosy.c b/drivers/firewire/nosy.c</span>
<span class="p_header">index 76b2d390f6ec..d82102aca91b 100644</span>
<span class="p_header">--- a/drivers/firewire/nosy.c</span>
<span class="p_header">+++ b/drivers/firewire/nosy.c</span>
<span class="p_chunk">@@ -289,7 +289,7 @@</span> <span class="p_context"> nosy_open(struct inode *inode, struct file *file)</span>
 	if (lynx == NULL)
 		return -ENODEV;
 
<span class="p_del">-	client = kmalloc(sizeof *client, GFP_KERNEL);</span>
<span class="p_add">+	client = kmalloc(sizeof(*client), GFP_KERNEL);</span>
 	if (client == NULL)
 		goto fail;
 
<span class="p_chunk">@@ -366,7 +366,7 @@</span> <span class="p_context"> nosy_ioctl(struct file *file, unsigned int cmd, unsigned long arg)</span>
 		stats.lost_packet_count  = client-&gt;buffer.lost_packet_count;
 		spin_unlock_irq(client_list_lock);
 
<span class="p_del">-		if (copy_to_user((void __user *) arg, &amp;stats, sizeof stats))</span>
<span class="p_add">+		if (copy_to_user((void __user *) arg, &amp;stats, sizeof(stats)))</span>
 			return -EFAULT;
 		else
 			return 0;
<span class="p_chunk">@@ -547,7 +547,7 @@</span> <span class="p_context"> add_card(struct pci_dev *dev, const struct pci_device_id *unused)</span>
 	}
 	pci_set_master(dev);
 
<span class="p_del">-	lynx = kzalloc(sizeof *lynx, GFP_KERNEL);</span>
<span class="p_add">+	lynx = kzalloc(sizeof(*lynx), GFP_KERNEL);</span>
 	if (lynx == NULL) {
 		dev_err(&amp;dev-&gt;dev, &quot;Failed to allocate control structure\n&quot;);
 		ret = -ENOMEM;
<span class="p_header">diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c</span>
<span class="p_header">index acd066d0a805..5ebb5106b535 100644</span>
<span class="p_header">--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c</span>
<span class="p_header">+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_display.c</span>
<span class="p_chunk">@@ -169,7 +169,7 @@</span> <span class="p_context"> int amdgpu_crtc_page_flip(struct drm_crtc *crtc,</span>
 	u64 base;
 	int i, r;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (work == NULL)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/gpu/drm/drm_atomic.c b/drivers/gpu/drm/drm_atomic.c</span>
<span class="p_header">index 3f74193885f1..44adf9264ef7 100644</span>
<span class="p_header">--- a/drivers/gpu/drm/drm_atomic.c</span>
<span class="p_header">+++ b/drivers/gpu/drm/drm_atomic.c</span>
<span class="p_chunk">@@ -1350,23 +1350,23 @@</span> <span class="p_context"> static struct drm_pending_vblank_event *create_vblank_event(</span>
 	unsigned long flags;
 
 	spin_lock_irqsave(&amp;dev-&gt;event_lock, flags);
<span class="p_del">-	if (file_priv-&gt;event_space &lt; sizeof e-&gt;event) {</span>
<span class="p_add">+	if (file_priv-&gt;event_space &lt; sizeof(e-&gt;event)) {</span>
 		spin_unlock_irqrestore(&amp;dev-&gt;event_lock, flags);
 		goto out;
 	}
<span class="p_del">-	file_priv-&gt;event_space -= sizeof e-&gt;event;</span>
<span class="p_add">+	file_priv-&gt;event_space -= sizeof(e-&gt;event);</span>
 	spin_unlock_irqrestore(&amp;dev-&gt;event_lock, flags);
 
<span class="p_del">-	e = kzalloc(sizeof *e, GFP_KERNEL);</span>
<span class="p_add">+	e = kzalloc(sizeof(*e), GFP_KERNEL);</span>
 	if (e == NULL) {
 		spin_lock_irqsave(&amp;dev-&gt;event_lock, flags);
<span class="p_del">-		file_priv-&gt;event_space += sizeof e-&gt;event;</span>
<span class="p_add">+		file_priv-&gt;event_space += sizeof(e-&gt;event);</span>
 		spin_unlock_irqrestore(&amp;dev-&gt;event_lock, flags);
 		goto out;
 	}
 
 	e-&gt;event.base.type = DRM_EVENT_FLIP_COMPLETE;
<span class="p_del">-	e-&gt;event.base.length = sizeof e-&gt;event;</span>
<span class="p_add">+	e-&gt;event.base.length = sizeof(e-&gt;event);</span>
 	e-&gt;event.user_data = user_data;
 	e-&gt;base.event = &amp;e-&gt;event.base;
 	e-&gt;base.file_priv = file_priv;
<span class="p_chunk">@@ -1382,7 +1382,7 @@</span> <span class="p_context"> static void destroy_vblank_event(struct drm_device *dev,</span>
 	unsigned long flags;
 
 	spin_lock_irqsave(&amp;dev-&gt;event_lock, flags);
<span class="p_del">-	file_priv-&gt;event_space += sizeof e-&gt;event;</span>
<span class="p_add">+	file_priv-&gt;event_space += sizeof(e-&gt;event);</span>
 	spin_unlock_irqrestore(&amp;dev-&gt;event_lock, flags);
 	kfree(e);
 }
<span class="p_header">diff --git a/drivers/gpu/drm/i915/intel_display.c b/drivers/gpu/drm/i915/intel_display.c</span>
<span class="p_header">index 2f00828ccc6e..4d15d40636e9 100644</span>
<span class="p_header">--- a/drivers/gpu/drm/i915/intel_display.c</span>
<span class="p_header">+++ b/drivers/gpu/drm/i915/intel_display.c</span>
<span class="p_chunk">@@ -6504,7 +6504,7 @@</span> <span class="p_context"> struct intel_connector *intel_connector_alloc(void)</span>
 {
 	struct intel_connector *connector;
 
<span class="p_del">-	connector = kzalloc(sizeof *connector, GFP_KERNEL);</span>
<span class="p_add">+	connector = kzalloc(sizeof(*connector), GFP_KERNEL);</span>
 	if (!connector)
 		return NULL;
 
<span class="p_chunk">@@ -12336,7 +12336,7 @@</span> <span class="p_context"> clear_intel_crtc_state(struct intel_crtc_state *crtc_state)</span>
 	ddi_pll_sel = crtc_state-&gt;ddi_pll_sel;
 	force_thru = crtc_state-&gt;pch_pfit.force_thru;
 
<span class="p_del">-	memset(crtc_state, 0, sizeof *crtc_state);</span>
<span class="p_add">+	memset(crtc_state, 0, sizeof(*crtc_state));</span>
 
 	crtc_state-&gt;base = tmp_state;
 	crtc_state-&gt;scaler_state = scaler_state;
<span class="p_header">diff --git a/drivers/gpu/drm/radeon/radeon_display.c b/drivers/gpu/drm/radeon/radeon_display.c</span>
<span class="p_header">index 298ea1c453c3..ffd4438f2ed6 100644</span>
<span class="p_header">--- a/drivers/gpu/drm/radeon/radeon_display.c</span>
<span class="p_header">+++ b/drivers/gpu/drm/radeon/radeon_display.c</span>
<span class="p_chunk">@@ -502,7 +502,7 @@</span> <span class="p_context"> static int radeon_crtc_page_flip(struct drm_crtc *crtc,</span>
 	unsigned long flags;
 	int r;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (work == NULL)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/i2c/i2c-core.c b/drivers/i2c/i2c-core.c</span>
<span class="p_header">index ffe715d346d8..2158b03fd2f2 100644</span>
<span class="p_header">--- a/drivers/i2c/i2c-core.c</span>
<span class="p_header">+++ b/drivers/i2c/i2c-core.c</span>
<span class="p_chunk">@@ -1038,7 +1038,7 @@</span> <span class="p_context"> i2c_new_device(struct i2c_adapter *adap, struct i2c_board_info const *info)</span>
 	struct i2c_client	*client;
 	int			status;
 
<span class="p_del">-	client = kzalloc(sizeof *client, GFP_KERNEL);</span>
<span class="p_add">+	client = kzalloc(sizeof(*client), GFP_KERNEL);</span>
 	if (!client)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/iio/industrialio-trigger.c b/drivers/iio/industrialio-trigger.c</span>
<span class="p_header">index ae2806aafb72..0c93905d1604 100644</span>
<span class="p_header">--- a/drivers/iio/industrialio-trigger.c</span>
<span class="p_header">+++ b/drivers/iio/industrialio-trigger.c</span>
<span class="p_chunk">@@ -267,7 +267,7 @@</span> <span class="p_context"> struct iio_poll_func</span>
 	va_list vargs;
 	struct iio_poll_func *pf;
 
<span class="p_del">-	pf = kmalloc(sizeof *pf, GFP_KERNEL);</span>
<span class="p_add">+	pf = kmalloc(sizeof(*pf), GFP_KERNEL);</span>
 	if (pf == NULL)
 		return NULL;
 	va_start(vargs, fmt);
<span class="p_chunk">@@ -445,7 +445,7 @@</span> <span class="p_context"> static void iio_trig_subirqunmask(struct irq_data *d)</span>
 static struct iio_trigger *viio_trigger_alloc(const char *fmt, va_list vargs)
 {
 	struct iio_trigger *trig;
<span class="p_del">-	trig = kzalloc(sizeof *trig, GFP_KERNEL);</span>
<span class="p_add">+	trig = kzalloc(sizeof(*trig), GFP_KERNEL);</span>
 	if (trig) {
 		int i;
 		trig-&gt;dev.type = &amp;iio_trig_type;
<span class="p_header">diff --git a/drivers/infiniband/core/addr.c b/drivers/infiniband/core/addr.c</span>
<span class="p_header">index 337353d86cfa..68a633c5a1cf 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/addr.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/addr.c</span>
<span class="p_chunk">@@ -271,7 +271,7 @@</span> <span class="p_context"> static int addr6_resolve(struct sockaddr_in6 *src_in,</span>
 	struct rt6_info *rt;
 	int ret;
 
<span class="p_del">-	memset(&amp;fl6, 0, sizeof fl6);</span>
<span class="p_add">+	memset(&amp;fl6, 0, sizeof(fl6));</span>
 	fl6.daddr = dst_in-&gt;sin6_addr;
 	fl6.saddr = src_in-&gt;sin6_addr;
 	fl6.flowi6_oif = addr-&gt;bound_dev_if;
<span class="p_chunk">@@ -447,7 +447,7 @@</span> <span class="p_context"> int rdma_resolve_ip(struct rdma_addr_client *client,</span>
 	struct addr_req *req;
 	int ret = 0;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/infiniband/core/agent.c b/drivers/infiniband/core/agent.c</span>
<span class="p_header">index 4fa524dfb6cf..5a482c684278 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/agent.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/agent.c</span>
<span class="p_chunk">@@ -154,7 +154,7 @@</span> <span class="p_context"> int ib_agent_port_open(struct ib_device *device, int port_num)</span>
 	int ret;
 
 	/* Create new device info */
<span class="p_del">-	port_priv = kzalloc(sizeof *port_priv, GFP_KERNEL);</span>
<span class="p_add">+	port_priv = kzalloc(sizeof(*port_priv), GFP_KERNEL);</span>
 	if (!port_priv) {
 		dev_err(&amp;device-&gt;dev, &quot;No memory for ib_agent_port_private\n&quot;);
 		ret = -ENOMEM;
<span class="p_header">diff --git a/drivers/infiniband/core/cache.c b/drivers/infiniband/core/cache.c</span>
<span class="p_header">index 53343ffbff7a..164aadf02c10 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/cache.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/cache.c</span>
<span class="p_chunk">@@ -1037,7 +1037,7 @@</span> <span class="p_context"> static void ib_cache_update(struct ib_device *device,</span>
 
 	table = ports_table[port - rdma_start_port(device)];
 
<span class="p_del">-	tprops = kmalloc(sizeof *tprops, GFP_KERNEL);</span>
<span class="p_add">+	tprops = kmalloc(sizeof(*tprops), GFP_KERNEL);</span>
 	if (!tprops)
 		return;
 
<span class="p_chunk">@@ -1048,8 +1048,8 @@</span> <span class="p_context"> static void ib_cache_update(struct ib_device *device,</span>
 		goto err;
 	}
 
<span class="p_del">-	pkey_cache = kmalloc(sizeof *pkey_cache + tprops-&gt;pkey_tbl_len *</span>
<span class="p_del">-			     sizeof *pkey_cache-&gt;table, GFP_KERNEL);</span>
<span class="p_add">+	pkey_cache = kmalloc(sizeof(*pkey_cache) + tprops-&gt;pkey_tbl_len *</span>
<span class="p_add">+			     sizeof(*pkey_cache-&gt;table), GFP_KERNEL);</span>
 	if (!pkey_cache)
 		goto err;
 
<span class="p_chunk">@@ -1135,7 +1135,7 @@</span> <span class="p_context"> static void ib_cache_event(struct ib_event_handler *handler,</span>
 	    event-&gt;event == IB_EVENT_SM_CHANGE   ||
 	    event-&gt;event == IB_EVENT_CLIENT_REREGISTER ||
 	    event-&gt;event == IB_EVENT_GID_CHANGE) {
<span class="p_del">-		work = kmalloc(sizeof *work, GFP_ATOMIC);</span>
<span class="p_add">+		work = kmalloc(sizeof(*work), GFP_ATOMIC);</span>
 		if (work) {
 			INIT_WORK(&amp;work-&gt;work, ib_cache_task);
 			work-&gt;device   = event-&gt;device;
<span class="p_chunk">@@ -1153,9 +1153,9 @@</span> <span class="p_context"> int ib_cache_setup_one(struct ib_device *device)</span>
 	rwlock_init(&amp;device-&gt;cache.lock);
 
 	device-&gt;cache.pkey_cache =
<span class="p_del">-		kzalloc(sizeof *device-&gt;cache.pkey_cache *</span>
<span class="p_add">+		kzalloc(sizeof(*device-&gt;cache.pkey_cache) *</span>
 			(rdma_end_port(device) - rdma_start_port(device) + 1), GFP_KERNEL);
<span class="p_del">-	device-&gt;cache.lmc_cache = kmalloc(sizeof *device-&gt;cache.lmc_cache *</span>
<span class="p_add">+	device-&gt;cache.lmc_cache = kmalloc(sizeof(*device-&gt;cache.lmc_cache) *</span>
 					  (rdma_end_port(device) -
 					   rdma_start_port(device) + 1),
 					  GFP_KERNEL);
<span class="p_header">diff --git a/drivers/infiniband/core/cm.c b/drivers/infiniband/core/cm.c</span>
<span class="p_header">index 1d92e091e22e..be29d26f16a7 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/cm.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/cm.c</span>
<span class="p_chunk">@@ -630,7 +630,7 @@</span> <span class="p_context"> static struct cm_id_private * cm_insert_remote_sidr(struct cm_id_private</span>
 		else {
 			int cmp;
 			cmp = memcmp(port_gid, &amp;cur_cm_id_priv-&gt;av.dgid,
<span class="p_del">-				     sizeof *port_gid);</span>
<span class="p_add">+				     sizeof(*port_gid));</span>
 			if (cmp &lt; 0)
 				link = &amp;(*link)-&gt;rb_left;
 			else if (cmp &gt; 0)
<span class="p_chunk">@@ -649,7 +649,7 @@</span> <span class="p_context"> static void cm_reject_sidr_req(struct cm_id_private *cm_id_priv,</span>
 {
 	struct ib_cm_sidr_rep_param param;
 
<span class="p_del">-	memset(&amp;param, 0, sizeof param);</span>
<span class="p_add">+	memset(&amp;param, 0, sizeof(param));</span>
 	param.status = status;
 	ib_send_cm_sidr_rep(&amp;cm_id_priv-&gt;id, &amp;param);
 }
<span class="p_chunk">@@ -661,7 +661,7 @@</span> <span class="p_context"> struct ib_cm_id *ib_create_cm_id(struct ib_device *device,</span>
 	struct cm_id_private *cm_id_priv;
 	int ret;
 
<span class="p_del">-	cm_id_priv = kzalloc(sizeof *cm_id_priv, GFP_KERNEL);</span>
<span class="p_add">+	cm_id_priv = kzalloc(sizeof(*cm_id_priv), GFP_KERNEL);</span>
 	if (!cm_id_priv)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -748,7 +748,7 @@</span> <span class="p_context"> static struct cm_timewait_info * cm_create_timewait_info(__be32 local_id)</span>
 {
 	struct cm_timewait_info *timewait_info;
 
<span class="p_del">-	timewait_info = kzalloc(sizeof *timewait_info, GFP_KERNEL);</span>
<span class="p_add">+	timewait_info = kzalloc(sizeof(*timewait_info), GFP_KERNEL);</span>
 	if (!timewait_info)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -847,7 +847,7 @@</span> <span class="p_context"> static void cm_destroy_id(struct ib_cm_id *cm_id, int err)</span>
 		spin_unlock_irq(&amp;cm_id_priv-&gt;lock);
 		ib_send_cm_rej(cm_id, IB_CM_REJ_TIMEOUT,
 			       &amp;cm_id_priv-&gt;id.device-&gt;node_guid,
<span class="p_del">-			       sizeof cm_id_priv-&gt;id.device-&gt;node_guid,</span>
<span class="p_add">+			       sizeof(cm_id_priv-&gt;id.device-&gt;node_guid),</span>
 			       NULL, 0);
 		break;
 	case IB_CM_REQ_RCVD:
<span class="p_chunk">@@ -1293,7 +1293,7 @@</span> <span class="p_context"> static void cm_format_paths_from_req(struct cm_req_msg *req_msg,</span>
 					    struct ib_sa_path_rec *primary_path,
 					    struct ib_sa_path_rec *alt_path)
 {
<span class="p_del">-	memset(primary_path, 0, sizeof *primary_path);</span>
<span class="p_add">+	memset(primary_path, 0, sizeof(*primary_path));</span>
 	primary_path-&gt;dgid = req_msg-&gt;primary_local_gid;
 	primary_path-&gt;sgid = req_msg-&gt;primary_remote_gid;
 	primary_path-&gt;dlid = req_msg-&gt;primary_local_lid;
<span class="p_chunk">@@ -1315,7 +1315,7 @@</span> <span class="p_context"> static void cm_format_paths_from_req(struct cm_req_msg *req_msg,</span>
 	primary_path-&gt;service_id = req_msg-&gt;service_id;
 
 	if (req_msg-&gt;alt_local_lid) {
<span class="p_del">-		memset(alt_path, 0, sizeof *alt_path);</span>
<span class="p_add">+		memset(alt_path, 0, sizeof(*alt_path));</span>
 		alt_path-&gt;dgid = req_msg-&gt;alt_local_gid;
 		alt_path-&gt;sgid = req_msg-&gt;alt_remote_gid;
 		alt_path-&gt;dlid = req_msg-&gt;alt_local_lid;
<span class="p_chunk">@@ -1667,7 +1667,7 @@</span> <span class="p_context"> static int cm_req_handler(struct cm_work *work)</span>
 		}
 		work-&gt;path[0].gid_type = gid_attr.gid_type;
 		ib_send_cm_rej(cm_id, IB_CM_REJ_INVALID_GID,
<span class="p_del">-			       &amp;work-&gt;path[0].sgid, sizeof work-&gt;path[0].sgid,</span>
<span class="p_add">+			       &amp;work-&gt;path[0].sgid, sizeof(work-&gt;path[0].sgid),</span>
 			       NULL, 0);
 		goto rejected;
 	}
<span class="p_chunk">@@ -1676,7 +1676,7 @@</span> <span class="p_context"> static int cm_req_handler(struct cm_work *work)</span>
 		if (ret) {
 			ib_send_cm_rej(cm_id, IB_CM_REJ_INVALID_ALT_GID,
 				       &amp;work-&gt;path[0].sgid,
<span class="p_del">-				       sizeof work-&gt;path[0].sgid, NULL, 0);</span>
<span class="p_add">+				       sizeof(work-&gt;path[0].sgid), NULL, 0);</span>
 			goto rejected;
 		}
 	}
<span class="p_chunk">@@ -2762,7 +2762,7 @@</span> <span class="p_context"> static void cm_format_path_from_lap(struct cm_id_private *cm_id_priv,</span>
 				    struct ib_sa_path_rec *path,
 				    struct cm_lap_msg *lap_msg)
 {
<span class="p_del">-	memset(path, 0, sizeof *path);</span>
<span class="p_add">+	memset(path, 0, sizeof(*path));</span>
 	path-&gt;dgid = lap_msg-&gt;alt_local_gid;
 	path-&gt;sgid = lap_msg-&gt;alt_remote_gid;
 	path-&gt;dlid = lap_msg-&gt;alt_local_lid;
<span class="p_chunk">@@ -3263,7 +3263,7 @@</span> <span class="p_context"> static void cm_process_send_error(struct ib_mad_send_buf *msg,</span>
 	enum ib_cm_state state;
 	int ret;
 
<span class="p_del">-	memset(&amp;cm_event, 0, sizeof cm_event);</span>
<span class="p_add">+	memset(&amp;cm_event, 0, sizeof(cm_event));</span>
 	cm_id_priv = msg-&gt;context[0];
 
 	/* Discard old sends or ones without a response. */
<span class="p_chunk">@@ -3413,7 +3413,7 @@</span> <span class="p_context"> static int cm_establish(struct ib_cm_id *cm_id)</span>
 	if (!cm_dev)
 		return -ENODEV;
 
<span class="p_del">-	work = kmalloc(sizeof *work, GFP_ATOMIC);</span>
<span class="p_add">+	work = kmalloc(sizeof(*work), GFP_ATOMIC);</span>
 	if (!work)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -3560,7 +3560,7 @@</span> <span class="p_context"> static void cm_recv_handler(struct ib_mad_agent *mad_agent,</span>
 	atomic_long_inc(&amp;port-&gt;counter_group[CM_RECV].
 			counter[attr_id - CM_ATTR_ID_OFFSET]);
 
<span class="p_del">-	work = kmalloc(sizeof *work + sizeof(struct ib_sa_path_rec) * paths,</span>
<span class="p_add">+	work = kmalloc(sizeof(*work) + sizeof(struct ib_sa_path_rec) * paths,</span>
 		       GFP_KERNEL);
 	if (!work) {
 		ib_free_recv_mad(mad_recv_wc);
<span class="p_chunk">@@ -3880,7 +3880,7 @@</span> <span class="p_context"> static void cm_add_one(struct ib_device *ib_device)</span>
 		if (!rdma_cap_ib_cm(ib_device, i))
 			continue;
 
<span class="p_del">-		port = kzalloc(sizeof *port, GFP_KERNEL);</span>
<span class="p_add">+		port = kzalloc(sizeof(*port), GFP_KERNEL);</span>
 		if (!port)
 			goto error1;
 
<span class="p_chunk">@@ -3985,7 +3985,7 @@</span> <span class="p_context"> static int __init ib_cm_init(void)</span>
 {
 	int ret;
 
<span class="p_del">-	memset(&amp;cm, 0, sizeof cm);</span>
<span class="p_add">+	memset(&amp;cm, 0, sizeof(cm));</span>
 	INIT_LIST_HEAD(&amp;cm.device_list);
 	rwlock_init(&amp;cm.device_lock);
 	spin_lock_init(&amp;cm.lock);
<span class="p_chunk">@@ -3995,7 +3995,7 @@</span> <span class="p_context"> static int __init ib_cm_init(void)</span>
 	cm.remote_qp_table = RB_ROOT;
 	cm.remote_sidr_table = RB_ROOT;
 	idr_init(&amp;cm.local_id_table);
<span class="p_del">-	get_random_bytes(&amp;cm.random_id_operand, sizeof cm.random_id_operand);</span>
<span class="p_add">+	get_random_bytes(&amp;cm.random_id_operand, sizeof(cm.random_id_operand));</span>
 	INIT_LIST_HEAD(&amp;cm.timewait_list);
 
 	ret = class_register(&amp;cm_class);
<span class="p_header">diff --git a/drivers/infiniband/core/cma.c b/drivers/infiniband/core/cma.c</span>
<span class="p_header">index 9729639df407..ce3f32711f32 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/cma.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/cma.c</span>
<span class="p_chunk">@@ -595,7 +595,7 @@</span> <span class="p_context"> static int cma_acquire_dev(struct rdma_id_private *id_priv,</span>
 		    &amp;iboe_gid);
 
 	memcpy(&amp;gid, dev_addr-&gt;src_dev_addr +
<span class="p_del">-	       rdma_addr_gid_offset(dev_addr), sizeof gid);</span>
<span class="p_add">+	       rdma_addr_gid_offset(dev_addr), sizeof(gid));</span>
 
 	if (listen_id_priv) {
 		cma_dev = listen_id_priv-&gt;cma_dev;
<span class="p_chunk">@@ -697,7 +697,7 @@</span> <span class="p_context"> static int cma_resolve_ib_dev(struct rdma_id_private *id_priv)</span>
 found:
 	cma_attach_to_dev(id_priv, cma_dev);
 	addr = (struct sockaddr_ib *) cma_src_addr(id_priv);
<span class="p_del">-	memcpy(&amp;addr-&gt;sib_addr, &amp;sgid, sizeof sgid);</span>
<span class="p_add">+	memcpy(&amp;addr-&gt;sib_addr, &amp;sgid, sizeof(sgid));</span>
 	cma_translate_ib(addr, &amp;id_priv-&gt;id.route.addr.dev_addr);
 	return 0;
 }
<span class="p_chunk">@@ -726,7 +726,7 @@</span> <span class="p_context"> struct rdma_cm_id *rdma_create_id(struct net *net,</span>
 {
 	struct rdma_id_private *id_priv;
 
<span class="p_del">-	id_priv = kzalloc(sizeof *id_priv, GFP_KERNEL);</span>
<span class="p_add">+	id_priv = kzalloc(sizeof(*id_priv), GFP_KERNEL);</span>
 	if (!id_priv)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -743,7 +743,7 @@</span> <span class="p_context"> struct rdma_cm_id *rdma_create_id(struct net *net,</span>
 	mutex_init(&amp;id_priv-&gt;handler_mutex);
 	INIT_LIST_HEAD(&amp;id_priv-&gt;listen_list);
 	INIT_LIST_HEAD(&amp;id_priv-&gt;mc_list);
<span class="p_del">-	get_random_bytes(&amp;id_priv-&gt;seq_num, sizeof id_priv-&gt;seq_num);</span>
<span class="p_add">+	get_random_bytes(&amp;id_priv-&gt;seq_num, sizeof(id_priv-&gt;seq_num));</span>
 	id_priv-&gt;id.route.addr.dev_addr.net = get_net(net);
 
 	return &amp;id_priv-&gt;id;
<span class="p_chunk">@@ -1668,7 +1668,7 @@</span> <span class="p_context"> static int cma_ib_handler(struct ib_cm_id *cm_id, struct ib_cm_event *ib_event)</span>
 		cma_disable_callback(id_priv, RDMA_CM_DISCONNECT)))
 		return 0;
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	switch (ib_event-&gt;event) {
 	case IB_CM_REQ_ERROR:
 	case IB_CM_REP_ERROR:
<span class="p_chunk">@@ -1758,7 +1758,7 @@</span> <span class="p_context"> static struct rdma_id_private *cma_new_conn_id(struct rdma_cm_id *listen_id,</span>
 
 	rt = &amp;id-&gt;route;
 	rt-&gt;num_paths = ib_event-&gt;param.req_rcvd.alternate_path ? 2 : 1;
<span class="p_del">-	rt-&gt;path_rec = kmalloc(sizeof *rt-&gt;path_rec * rt-&gt;num_paths,</span>
<span class="p_add">+	rt-&gt;path_rec = kmalloc(sizeof(*rt-&gt;path_rec) * rt-&gt;num_paths,</span>
 			       GFP_KERNEL);
 	if (!rt-&gt;path_rec)
 		goto err;
<span class="p_chunk">@@ -1880,7 +1880,7 @@</span> <span class="p_context"> static int cma_req_handler(struct ib_cm_id *cm_id, struct ib_cm_event *ib_event)</span>
 		goto net_dev_put;
 	}
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	offset = cma_user_data_offset(listen_id);
 	event.event = RDMA_CM_EVENT_CONNECT_REQUEST;
 	if (ib_event-&gt;event == IB_CM_SIDR_REQ_RECEIVED) {
<span class="p_chunk">@@ -1970,7 +1970,7 @@</span> <span class="p_context"> static int cma_iw_handler(struct iw_cm_id *iw_id, struct iw_cm_event *iw_event)</span>
 	if (cma_disable_callback(id_priv, RDMA_CM_CONNECT))
 		return 0;
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	switch (iw_event-&gt;event) {
 	case IW_CM_EVENT_CLOSE:
 		event.event = RDMA_CM_EVENT_DISCONNECTED;
<span class="p_chunk">@@ -2072,7 +2072,7 @@</span> <span class="p_context"> static int iw_conn_req_handler(struct iw_cm_id *cm_id,</span>
 	memcpy(cma_src_addr(conn_id), laddr, rdma_addr_size(laddr));
 	memcpy(cma_dst_addr(conn_id), raddr, rdma_addr_size(raddr));
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	event.event = RDMA_CM_EVENT_CONNECT_REQUEST;
 	event.param.conn.private_data = iw_event-&gt;private_data;
 	event.param.conn.private_data_len = iw_event-&gt;private_data_len;
<span class="p_chunk">@@ -2240,7 +2240,7 @@</span> <span class="p_context"> static int cma_query_ib_route(struct rdma_id_private *id_priv, int timeout_ms,</span>
 	struct sockaddr_in6 *sin6;
 	struct sockaddr_ib *sib;
 
<span class="p_del">-	memset(&amp;path_rec, 0, sizeof path_rec);</span>
<span class="p_add">+	memset(&amp;path_rec, 0, sizeof(path_rec));</span>
 	rdma_addr_get_sgid(dev_addr, &amp;path_rec.sgid);
 	rdma_addr_get_dgid(dev_addr, &amp;path_rec.dgid);
 	path_rec.pkey = cpu_to_be16(ib_addr_get_pkey(dev_addr));
<span class="p_chunk">@@ -2330,7 +2330,7 @@</span> <span class="p_context"> static int cma_resolve_ib_route(struct rdma_id_private *id_priv, int timeout_ms)</span>
 	struct cma_work *work;
 	int ret;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2340,7 +2340,7 @@</span> <span class="p_context"> static int cma_resolve_ib_route(struct rdma_id_private *id_priv, int timeout_ms)</span>
 	work-&gt;new_state = RDMA_CM_ROUTE_RESOLVED;
 	work-&gt;event.event = RDMA_CM_EVENT_ROUTE_RESOLVED;
 
<span class="p_del">-	route-&gt;path_rec = kmalloc(sizeof *route-&gt;path_rec, GFP_KERNEL);</span>
<span class="p_add">+	route-&gt;path_rec = kmalloc(sizeof(*route-&gt;path_rec), GFP_KERNEL);</span>
 	if (!route-&gt;path_rec) {
 		ret = -ENOMEM;
 		goto err1;
<span class="p_chunk">@@ -2370,7 +2370,7 @@</span> <span class="p_context"> int rdma_set_ib_paths(struct rdma_cm_id *id,</span>
 			   RDMA_CM_ROUTE_RESOLVED))
 		return -EINVAL;
 
<span class="p_del">-	id-&gt;route.path_rec = kmemdup(path_rec, sizeof *path_rec * num_paths,</span>
<span class="p_add">+	id-&gt;route.path_rec = kmemdup(path_rec, sizeof(*path_rec) * num_paths,</span>
 				     GFP_KERNEL);
 	if (!id-&gt;route.path_rec) {
 		ret = -ENOMEM;
<span class="p_chunk">@@ -2389,7 +2389,7 @@</span> <span class="p_context"> static int cma_resolve_iw_route(struct rdma_id_private *id_priv, int timeout_ms)</span>
 {
 	struct cma_work *work;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2431,14 +2431,14 @@</span> <span class="p_context"> static int cma_resolve_iboe_route(struct rdma_id_private *id_priv)</span>
 	struct net_device *ndev = NULL;
 
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work)
 		return -ENOMEM;
 
 	work-&gt;id = id_priv;
 	INIT_WORK(&amp;work-&gt;work, cma_work_handler);
 
<span class="p_del">-	route-&gt;path_rec = kzalloc(sizeof *route-&gt;path_rec, GFP_KERNEL);</span>
<span class="p_add">+	route-&gt;path_rec = kzalloc(sizeof(*route-&gt;path_rec), GFP_KERNEL);</span>
 	if (!route-&gt;path_rec) {
 		ret = -ENOMEM;
 		goto err1;
<span class="p_chunk">@@ -2629,7 +2629,7 @@</span> <span class="p_context"> static void addr_handler(int status, struct sockaddr *src_addr,</span>
 	struct rdma_id_private *id_priv = context;
 	struct rdma_cm_event event;
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	mutex_lock(&amp;id_priv-&gt;handler_mutex);
 	if (!cma_comp_exch(id_priv, RDMA_CM_ADDR_QUERY,
 			   RDMA_CM_ADDR_RESOLVED))
<span class="p_chunk">@@ -2666,7 +2666,7 @@</span> <span class="p_context"> static int cma_resolve_loopback(struct rdma_id_private *id_priv)</span>
 	union ib_gid gid;
 	int ret;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2696,7 +2696,7 @@</span> <span class="p_context"> static int cma_resolve_ib_addr(struct rdma_id_private *id_priv)</span>
 	struct cma_work *work;
 	int ret;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2859,7 +2859,7 @@</span> <span class="p_context"> static int cma_alloc_port(enum rdma_port_space ps,</span>
 	struct rdma_bind_list *bind_list;
 	int ret;
 
<span class="p_del">-	bind_list = kzalloc(sizeof *bind_list, GFP_KERNEL);</span>
<span class="p_add">+	bind_list = kzalloc(sizeof(*bind_list), GFP_KERNEL);</span>
 	if (!bind_list)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -3210,7 +3210,7 @@</span> <span class="p_context"> static int cma_sidr_rep_handler(struct ib_cm_id *cm_id,</span>
 	if (cma_disable_callback(id_priv, RDMA_CM_CONNECT))
 		return 0;
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	switch (ib_event-&gt;event) {
 	case IB_CM_SIDR_REQ_ERROR:
 		event.event = RDMA_CM_EVENT_UNREACHABLE;
<span class="p_chunk">@@ -3266,7 +3266,7 @@</span> <span class="p_context"> static int cma_resolve_ib_udp(struct rdma_id_private *id_priv,</span>
 	void *private_data;
 	int offset, ret;
 
<span class="p_del">-	memset(&amp;req, 0, sizeof req);</span>
<span class="p_add">+	memset(&amp;req, 0, sizeof(req));</span>
 	offset = cma_user_data_offset(id_priv);
 	req.private_data_len = offset + conn_param-&gt;private_data_len;
 	if (req.private_data_len &lt; conn_param-&gt;private_data_len)
<span class="p_chunk">@@ -3323,7 +3323,7 @@</span> <span class="p_context"> static int cma_connect_ib(struct rdma_id_private *id_priv,</span>
 	struct ib_cm_id	*id;
 	int offset, ret;
 
<span class="p_del">-	memset(&amp;req, 0, sizeof req);</span>
<span class="p_add">+	memset(&amp;req, 0, sizeof(req));</span>
 	offset = cma_user_data_offset(id_priv);
 	req.private_data_len = offset + conn_param-&gt;private_data_len;
 	if (req.private_data_len &lt; conn_param-&gt;private_data_len)
<span class="p_chunk">@@ -3415,7 +3415,7 @@</span> <span class="p_context"> static int cma_connect_iw(struct rdma_id_private *id_priv,</span>
 		iw_param.private_data_len = conn_param-&gt;private_data_len;
 		iw_param.qpn = id_priv-&gt;id.qp ? id_priv-&gt;qp_num : conn_param-&gt;qp_num;
 	} else {
<span class="p_del">-		memset(&amp;iw_param, 0, sizeof iw_param);</span>
<span class="p_add">+		memset(&amp;iw_param, 0, sizeof(iw_param));</span>
 		iw_param.qpn = id_priv-&gt;qp_num;
 	}
 	ret = iw_cm_connect(cm_id, &amp;iw_param);
<span class="p_chunk">@@ -3474,7 +3474,7 @@</span> <span class="p_context"> static int cma_accept_ib(struct rdma_id_private *id_priv,</span>
 	if (ret)
 		goto out;
 
<span class="p_del">-	memset(&amp;rep, 0, sizeof rep);</span>
<span class="p_add">+	memset(&amp;rep, 0, sizeof(rep));</span>
 	rep.qp_num = id_priv-&gt;qp_num;
 	rep.starting_psn = id_priv-&gt;seq_num;
 	rep.private_data = conn_param-&gt;private_data;
<span class="p_chunk">@@ -3520,7 +3520,7 @@</span> <span class="p_context"> static int cma_send_sidr_rep(struct rdma_id_private *id_priv,</span>
 	struct ib_cm_sidr_rep_param rep;
 	int ret;
 
<span class="p_del">-	memset(&amp;rep, 0, sizeof rep);</span>
<span class="p_add">+	memset(&amp;rep, 0, sizeof(rep));</span>
 	rep.status = status;
 	if (status == IB_SIDR_SUCCESS) {
 		ret = cma_set_qkey(id_priv, qkey);
<span class="p_chunk">@@ -3679,7 +3679,7 @@</span> <span class="p_context"> static int cma_ib_mc_handler(int status, struct ib_sa_multicast *multicast)</span>
 					 be16_to_cpu(multicast-&gt;rec.mlid));
 	mutex_unlock(&amp;id_priv-&gt;qp_mutex);
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	event.status = status;
 	event.param.ud.private_data = mc-&gt;context;
 	if (!status) {
<span class="p_chunk">@@ -3724,14 +3724,14 @@</span> <span class="p_context"> static void cma_set_mgid(struct rdma_id_private *id_priv,</span>
 	struct sockaddr_in6 *sin6 = (struct sockaddr_in6 *) addr;
 
 	if (cma_any_addr(addr)) {
<span class="p_del">-		memset(mgid, 0, sizeof *mgid);</span>
<span class="p_add">+		memset(mgid, 0, sizeof(*mgid));</span>
 	} else if ((addr-&gt;sa_family == AF_INET6) &amp;&amp;
 		   ((be32_to_cpu(sin6-&gt;sin6_addr.s6_addr32[0]) &amp; 0xFFF0FFFF) ==
 								 0xFF10A01B)) {
 		/* IPv6 address is an SA assigned MGID. */
<span class="p_del">-		memcpy(mgid, &amp;sin6-&gt;sin6_addr, sizeof *mgid);</span>
<span class="p_add">+		memcpy(mgid, &amp;sin6-&gt;sin6_addr, sizeof(*mgid));</span>
 	} else if (addr-&gt;sa_family == AF_IB) {
<span class="p_del">-		memcpy(mgid, &amp;((struct sockaddr_ib *) addr)-&gt;sib_addr, sizeof *mgid);</span>
<span class="p_add">+		memcpy(mgid, &amp;((struct sockaddr_ib *) addr)-&gt;sib_addr, sizeof(*mgid));</span>
 	} else if ((addr-&gt;sa_family == AF_INET6)) {
 		ipv6_ib_mc_map(&amp;sin6-&gt;sin6_addr, dev_addr-&gt;broadcast, mc_map);
 		if (id_priv-&gt;id.ps == RDMA_PS_UDP)
<span class="p_chunk">@@ -3807,9 +3807,9 @@</span> <span class="p_context"> static void cma_iboe_set_mgid(struct sockaddr *addr, union ib_gid *mgid)</span>
 	struct sockaddr_in6 *sin6 = (struct sockaddr_in6 *)addr;
 
 	if (cma_any_addr(addr)) {
<span class="p_del">-		memset(mgid, 0, sizeof *mgid);</span>
<span class="p_add">+		memset(mgid, 0, sizeof(*mgid));</span>
 	} else if (addr-&gt;sa_family == AF_INET6) {
<span class="p_del">-		memcpy(mgid, &amp;sin6-&gt;sin6_addr, sizeof *mgid);</span>
<span class="p_add">+		memcpy(mgid, &amp;sin6-&gt;sin6_addr, sizeof(*mgid));</span>
 	} else {
 		mgid-&gt;raw[0] = 0xff;
 		mgid-&gt;raw[1] = 0x0e;
<span class="p_chunk">@@ -3840,7 +3840,7 @@</span> <span class="p_context"> static int cma_iboe_join_multicast(struct rdma_id_private *id_priv,</span>
 	if (cma_zero_addr((struct sockaddr *)&amp;mc-&gt;addr))
 		return -EINVAL;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -3915,7 +3915,7 @@</span> <span class="p_context"> int rdma_join_multicast(struct rdma_cm_id *id, struct sockaddr *addr,</span>
 	    !cma_comp(id_priv, RDMA_CM_ADDR_RESOLVED))
 		return -EINVAL;
 
<span class="p_del">-	mc = kmalloc(sizeof *mc, GFP_KERNEL);</span>
<span class="p_add">+	mc = kmalloc(sizeof(*mc), GFP_KERNEL);</span>
 	if (!mc)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -4005,7 +4005,7 @@</span> <span class="p_context"> static int cma_netdev_change(struct net_device *ndev, struct rdma_id_private *id</span>
 	    memcmp(dev_addr-&gt;src_dev_addr, ndev-&gt;dev_addr, ndev-&gt;addr_len)) {
 		printk(KERN_INFO &quot;RDMA CM addr change for ndev %s used by id %p\n&quot;,
 		       ndev-&gt;name, &amp;id_priv-&gt;id);
<span class="p_del">-		work = kzalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+		work = kzalloc(sizeof(*work), GFP_KERNEL);</span>
 		if (!work)
 			return -ENOMEM;
 
<span class="p_chunk">@@ -4057,7 +4057,7 @@</span> <span class="p_context"> static void cma_add_one(struct ib_device *device)</span>
 	unsigned int i;
 	unsigned long supported_gids = 0;
 
<span class="p_del">-	cma_dev = kmalloc(sizeof *cma_dev, GFP_KERNEL);</span>
<span class="p_add">+	cma_dev = kmalloc(sizeof(*cma_dev), GFP_KERNEL);</span>
 	if (!cma_dev)
 		return;
 
<span class="p_chunk">@@ -4106,7 +4106,7 @@</span> <span class="p_context"> static int cma_remove_id_dev(struct rdma_id_private *id_priv)</span>
 	if (!cma_comp(id_priv, RDMA_CM_DEVICE_REMOVAL))
 		goto out;
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	event.event = RDMA_CM_EVENT_DEVICE_REMOVAL;
 	ret = id_priv-&gt;id.event_handler(&amp;id_priv-&gt;id, &amp;event);
 out:
<span class="p_chunk">@@ -4187,13 +4187,13 @@</span> <span class="p_context"> static int cma_get_id_stats(struct sk_buff *skb, struct netlink_callback *cb)</span>
 			}
 
 			id_stats = ibnl_put_msg(skb, &amp;nlh, cb-&gt;nlh-&gt;nlmsg_seq,
<span class="p_del">-						sizeof *id_stats, RDMA_NL_RDMA_CM,</span>
<span class="p_add">+						sizeof(*id_stats), RDMA_NL_RDMA_CM,</span>
 						RDMA_NL_RDMA_CM_ID_STATS,
 						NLM_F_MULTI);
 			if (!id_stats)
 				goto out;
 
<span class="p_del">-			memset(id_stats, 0, sizeof *id_stats);</span>
<span class="p_add">+			memset(id_stats, 0, sizeof(*id_stats));</span>
 			id = &amp;id_priv-&gt;id;
 			id_stats-&gt;node_type = id-&gt;route.addr.dev_addr.dev_type;
 			id_stats-&gt;port_num = id-&gt;port_num;
<span class="p_header">diff --git a/drivers/infiniband/core/device.c b/drivers/infiniband/core/device.c</span>
<span class="p_header">index 00da80e02154..9d2886b5ae9b 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/device.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/device.c</span>
<span class="p_chunk">@@ -152,14 +152,14 @@</span> <span class="p_context"> static int alloc_name(char *name)</span>
 			continue;
 		if (i &lt; 0 || i &gt;= PAGE_SIZE * 8)
 			continue;
<span class="p_del">-		snprintf(buf, sizeof buf, name, i);</span>
<span class="p_add">+		snprintf(buf, sizeof(buf), name, i);</span>
 		if (!strncmp(buf, device-&gt;name, IB_DEVICE_NAME_MAX))
 			set_bit(i, inuse);
 	}
 
 	i = find_first_zero_bit(inuse, PAGE_SIZE * 8);
 	free_page((unsigned long) inuse);
<span class="p_del">-	snprintf(buf, sizeof buf, name, i);</span>
<span class="p_add">+	snprintf(buf, sizeof(buf), name, i);</span>
 
 	if (__ib_device_get_by_name(buf))
 		return -ENFILE;
<span class="p_chunk">@@ -253,7 +253,7 @@</span> <span class="p_context"> static int add_client_context(struct ib_device *device, struct ib_client *client</span>
 	struct ib_client_data *context;
 	unsigned long flags;
 
<span class="p_del">-	context = kmalloc(sizeof *context, GFP_KERNEL);</span>
<span class="p_add">+	context = kmalloc(sizeof(*context), GFP_KERNEL);</span>
 	if (!context) {
 		printk(KERN_WARNING &quot;Couldn&#39;t allocate client context for %s/%s\n&quot;,
 		       device-&gt;name, client-&gt;name);
<span class="p_chunk">@@ -844,7 +844,7 @@</span> <span class="p_context"> int ib_find_gid(struct ib_device *device, union ib_gid *gid,</span>
 			ret = ib_query_gid(device, port, i, &amp;tmp_gid, NULL);
 			if (ret)
 				return ret;
<span class="p_del">-			if (!memcmp(&amp;tmp_gid, gid, sizeof *gid)) {</span>
<span class="p_add">+			if (!memcmp(&amp;tmp_gid, gid, sizeof(*gid))) {</span>
 				*port_num = port;
 				if (index)
 					*index = i;
<span class="p_header">diff --git a/drivers/infiniband/core/fmr_pool.c b/drivers/infiniband/core/fmr_pool.c</span>
<span class="p_header">index 6ac3683c144b..f4739cdc0464 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/fmr_pool.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/fmr_pool.c</span>
<span class="p_chunk">@@ -128,7 +128,7 @@</span> <span class="p_context"> static inline struct ib_pool_fmr *ib_fmr_cache_lookup(struct ib_fmr_pool *pool,</span>
 		if (io_virtual_address == fmr-&gt;io_virtual_address &amp;&amp;
 		    page_list_len      == fmr-&gt;page_list_len      &amp;&amp;
 		    !memcmp(page_list, fmr-&gt;page_list,
<span class="p_del">-			    page_list_len * sizeof *page_list))</span>
<span class="p_add">+			    page_list_len * sizeof(*page_list)))</span>
 			return fmr;
 
 	return NULL;
<span class="p_chunk">@@ -232,7 +232,7 @@</span> <span class="p_context"> struct ib_fmr_pool *ib_create_fmr_pool(struct ib_pd             *pd,</span>
 	else
 		max_remaps = device-&gt;attrs.max_map_per_fmr;
 
<span class="p_del">-	pool = kmalloc(sizeof *pool, GFP_KERNEL);</span>
<span class="p_add">+	pool = kmalloc(sizeof(*pool), GFP_KERNEL);</span>
 	if (!pool) {
 		printk(KERN_WARNING PFX &quot;couldn&#39;t allocate pool struct\n&quot;);
 		return ERR_PTR(-ENOMEM);
<span class="p_chunk">@@ -248,7 +248,7 @@</span> <span class="p_context"> struct ib_fmr_pool *ib_create_fmr_pool(struct ib_pd             *pd,</span>
 
 	if (params-&gt;cache) {
 		pool-&gt;cache_bucket =
<span class="p_del">-			kmalloc(IB_FMR_HASH_SIZE * sizeof *pool-&gt;cache_bucket,</span>
<span class="p_add">+			kmalloc(IB_FMR_HASH_SIZE * sizeof(*pool-&gt;cache_bucket),</span>
 				GFP_KERNEL);
 		if (!pool-&gt;cache_bucket) {
 			printk(KERN_WARNING PFX &quot;Failed to allocate cache in pool\n&quot;);
<span class="p_chunk">@@ -287,7 +287,7 @@</span> <span class="p_context"> struct ib_fmr_pool *ib_create_fmr_pool(struct ib_pd             *pd,</span>
 			.max_maps   = pool-&gt;max_remaps,
 			.page_shift = params-&gt;page_shift
 		};
<span class="p_del">-		int bytes_per_fmr = sizeof *fmr;</span>
<span class="p_add">+		int bytes_per_fmr = sizeof(*fmr);</span>
 
 		if (pool-&gt;cache_bucket)
 			bytes_per_fmr += params-&gt;max_pages_per_fmr * sizeof (u64);
<span class="p_header">diff --git a/drivers/infiniband/core/mad.c b/drivers/infiniband/core/mad.c</span>
<span class="p_header">index 9fa5bf33f5a3..2c1ff225ac5c 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/mad.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/mad.c</span>
<span class="p_chunk">@@ -335,14 +335,14 @@</span> <span class="p_context"> struct ib_mad_agent *ib_register_mad_agent(struct ib_device *device,</span>
 	}
 
 	/* Allocate structures */
<span class="p_del">-	mad_agent_priv = kzalloc(sizeof *mad_agent_priv, GFP_KERNEL);</span>
<span class="p_add">+	mad_agent_priv = kzalloc(sizeof(*mad_agent_priv), GFP_KERNEL);</span>
 	if (!mad_agent_priv) {
 		ret = ERR_PTR(-ENOMEM);
 		goto error1;
 	}
 
 	if (mad_reg_req) {
<span class="p_del">-		reg_req = kmemdup(mad_reg_req, sizeof *reg_req, GFP_KERNEL);</span>
<span class="p_add">+		reg_req = kmemdup(mad_reg_req, sizeof(*reg_req), GFP_KERNEL);</span>
 		if (!reg_req) {
 			ret = ERR_PTR(-ENOMEM);
 			goto error3;
<span class="p_chunk">@@ -463,7 +463,7 @@</span> <span class="p_context"> static int register_snoop_agent(struct ib_mad_qp_info *qp_info,</span>
 	if (i == qp_info-&gt;snoop_table_size) {
 		/* Grow table. */
 		new_snoop_table = krealloc(qp_info-&gt;snoop_table,
<span class="p_del">-					   sizeof mad_snoop_priv *</span>
<span class="p_add">+					   sizeof(mad_snoop_priv) *</span>
 					   (qp_info-&gt;snoop_table_size + 1),
 					   GFP_ATOMIC);
 		if (!new_snoop_table) {
<span class="p_chunk">@@ -511,7 +511,7 @@</span> <span class="p_context"> struct ib_mad_agent *ib_register_mad_snoop(struct ib_device *device,</span>
 		goto error1;
 	}
 	/* Allocate structures */
<span class="p_del">-	mad_snoop_priv = kzalloc(sizeof *mad_snoop_priv, GFP_KERNEL);</span>
<span class="p_add">+	mad_snoop_priv = kzalloc(sizeof(*mad_snoop_priv), GFP_KERNEL);</span>
 	if (!mad_snoop_priv) {
 		ret = ERR_PTR(-ENOMEM);
 		goto error1;
<span class="p_chunk">@@ -695,7 +695,7 @@</span> <span class="p_context"> static void snoop_recv(struct ib_mad_qp_info *qp_info,</span>
 static void build_smp_wc(struct ib_qp *qp, struct ib_cqe *cqe, u16 slid,
 		u16 pkey_index, u8 port_num, struct ib_wc *wc)
 {
<span class="p_del">-	memset(wc, 0, sizeof *wc);</span>
<span class="p_add">+	memset(wc, 0, sizeof(*wc));</span>
 	wc-&gt;wr_cqe = cqe;
 	wc-&gt;status = IB_WC_SUCCESS;
 	wc-&gt;opcode = IB_WC_RECV;
<span class="p_chunk">@@ -817,7 +817,7 @@</span> <span class="p_context"> static int handle_outgoing_dr_smp(struct ib_mad_agent_private *mad_agent_priv,</span>
 			goto out;
 	}
 
<span class="p_del">-	local = kmalloc(sizeof *local, GFP_ATOMIC);</span>
<span class="p_add">+	local = kmalloc(sizeof(*local), GFP_ATOMIC);</span>
 	if (!local) {
 		ret = -ENOMEM;
 		dev_err(&amp;device-&gt;dev, &quot;No memory for ib_mad_local_private\n&quot;);
<span class="p_chunk">@@ -949,11 +949,11 @@</span> <span class="p_context"> static int alloc_send_rmpp_list(struct ib_mad_send_wr_private *send_wr,</span>
 
 	/* Allocate data segments. */
 	for (left = send_buf-&gt;data_len + pad; left &gt; 0; left -= seg_size) {
<span class="p_del">-		seg = kmalloc(sizeof (*seg) + seg_size, gfp_mask);</span>
<span class="p_add">+		seg = kmalloc(sizeof(*seg) + seg_size, gfp_mask);</span>
 		if (!seg) {
 			dev_err(&amp;send_buf-&gt;mad_agent-&gt;device-&gt;dev,
 				&quot;alloc_send_rmpp_segs: RMPP mem alloc failed for len %zd, gfp %#x\n&quot;,
<span class="p_del">-				sizeof (*seg) + seg_size, gfp_mask);</span>
<span class="p_add">+				sizeof(*seg) + seg_size, gfp_mask);</span>
 			free_send_rmpp_list(send_wr);
 			return -ENOMEM;
 		}
<span class="p_chunk">@@ -1017,7 +1017,7 @@</span> <span class="p_context"> struct ib_mad_send_buf * ib_create_send_mad(struct ib_mad_agent *mad_agent,</span>
 			return ERR_PTR(-EINVAL);
 
 	size = rmpp_active ? hdr_len : mad_size;
<span class="p_del">-	buf = kzalloc(sizeof *mad_send_wr + size, gfp_mask);</span>
<span class="p_add">+	buf = kzalloc(sizeof(*mad_send_wr) + size, gfp_mask);</span>
 	if (!buf)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -1365,7 +1365,7 @@</span> <span class="p_context"> static int method_in_use(struct ib_mad_mgmt_method_table **method,</span>
 static int allocate_method_table(struct ib_mad_mgmt_method_table **method)
 {
 	/* Allocate management method table */
<span class="p_del">-	*method = kzalloc(sizeof **method, GFP_ATOMIC);</span>
<span class="p_add">+	*method = kzalloc(sizeof(**method), GFP_ATOMIC);</span>
 	if (!*method) {
 		pr_err(&quot;No memory for ib_mad_mgmt_method_table\n&quot;);
 		return -ENOMEM;
<span class="p_chunk">@@ -1460,7 +1460,7 @@</span> <span class="p_context"> static int add_nonoui_reg_req(struct ib_mad_reg_req *mad_reg_req,</span>
 	class = &amp;port_priv-&gt;version[mad_reg_req-&gt;mgmt_class_version].class;
 	if (!*class) {
 		/* Allocate management class table for &quot;new&quot; class version */
<span class="p_del">-		*class = kzalloc(sizeof **class, GFP_ATOMIC);</span>
<span class="p_add">+		*class = kzalloc(sizeof(**class), GFP_ATOMIC);</span>
 		if (!*class) {
 			dev_err(&amp;agent_priv-&gt;agent.device-&gt;dev,
 				&quot;No memory for ib_mad_mgmt_class_table\n&quot;);
<span class="p_chunk">@@ -1527,7 +1527,7 @@</span> <span class="p_context"> static int add_oui_reg_req(struct ib_mad_reg_req *mad_reg_req,</span>
 				mad_reg_req-&gt;mgmt_class_version].vendor;
 	if (!*vendor_table) {
 		/* Allocate mgmt vendor class table for &quot;new&quot; class version */
<span class="p_del">-		vendor = kzalloc(sizeof *vendor, GFP_ATOMIC);</span>
<span class="p_add">+		vendor = kzalloc(sizeof(*vendor), GFP_ATOMIC);</span>
 		if (!vendor) {
 			dev_err(&amp;agent_priv-&gt;agent.device-&gt;dev,
 				&quot;No memory for ib_mad_mgmt_vendor_class_table\n&quot;);
<span class="p_chunk">@@ -1538,7 +1538,7 @@</span> <span class="p_context"> static int add_oui_reg_req(struct ib_mad_reg_req *mad_reg_req,</span>
 	}
 	if (!(*vendor_table)-&gt;vendor_class[vclass]) {
 		/* Allocate table for this management vendor class */
<span class="p_del">-		vendor_class = kzalloc(sizeof *vendor_class, GFP_ATOMIC);</span>
<span class="p_add">+		vendor_class = kzalloc(sizeof(*vendor_class), GFP_ATOMIC);</span>
 		if (!vendor_class) {
 			dev_err(&amp;agent_priv-&gt;agent.device-&gt;dev,
 				&quot;No memory for ib_mad_mgmt_vendor_class\n&quot;);
<span class="p_chunk">@@ -2545,7 +2545,7 @@</span> <span class="p_context"> static bool ib_mad_send_error(struct ib_mad_port_private *port_priv,</span>
 		struct ib_qp_attr *attr;
 
 		/* Transition QP to RTS and fail offending send */
<span class="p_del">-		attr = kmalloc(sizeof *attr, GFP_KERNEL);</span>
<span class="p_add">+		attr = kmalloc(sizeof(*attr), GFP_KERNEL);</span>
 		if (attr) {
 			attr-&gt;qp_state = IB_QPS_RTS;
 			attr-&gt;cur_qp_state = IB_QPS_SQE;
<span class="p_chunk">@@ -2964,7 +2964,7 @@</span> <span class="p_context"> static int ib_mad_port_start(struct ib_mad_port_private *port_priv)</span>
 	struct ib_qp *qp;
 	u16 pkey_index;
 
<span class="p_del">-	attr = kmalloc(sizeof *attr, GFP_KERNEL);</span>
<span class="p_add">+	attr = kmalloc(sizeof(*attr), GFP_KERNEL);</span>
 	if (!attr) {
 		dev_err(&amp;port_priv-&gt;device-&gt;dev,
 			&quot;Couldn&#39;t kmalloc ib_qp_attr\n&quot;);
<span class="p_chunk">@@ -3079,7 +3079,7 @@</span> <span class="p_context"> static int create_mad_qp(struct ib_mad_qp_info *qp_info,</span>
 	struct ib_qp_init_attr	qp_init_attr;
 	int ret;
 
<span class="p_del">-	memset(&amp;qp_init_attr, 0, sizeof qp_init_attr);</span>
<span class="p_add">+	memset(&amp;qp_init_attr, 0, sizeof(qp_init_attr));</span>
 	qp_init_attr.send_cq = qp_info-&gt;port_priv-&gt;cq;
 	qp_init_attr.recv_cq = qp_info-&gt;port_priv-&gt;cq;
 	qp_init_attr.sq_sig_type = IB_SIGNAL_ALL_WR;
<span class="p_chunk">@@ -3127,7 +3127,7 @@</span> <span class="p_context"> static int ib_mad_port_open(struct ib_device *device,</span>
 	int ret, cq_size;
 	struct ib_mad_port_private *port_priv;
 	unsigned long flags;
<span class="p_del">-	char name[sizeof &quot;ib_mad123&quot;];</span>
<span class="p_add">+	char name[sizeof(&quot;ib_mad123&quot;)];</span>
 	int has_smi;
 
 	if (WARN_ON(rdma_max_mad_size(device, port_num) &lt; IB_MGMT_MAD_SIZE))
<span class="p_chunk">@@ -3138,7 +3138,7 @@</span> <span class="p_context"> static int ib_mad_port_open(struct ib_device *device,</span>
 		return -EFAULT;
 
 	/* Create new device info */
<span class="p_del">-	port_priv = kzalloc(sizeof *port_priv, GFP_KERNEL);</span>
<span class="p_add">+	port_priv = kzalloc(sizeof(*port_priv), GFP_KERNEL);</span>
 	if (!port_priv) {
 		dev_err(&amp;device-&gt;dev, &quot;No memory for ib_mad_port_private\n&quot;);
 		return -ENOMEM;
<span class="p_chunk">@@ -3180,7 +3180,7 @@</span> <span class="p_context"> static int ib_mad_port_open(struct ib_device *device,</span>
 	if (ret)
 		goto error7;
 
<span class="p_del">-	snprintf(name, sizeof name, &quot;ib_mad%d&quot;, port_num);</span>
<span class="p_add">+	snprintf(name, sizeof(name), &quot;ib_mad%d&quot;, port_num);</span>
 	port_priv-&gt;wq = create_singlethread_workqueue(name);
 	if (!port_priv-&gt;wq) {
 		ret = -ENOMEM;
<span class="p_header">diff --git a/drivers/infiniband/core/mad_rmpp.c b/drivers/infiniband/core/mad_rmpp.c</span>
<span class="p_header">index 382941b46e43..08cc04a5d5f4 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/mad_rmpp.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/mad_rmpp.c</span>
<span class="p_chunk">@@ -287,7 +287,7 @@</span> <span class="p_context"> create_rmpp_recv(struct ib_mad_agent_private *agent,</span>
 	struct mad_rmpp_recv *rmpp_recv;
 	struct ib_mad_hdr *mad_hdr;
 
<span class="p_del">-	rmpp_recv = kmalloc(sizeof *rmpp_recv, GFP_KERNEL);</span>
<span class="p_add">+	rmpp_recv = kmalloc(sizeof(*rmpp_recv), GFP_KERNEL);</span>
 	if (!rmpp_recv)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/infiniband/core/multicast.c b/drivers/infiniband/core/multicast.c</span>
<span class="p_header">index 250937cb9a1a..75417187424b 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/multicast.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/multicast.c</span>
<span class="p_chunk">@@ -136,7 +136,7 @@</span> <span class="p_context"> static struct mcast_group *mcast_find(struct mcast_port *port,</span>
 
 	while (node) {
 		group = rb_entry(node, struct mcast_group, node);
<span class="p_del">-		ret = memcmp(mgid-&gt;raw, group-&gt;rec.mgid.raw, sizeof *mgid);</span>
<span class="p_add">+		ret = memcmp(mgid-&gt;raw, group-&gt;rec.mgid.raw, sizeof(*mgid));</span>
 		if (!ret)
 			return group;
 
<span class="p_chunk">@@ -162,7 +162,7 @@</span> <span class="p_context"> static struct mcast_group *mcast_insert(struct mcast_port *port,</span>
 		cur_group = rb_entry(parent, struct mcast_group, node);
 
 		ret = memcmp(group-&gt;rec.mgid.raw, cur_group-&gt;rec.mgid.raw,
<span class="p_del">-			     sizeof group-&gt;rec.mgid);</span>
<span class="p_add">+			     sizeof(group-&gt;rec.mgid));</span>
 		if (ret &lt; 0)
 			link = &amp;(*link)-&gt;rb_left;
 		else if (ret &gt; 0)
<span class="p_chunk">@@ -286,7 +286,7 @@</span> <span class="p_context"> static int cmp_rec(struct ib_sa_mcmember_rec *src,</span>
 	/* MGID must already match */
 
 	if (comp_mask &amp; IB_SA_MCMEMBER_REC_PORT_GID &amp;&amp;
<span class="p_del">-	    memcmp(&amp;src-&gt;port_gid, &amp;dst-&gt;port_gid, sizeof src-&gt;port_gid))</span>
<span class="p_add">+	    memcmp(&amp;src-&gt;port_gid, &amp;dst-&gt;port_gid, sizeof(src-&gt;port_gid)))</span>
 		return -EINVAL;
 	if (comp_mask &amp; IB_SA_MCMEMBER_REC_QKEY &amp;&amp; src-&gt;qkey != dst-&gt;qkey)
 		return -EINVAL;
<span class="p_chunk">@@ -566,7 +566,7 @@</span> <span class="p_context"> static struct mcast_group *acquire_group(struct mcast_port *port,</span>
 	unsigned long flags;
 	int is_mgid0;
 
<span class="p_del">-	is_mgid0 = !memcmp(&amp;mgid0, mgid, sizeof mgid0);</span>
<span class="p_add">+	is_mgid0 = !memcmp(&amp;mgid0, mgid, sizeof(mgid0));</span>
 	if (!is_mgid0) {
 		spin_lock_irqsave(&amp;port-&gt;lock, flags);
 		group = mcast_find(port, mgid);
<span class="p_chunk">@@ -575,7 +575,7 @@</span> <span class="p_context"> static struct mcast_group *acquire_group(struct mcast_port *port,</span>
 		spin_unlock_irqrestore(&amp;port-&gt;lock, flags);
 	}
 
<span class="p_del">-	group = kzalloc(sizeof *group, gfp_mask);</span>
<span class="p_add">+	group = kzalloc(sizeof(*group), gfp_mask);</span>
 	if (!group)
 		return NULL;
 
<span class="p_chunk">@@ -626,7 +626,7 @@</span> <span class="p_context"> ib_sa_join_multicast(struct ib_sa_client *client,</span>
 	if (!dev)
 		return ERR_PTR(-ENODEV);
 
<span class="p_del">-	member = kmalloc(sizeof *member, gfp_mask);</span>
<span class="p_add">+	member = kmalloc(sizeof(*member), gfp_mask);</span>
 	if (!member)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -747,7 +747,7 @@</span> <span class="p_context"> int ib_init_ah_from_mcmember(struct ib_device *device, u8 port_num,</span>
 	if (ret)
 		return ret;
 
<span class="p_del">-	memset(ah_attr, 0, sizeof *ah_attr);</span>
<span class="p_add">+	memset(ah_attr, 0, sizeof(*ah_attr));</span>
 	ah_attr-&gt;dlid = be16_to_cpu(rec-&gt;mlid);
 	ah_attr-&gt;sl = rec-&gt;sl;
 	ah_attr-&gt;port_num = port_num;
<span class="p_chunk">@@ -821,7 +821,7 @@</span> <span class="p_context"> static void mcast_add_one(struct ib_device *device)</span>
 	int i;
 	int count = 0;
 
<span class="p_del">-	dev = kmalloc(sizeof *dev + device-&gt;phys_port_cnt * sizeof *port,</span>
<span class="p_add">+	dev = kmalloc(sizeof(*dev) + device-&gt;phys_port_cnt * sizeof(*port),</span>
 		      GFP_KERNEL);
 	if (!dev)
 		return;
<span class="p_header">diff --git a/drivers/infiniband/core/netlink.c b/drivers/infiniband/core/netlink.c</span>
<span class="p_header">index d47df9356779..0609194a5e4c 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/netlink.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/netlink.c</span>
<span class="p_chunk">@@ -63,7 +63,7 @@</span> <span class="p_context"> int ibnl_add_client(int index, int nops,</span>
 	struct ibnl_client *cur;
 	struct ibnl_client *nl_client;
 
<span class="p_del">-	nl_client = kmalloc(sizeof *nl_client, GFP_KERNEL);</span>
<span class="p_add">+	nl_client = kmalloc(sizeof(*nl_client), GFP_KERNEL);</span>
 	if (!nl_client)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/infiniband/core/sa_query.c b/drivers/infiniband/core/sa_query.c</span>
<span class="p_header">index f334090bb612..ecd4900a1548 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/sa_query.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/sa_query.c</span>
<span class="p_chunk">@@ -868,7 +868,7 @@</span> <span class="p_context"> static void update_sm_ah(struct work_struct *work)</span>
 		return;
 	}
 
<span class="p_del">-	new_ah = kmalloc(sizeof *new_ah, GFP_KERNEL);</span>
<span class="p_add">+	new_ah = kmalloc(sizeof(*new_ah), GFP_KERNEL);</span>
 	if (!new_ah) {
 		printk(KERN_WARNING &quot;Couldn&#39;t allocate new SM AH\n&quot;);
 		return;
<span class="p_chunk">@@ -882,7 +882,7 @@</span> <span class="p_context"> static void update_sm_ah(struct work_struct *work)</span>
 			 IB_DEFAULT_PKEY_FULL, &amp;new_ah-&gt;pkey_index))
 		printk(KERN_ERR &quot;Couldn&#39;t find index for default PKey\n&quot;);
 
<span class="p_del">-	memset(&amp;ah_attr, 0, sizeof ah_attr);</span>
<span class="p_add">+	memset(&amp;ah_attr, 0, sizeof(ah_attr));</span>
 	ah_attr.dlid     = port_attr.sm_lid;
 	ah_attr.sl       = port_attr.sm_sl;
 	ah_attr.port_num = port-&gt;port_num;
<span class="p_chunk">@@ -1005,7 +1005,7 @@</span> <span class="p_context"> int ib_init_ah_from_path(struct ib_device *device, u8 port_num,</span>
 	int use_roce;
 	struct net_device *ndev = NULL;
 
<span class="p_del">-	memset(ah_attr, 0, sizeof *ah_attr);</span>
<span class="p_add">+	memset(ah_attr, 0, sizeof(*ah_attr));</span>
 	ah_attr-&gt;dlid = be16_to_cpu(rec-&gt;dlid);
 	ah_attr-&gt;sl = rec-&gt;sl;
 	ah_attr-&gt;src_path_bits = be16_to_cpu(rec-&gt;slid) &amp;
<span class="p_chunk">@@ -1137,7 +1137,7 @@</span> <span class="p_context"> static void init_mad(struct ib_sa_mad *mad, struct ib_mad_agent *agent)</span>
 {
 	unsigned long flags;
 
<span class="p_del">-	memset(mad, 0, sizeof *mad);</span>
<span class="p_add">+	memset(mad, 0, sizeof(*mad));</span>
 
 	mad-&gt;mad_hdr.base_version  = IB_MGMT_BASE_VERSION;
 	mad-&gt;mad_hdr.mgmt_class    = IB_MGMT_CLASS_SUBN_ADM;
<span class="p_chunk">@@ -1704,7 +1704,7 @@</span> <span class="p_context"> static void ib_sa_add_one(struct ib_device *device)</span>
 	s = rdma_start_port(device);
 	e = rdma_end_port(device);
 
<span class="p_del">-	sa_dev = kzalloc(sizeof *sa_dev +</span>
<span class="p_add">+	sa_dev = kzalloc(sizeof(*sa_dev) +</span>
 			 (e - s + 1) * sizeof (struct ib_sa_port),
 			 GFP_KERNEL);
 	if (!sa_dev)
<span class="p_chunk">@@ -1794,7 +1794,7 @@</span> <span class="p_context"> static int __init ib_sa_init(void)</span>
 {
 	int ret;
 
<span class="p_del">-	get_random_bytes(&amp;tid, sizeof tid);</span>
<span class="p_add">+	get_random_bytes(&amp;tid, sizeof(tid));</span>
 
 	atomic_set(&amp;ib_nl_sa_request_seq, 0);
 
<span class="p_header">diff --git a/drivers/infiniband/core/sysfs.c b/drivers/infiniband/core/sysfs.c</span>
<span class="p_header">index 3de93517efe4..b93fd7c3628c 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/sysfs.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/sysfs.c</span>
<span class="p_chunk">@@ -425,8 +425,8 @@</span> <span class="p_context"> static int get_perf_mad(struct ib_device *dev, int port_num, __be16 attr,</span>
 	if (!dev-&gt;process_mad)
 		return -ENOSYS;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad) {
 		ret = -ENOMEM;
 		goto out;
<span class="p_chunk">@@ -749,7 +749,7 @@</span> <span class="p_context"> static int add_port(struct ib_device *device, int port_num,</span>
 	if (ret)
 		return ret;
 
<span class="p_del">-	p = kzalloc(sizeof *p, GFP_KERNEL);</span>
<span class="p_add">+	p = kzalloc(sizeof(*p), GFP_KERNEL);</span>
 	if (!p)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/infiniband/core/ucm.c b/drivers/infiniband/core/ucm.c</span>
<span class="p_header">index 6b4e8a008bc0..fe858952da21 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/ucm.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/ucm.c</span>
<span class="p_chunk">@@ -177,7 +177,7 @@</span> <span class="p_context"> static struct ib_ucm_context *ib_ucm_ctx_alloc(struct ib_ucm_file *file)</span>
 {
 	struct ib_ucm_context *ctx;
 
<span class="p_del">-	ctx = kzalloc(sizeof *ctx, GFP_KERNEL);</span>
<span class="p_add">+	ctx = kzalloc(sizeof(*ctx), GFP_KERNEL);</span>
 	if (!ctx)
 		return NULL;
 
<span class="p_chunk">@@ -353,7 +353,7 @@</span> <span class="p_context"> static int ib_ucm_event_handler(struct ib_cm_id *cm_id,</span>
 
 	ctx = cm_id-&gt;context;
 
<span class="p_del">-	uevent = kzalloc(sizeof *uevent, GFP_KERNEL);</span>
<span class="p_add">+	uevent = kzalloc(sizeof(*uevent), GFP_KERNEL);</span>
 	if (!uevent)
 		goto err1;
 
<span class="p_chunk">@@ -611,7 +611,7 @@</span> <span class="p_context"> static ssize_t ib_ucm_init_qp_attr(struct ib_ucm_file *file,</span>
 		return PTR_ERR(ctx);
 
 	resp.qp_attr_mask = 0;
<span class="p_del">-	memset(&amp;qp_attr, 0, sizeof qp_attr);</span>
<span class="p_add">+	memset(&amp;qp_attr, 0, sizeof(qp_attr));</span>
 	qp_attr.qp_state = cmd.qp_state;
 	result = ib_cm_init_qp_attr(ctx-&gt;cm_id, &amp;qp_attr, &amp;resp.qp_attr_mask);
 	if (result)
<span class="p_chunk">@@ -1255,7 +1255,7 @@</span> <span class="p_context"> static void ib_ucm_add_one(struct ib_device *device)</span>
 	if (!device-&gt;alloc_ucontext || !rdma_cap_ib_cm(device, 1))
 		return;
 
<span class="p_del">-	ucm_dev = kzalloc(sizeof *ucm_dev, GFP_KERNEL);</span>
<span class="p_add">+	ucm_dev = kzalloc(sizeof(*ucm_dev), GFP_KERNEL);</span>
 	if (!ucm_dev)
 		return;
 
<span class="p_header">diff --git a/drivers/infiniband/core/ucma.c b/drivers/infiniband/core/ucma.c</span>
<span class="p_header">index 8b5a934e1133..5971b476ca29 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/ucma.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/ucma.c</span>
<span class="p_chunk">@@ -62,7 +62,7 @@</span> <span class="p_context"> static struct ctl_table ucma_ctl_table[] = {</span>
 	{
 		.procname	= &quot;max_backlog&quot;,
 		.data		= &amp;max_backlog,
<span class="p_del">-		.maxlen		= sizeof max_backlog,</span>
<span class="p_add">+		.maxlen		= sizeof(max_backlog),</span>
 		.mode		= 0644,
 		.proc_handler	= proc_dointvec,
 	},
<span class="p_chunk">@@ -379,7 +379,7 @@</span> <span class="p_context"> static ssize_t ucma_get_event(struct ucma_file *file, const char __user *inbuf,</span>
 	struct ucma_event *uevent;
 	int ret = 0;
 
<span class="p_del">-	if (out_len &lt; sizeof uevent-&gt;resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(uevent-&gt;resp))</span>
 		return -ENOSPC;
 
 	if (copy_from_user(&amp;cmd, inbuf, sizeof(cmd)))
<span class="p_chunk">@@ -414,7 +414,7 @@</span> <span class="p_context"> static ssize_t ucma_get_event(struct ucma_file *file, const char __user *inbuf,</span>
 	}
 
 	if (copy_to_user((void __user *)(unsigned long)cmd.response,
<span class="p_del">-			 &amp;uevent-&gt;resp, sizeof uevent-&gt;resp)) {</span>
<span class="p_add">+			 &amp;uevent-&gt;resp, sizeof(uevent-&gt;resp))) {</span>
 		ret = -EFAULT;
 		goto done;
 	}
<span class="p_chunk">@@ -809,7 +809,7 @@</span> <span class="p_context"> static ssize_t ucma_query_route(struct ucma_file *file,</span>
 	if (IS_ERR(ctx))
 		return PTR_ERR(ctx);
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	addr = (struct sockaddr *) &amp;ctx-&gt;cm_id-&gt;route.addr.src_addr;
 	memcpy(&amp;resp.src_addr, addr, addr-&gt;sa_family == AF_INET ?
 				     sizeof(struct sockaddr_in) :
<span class="p_chunk">@@ -862,7 +862,7 @@</span> <span class="p_context"> static ssize_t ucma_query_addr(struct ucma_context *ctx,</span>
 	if (out_len &lt; sizeof(resp))
 		return -ENOSPC;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 
 	addr = (struct sockaddr *) &amp;ctx-&gt;cm_id-&gt;route.addr.src_addr;
 	resp.src_size = rdma_addr_size(addr);
<span class="p_chunk">@@ -922,7 +922,7 @@</span> <span class="p_context"> static ssize_t ucma_query_gid(struct ucma_context *ctx,</span>
 	if (out_len &lt; sizeof(resp))
 		return -ENOSPC;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 
 	ucma_query_device_addr(ctx-&gt;cm_id, &amp;resp);
 
<span class="p_chunk">@@ -1143,7 +1143,7 @@</span> <span class="p_context"> static ssize_t ucma_init_qp_attr(struct ucma_file *file,</span>
 		return PTR_ERR(ctx);
 
 	resp.qp_attr_mask = 0;
<span class="p_del">-	memset(&amp;qp_attr, 0, sizeof qp_attr);</span>
<span class="p_add">+	memset(&amp;qp_attr, 0, sizeof(qp_attr));</span>
 	qp_attr.qp_state = cmd.qp_state;
 	ret = rdma_init_qp_attr(ctx-&gt;cm_id, &amp;qp_attr, &amp;resp.qp_attr_mask);
 	if (ret)
<span class="p_chunk">@@ -1219,7 +1219,7 @@</span> <span class="p_context"> static int ucma_set_ib_path(struct ucma_context *ctx,</span>
 	if (ret)
 		return ret;
 
<span class="p_del">-	memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+	memset(&amp;event, 0, sizeof(event));</span>
 	event.event = RDMA_CM_EVENT_ROUTE_RESOLVED;
 	return ucma_event_handler(ctx-&gt;cm_id, &amp;event);
 }
<span class="p_chunk">@@ -1621,7 +1621,7 @@</span> <span class="p_context"> static int ucma_open(struct inode *inode, struct file *filp)</span>
 {
 	struct ucma_file *file;
 
<span class="p_del">-	file = kmalloc(sizeof *file, GFP_KERNEL);</span>
<span class="p_add">+	file = kmalloc(sizeof(*file), GFP_KERNEL);</span>
 	if (!file)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/infiniband/core/ud_header.c b/drivers/infiniband/core/ud_header.c</span>
<span class="p_header">index 19837d270278..2fa2d6ce35a6 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/ud_header.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/ud_header.c</span>
<span class="p_chunk">@@ -323,7 +323,7 @@</span> <span class="p_context"> int ib_ud_header_init(int     payload_bytes,</span>
 		      struct ib_ud_header *header)
 {
 	grh_present = grh_present &amp;&amp; !ip_version;
<span class="p_del">-	memset(header, 0, sizeof *header);</span>
<span class="p_add">+	memset(header, 0, sizeof(*header));</span>
 
 	/*
 	 * UDP header without IP header doesn&#39;t make sense
<span class="p_chunk">@@ -454,8 +454,8 @@</span> <span class="p_context"> int ib_ud_header_pack(struct ib_ud_header *header,</span>
 	len += IB_DETH_BYTES;
 
 	if (header-&gt;immediate_present) {
<span class="p_del">-		memcpy(buf + len, &amp;header-&gt;immediate_data, sizeof header-&gt;immediate_data);</span>
<span class="p_del">-		len += sizeof header-&gt;immediate_data;</span>
<span class="p_add">+		memcpy(buf + len, &amp;header-&gt;immediate_data, sizeof(header-&gt;immediate_data));</span>
<span class="p_add">+		len += sizeof(header-&gt;immediate_data);</span>
 	}
 
 	return len;
<span class="p_chunk">@@ -540,7 +540,7 @@</span> <span class="p_context"> int ib_ud_header_unpack(void                *buf,</span>
 	buf += IB_DETH_BYTES;
 
 	if (header-&gt;immediate_present)
<span class="p_del">-		memcpy(&amp;header-&gt;immediate_data, buf, sizeof header-&gt;immediate_data);</span>
<span class="p_add">+		memcpy(&amp;header-&gt;immediate_data, buf, sizeof(header-&gt;immediate_data));</span>
 
 	return 0;
 }
<span class="p_header">diff --git a/drivers/infiniband/core/umem.c b/drivers/infiniband/core/umem.c</span>
<span class="p_header">index 38acb3cfc545..f53d0f3d647c 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/umem.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/umem.c</span>
<span class="p_chunk">@@ -113,7 +113,7 @@</span> <span class="p_context"> struct ib_umem *ib_umem_get(struct ib_ucontext *context, unsigned long addr,</span>
 	if (!can_do_mlock())
 		return ERR_PTR(-EPERM);
 
<span class="p_del">-	umem = kzalloc(sizeof *umem, GFP_KERNEL);</span>
<span class="p_add">+	umem = kzalloc(sizeof(*umem), GFP_KERNEL);</span>
 	if (!umem)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/infiniband/core/user_mad.c b/drivers/infiniband/core/user_mad.c</span>
<span class="p_header">index 415a3185cde7..5ea53487294e 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/user_mad.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/user_mad.c</span>
<span class="p_chunk">@@ -219,7 +219,7 @@</span> <span class="p_context"> static void recv_handler(struct ib_mad_agent *agent,</span>
 	if (mad_recv_wc-&gt;wc-&gt;status != IB_WC_SUCCESS)
 		goto err1;
 
<span class="p_del">-	packet = kzalloc(sizeof *packet, GFP_KERNEL);</span>
<span class="p_add">+	packet = kzalloc(sizeof(*packet), GFP_KERNEL);</span>
 	if (!packet)
 		goto err1;
 
<span class="p_chunk">@@ -459,7 +459,7 @@</span> <span class="p_context"> static ssize_t ib_umad_write(struct file *filp, const char __user *buf,</span>
 	if (count &lt; hdr_size(file) + IB_MGMT_RMPP_HDR)
 		return -EINVAL;
 
<span class="p_del">-	packet = kzalloc(sizeof *packet + IB_MGMT_RMPP_HDR, GFP_KERNEL);</span>
<span class="p_add">+	packet = kzalloc(sizeof(*packet) + IB_MGMT_RMPP_HDR, GFP_KERNEL);</span>
 	if (!packet)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -488,7 +488,7 @@</span> <span class="p_context"> static ssize_t ib_umad_write(struct file *filp, const char __user *buf,</span>
 		goto err_up;
 	}
 
<span class="p_del">-	memset(&amp;ah_attr, 0, sizeof ah_attr);</span>
<span class="p_add">+	memset(&amp;ah_attr, 0, sizeof(ah_attr));</span>
 	ah_attr.dlid          = be16_to_cpu(packet-&gt;mad.hdr.lid);
 	ah_attr.sl            = packet-&gt;mad.hdr.sl;
 	ah_attr.src_path_bits = packet-&gt;mad.hdr.path_bits;
<span class="p_chunk">@@ -638,7 +638,7 @@</span> <span class="p_context"> static int ib_umad_reg_agent(struct ib_umad_file *file, void __user *arg,</span>
 		goto out;
 	}
 
<span class="p_del">-	if (copy_from_user(&amp;ureq, arg, sizeof ureq)) {</span>
<span class="p_add">+	if (copy_from_user(&amp;ureq, arg, sizeof(ureq))) {</span>
 		ret = -EFAULT;
 		goto out;
 	}
<span class="p_chunk">@@ -666,7 +666,7 @@</span> <span class="p_context"> static int ib_umad_reg_agent(struct ib_umad_file *file, void __user *arg,</span>
 		memset(&amp;req, 0, sizeof(req));
 		req.mgmt_class         = ureq.mgmt_class;
 		req.mgmt_class_version = ureq.mgmt_class_version;
<span class="p_del">-		memcpy(req.oui, ureq.oui, sizeof req.oui);</span>
<span class="p_add">+		memcpy(req.oui, ureq.oui, sizeof(req.oui));</span>
 
 		if (compat_method_mask) {
 			u32 *umm = (u32 *) ureq.method_mask;
<span class="p_chunk">@@ -677,7 +677,7 @@</span> <span class="p_context"> static int ib_umad_reg_agent(struct ib_umad_file *file, void __user *arg,</span>
 					umm[i * 2] | ((u64) umm[i * 2 + 1] &lt;&lt; 32);
 		} else
 			memcpy(req.method_mask, ureq.method_mask,
<span class="p_del">-			       sizeof req.method_mask);</span>
<span class="p_add">+			       sizeof(req.method_mask));</span>
 	}
 
 	agent = ib_register_mad_agent(file-&gt;port-&gt;ib_dev, file-&gt;port-&gt;port_num,
<span class="p_chunk">@@ -939,7 +939,7 @@</span> <span class="p_context"> static int ib_umad_open(struct inode *inode, struct file *filp)</span>
 		goto out;
 
 	ret = -ENOMEM;
<span class="p_del">-	file = kzalloc(sizeof *file, GFP_KERNEL);</span>
<span class="p_add">+	file = kzalloc(sizeof(*file), GFP_KERNEL);</span>
 	if (!file)
 		goto out;
 
<span class="p_chunk">@@ -1284,7 +1284,7 @@</span> <span class="p_context"> static void ib_umad_add_one(struct ib_device *device)</span>
 	s = rdma_start_port(device);
 	e = rdma_end_port(device);
 
<span class="p_del">-	umad_dev = kzalloc(sizeof *umad_dev +</span>
<span class="p_add">+	umad_dev = kzalloc(sizeof(*umad_dev) +</span>
 			   (e - s + 1) * sizeof (struct ib_umad_port),
 			   GFP_KERNEL);
 	if (!umad_dev)
<span class="p_header">diff --git a/drivers/infiniband/core/uverbs_cmd.c b/drivers/infiniband/core/uverbs_cmd.c</span>
<span class="p_header">index 6ffc9c4e93af..34ca51768705 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/uverbs_cmd.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/uverbs_cmd.c</span>
<span class="p_chunk">@@ -295,10 +295,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,</span>
 	struct file			 *filp;
 	int ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	mutex_lock(&amp;file-&gt;mutex);
<span class="p_chunk">@@ -308,9 +308,9 @@</span> <span class="p_context"> ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,</span>
 		goto err;
 	}
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
 	ucontext = ib_dev-&gt;alloc_ucontext(ib_dev, &amp;udata);
 	if (IS_ERR(ucontext)) {
<span class="p_chunk">@@ -358,7 +358,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,</span>
 	}
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_file;
 	}
<span class="p_chunk">@@ -442,17 +442,17 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_device(struct ib_uverbs_file *file,</span>
 	struct ib_uverbs_query_device      cmd;
 	struct ib_uverbs_query_device_resp resp;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	copy_query_dev_fields(file, ib_dev, &amp;resp, &amp;ib_dev-&gt;attrs);
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		return -EFAULT;
 
 	return in_len;
<span class="p_chunk">@@ -468,17 +468,17 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_port(struct ib_uverbs_file *file,</span>
 	struct ib_port_attr              attr;
 	int                              ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	ret = ib_query_port(ib_dev, cmd.port_num, &amp;attr);
 	if (ret)
 		return ret;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 
 	resp.state 	     = attr.state;
 	resp.max_mtu 	     = attr.max_mtu;
<span class="p_chunk">@@ -503,7 +503,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_port(struct ib_uverbs_file *file,</span>
 							cmd.port_num);
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		return -EFAULT;
 
 	return in_len;
<span class="p_chunk">@@ -521,17 +521,17 @@</span> <span class="p_context"> ssize_t ib_uverbs_alloc_pd(struct ib_uverbs_file *file,</span>
 	struct ib_pd                  *pd;
 	int                            ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
<span class="p_del">-	uobj = kmalloc(sizeof *uobj, GFP_KERNEL);</span>
<span class="p_add">+	uobj = kmalloc(sizeof(*uobj), GFP_KERNEL);</span>
 	if (!uobj)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -554,11 +554,11 @@</span> <span class="p_context"> ssize_t ib_uverbs_alloc_pd(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_idr;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.pd_handle = uobj-&gt;id;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_copy;
 	}
<span class="p_chunk">@@ -594,7 +594,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_dealloc_pd(struct ib_uverbs_file *file,</span>
 	struct ib_pd		   *pd;
 	int                         ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	uobj = idr_write_uobj(&amp;ib_uverbs_pd_idr, cmd.pd_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -644,7 +644,7 @@</span> <span class="p_context"> static int xrcd_table_insert(struct ib_uverbs_device *dev,</span>
 	struct rb_node **p = &amp;dev-&gt;xrcd_tree.rb_node;
 	struct rb_node *parent = NULL;
 
<span class="p_del">-	entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+	entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 	if (!entry)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -730,15 +730,15 @@</span> <span class="p_context"> ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,</span>
 	int				ret = 0;
 	int				new_xrcd = 0;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof  resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
 	mutex_lock(&amp;file-&gt;device-&gt;xrcd_tree_mutex);
 
<span class="p_chunk">@@ -764,7 +764,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,</span>
 		}
 	}
 
<span class="p_del">-	obj = kmalloc(sizeof *obj, GFP_KERNEL);</span>
<span class="p_add">+	obj = kmalloc(sizeof(*obj), GFP_KERNEL);</span>
 	if (!obj) {
 		ret = -ENOMEM;
 		goto err_tree_mutex_unlock;
<span class="p_chunk">@@ -795,7 +795,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_idr;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.xrcd_handle = obj-&gt;uobject.id;
 
 	if (inode) {
<span class="p_chunk">@@ -809,7 +809,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,</span>
 	}
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_copy;
 	}
<span class="p_chunk">@@ -865,7 +865,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_close_xrcd(struct ib_uverbs_file *file,</span>
 	int                         live;
 	int                         ret = 0;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	mutex_lock(&amp;file-&gt;device-&gt;xrcd_tree_mutex);
<span class="p_chunk">@@ -943,15 +943,15 @@</span> <span class="p_context"> ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,</span>
 	struct ib_mr                *mr;
 	int                          ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
 	if ((cmd.start &amp; ~PAGE_MASK) != (cmd.hca_va &amp; ~PAGE_MASK))
 		return -EINVAL;
<span class="p_chunk">@@ -960,7 +960,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,</span>
 	if (ret)
 		return ret;
 
<span class="p_del">-	uobj = kmalloc(sizeof *uobj, GFP_KERNEL);</span>
<span class="p_add">+	uobj = kmalloc(sizeof(*uobj), GFP_KERNEL);</span>
 	if (!uobj)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -999,13 +999,13 @@</span> <span class="p_context"> ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_unreg;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.lkey      = mr-&gt;lkey;
 	resp.rkey      = mr-&gt;rkey;
 	resp.mr_handle = uobj-&gt;id;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_copy;
 	}
<span class="p_chunk">@@ -1135,7 +1135,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_dereg_mr(struct ib_uverbs_file *file,</span>
 	struct ib_uobject	 *uobj;
 	int                       ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	uobj = idr_write_uobj(&amp;ib_uverbs_mr_idr, cmd.mr_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -1296,10 +1296,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_comp_channel(struct ib_uverbs_file *file,</span>
 	struct file				  *filp;
 	int ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	ret = get_unused_fd_flags(O_CLOEXEC);
<span class="p_chunk">@@ -1314,7 +1314,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_comp_channel(struct ib_uverbs_file *file,</span>
 	}
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		put_unused_fd(resp.fd);
 		fput(filp);
 		return -EFAULT;
<span class="p_chunk">@@ -1347,7 +1347,7 @@</span> <span class="p_context"> static struct ib_ucq_object *create_cq(struct ib_uverbs_file *file,</span>
 	if (cmd-&gt;comp_vector &gt;= file-&gt;device-&gt;num_comp_vectors)
 		return ERR_PTR(-EINVAL);
 
<span class="p_del">-	obj = kmalloc(sizeof *obj, GFP_KERNEL);</span>
<span class="p_add">+	obj = kmalloc(sizeof(*obj), GFP_KERNEL);</span>
 	if (!obj)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -1393,7 +1393,7 @@</span> <span class="p_context"> static struct ib_ucq_object *create_cq(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_free;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.base.cq_handle = obj-&gt;uobject.id;
 	resp.base.cqe       = cq-&gt;cqe;
 
<span class="p_chunk">@@ -1541,12 +1541,12 @@</span> <span class="p_context"> ssize_t ib_uverbs_resize_cq(struct ib_uverbs_file *file,</span>
 	struct ib_cq			*cq;
 	int				ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
 	cq = idr_read_cq(cmd.cq_handle, file-&gt;ucontext, 0);
 	if (!cq)
<span class="p_chunk">@@ -1559,7 +1559,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_resize_cq(struct ib_uverbs_file *file,</span>
 	resp.cqe = cq-&gt;cqe;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp.cqe))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp.cqe)))</span>
 		ret = -EFAULT;
 
 out:
<span class="p_chunk">@@ -1588,7 +1588,7 @@</span> <span class="p_context"> static int copy_wc_to_user(void __user *dest, struct ib_wc *wc)</span>
 	tmp.port_num		= wc-&gt;port_num;
 	tmp.reserved		= 0;
 
<span class="p_del">-	if (copy_to_user(dest, &amp;tmp, sizeof tmp))</span>
<span class="p_add">+	if (copy_to_user(dest, &amp;tmp, sizeof(tmp)))</span>
 		return -EFAULT;
 
 	return 0;
<span class="p_chunk">@@ -1607,7 +1607,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,</span>
 	struct ib_wc                   wc;
 	int                            ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	cq = idr_read_cq(cmd.cq_handle, file-&gt;ucontext, 0);
<span class="p_chunk">@@ -1616,9 +1616,9 @@</span> <span class="p_context"> ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,</span>
 
 	/* we copy a struct ib_uverbs_poll_cq_resp to user space */
 	header_ptr = (void __user *)(unsigned long) cmd.response;
<span class="p_del">-	data_ptr = header_ptr + sizeof resp;</span>
<span class="p_add">+	data_ptr = header_ptr + sizeof(resp);</span>
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	while (resp.count &lt; cmd.ne) {
 		ret = ib_poll_cq(cq, 1, &amp;wc);
 		if (ret &lt; 0)
<span class="p_chunk">@@ -1634,7 +1634,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,</span>
 		++resp.count;
 	}
 
<span class="p_del">-	if (copy_to_user(header_ptr, &amp;resp, sizeof resp)) {</span>
<span class="p_add">+	if (copy_to_user(header_ptr, &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto out_put;
 	}
<span class="p_chunk">@@ -1654,7 +1654,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_req_notify_cq(struct ib_uverbs_file *file,</span>
 	struct ib_uverbs_req_notify_cq cmd;
 	struct ib_cq                  *cq;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	cq = idr_read_cq(cmd.cq_handle, file-&gt;ucontext, 0);
<span class="p_chunk">@@ -1682,7 +1682,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_cq(struct ib_uverbs_file *file,</span>
 	struct ib_uverbs_event_file	*ev_file;
 	int                        	 ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	uobj = idr_write_uobj(&amp;ib_uverbs_cq_idr, cmd.cq_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -1709,14 +1709,14 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_cq(struct ib_uverbs_file *file,</span>
 
 	ib_uverbs_release_ucq(file, ev_file, obj);
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.comp_events_reported  = obj-&gt;comp_events_reported;
 	resp.async_events_reported = obj-&gt;async_events_reported;
 
 	put_uobj(uobj);
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		return -EFAULT;
 
 	return in_len;
<span class="p_chunk">@@ -1748,7 +1748,7 @@</span> <span class="p_context"> static int create_qp(struct ib_uverbs_file *file,</span>
 	if (cmd-&gt;qp_type == IB_QPT_RAW_PACKET &amp;&amp; !capable(CAP_NET_RAW))
 		return -EPERM;
 
<span class="p_del">-	obj = kzalloc(sizeof *obj, GFP_KERNEL);</span>
<span class="p_add">+	obj = kzalloc(sizeof(*obj), GFP_KERNEL);</span>
 	if (!obj)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1875,7 +1875,7 @@</span> <span class="p_context"> static int create_qp(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_destroy;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.base.qpn             = qp-&gt;qp_num;
 	resp.base.qp_handle       = obj-&gt;uevent.uobject.id;
 	resp.base.max_recv_sge    = attr.cap.max_recv_sge;
<span class="p_chunk">@@ -2059,17 +2059,17 @@</span> <span class="p_context"> ssize_t ib_uverbs_open_qp(struct ib_uverbs_file *file,</span>
 	struct ib_qp_open_attr          attr;
 	int ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
<span class="p_del">-	obj = kmalloc(sizeof *obj, GFP_KERNEL);</span>
<span class="p_add">+	obj = kmalloc(sizeof(*obj), GFP_KERNEL);</span>
 	if (!obj)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2104,12 +2104,12 @@</span> <span class="p_context"> ssize_t ib_uverbs_open_qp(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_destroy;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.qpn       = qp-&gt;qp_num;
 	resp.qp_handle = obj-&gt;uevent.uobject.id;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_remove;
 	}
<span class="p_chunk">@@ -2152,11 +2152,11 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,</span>
 	struct ib_qp_init_attr         *init_attr;
 	int                            ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	attr      = kmalloc(sizeof *attr, GFP_KERNEL);</span>
<span class="p_del">-	init_attr = kmalloc(sizeof *init_attr, GFP_KERNEL);</span>
<span class="p_add">+	attr      = kmalloc(sizeof(*attr), GFP_KERNEL);</span>
<span class="p_add">+	init_attr = kmalloc(sizeof(*init_attr), GFP_KERNEL);</span>
 	if (!attr || !init_attr) {
 		ret = -ENOMEM;
 		goto out;
<span class="p_chunk">@@ -2175,7 +2175,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto out;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 
 	resp.qp_state               = attr-&gt;qp_state;
 	resp.cur_qp_state           = attr-&gt;cur_qp_state;
<span class="p_chunk">@@ -2231,7 +2231,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,</span>
 	resp.sq_sig_all             = init_attr-&gt;sq_sig_type == IB_SIGNAL_ALL_WR;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		ret = -EFAULT;
 
 out:
<span class="p_chunk">@@ -2266,13 +2266,13 @@</span> <span class="p_context"> ssize_t ib_uverbs_modify_qp(struct ib_uverbs_file *file,</span>
 	struct ib_qp_attr         *attr;
 	int                        ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd, NULL, in_len - sizeof cmd,</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd), NULL, in_len - sizeof(cmd),</span>
 		   out_len);
 
<span class="p_del">-	attr = kmalloc(sizeof *attr, GFP_KERNEL);</span>
<span class="p_add">+	attr = kmalloc(sizeof(*attr), GFP_KERNEL);</span>
 	if (!attr)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2364,10 +2364,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_qp(struct ib_uverbs_file *file,</span>
 	struct ib_uqp_object        	*obj;
 	int                        	 ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 
 	uobj = idr_write_uobj(&amp;ib_uverbs_qp_idr, cmd.qp_handle, file-&gt;ucontext);
 	if (!uobj)
<span class="p_chunk">@@ -2405,7 +2405,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_qp(struct ib_uverbs_file *file,</span>
 	put_uobj(uobj);
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		return -EFAULT;
 
 	return in_len;
<span class="p_chunk">@@ -2432,10 +2432,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,</span>
 	ssize_t                         ret = -EINVAL;
 	size_t                          next_size;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	if (in_len &lt; sizeof cmd + cmd.wqe_size * cmd.wr_count +</span>
<span class="p_add">+	if (in_len &lt; sizeof(cmd) + cmd.wqe_size * cmd.wr_count +</span>
 	    cmd.sge_count * sizeof (struct ib_uverbs_sge))
 		return -EINVAL;
 
<span class="p_chunk">@@ -2455,7 +2455,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,</span>
 	last = NULL;
 	for (i = 0; i &lt; cmd.wr_count; ++i) {
 		if (copy_from_user(user_wr,
<span class="p_del">-				   buf + sizeof cmd + i * cmd.wqe_size,</span>
<span class="p_add">+				   buf + sizeof(cmd) + i * cmd.wqe_size,</span>
 				   cmd.wqe_size)) {
 			ret = -EFAULT;
 			goto out_put;
<span class="p_chunk">@@ -2563,7 +2563,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,</span>
 			next-&gt;sg_list = (void *) next +
 				ALIGN(next_size, sizeof(struct ib_sge));
 			if (copy_from_user(next-&gt;sg_list,
<span class="p_del">-					   buf + sizeof cmd +</span>
<span class="p_add">+					   buf + sizeof(cmd) +</span>
 					   cmd.wr_count * cmd.wqe_size +
 					   sg_ind * sizeof (struct ib_sge),
 					   next-&gt;num_sge * sizeof (struct ib_sge))) {
<span class="p_chunk">@@ -2585,7 +2585,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,</span>
 		}
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		ret = -EFAULT;
 
 out_put:
<span class="p_chunk">@@ -2642,7 +2642,7 @@</span> <span class="p_context"> static struct ib_recv_wr *ib_uverbs_unmarshall_recv(const char __user *buf,</span>
 			goto err;
 		}
 
<span class="p_del">-		next = kmalloc(ALIGN(sizeof *next, sizeof (struct ib_sge)) +</span>
<span class="p_add">+		next = kmalloc(ALIGN(sizeof(*next), sizeof (struct ib_sge)) +</span>
 			       user_wr-&gt;num_sge * sizeof (struct ib_sge),
 			       GFP_KERNEL);
 		if (!next) {
<span class="p_chunk">@@ -2662,7 +2662,7 @@</span> <span class="p_context"> static struct ib_recv_wr *ib_uverbs_unmarshall_recv(const char __user *buf,</span>
 
 		if (next-&gt;num_sge) {
 			next-&gt;sg_list = (void *) next +
<span class="p_del">-				ALIGN(sizeof *next, sizeof (struct ib_sge));</span>
<span class="p_add">+				ALIGN(sizeof(*next), sizeof (struct ib_sge));</span>
 			if (copy_from_user(next-&gt;sg_list,
 					   buf + wr_count * wqe_size +
 					   sg_ind * sizeof (struct ib_sge),
<span class="p_chunk">@@ -2701,11 +2701,11 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_recv(struct ib_uverbs_file *file,</span>
 	struct ib_qp                   *qp;
 	ssize_t                         ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	wr = ib_uverbs_unmarshall_recv(buf + sizeof cmd,</span>
<span class="p_del">-				       in_len - sizeof cmd, cmd.wr_count,</span>
<span class="p_add">+	wr = ib_uverbs_unmarshall_recv(buf + sizeof(cmd),</span>
<span class="p_add">+				       in_len - sizeof(cmd), cmd.wr_count,</span>
 				       cmd.sge_count, cmd.wqe_size);
 	if (IS_ERR(wr))
 		return PTR_ERR(wr);
<span class="p_chunk">@@ -2727,7 +2727,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_recv(struct ib_uverbs_file *file,</span>
 		}
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		ret = -EFAULT;
 
 out:
<span class="p_chunk">@@ -2751,11 +2751,11 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_srq_recv(struct ib_uverbs_file *file,</span>
 	struct ib_srq                      *srq;
 	ssize_t                             ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	wr = ib_uverbs_unmarshall_recv(buf + sizeof cmd,</span>
<span class="p_del">-				       in_len - sizeof cmd, cmd.wr_count,</span>
<span class="p_add">+	wr = ib_uverbs_unmarshall_recv(buf + sizeof(cmd),</span>
<span class="p_add">+				       in_len - sizeof(cmd), cmd.wr_count,</span>
 				       cmd.sge_count, cmd.wqe_size);
 	if (IS_ERR(wr))
 		return PTR_ERR(wr);
<span class="p_chunk">@@ -2777,7 +2777,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_post_srq_recv(struct ib_uverbs_file *file,</span>
 		}
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		ret = -EFAULT;
 
 out:
<span class="p_chunk">@@ -2803,13 +2803,13 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_ah(struct ib_uverbs_file *file,</span>
 	struct ib_ah_attr		attr;
 	int ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	uobj = kmalloc(sizeof *uobj, GFP_KERNEL);</span>
<span class="p_add">+	uobj = kmalloc(sizeof(*uobj), GFP_KERNEL);</span>
 	if (!uobj)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2851,7 +2851,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_ah(struct ib_uverbs_file *file,</span>
 	resp.ah_handle = uobj-&gt;id;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_copy;
 	}
<span class="p_chunk">@@ -2891,7 +2891,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_ah(struct ib_uverbs_file *file,</span>
 	struct ib_uobject	   *uobj;
 	int			    ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	uobj = idr_write_uobj(&amp;ib_uverbs_ah_idr, cmd.ah_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -2930,7 +2930,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_attach_mcast(struct ib_uverbs_file *file,</span>
 	struct ib_uverbs_mcast_entry *mcast;
 	int                           ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	qp = idr_write_qp(cmd.qp_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -2941,19 +2941,19 @@</span> <span class="p_context"> ssize_t ib_uverbs_attach_mcast(struct ib_uverbs_file *file,</span>
 
 	list_for_each_entry(mcast, &amp;obj-&gt;mcast_list, list)
 		if (cmd.mlid == mcast-&gt;lid &amp;&amp;
<span class="p_del">-		    !memcmp(cmd.gid, mcast-&gt;gid.raw, sizeof mcast-&gt;gid.raw)) {</span>
<span class="p_add">+		    !memcmp(cmd.gid, mcast-&gt;gid.raw, sizeof(mcast-&gt;gid.raw))) {</span>
 			ret = 0;
 			goto out_put;
 		}
 
<span class="p_del">-	mcast = kmalloc(sizeof *mcast, GFP_KERNEL);</span>
<span class="p_add">+	mcast = kmalloc(sizeof(*mcast), GFP_KERNEL);</span>
 	if (!mcast) {
 		ret = -ENOMEM;
 		goto out_put;
 	}
 
 	mcast-&gt;lid = cmd.mlid;
<span class="p_del">-	memcpy(mcast-&gt;gid.raw, cmd.gid, sizeof mcast-&gt;gid.raw);</span>
<span class="p_add">+	memcpy(mcast-&gt;gid.raw, cmd.gid, sizeof(mcast-&gt;gid.raw));</span>
 
 	ret = ib_attach_mcast(qp, &amp;mcast-&gt;gid, cmd.mlid);
 	if (!ret)
<span class="p_chunk">@@ -2978,7 +2978,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_detach_mcast(struct ib_uverbs_file *file,</span>
 	struct ib_uverbs_mcast_entry *mcast;
 	int                           ret = -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	qp = idr_write_qp(cmd.qp_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -2993,7 +2993,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_detach_mcast(struct ib_uverbs_file *file,</span>
 
 	list_for_each_entry(mcast, &amp;obj-&gt;mcast_list, list)
 		if (cmd.mlid == mcast-&gt;lid &amp;&amp;
<span class="p_del">-		    !memcmp(cmd.gid, mcast-&gt;gid.raw, sizeof mcast-&gt;gid.raw)) {</span>
<span class="p_add">+		    !memcmp(cmd.gid, mcast-&gt;gid.raw, sizeof(mcast-&gt;gid.raw))) {</span>
 			list_del(&amp;mcast-&gt;list);
 			kfree(mcast);
 			break;
<span class="p_chunk">@@ -3265,7 +3265,7 @@</span> <span class="p_context"> static int __uverbs_create_xsrq(struct ib_uverbs_file *file,</span>
 	struct ib_srq_init_attr          attr;
 	int ret;
 
<span class="p_del">-	obj = kmalloc(sizeof *obj, GFP_KERNEL);</span>
<span class="p_add">+	obj = kmalloc(sizeof(*obj), GFP_KERNEL);</span>
 	if (!obj)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -3333,7 +3333,7 @@</span> <span class="p_context"> static int __uverbs_create_xsrq(struct ib_uverbs_file *file,</span>
 	if (ret)
 		goto err_destroy;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.srq_handle = obj-&gt;uevent.uobject.id;
 	resp.max_wr     = attr.attr.max_wr;
 	resp.max_sge    = attr.attr.max_sge;
<span class="p_chunk">@@ -3341,7 +3341,7 @@</span> <span class="p_context"> static int __uverbs_create_xsrq(struct ib_uverbs_file *file,</span>
 		resp.srqn = srq-&gt;ext.xrc.srq_num;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd-&gt;response,
<span class="p_del">-			 &amp;resp, sizeof resp)) {</span>
<span class="p_add">+			 &amp;resp, sizeof(resp))) {</span>
 		ret = -EFAULT;
 		goto err_copy;
 	}
<span class="p_chunk">@@ -3397,10 +3397,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_srq(struct ib_uverbs_file *file,</span>
 	struct ib_udata                  udata;
 	int ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	xcmd.response	 = cmd.response;
<span class="p_chunk">@@ -3411,9 +3411,9 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_srq(struct ib_uverbs_file *file,</span>
 	xcmd.max_sge	 = cmd.max_sge;
 	xcmd.srq_limit	 = cmd.srq_limit;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
 	ret = __uverbs_create_xsrq(file, ib_dev, &amp;xcmd, &amp;udata);
 	if (ret)
<span class="p_chunk">@@ -3431,15 +3431,15 @@</span> <span class="p_context"> ssize_t ib_uverbs_create_xsrq(struct ib_uverbs_file *file,</span>
 	struct ib_udata                  udata;
 	int ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd,</span>
<span class="p_del">-		   (unsigned long) cmd.response + sizeof resp,</span>
<span class="p_del">-		   in_len - sizeof cmd, out_len - sizeof resp);</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd),</span>
<span class="p_add">+		   (unsigned long) cmd.response + sizeof(resp),</span>
<span class="p_add">+		   in_len - sizeof(cmd), out_len - sizeof(resp));</span>
 
 	ret = __uverbs_create_xsrq(file, ib_dev, &amp;cmd, &amp;udata);
 	if (ret)
<span class="p_chunk">@@ -3459,10 +3459,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_modify_srq(struct ib_uverbs_file *file,</span>
 	struct ib_srq_attr          attr;
 	int                         ret;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	INIT_UDATA(&amp;udata, buf + sizeof cmd, NULL, in_len - sizeof cmd,</span>
<span class="p_add">+	INIT_UDATA(&amp;udata, buf + sizeof(cmd), NULL, in_len - sizeof(cmd),</span>
 		   out_len);
 
 	srq = idr_read_srq(cmd.srq_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -3490,10 +3490,10 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_srq(struct ib_uverbs_file *file,</span>
 	struct ib_srq                   *srq;
 	int                             ret;
 
<span class="p_del">-	if (out_len &lt; sizeof resp)</span>
<span class="p_add">+	if (out_len &lt; sizeof(resp))</span>
 		return -ENOSPC;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	srq = idr_read_srq(cmd.srq_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -3507,14 +3507,14 @@</span> <span class="p_context"> ssize_t ib_uverbs_query_srq(struct ib_uverbs_file *file,</span>
 	if (ret)
 		return ret;
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 
 	resp.max_wr    = attr.max_wr;
 	resp.max_sge   = attr.max_sge;
 	resp.srq_limit = attr.srq_limit;
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		return -EFAULT;
 
 	return in_len;
<span class="p_chunk">@@ -3534,7 +3534,7 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_srq(struct ib_uverbs_file *file,</span>
 	struct ib_usrq_object		 *us;
 	enum ib_srq_type		  srq_type;
 
<span class="p_del">-	if (copy_from_user(&amp;cmd, buf, sizeof cmd))</span>
<span class="p_add">+	if (copy_from_user(&amp;cmd, buf, sizeof(cmd)))</span>
 		return -EFAULT;
 
 	uobj = idr_write_uobj(&amp;ib_uverbs_srq_idr, cmd.srq_handle, file-&gt;ucontext);
<span class="p_chunk">@@ -3566,13 +3566,13 @@</span> <span class="p_context"> ssize_t ib_uverbs_destroy_srq(struct ib_uverbs_file *file,</span>
 
 	ib_uverbs_release_uevent(file, obj);
 
<span class="p_del">-	memset(&amp;resp, 0, sizeof resp);</span>
<span class="p_add">+	memset(&amp;resp, 0, sizeof(resp));</span>
 	resp.events_reported = obj-&gt;events_reported;
 
 	put_uobj(uobj);
 
 	if (copy_to_user((void __user *) (unsigned long) cmd.response,
<span class="p_del">-			 &amp;resp, sizeof resp))</span>
<span class="p_add">+			 &amp;resp, sizeof(resp)))</span>
 		ret = -EFAULT;
 
 	return ret ? ret : in_len;
<span class="p_header">diff --git a/drivers/infiniband/core/uverbs_main.c b/drivers/infiniband/core/uverbs_main.c</span>
<span class="p_header">index 39680aed99dd..03d8ffa60ba3 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/uverbs_main.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/uverbs_main.c</span>
<span class="p_chunk">@@ -487,7 +487,7 @@</span> <span class="p_context"> void ib_uverbs_comp_handler(struct ib_cq *cq, void *cq_context)</span>
 		return;
 	}
 
<span class="p_del">-	entry = kmalloc(sizeof *entry, GFP_ATOMIC);</span>
<span class="p_add">+	entry = kmalloc(sizeof(*entry), GFP_ATOMIC);</span>
 	if (!entry) {
 		spin_unlock_irqrestore(&amp;file-&gt;lock, flags);
 		return;
<span class="p_chunk">@@ -520,7 +520,7 @@</span> <span class="p_context"> static void ib_uverbs_async_handler(struct ib_uverbs_file *file,</span>
 		return;
 	}
 
<span class="p_del">-	entry = kmalloc(sizeof *entry, GFP_ATOMIC);</span>
<span class="p_add">+	entry = kmalloc(sizeof(*entry), GFP_ATOMIC);</span>
 	if (!entry) {
 		spin_unlock_irqrestore(&amp;file-&gt;async_file-&gt;lock, flags);
 		return;
<span class="p_chunk">@@ -693,10 +693,10 @@</span> <span class="p_context"> static ssize_t ib_uverbs_write(struct file *filp, const char __user *buf,</span>
 	int srcu_key;
 	ssize_t ret;
 
<span class="p_del">-	if (count &lt; sizeof hdr)</span>
<span class="p_add">+	if (count &lt; sizeof(hdr))</span>
 		return -EINVAL;
 
<span class="p_del">-	if (copy_from_user(&amp;hdr, buf, sizeof hdr))</span>
<span class="p_add">+	if (copy_from_user(&amp;hdr, buf, sizeof(hdr)))</span>
 		return -EFAULT;
 
 	srcu_key = srcu_read_lock(&amp;file-&gt;device-&gt;disassociate_srcu);
<span class="p_chunk">@@ -1080,7 +1080,7 @@</span> <span class="p_context"> static void ib_uverbs_add_one(struct ib_device *device)</span>
 	if (!device-&gt;alloc_ucontext)
 		return;
 
<span class="p_del">-	uverbs_dev = kzalloc(sizeof *uverbs_dev, GFP_KERNEL);</span>
<span class="p_add">+	uverbs_dev = kzalloc(sizeof(*uverbs_dev), GFP_KERNEL);</span>
 	if (!uverbs_dev)
 		return;
 
<span class="p_header">diff --git a/drivers/infiniband/core/uverbs_marshall.c b/drivers/infiniband/core/uverbs_marshall.c</span>
<span class="p_header">index af020f80d50f..afb79ca25bc6 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/uverbs_marshall.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/uverbs_marshall.c</span>
<span class="p_chunk">@@ -36,7 +36,7 @@</span> <span class="p_context"></span>
 void ib_copy_ah_attr_to_user(struct ib_uverbs_ah_attr *dst,
 			     struct ib_ah_attr *src)
 {
<span class="p_del">-	memcpy(dst-&gt;grh.dgid, src-&gt;grh.dgid.raw, sizeof src-&gt;grh.dgid);</span>
<span class="p_add">+	memcpy(dst-&gt;grh.dgid, src-&gt;grh.dgid.raw, sizeof(src-&gt;grh.dgid));</span>
 	dst-&gt;grh.flow_label        = src-&gt;grh.flow_label;
 	dst-&gt;grh.sgid_index        = src-&gt;grh.sgid_index;
 	dst-&gt;grh.hop_limit         = src-&gt;grh.hop_limit;
<span class="p_chunk">@@ -94,8 +94,8 @@</span> <span class="p_context"> EXPORT_SYMBOL(ib_copy_qp_attr_to_user);</span>
 void ib_copy_path_rec_to_user(struct ib_user_path_rec *dst,
 			      struct ib_sa_path_rec *src)
 {
<span class="p_del">-	memcpy(dst-&gt;dgid, src-&gt;dgid.raw, sizeof src-&gt;dgid);</span>
<span class="p_del">-	memcpy(dst-&gt;sgid, src-&gt;sgid.raw, sizeof src-&gt;sgid);</span>
<span class="p_add">+	memcpy(dst-&gt;dgid, src-&gt;dgid.raw, sizeof(src-&gt;dgid));</span>
<span class="p_add">+	memcpy(dst-&gt;sgid, src-&gt;sgid.raw, sizeof(src-&gt;sgid));</span>
 
 	dst-&gt;dlid		= src-&gt;dlid;
 	dst-&gt;slid		= src-&gt;slid;
<span class="p_chunk">@@ -120,8 +120,8 @@</span> <span class="p_context"> EXPORT_SYMBOL(ib_copy_path_rec_to_user);</span>
 void ib_copy_path_rec_from_user(struct ib_sa_path_rec *dst,
 				struct ib_user_path_rec *src)
 {
<span class="p_del">-	memcpy(dst-&gt;dgid.raw, src-&gt;dgid, sizeof dst-&gt;dgid);</span>
<span class="p_del">-	memcpy(dst-&gt;sgid.raw, src-&gt;sgid, sizeof dst-&gt;sgid);</span>
<span class="p_add">+	memcpy(dst-&gt;dgid.raw, src-&gt;dgid, sizeof(dst-&gt;dgid));</span>
<span class="p_add">+	memcpy(dst-&gt;sgid.raw, src-&gt;sgid, sizeof(dst-&gt;sgid));</span>
 
 	dst-&gt;dlid		= src-&gt;dlid;
 	dst-&gt;slid		= src-&gt;slid;
<span class="p_header">diff --git a/drivers/infiniband/core/verbs.c b/drivers/infiniband/core/verbs.c</span>
<span class="p_header">index 5af6d024e053..bee1e89c9a09 100644</span>
<span class="p_header">--- a/drivers/infiniband/core/verbs.c</span>
<span class="p_header">+++ b/drivers/infiniband/core/verbs.c</span>
<span class="p_chunk">@@ -438,7 +438,7 @@</span> <span class="p_context"> int ib_init_ah_from_wc(struct ib_device *device, u8 port_num,</span>
 	union ib_gid dgid;
 	union ib_gid sgid;
 
<span class="p_del">-	memset(ah_attr, 0, sizeof *ah_attr);</span>
<span class="p_add">+	memset(ah_attr, 0, sizeof(*ah_attr));</span>
 	if (rdma_cap_eth_ah(device, port_num)) {
 		if (wc-&gt;wc_flags &amp; IB_WC_WITH_NETWORK_HDR_TYPE)
 			net_type = wc-&gt;network_hdr_type;
<span class="p_chunk">@@ -682,7 +682,7 @@</span> <span class="p_context"> static struct ib_qp *__ib_open_qp(struct ib_qp *real_qp,</span>
 	struct ib_qp *qp;
 	unsigned long flags;
 
<span class="p_del">-	qp = kzalloc(sizeof *qp, GFP_KERNEL);</span>
<span class="p_add">+	qp = kzalloc(sizeof(*qp), GFP_KERNEL);</span>
 	if (!qp)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb3/cxio_hal.c b/drivers/infiniband/hw/cxgb3/cxio_hal.c</span>
<span class="p_header">index de1c61b417d6..720372eaa958 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb3/cxio_hal.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb3/cxio_hal.c</span>
<span class="p_chunk">@@ -221,7 +221,7 @@</span> <span class="p_context"> static u32 get_qpid(struct cxio_rdev *rdev_p, struct cxio_ucontext *uctx)</span>
 		if (!qpid)
 			goto out;
 		for (i = qpid+1; i &amp; rdev_p-&gt;qpmask; i++) {
<span class="p_del">-			entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+			entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 			if (!entry)
 				break;
 			entry-&gt;qpid = i;
<span class="p_chunk">@@ -239,7 +239,7 @@</span> <span class="p_context"> static void put_qpid(struct cxio_rdev *rdev_p, u32 qpid,</span>
 {
 	struct cxio_qpid_list *entry;
 
<span class="p_del">-	entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+	entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 	if (!entry)
 		return;
 	PDBG(&quot;%s qpid 0x%x\n&quot;, __func__, qpid);
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb3/iwch_cm.c b/drivers/infiniband/hw/cxgb3/iwch_cm.c</span>
<span class="p_header">index f504ba73e5dc..52a451f26110 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb3/iwch_cm.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb3/iwch_cm.c</span>
<span class="p_chunk">@@ -172,7 +172,7 @@</span> <span class="p_context"> static void release_tid(struct t3cdev *tdev, u32 hwtid, struct sk_buff *skb)</span>
 {
 	struct cpl_tid_release *req;
 
<span class="p_del">-	skb = get_skb(skb, sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	skb = get_skb(skb, sizeof(*req), GFP_KERNEL);</span>
 	if (!skb)
 		return;
 	req = (struct cpl_tid_release *) skb_put(skb, sizeof(*req));
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb3/iwch_provider.c b/drivers/infiniband/hw/cxgb3/iwch_provider.c</span>
<span class="p_header">index 2734820d291b..524bd0023ef2 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb3/iwch_provider.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb3/iwch_provider.c</span>
<span class="p_chunk">@@ -168,7 +168,7 @@</span> <span class="p_context"> static struct ib_cq *iwch_create_cq(struct ib_device *ibdev,</span>
 	if (ib_context) {
 		ucontext = to_iwch_ucontext(ib_context);
 		if (!t3a_device(rhp)) {
<span class="p_del">-			if (ib_copy_from_udata(&amp;ureq, udata, sizeof (ureq))) {</span>
<span class="p_add">+			if (ib_copy_from_udata(&amp;ureq, udata, sizeof(ureq))) {</span>
 				kfree(chp);
 				return ERR_PTR(-EFAULT);
 			}
<span class="p_chunk">@@ -211,7 +211,7 @@</span> <span class="p_context"> static struct ib_cq *iwch_create_cq(struct ib_device *ibdev,</span>
 	if (ucontext) {
 		struct iwch_mm_entry *mm;
 
<span class="p_del">-		mm = kmalloc(sizeof *mm, GFP_KERNEL);</span>
<span class="p_add">+		mm = kmalloc(sizeof(*mm), GFP_KERNEL);</span>
 		if (!mm) {
 			iwch_destroy_cq(&amp;chp-&gt;ibcq);
 			return ERR_PTR(-ENOMEM);
<span class="p_chunk">@@ -224,7 +224,7 @@</span> <span class="p_context"> static struct ib_cq *iwch_create_cq(struct ib_device *ibdev,</span>
 		spin_unlock(&amp;ucontext-&gt;mmap_lock);
 		mm-&gt;key = uresp.key;
 		mm-&gt;addr = virt_to_phys(chp-&gt;cq.queue);
<span class="p_del">-		if (udata-&gt;outlen &lt; sizeof uresp) {</span>
<span class="p_add">+		if (udata-&gt;outlen &lt; sizeof(uresp)) {</span>
 			if (!warned++)
 				printk(KERN_WARNING MOD &quot;Warning - &quot;
 				       &quot;downlevel libcxgb3 (non-fatal).\n&quot;);
<span class="p_chunk">@@ -236,7 +236,7 @@</span> <span class="p_context"> static struct ib_cq *iwch_create_cq(struct ib_device *ibdev,</span>
 					     sizeof(struct t3_cqe));
 			uresp.memsize = mm-&gt;len;
 			uresp.reserved = 0;
<span class="p_del">-			resplen = sizeof uresp;</span>
<span class="p_add">+			resplen = sizeof(uresp);</span>
 		}
 		if (ib_copy_to_udata(udata, &amp;uresp, resplen)) {
 			kfree(mm);
<span class="p_chunk">@@ -442,7 +442,7 @@</span> <span class="p_context"> static struct ib_pd *iwch_allocate_pd(struct ib_device *ibdev,</span>
 	php-&gt;pdid = pdid;
 	php-&gt;rhp = rhp;
 	if (context) {
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;php-&gt;pdid, sizeof (__u32))) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;php-&gt;pdid, sizeof(__u32))) {</span>
 			iwch_deallocate_pd(&amp;php-&gt;ibpd);
 			return ERR_PTR(-EFAULT);
 		}
<span class="p_chunk">@@ -604,7 +604,7 @@</span> <span class="p_context"> static struct ib_mr *iwch_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,</span>
 			for (k = 0; k &lt; len; ++k) {
 				pages[i++] = cpu_to_be64(sg_dma_address(sg) +
 					mhp-&gt;umem-&gt;page_size * k);
<span class="p_del">-				if (i == PAGE_SIZE / sizeof *pages) {</span>
<span class="p_add">+				if (i == PAGE_SIZE / sizeof(*pages)) {</span>
 					err = iwch_write_pbl(mhp, pages, i, n);
 					if (err)
 						goto pbl_done;
<span class="p_chunk">@@ -639,7 +639,7 @@</span> <span class="p_context"> static struct ib_mr *iwch_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,</span>
 		PDBG(&quot;%s user resp pbl_addr 0x%x\n&quot;, __func__,
 		     uresp.pbl_addr);
 
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;uresp, sizeof (uresp))) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;uresp, sizeof(uresp))) {</span>
 			iwch_dereg_mr(&amp;mhp-&gt;ibmr);
 			err = -EFAULT;
 			goto err;
<span class="p_chunk">@@ -933,13 +933,13 @@</span> <span class="p_context"> static struct ib_qp *iwch_create_qp(struct ib_pd *pd,</span>
 
 		struct iwch_mm_entry *mm1, *mm2;
 
<span class="p_del">-		mm1 = kmalloc(sizeof *mm1, GFP_KERNEL);</span>
<span class="p_add">+		mm1 = kmalloc(sizeof(*mm1), GFP_KERNEL);</span>
 		if (!mm1) {
 			iwch_destroy_qp(&amp;qhp-&gt;ibqp);
 			return ERR_PTR(-ENOMEM);
 		}
 
<span class="p_del">-		mm2 = kmalloc(sizeof *mm2, GFP_KERNEL);</span>
<span class="p_add">+		mm2 = kmalloc(sizeof(*mm2), GFP_KERNEL);</span>
 		if (!mm2) {
 			kfree(mm1);
 			iwch_destroy_qp(&amp;qhp-&gt;ibqp);
<span class="p_chunk">@@ -956,7 +956,7 @@</span> <span class="p_context"> static struct ib_qp *iwch_create_qp(struct ib_pd *pd,</span>
 		uresp.db_key = ucontext-&gt;key;
 		ucontext-&gt;key += PAGE_SIZE;
 		spin_unlock(&amp;ucontext-&gt;mmap_lock);
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;uresp, sizeof (uresp))) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;uresp, sizeof(uresp))) {</span>
 			kfree(mm1);
 			kfree(mm2);
 			iwch_destroy_qp(&amp;qhp-&gt;ibqp);
<span class="p_chunk">@@ -999,7 +999,7 @@</span> <span class="p_context"> static int iwch_ib_modify_qp(struct ib_qp *ibqp, struct ib_qp_attr *attr,</span>
 	if (!attr_mask)
 		return 0;
 
<span class="p_del">-	memset(&amp;attrs, 0, sizeof attrs);</span>
<span class="p_add">+	memset(&amp;attrs, 0, sizeof(attrs));</span>
 	qhp = to_iwch_qp(ibqp);
 	rhp = qhp-&gt;rhp;
 
<span class="p_chunk">@@ -1095,7 +1095,7 @@</span> <span class="p_context"> static int iwch_query_device(struct ib_device *ibdev, struct ib_device_attr *pro</span>
 		return -EINVAL;
 
 	dev = to_iwch_dev(ibdev);
<span class="p_del">-	memset(props, 0, sizeof *props);</span>
<span class="p_add">+	memset(props, 0, sizeof(*props));</span>
 	memcpy(&amp;props-&gt;sys_image_guid, dev-&gt;rdev.t3cdev_p-&gt;lldev-&gt;dev_addr, 6);
 	props-&gt;hw_ver = dev-&gt;rdev.t3cdev_p-&gt;type;
 	props-&gt;fw_ver = fw_vers_string_to_u64(dev);
<span class="p_chunk">@@ -1231,7 +1231,7 @@</span> <span class="p_context"> static int iwch_get_mib(struct ib_device *ibdev,</span>
 	if (ret)
 		return -ENOSYS;
 
<span class="p_del">-	memset(stats, 0, sizeof *stats);</span>
<span class="p_add">+	memset(stats, 0, sizeof(*stats));</span>
 	stats-&gt;iw.ipInReceives = ((u64) m.ipInReceive_hi &lt;&lt; 32) +
 				m.ipInReceive_lo;
 	stats-&gt;iw.ipInHdrErrors = ((u64) m.ipInHdrErrors_hi &lt;&lt; 32) +
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/cm.c b/drivers/infiniband/hw/cxgb4/cm.c</span>
<span class="p_header">index cd2ff5f9518a..9abbeedd16c0 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/cm.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/cm.c</span>
<span class="p_chunk">@@ -223,7 +223,7 @@</span> <span class="p_context"> static void release_tid(struct c4iw_rdev *rdev, u32 hwtid, struct sk_buff *skb)</span>
 {
 	struct cpl_tid_release *req;
 
<span class="p_del">-	skb = get_skb(skb, sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	skb = get_skb(skb, sizeof(*req), GFP_KERNEL);</span>
 	if (!skb)
 		return;
 	req = (struct cpl_tid_release *) skb_put(skb, sizeof(*req));
<span class="p_chunk">@@ -528,7 +528,7 @@</span> <span class="p_context"> static int send_halfclose(struct c4iw_ep *ep, gfp_t gfp)</span>
 {
 	struct cpl_close_con_req *req;
 	struct sk_buff *skb;
<span class="p_del">-	int wrlen = roundup(sizeof *req, 16);</span>
<span class="p_add">+	int wrlen = roundup(sizeof(*req), 16);</span>
 
 	PDBG(&quot;%s ep %p tid %u\n&quot;, __func__, ep, ep-&gt;hwtid);
 	skb = get_skb(NULL, wrlen, gfp);
<span class="p_chunk">@@ -549,7 +549,7 @@</span> <span class="p_context"> static int send_halfclose(struct c4iw_ep *ep, gfp_t gfp)</span>
 static int send_abort(struct c4iw_ep *ep, struct sk_buff *skb, gfp_t gfp)
 {
 	struct cpl_abort_req *req;
<span class="p_del">-	int wrlen = roundup(sizeof *req, 16);</span>
<span class="p_add">+	int wrlen = roundup(sizeof(*req), 16);</span>
 
 	PDBG(&quot;%s ep %p tid %u\n&quot;, __func__, ep, ep-&gt;hwtid);
 	skb = get_skb(skb, wrlen, gfp);
<span class="p_chunk">@@ -861,7 +861,7 @@</span> <span class="p_context"> static void send_mpa_req(struct c4iw_ep *ep, struct sk_buff *skb,</span>
 	mpalen = sizeof(*mpa) + ep-&gt;plen;
 	if (mpa_rev_to_use == 2)
 		mpalen += sizeof(struct mpa_v2_conn_params);
<span class="p_del">-	wrlen = roundup(mpalen + sizeof *req, 16);</span>
<span class="p_add">+	wrlen = roundup(mpalen + sizeof(*req), 16);</span>
 	skb = get_skb(skb, wrlen, GFP_KERNEL);
 	if (!skb) {
 		connect_reply_upcall(ep, -ENOMEM);
<span class="p_chunk">@@ -954,7 +954,7 @@</span> <span class="p_context"> static int send_mpa_reject(struct c4iw_ep *ep, const void *pdata, u8 plen)</span>
 	mpalen = sizeof(*mpa) + plen;
 	if (ep-&gt;mpa_attr.version == 2 &amp;&amp; ep-&gt;mpa_attr.enhanced_rdma_conn)
 		mpalen += sizeof(struct mpa_v2_conn_params);
<span class="p_del">-	wrlen = roundup(mpalen + sizeof *req, 16);</span>
<span class="p_add">+	wrlen = roundup(mpalen + sizeof(*req), 16);</span>
 
 	skb = get_skb(NULL, wrlen, GFP_KERNEL);
 	if (!skb) {
<span class="p_chunk">@@ -1034,7 +1034,7 @@</span> <span class="p_context"> static int send_mpa_reply(struct c4iw_ep *ep, const void *pdata, u8 plen)</span>
 	mpalen = sizeof(*mpa) + plen;
 	if (ep-&gt;mpa_attr.version == 2 &amp;&amp; ep-&gt;mpa_attr.enhanced_rdma_conn)
 		mpalen += sizeof(struct mpa_v2_conn_params);
<span class="p_del">-	wrlen = roundup(mpalen + sizeof *req, 16);</span>
<span class="p_add">+	wrlen = roundup(mpalen + sizeof(*req), 16);</span>
 
 	skb = get_skb(NULL, wrlen, GFP_KERNEL);
 	if (!skb) {
<span class="p_chunk">@@ -1308,7 +1308,7 @@</span> <span class="p_context"> static int update_rx_credits(struct c4iw_ep *ep, u32 credits)</span>
 {
 	struct cpl_rx_data_ack *req;
 	struct sk_buff *skb;
<span class="p_del">-	int wrlen = roundup(sizeof *req, 16);</span>
<span class="p_add">+	int wrlen = roundup(sizeof(*req), 16);</span>
 
 	PDBG(&quot;%s ep %p tid %u credits %u\n&quot;, __func__, ep, ep-&gt;hwtid, credits);
 	skb = get_skb(NULL, wrlen, GFP_KERNEL);
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/cq.c b/drivers/infiniband/hw/cxgb4/cq.c</span>
<span class="p_header">index cf21df4a8bf5..42b207d91f89 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/cq.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/cq.c</span>
<span class="p_chunk">@@ -42,7 +42,7 @@</span> <span class="p_context"> static int destroy_cq(struct c4iw_rdev *rdev, struct t4_cq *cq,</span>
 	struct sk_buff *skb;
 	int ret;
 
<span class="p_del">-	wr_len = sizeof *res_wr + sizeof *res;</span>
<span class="p_add">+	wr_len = sizeof(*res_wr) + sizeof(*res);</span>
 	skb = alloc_skb(wr_len, GFP_KERNEL);
 	if (!skb)
 		return -ENOMEM;
<span class="p_chunk">@@ -109,7 +109,7 @@</span> <span class="p_context"> static int create_cq(struct c4iw_rdev *rdev, struct t4_cq *cq,</span>
 	memset(cq-&gt;queue, 0, cq-&gt;memsize);
 
 	/* build fw_ri_res_wr */
<span class="p_del">-	wr_len = sizeof *res_wr + sizeof *res;</span>
<span class="p_add">+	wr_len = sizeof(*res_wr) + sizeof(*res);</span>
 
 	skb = alloc_skb(wr_len, GFP_KERNEL);
 	if (!skb) {
<span class="p_chunk">@@ -915,7 +915,7 @@</span> <span class="p_context"> struct ib_cq *c4iw_create_cq(struct ib_device *ibdev,</span>
 	if (hwentries &lt; 64)
 		hwentries = 64;
 
<span class="p_del">-	memsize = hwentries * sizeof *chp-&gt;cq.queue;</span>
<span class="p_add">+	memsize = hwentries * sizeof(*chp-&gt;cq.queue);</span>
 
 	/*
 	 * memsize must be a multiple of the page size if its a user cq.
<span class="p_chunk">@@ -943,10 +943,10 @@</span> <span class="p_context"> struct ib_cq *c4iw_create_cq(struct ib_device *ibdev,</span>
 		goto err2;
 
 	if (ucontext) {
<span class="p_del">-		mm = kmalloc(sizeof *mm, GFP_KERNEL);</span>
<span class="p_add">+		mm = kmalloc(sizeof(*mm), GFP_KERNEL);</span>
 		if (!mm)
 			goto err3;
<span class="p_del">-		mm2 = kmalloc(sizeof *mm2, GFP_KERNEL);</span>
<span class="p_add">+		mm2 = kmalloc(sizeof(*mm2), GFP_KERNEL);</span>
 		if (!mm2)
 			goto err4;
 
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/device.c b/drivers/infiniband/hw/cxgb4/device.c</span>
<span class="p_header">index 8024ea4417b8..300a594acdee 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/device.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/device.c</span>
<span class="p_chunk">@@ -317,7 +317,7 @@</span> <span class="p_context"> static int qp_open(struct inode *inode, struct file *file)</span>
 	struct c4iw_debugfs_data *qpd;
 	int count = 1;
 
<span class="p_del">-	qpd = kmalloc(sizeof *qpd, GFP_KERNEL);</span>
<span class="p_add">+	qpd = kmalloc(sizeof(*qpd), GFP_KERNEL);</span>
 	if (!qpd)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -406,7 +406,7 @@</span> <span class="p_context"> static int stag_open(struct inode *inode, struct file *file)</span>
 	int ret = 0;
 	int count = 1;
 
<span class="p_del">-	stagd = kmalloc(sizeof *stagd, GFP_KERNEL);</span>
<span class="p_add">+	stagd = kmalloc(sizeof(*stagd), GFP_KERNEL);</span>
 	if (!stagd) {
 		ret = -ENOMEM;
 		goto out;
<span class="p_chunk">@@ -1027,7 +1027,7 @@</span> <span class="p_context"> static void *c4iw_uld_add(const struct cxgb4_lld_info *infop)</span>
 		pr_info(&quot;Chelsio T4/T5 RDMA Driver - version %s\n&quot;,
 			DRV_VERSION);
 
<span class="p_del">-	ctx = kzalloc(sizeof *ctx, GFP_KERNEL);</span>
<span class="p_add">+	ctx = kzalloc(sizeof(*ctx), GFP_KERNEL);</span>
 	if (!ctx) {
 		ctx = ERR_PTR(-ENOMEM);
 		goto out;
<span class="p_chunk">@@ -1210,7 +1210,7 @@</span> <span class="p_context"> static int c4iw_uld_state_change(void *handle, enum cxgb4_state new_state)</span>
 			struct ib_event event;
 
 			ctx-&gt;dev-&gt;rdev.flags |= T4_FATAL_ERROR;
<span class="p_del">-			memset(&amp;event, 0, sizeof event);</span>
<span class="p_add">+			memset(&amp;event, 0, sizeof(event));</span>
 			event.event  = IB_EVENT_DEVICE_FATAL;
 			event.device = &amp;ctx-&gt;dev-&gt;ibdev;
 			ib_dispatch_event(&amp;event);
<span class="p_chunk">@@ -1429,7 +1429,7 @@</span> <span class="p_context"> static void recover_queues(struct uld_ctx *ctx)</span>
 	ctx-&gt;dev-&gt;db_state = RECOVERY;
 	idr_for_each(&amp;ctx-&gt;dev-&gt;qpidr, count_qps, &amp;count);
 
<span class="p_del">-	qp_list.qps = kzalloc(count * sizeof *qp_list.qps, GFP_ATOMIC);</span>
<span class="p_add">+	qp_list.qps = kzalloc(count * sizeof(*qp_list.qps), GFP_ATOMIC);</span>
 	if (!qp_list.qps) {
 		printk(KERN_ERR MOD &quot;%s: Fatal error - DB overflow recovery failed\n&quot;,
 		       pci_name(ctx-&gt;lldi.pdev));
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/mem.c b/drivers/infiniband/hw/cxgb4/mem.c</span>
<span class="p_header">index 7849890c4781..747c0f0dc13b 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/mem.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/mem.c</span>
<span class="p_chunk">@@ -129,7 +129,7 @@</span> <span class="p_context"> static int _c4iw_write_mem_inline(struct c4iw_rdev *rdev, u32 addr, u32 len,</span>
 
 		copy_len = len &gt; C4IW_MAX_INLINE_SIZE ? C4IW_MAX_INLINE_SIZE :
 			   len;
<span class="p_del">-		wr_len = roundup(sizeof *req + sizeof *sc +</span>
<span class="p_add">+		wr_len = roundup(sizeof(*req) + sizeof(*sc) +</span>
 				 roundup(copy_len, T4_ULPTX_MIN_IO), 16);
 
 		skb = alloc_skb(wr_len, GFP_KERNEL);
<span class="p_chunk">@@ -508,7 +508,7 @@</span> <span class="p_context"> struct ib_mr *c4iw_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,</span>
 		for (k = 0; k &lt; len; ++k) {
 			pages[i++] = cpu_to_be64(sg_dma_address(sg) +
 				mhp-&gt;umem-&gt;page_size * k);
<span class="p_del">-			if (i == PAGE_SIZE / sizeof *pages) {</span>
<span class="p_add">+			if (i == PAGE_SIZE / sizeof(*pages)) {</span>
 				err = write_pbl(&amp;mhp-&gt;rhp-&gt;rdev,
 				      pages,
 				      mhp-&gt;attr.pbl_addr + (n &lt;&lt; 3), i);
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/provider.c b/drivers/infiniband/hw/cxgb4/provider.c</span>
<span class="p_header">index ec04272fbdc2..c0b72c9249ac 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/provider.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/provider.c</span>
<span class="p_chunk">@@ -317,7 +317,7 @@</span> <span class="p_context"> static int c4iw_query_device(struct ib_device *ibdev, struct ib_device_attr *pro</span>
 		return -EINVAL;
 
 	dev = to_c4iw_dev(ibdev);
<span class="p_del">-	memset(props, 0, sizeof *props);</span>
<span class="p_add">+	memset(props, 0, sizeof(*props));</span>
 	memcpy(&amp;props-&gt;sys_image_guid, dev-&gt;rdev.lldi.ports[0]-&gt;dev_addr, 6);
 	props-&gt;hw_ver = CHELSIO_CHIP_RELEASE(dev-&gt;rdev.lldi.adapter_type);
 	props-&gt;fw_ver = dev-&gt;rdev.lldi.fw_vers;
<span class="p_chunk">@@ -452,7 +452,7 @@</span> <span class="p_context"> static int c4iw_get_mib(struct ib_device *ibdev,</span>
 	struct c4iw_dev *c4iw_dev = to_c4iw_dev(ibdev);
 
 	cxgb4_get_tcp_stats(c4iw_dev-&gt;rdev.lldi.pdev, &amp;v4, &amp;v6);
<span class="p_del">-	memset(stats, 0, sizeof *stats);</span>
<span class="p_add">+	memset(stats, 0, sizeof(*stats));</span>
 	stats-&gt;iw.tcpInSegs = v4.tcp_in_segs + v6.tcp_in_segs;
 	stats-&gt;iw.tcpOutSegs = v4.tcp_out_segs + v6.tcp_out_segs;
 	stats-&gt;iw.tcpRetransSegs = v4.tcp_retrans_segs + v6.tcp_retrans_segs;
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/qp.c b/drivers/infiniband/hw/cxgb4/qp.c</span>
<span class="p_header">index e99345eb875a..1116def7d93d 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/qp.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/qp.c</span>
<span class="p_chunk">@@ -212,14 +212,14 @@</span> <span class="p_context"> static int create_qp(struct c4iw_rdev *rdev, struct t4_wq *wq,</span>
 	}
 
 	if (!user) {
<span class="p_del">-		wq-&gt;sq.sw_sq = kzalloc(wq-&gt;sq.size * sizeof *wq-&gt;sq.sw_sq,</span>
<span class="p_add">+		wq-&gt;sq.sw_sq = kzalloc(wq-&gt;sq.size * sizeof(*wq-&gt;sq.sw_sq),</span>
 				 GFP_KERNEL);
 		if (!wq-&gt;sq.sw_sq) {
 			ret = -ENOMEM;
 			goto free_rq_qid;
 		}
 
<span class="p_del">-		wq-&gt;rq.sw_rq = kzalloc(wq-&gt;rq.size * sizeof *wq-&gt;rq.sw_rq,</span>
<span class="p_add">+		wq-&gt;rq.sw_rq = kzalloc(wq-&gt;rq.size * sizeof(*wq-&gt;rq.sw_rq),</span>
 				 GFP_KERNEL);
 		if (!wq-&gt;rq.sw_rq) {
 			ret = -ENOMEM;
<span class="p_chunk">@@ -280,7 +280,7 @@</span> <span class="p_context"> static int create_qp(struct c4iw_rdev *rdev, struct t4_wq *wq,</span>
 	wq-&gt;rq.msn = 1;
 
 	/* build fw_ri_res_wr */
<span class="p_del">-	wr_len = sizeof *res_wr + 2 * sizeof *res;</span>
<span class="p_add">+	wr_len = sizeof(*res_wr) + 2 * sizeof(*res);</span>
 
 	skb = alloc_skb(wr_len, GFP_KERNEL);
 	if (!skb) {
<span class="p_chunk">@@ -409,7 +409,7 @@</span> <span class="p_context"> static int build_immd(struct t4_sq *sq, struct fw_ri_immd *immdp,</span>
 			rem -= len;
 		}
 	}
<span class="p_del">-	len = roundup(plen + sizeof *immdp, 16) - (plen + sizeof *immdp);</span>
<span class="p_add">+	len = roundup(plen + sizeof(*immdp), 16) - (plen + sizeof(*immdp));</span>
 	if (len)
 		memset(dstp, 0, len);
 	immdp-&gt;op = FW_RI_DATA_IMMD;
<span class="p_chunk">@@ -493,7 +493,7 @@</span> <span class="p_context"> static int build_rdma_send(struct t4_sq *sq, union t4_wr *wqe,</span>
 					 T4_MAX_SEND_INLINE, &amp;plen);
 			if (ret)
 				return ret;
<span class="p_del">-			size = sizeof wqe-&gt;send + sizeof(struct fw_ri_immd) +</span>
<span class="p_add">+			size = sizeof(wqe-&gt;send) + sizeof(struct fw_ri_immd) +</span>
 			       plen;
 		} else {
 			ret = build_isgl((__be64 *)sq-&gt;queue,
<span class="p_chunk">@@ -502,7 +502,7 @@</span> <span class="p_context"> static int build_rdma_send(struct t4_sq *sq, union t4_wr *wqe,</span>
 					 wr-&gt;sg_list, wr-&gt;num_sge, &amp;plen);
 			if (ret)
 				return ret;
<span class="p_del">-			size = sizeof wqe-&gt;send + sizeof(struct fw_ri_isgl) +</span>
<span class="p_add">+			size = sizeof(wqe-&gt;send) + sizeof(struct fw_ri_isgl) +</span>
 			       wr-&gt;num_sge * sizeof(struct fw_ri_sge);
 		}
 	} else {
<span class="p_chunk">@@ -510,7 +510,7 @@</span> <span class="p_context"> static int build_rdma_send(struct t4_sq *sq, union t4_wr *wqe,</span>
 		wqe-&gt;send.u.immd_src[0].r1 = 0;
 		wqe-&gt;send.u.immd_src[0].r2 = 0;
 		wqe-&gt;send.u.immd_src[0].immdlen = 0;
<span class="p_del">-		size = sizeof wqe-&gt;send + sizeof(struct fw_ri_immd);</span>
<span class="p_add">+		size = sizeof(wqe-&gt;send) + sizeof(struct fw_ri_immd);</span>
 		plen = 0;
 	}
 	*len16 = DIV_ROUND_UP(size, 16);
<span class="p_chunk">@@ -536,7 +536,7 @@</span> <span class="p_context"> static int build_rdma_write(struct t4_sq *sq, union t4_wr *wqe,</span>
 					 T4_MAX_WRITE_INLINE, &amp;plen);
 			if (ret)
 				return ret;
<span class="p_del">-			size = sizeof wqe-&gt;write + sizeof(struct fw_ri_immd) +</span>
<span class="p_add">+			size = sizeof(wqe-&gt;write) + sizeof(struct fw_ri_immd) +</span>
 			       plen;
 		} else {
 			ret = build_isgl((__be64 *)sq-&gt;queue,
<span class="p_chunk">@@ -545,7 +545,7 @@</span> <span class="p_context"> static int build_rdma_write(struct t4_sq *sq, union t4_wr *wqe,</span>
 					 wr-&gt;sg_list, wr-&gt;num_sge, &amp;plen);
 			if (ret)
 				return ret;
<span class="p_del">-			size = sizeof wqe-&gt;write + sizeof(struct fw_ri_isgl) +</span>
<span class="p_add">+			size = sizeof(wqe-&gt;write) + sizeof(struct fw_ri_isgl) +</span>
 			       wr-&gt;num_sge * sizeof(struct fw_ri_sge);
 		}
 	} else {
<span class="p_chunk">@@ -553,7 +553,7 @@</span> <span class="p_context"> static int build_rdma_write(struct t4_sq *sq, union t4_wr *wqe,</span>
 		wqe-&gt;write.u.immd_src[0].r1 = 0;
 		wqe-&gt;write.u.immd_src[0].r2 = 0;
 		wqe-&gt;write.u.immd_src[0].immdlen = 0;
<span class="p_del">-		size = sizeof wqe-&gt;write + sizeof(struct fw_ri_immd);</span>
<span class="p_add">+		size = sizeof(wqe-&gt;write) + sizeof(struct fw_ri_immd);</span>
 		plen = 0;
 	}
 	*len16 = DIV_ROUND_UP(size, 16);
<span class="p_chunk">@@ -586,7 +586,7 @@</span> <span class="p_context"> static int build_rdma_read(union t4_wr *wqe, struct ib_send_wr *wr, u8 *len16)</span>
 	}
 	wqe-&gt;read.r2 = 0;
 	wqe-&gt;read.r5 = 0;
<span class="p_del">-	*len16 = DIV_ROUND_UP(sizeof wqe-&gt;read, 16);</span>
<span class="p_add">+	*len16 = DIV_ROUND_UP(sizeof(wqe-&gt;read), 16);</span>
 	return 0;
 }
 
<span class="p_chunk">@@ -600,7 +600,7 @@</span> <span class="p_context"> static int build_rdma_recv(struct c4iw_qp *qhp, union t4_recv_wr *wqe,</span>
 			 &amp;wqe-&gt;recv.isgl, wr-&gt;sg_list, wr-&gt;num_sge, NULL);
 	if (ret)
 		return ret;
<span class="p_del">-	*len16 = DIV_ROUND_UP(sizeof wqe-&gt;recv +</span>
<span class="p_add">+	*len16 = DIV_ROUND_UP(sizeof(wqe-&gt;recv) +</span>
 			      wr-&gt;num_sge * sizeof(struct fw_ri_sge), 16);
 	return 0;
 }
<span class="p_chunk">@@ -675,7 +675,7 @@</span> <span class="p_context"> static int build_inv_stag(union t4_wr *wqe, struct ib_send_wr *wr,</span>
 {
 	wqe-&gt;inv.stag_inv = cpu_to_be32(wr-&gt;ex.invalidate_rkey);
 	wqe-&gt;inv.r2 = 0;
<span class="p_del">-	*len16 = DIV_ROUND_UP(sizeof wqe-&gt;inv, 16);</span>
<span class="p_add">+	*len16 = DIV_ROUND_UP(sizeof(wqe-&gt;inv), 16);</span>
 	return 0;
 }
 
<span class="p_chunk">@@ -1079,20 +1079,20 @@</span> <span class="p_context"> static void post_terminate(struct c4iw_qp *qhp, struct t4_cqe *err_cqe,</span>
 	PDBG(&quot;%s qhp %p qid 0x%x tid %u\n&quot;, __func__, qhp, qhp-&gt;wq.sq.qid,
 	     qhp-&gt;ep-&gt;hwtid);
 
<span class="p_del">-	skb = alloc_skb(sizeof *wqe, gfp);</span>
<span class="p_add">+	skb = alloc_skb(sizeof(*wqe), gfp);</span>
 	if (!skb)
 		return;
 	set_wr_txq(skb, CPL_PRIORITY_DATA, qhp-&gt;ep-&gt;txq_idx);
 
 	wqe = (struct fw_ri_wr *)__skb_put(skb, sizeof(*wqe));
<span class="p_del">-	memset(wqe, 0, sizeof *wqe);</span>
<span class="p_add">+	memset(wqe, 0, sizeof(*wqe));</span>
 	wqe-&gt;op_compl = cpu_to_be32(FW_WR_OP_V(FW_RI_INIT_WR));
 	wqe-&gt;flowid_len16 = cpu_to_be32(
 		FW_WR_FLOWID_V(qhp-&gt;ep-&gt;hwtid) |
 		FW_WR_LEN16_V(DIV_ROUND_UP(sizeof(*wqe), 16)));
 
 	wqe-&gt;u.terminate.type = FW_RI_TYPE_TERMINATE;
<span class="p_del">-	wqe-&gt;u.terminate.immdlen = cpu_to_be32(sizeof *term);</span>
<span class="p_add">+	wqe-&gt;u.terminate.immdlen = cpu_to_be32(sizeof(*term));</span>
 	term = (struct terminate_message *)wqe-&gt;u.terminate.termmsg;
 	if (qhp-&gt;attr.layer_etype == (LAYER_MPA|DDP_LLP)) {
 		term-&gt;layer_etype = qhp-&gt;attr.layer_etype;
<span class="p_chunk">@@ -1200,13 +1200,13 @@</span> <span class="p_context"> static int rdma_fini(struct c4iw_dev *rhp, struct c4iw_qp *qhp,</span>
 	PDBG(&quot;%s qhp %p qid 0x%x tid %u\n&quot;, __func__, qhp, qhp-&gt;wq.sq.qid,
 	     ep-&gt;hwtid);
 
<span class="p_del">-	skb = alloc_skb(sizeof *wqe, GFP_KERNEL);</span>
<span class="p_add">+	skb = alloc_skb(sizeof(*wqe), GFP_KERNEL);</span>
 	if (!skb)
 		return -ENOMEM;
 	set_wr_txq(skb, CPL_PRIORITY_DATA, ep-&gt;txq_idx);
 
 	wqe = (struct fw_ri_wr *)__skb_put(skb, sizeof(*wqe));
<span class="p_del">-	memset(wqe, 0, sizeof *wqe);</span>
<span class="p_add">+	memset(wqe, 0, sizeof(*wqe));</span>
 	wqe-&gt;op_compl = cpu_to_be32(
 		FW_WR_OP_V(FW_RI_INIT_WR) |
 		FW_WR_COMPL_F);
<span class="p_chunk">@@ -1230,14 +1230,14 @@</span> <span class="p_context"> static int rdma_fini(struct c4iw_dev *rhp, struct c4iw_qp *qhp,</span>
 static void build_rtr_msg(u8 p2p_type, struct fw_ri_init *init)
 {
 	PDBG(&quot;%s p2p_type = %d\n&quot;, __func__, p2p_type);
<span class="p_del">-	memset(&amp;init-&gt;u, 0, sizeof init-&gt;u);</span>
<span class="p_add">+	memset(&amp;init-&gt;u, 0, sizeof(init-&gt;u));</span>
 	switch (p2p_type) {
 	case FW_RI_INIT_P2PTYPE_RDMA_WRITE:
 		init-&gt;u.write.opcode = FW_RI_RDMA_WRITE_WR;
 		init-&gt;u.write.stag_sink = cpu_to_be32(1);
 		init-&gt;u.write.to_sink = cpu_to_be64(1);
 		init-&gt;u.write.u.immd_src[0].op = FW_RI_DATA_IMMD;
<span class="p_del">-		init-&gt;u.write.len16 = DIV_ROUND_UP(sizeof init-&gt;u.write +</span>
<span class="p_add">+		init-&gt;u.write.len16 = DIV_ROUND_UP(sizeof(init-&gt;u.write) +</span>
 						   sizeof(struct fw_ri_immd),
 						   16);
 		break;
<span class="p_chunk">@@ -1247,7 +1247,7 @@</span> <span class="p_context"> static void build_rtr_msg(u8 p2p_type, struct fw_ri_init *init)</span>
 		init-&gt;u.read.to_src_lo = cpu_to_be32(1);
 		init-&gt;u.read.stag_sink = cpu_to_be32(1);
 		init-&gt;u.read.to_sink_lo = cpu_to_be32(1);
<span class="p_del">-		init-&gt;u.read.len16 = DIV_ROUND_UP(sizeof init-&gt;u.read, 16);</span>
<span class="p_add">+		init-&gt;u.read.len16 = DIV_ROUND_UP(sizeof(init-&gt;u.read), 16);</span>
 		break;
 	}
 }
<span class="p_chunk">@@ -1261,7 +1261,7 @@</span> <span class="p_context"> static int rdma_init(struct c4iw_dev *rhp, struct c4iw_qp *qhp)</span>
 	PDBG(&quot;%s qhp %p qid 0x%x tid %u ird %u ord %u\n&quot;, __func__, qhp,
 	     qhp-&gt;wq.sq.qid, qhp-&gt;ep-&gt;hwtid, qhp-&gt;ep-&gt;ird, qhp-&gt;ep-&gt;ord);
 
<span class="p_del">-	skb = alloc_skb(sizeof *wqe, GFP_KERNEL);</span>
<span class="p_add">+	skb = alloc_skb(sizeof(*wqe), GFP_KERNEL);</span>
 	if (!skb) {
 		ret = -ENOMEM;
 		goto out;
<span class="p_chunk">@@ -1275,7 +1275,7 @@</span> <span class="p_context"> static int rdma_init(struct c4iw_dev *rhp, struct c4iw_qp *qhp)</span>
 	set_wr_txq(skb, CPL_PRIORITY_DATA, qhp-&gt;ep-&gt;txq_idx);
 
 	wqe = (struct fw_ri_wr *)__skb_put(skb, sizeof(*wqe));
<span class="p_del">-	memset(wqe, 0, sizeof *wqe);</span>
<span class="p_add">+	memset(wqe, 0, sizeof(*wqe));</span>
 	wqe-&gt;op_compl = cpu_to_be32(
 		FW_WR_OP_V(FW_RI_INIT_WR) |
 		FW_WR_COMPL_F);
<span class="p_chunk">@@ -1706,28 +1706,28 @@</span> <span class="p_context"> struct ib_qp *c4iw_create_qp(struct ib_pd *pd, struct ib_qp_init_attr *attrs,</span>
 		goto err2;
 
 	if (udata) {
<span class="p_del">-		mm1 = kmalloc(sizeof *mm1, GFP_KERNEL);</span>
<span class="p_add">+		mm1 = kmalloc(sizeof(*mm1), GFP_KERNEL);</span>
 		if (!mm1) {
 			ret = -ENOMEM;
 			goto err3;
 		}
<span class="p_del">-		mm2 = kmalloc(sizeof *mm2, GFP_KERNEL);</span>
<span class="p_add">+		mm2 = kmalloc(sizeof(*mm2), GFP_KERNEL);</span>
 		if (!mm2) {
 			ret = -ENOMEM;
 			goto err4;
 		}
<span class="p_del">-		mm3 = kmalloc(sizeof *mm3, GFP_KERNEL);</span>
<span class="p_add">+		mm3 = kmalloc(sizeof(*mm3), GFP_KERNEL);</span>
 		if (!mm3) {
 			ret = -ENOMEM;
 			goto err5;
 		}
<span class="p_del">-		mm4 = kmalloc(sizeof *mm4, GFP_KERNEL);</span>
<span class="p_add">+		mm4 = kmalloc(sizeof(*mm4), GFP_KERNEL);</span>
 		if (!mm4) {
 			ret = -ENOMEM;
 			goto err6;
 		}
 		if (t4_sq_onchip(&amp;qhp-&gt;wq.sq)) {
<span class="p_del">-			mm5 = kmalloc(sizeof *mm5, GFP_KERNEL);</span>
<span class="p_add">+			mm5 = kmalloc(sizeof(*mm5), GFP_KERNEL);</span>
 			if (!mm5) {
 				ret = -ENOMEM;
 				goto err7;
<span class="p_chunk">@@ -1758,7 +1758,7 @@</span> <span class="p_context"> struct ib_qp *c4iw_create_qp(struct ib_pd *pd, struct ib_qp_init_attr *attrs,</span>
 		uresp.rq_db_gts_key = ucontext-&gt;key;
 		ucontext-&gt;key += PAGE_SIZE;
 		spin_unlock(&amp;ucontext-&gt;mmap_lock);
<span class="p_del">-		ret = ib_copy_to_udata(udata, &amp;uresp, sizeof uresp);</span>
<span class="p_add">+		ret = ib_copy_to_udata(udata, &amp;uresp, sizeof(uresp));</span>
 		if (ret)
 			goto err8;
 		mm1-&gt;key = uresp.sq_key;
<span class="p_chunk">@@ -1832,7 +1832,7 @@</span> <span class="p_context"> int c4iw_ib_modify_qp(struct ib_qp *ibqp, struct ib_qp_attr *attr,</span>
 	if (!attr_mask)
 		return 0;
 
<span class="p_del">-	memset(&amp;attrs, 0, sizeof attrs);</span>
<span class="p_add">+	memset(&amp;attrs, 0, sizeof(attrs));</span>
 	qhp = to_c4iw_qp(ibqp);
 	rhp = qhp-&gt;rhp;
 
<span class="p_chunk">@@ -1877,8 +1877,8 @@</span> <span class="p_context"> int c4iw_ib_query_qp(struct ib_qp *ibqp, struct ib_qp_attr *attr,</span>
 {
 	struct c4iw_qp *qhp = to_c4iw_qp(ibqp);
 
<span class="p_del">-	memset(attr, 0, sizeof *attr);</span>
<span class="p_del">-	memset(init_attr, 0, sizeof *init_attr);</span>
<span class="p_add">+	memset(attr, 0, sizeof(*attr));</span>
<span class="p_add">+	memset(init_attr, 0, sizeof(*init_attr));</span>
 	attr-&gt;qp_state = to_ib_qp_state(qhp-&gt;attr.state);
 	init_attr-&gt;cap.max_send_wr = qhp-&gt;attr.sq_num_entries;
 	init_attr-&gt;cap.max_recv_wr = qhp-&gt;attr.rq_num_entries;
<span class="p_header">diff --git a/drivers/infiniband/hw/cxgb4/resource.c b/drivers/infiniband/hw/cxgb4/resource.c</span>
<span class="p_header">index 67df71a7012e..991b4fe1f06f 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/cxgb4/resource.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/cxgb4/resource.c</span>
<span class="p_chunk">@@ -115,7 +115,7 @@</span> <span class="p_context"> u32 c4iw_get_cqid(struct c4iw_rdev *rdev, struct c4iw_dev_ucontext *uctx)</span>
 		rdev-&gt;stats.qid.cur += rdev-&gt;qpmask + 1;
 		mutex_unlock(&amp;rdev-&gt;stats.lock);
 		for (i = qid+1; i &amp; rdev-&gt;qpmask; i++) {
<span class="p_del">-			entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+			entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 			if (!entry)
 				goto out;
 			entry-&gt;qid = i;
<span class="p_chunk">@@ -126,13 +126,13 @@</span> <span class="p_context"> u32 c4iw_get_cqid(struct c4iw_rdev *rdev, struct c4iw_dev_ucontext *uctx)</span>
 		 * now put the same ids on the qp list since they all
 		 * map to the same db/gts page.
 		 */
<span class="p_del">-		entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+		entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 		if (!entry)
 			goto out;
 		entry-&gt;qid = qid;
 		list_add_tail(&amp;entry-&gt;entry, &amp;uctx-&gt;qpids);
 		for (i = qid+1; i &amp; rdev-&gt;qpmask; i++) {
<span class="p_del">-			entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+			entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 			if (!entry)
 				goto out;
 			entry-&gt;qid = i;
<span class="p_chunk">@@ -154,7 +154,7 @@</span> <span class="p_context"> void c4iw_put_cqid(struct c4iw_rdev *rdev, u32 qid,</span>
 {
 	struct c4iw_qid_list *entry;
 
<span class="p_del">-	entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+	entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 	if (!entry)
 		return;
 	PDBG(&quot;%s qid 0x%x\n&quot;, __func__, qid);
<span class="p_chunk">@@ -189,7 +189,7 @@</span> <span class="p_context"> u32 c4iw_get_qpid(struct c4iw_rdev *rdev, struct c4iw_dev_ucontext *uctx)</span>
 		rdev-&gt;stats.qid.cur += rdev-&gt;qpmask + 1;
 		mutex_unlock(&amp;rdev-&gt;stats.lock);
 		for (i = qid+1; i &amp; rdev-&gt;qpmask; i++) {
<span class="p_del">-			entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+			entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 			if (!entry)
 				goto out;
 			entry-&gt;qid = i;
<span class="p_chunk">@@ -200,13 +200,13 @@</span> <span class="p_context"> u32 c4iw_get_qpid(struct c4iw_rdev *rdev, struct c4iw_dev_ucontext *uctx)</span>
 		 * now put the same ids on the cq list since they all
 		 * map to the same db/gts page.
 		 */
<span class="p_del">-		entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+		entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 		if (!entry)
 			goto out;
 		entry-&gt;qid = qid;
 		list_add_tail(&amp;entry-&gt;entry, &amp;uctx-&gt;cqids);
 		for (i = qid; i &amp; rdev-&gt;qpmask; i++) {
<span class="p_del">-			entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+			entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 			if (!entry)
 				goto out;
 			entry-&gt;qid = i;
<span class="p_chunk">@@ -228,7 +228,7 @@</span> <span class="p_context"> void c4iw_put_qpid(struct c4iw_rdev *rdev, u32 qid,</span>
 {
 	struct c4iw_qid_list *entry;
 
<span class="p_del">-	entry = kmalloc(sizeof *entry, GFP_KERNEL);</span>
<span class="p_add">+	entry = kmalloc(sizeof(*entry), GFP_KERNEL);</span>
 	if (!entry)
 		return;
 	PDBG(&quot;%s qid 0x%x\n&quot;, __func__, qid);
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/ah.c b/drivers/infiniband/hw/mlx4/ah.c</span>
<span class="p_header">index 105246fba2e7..888afc3197bb 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/ah.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/ah.c</span>
<span class="p_chunk">@@ -129,7 +129,7 @@</span> <span class="p_context"> struct ib_ah *mlx4_ib_create_ah(struct ib_pd *pd, struct ib_ah_attr *ah_attr)</span>
 	struct mlx4_ib_ah *ah;
 	struct ib_ah *ret;
 
<span class="p_del">-	ah = kzalloc(sizeof *ah, GFP_ATOMIC);</span>
<span class="p_add">+	ah = kzalloc(sizeof(*ah), GFP_ATOMIC);</span>
 	if (!ah)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -161,7 +161,7 @@</span> <span class="p_context"> int mlx4_ib_query_ah(struct ib_ah *ibah, struct ib_ah_attr *ah_attr)</span>
 	struct mlx4_ib_ah *ah = to_mah(ibah);
 	enum rdma_link_layer ll;
 
<span class="p_del">-	memset(ah_attr, 0, sizeof *ah_attr);</span>
<span class="p_add">+	memset(ah_attr, 0, sizeof(*ah_attr));</span>
 	ah_attr-&gt;port_num = be32_to_cpu(ah-&gt;av.ib.port_pd) &gt;&gt; 24;
 	ll = rdma_port_get_link_layer(ibah-&gt;device, ah_attr-&gt;port_num);
 	if (ll == IB_LINK_LAYER_ETHERNET)
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/alias_GUID.c b/drivers/infiniband/hw/mlx4/alias_GUID.c</span>
<span class="p_header">index 21cb41a60fe8..c6eb1ccdac8b 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/alias_GUID.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/alias_GUID.c</span>
<span class="p_chunk">@@ -513,7 +513,7 @@</span> <span class="p_context"> static int set_guid_rec(struct ib_device *ibdev,</span>
 		goto new_schedule;
 	}
 
<span class="p_del">-	callback_context = kmalloc(sizeof *callback_context, GFP_KERNEL);</span>
<span class="p_add">+	callback_context = kmalloc(sizeof(*callback_context), GFP_KERNEL);</span>
 	if (!callback_context) {
 		err = -ENOMEM;
 		resched_delay = HZ * 5;
<span class="p_chunk">@@ -754,7 +754,7 @@</span> <span class="p_context"> static void alias_guid_work(struct work_struct *work)</span>
 						alias_guid);
 	struct mlx4_ib_dev *dev = container_of(ib_sriov, struct mlx4_ib_dev, sriov);
 
<span class="p_del">-	rec = kzalloc(sizeof *rec, GFP_KERNEL);</span>
<span class="p_add">+	rec = kzalloc(sizeof(*rec), GFP_KERNEL);</span>
 	if (!rec) {
 		pr_err(&quot;alias_guid_work: No Memory\n&quot;);
 		return;
<span class="p_chunk">@@ -841,7 +841,7 @@</span> <span class="p_context"> int mlx4_ib_init_alias_guid_service(struct mlx4_ib_dev *dev)</span>
 	if (!mlx4_is_master(dev-&gt;dev))
 		return 0;
 	dev-&gt;sriov.alias_guid.sa_client =
<span class="p_del">-		kzalloc(sizeof *dev-&gt;sriov.alias_guid.sa_client, GFP_KERNEL);</span>
<span class="p_add">+		kzalloc(sizeof(*dev-&gt;sriov.alias_guid.sa_client), GFP_KERNEL);</span>
 	if (!dev-&gt;sriov.alias_guid.sa_client)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -865,8 +865,7 @@</span> <span class="p_context"> int mlx4_ib_init_alias_guid_service(struct mlx4_ib_dev *dev)</span>
 			/* mark each val as it was deleted */
 			memset(dev-&gt;sriov.alias_guid.ports_guid[i].
 				all_rec_per_port[j].all_recs, 0xFF,
<span class="p_del">-				sizeof(dev-&gt;sriov.alias_guid.ports_guid[i].</span>
<span class="p_del">-				all_rec_per_port[j].all_recs));</span>
<span class="p_add">+				sizeof(dev-&gt;sriov.alias_guid.ports_guid[i].all_rec_per_port[j].all_recs));</span>
 		}
 		INIT_LIST_HEAD(&amp;dev-&gt;sriov.alias_guid.ports_guid[i].cb_list);
 		/*prepare the records, set them to be allocated by sm*/
<span class="p_chunk">@@ -879,7 +878,7 @@</span> <span class="p_context"> int mlx4_ib_init_alias_guid_service(struct mlx4_ib_dev *dev)</span>
 		dev-&gt;sriov.alias_guid.ports_guid[i].parent = &amp;dev-&gt;sriov.alias_guid;
 		dev-&gt;sriov.alias_guid.ports_guid[i].port  = i;
 
<span class="p_del">-		snprintf(alias_wq_name, sizeof alias_wq_name, &quot;alias_guid%d&quot;, i);</span>
<span class="p_add">+		snprintf(alias_wq_name, sizeof(alias_wq_name), &quot;alias_guid%d&quot;, i);</span>
 		dev-&gt;sriov.alias_guid.ports_guid[i].wq =
 			create_singlethread_workqueue(alias_wq_name);
 		if (!dev-&gt;sriov.alias_guid.ports_guid[i].wq) {
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/cq.c b/drivers/infiniband/hw/mlx4/cq.c</span>
<span class="p_header">index 9f8b516eb2b0..45c96d269165 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/cq.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/cq.c</span>
<span class="p_chunk">@@ -185,7 +185,7 @@</span> <span class="p_context"> struct ib_cq *mlx4_ib_create_cq(struct ib_device *ibdev,</span>
 	if (attr-&gt;flags &amp; ~CQ_CREATE_FLAGS_SUPPORTED)
 		return ERR_PTR(-EINVAL);
 
<span class="p_del">-	cq = kmalloc(sizeof *cq, GFP_KERNEL);</span>
<span class="p_add">+	cq = kmalloc(sizeof(*cq), GFP_KERNEL);</span>
 	if (!cq)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -202,7 +202,7 @@</span> <span class="p_context"> struct ib_cq *mlx4_ib_create_cq(struct ib_device *ibdev,</span>
 	if (context) {
 		struct mlx4_ib_create_cq ucmd;
 
<span class="p_del">-		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd)) {</span>
<span class="p_add">+		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd))) {</span>
 			err = -EFAULT;
 			goto err_cq;
 		}
<span class="p_chunk">@@ -251,7 +251,7 @@</span> <span class="p_context"> struct ib_cq *mlx4_ib_create_cq(struct ib_device *ibdev,</span>
 	cq-&gt;mcq.event = mlx4_ib_cq_event;
 
 	if (context)
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;cq-&gt;mcq.cqn, sizeof (__u32))) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;cq-&gt;mcq.cqn, sizeof(__u32))) {</span>
 			err = -EFAULT;
 			goto err_dbmap;
 		}
<span class="p_chunk">@@ -288,7 +288,7 @@</span> <span class="p_context"> static int mlx4_alloc_resize_buf(struct mlx4_ib_dev *dev, struct mlx4_ib_cq *cq,</span>
 	if (cq-&gt;resize_buf)
 		return -EBUSY;
 
<span class="p_del">-	cq-&gt;resize_buf = kmalloc(sizeof *cq-&gt;resize_buf, GFP_ATOMIC);</span>
<span class="p_add">+	cq-&gt;resize_buf = kmalloc(sizeof(*cq-&gt;resize_buf), GFP_ATOMIC);</span>
 	if (!cq-&gt;resize_buf)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -313,10 +313,10 @@</span> <span class="p_context"> static int mlx4_alloc_resize_umem(struct mlx4_ib_dev *dev, struct mlx4_ib_cq *cq</span>
 	if (cq-&gt;resize_umem)
 		return -EBUSY;
 
<span class="p_del">-	if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd))</span>
<span class="p_add">+	if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd)))</span>
 		return -EFAULT;
 
<span class="p_del">-	cq-&gt;resize_buf = kmalloc(sizeof *cq-&gt;resize_buf, GFP_ATOMIC);</span>
<span class="p_add">+	cq-&gt;resize_buf = kmalloc(sizeof(*cq-&gt;resize_buf), GFP_ATOMIC);</span>
 	if (!cq-&gt;resize_buf)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -964,7 +964,7 @@</span> <span class="p_context"> void __mlx4_ib_cq_clean(struct mlx4_ib_cq *cq, u32 qpn, struct mlx4_ib_srq *srq)</span>
 			dest += cqe_inc;
 
 			owner_bit = dest-&gt;owner_sr_opcode &amp; MLX4_CQE_OWNER_MASK;
<span class="p_del">-			memcpy(dest, cqe, sizeof *cqe);</span>
<span class="p_add">+			memcpy(dest, cqe, sizeof(*cqe));</span>
 			dest-&gt;owner_sr_opcode = owner_bit |
 				(dest-&gt;owner_sr_opcode &amp; ~MLX4_CQE_OWNER_MASK);
 		}
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/doorbell.c b/drivers/infiniband/hw/mlx4/doorbell.c</span>
<span class="p_header">index c51740986367..e1b02c8bc69e 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/doorbell.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/doorbell.c</span>
<span class="p_chunk">@@ -53,7 +53,7 @@</span> <span class="p_context"> int mlx4_ib_db_map_user(struct mlx4_ib_ucontext *context, unsigned long virt,</span>
 		if (page-&gt;user_virt == (virt &amp; PAGE_MASK))
 			goto found;
 
<span class="p_del">-	page = kmalloc(sizeof *page, GFP_KERNEL);</span>
<span class="p_add">+	page = kmalloc(sizeof(*page), GFP_KERNEL);</span>
 	if (!page) {
 		err = -ENOMEM;
 		goto out;
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/mad.c b/drivers/infiniband/hw/mlx4/mad.c</span>
<span class="p_header">index 26833bfa639b..a9514b28c579 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/mad.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/mad.c</span>
<span class="p_chunk">@@ -193,7 +193,7 @@</span> <span class="p_context"> static void update_sm_ah(struct mlx4_ib_dev *dev, u8 port_num, u16 lid, u8 sl)</span>
 	if (!dev-&gt;send_agent[port_num - 1][0])
 		return;
 
<span class="p_del">-	memset(&amp;ah_attr, 0, sizeof ah_attr);</span>
<span class="p_add">+	memset(&amp;ah_attr, 0, sizeof(ah_attr));</span>
 	ah_attr.dlid     = lid;
 	ah_attr.sl       = sl;
 	ah_attr.port_num = port_num;
<span class="p_chunk">@@ -371,7 +371,7 @@</span> <span class="p_context"> static void forward_trap(struct mlx4_ib_dev *dev, u8 port_num, const struct ib_m</span>
 		 * it&#39;s OK for our devices).
 		 */
 		spin_lock_irqsave(&amp;dev-&gt;sm_lock, flags);
<span class="p_del">-		memcpy(send_buf-&gt;mad, mad, sizeof *mad);</span>
<span class="p_add">+		memcpy(send_buf-&gt;mad, mad, sizeof(*mad));</span>
 		if ((send_buf-&gt;ah = dev-&gt;sm_ah[port_num - 1]))
 			ret = ib_post_send_mad(send_buf, NULL);
 		else
<span class="p_chunk">@@ -508,7 +508,7 @@</span> <span class="p_context"> int mlx4_ib_send_to_slave(struct mlx4_ib_dev *dev, int slave, u8 port,</span>
 
 	/* create ah. Just need an empty one with the port num for the post send.
 	 * The driver will set the force loopback bit in post_send */
<span class="p_del">-	memset(&amp;attr, 0, sizeof attr);</span>
<span class="p_add">+	memset(&amp;attr, 0, sizeof(attr));</span>
 	attr.port_num = port;
 	if (is_eth) {
 		memcpy(&amp;attr.grh.dgid.raw[0], &amp;grh-&gt;dgid.raw[0], 16);
<span class="p_chunk">@@ -540,8 +540,8 @@</span> <span class="p_context"> int mlx4_ib_send_to_slave(struct mlx4_ib_dev *dev, int slave, u8 port,</span>
 
 	/* copy over to tunnel buffer */
 	if (grh)
<span class="p_del">-		memcpy(&amp;tun_mad-&gt;grh, grh, sizeof *grh);</span>
<span class="p_del">-	memcpy(&amp;tun_mad-&gt;mad, mad, sizeof *mad);</span>
<span class="p_add">+		memcpy(&amp;tun_mad-&gt;grh, grh, sizeof(*grh));</span>
<span class="p_add">+	memcpy(&amp;tun_mad-&gt;mad, mad, sizeof(*mad));</span>
 
 	/* adjust tunnel data */
 	tun_mad-&gt;hdr.pkey_index = cpu_to_be16(tun_pkey_ix);
<span class="p_chunk">@@ -859,7 +859,7 @@</span> <span class="p_context"> static int iboe_process_mad(struct ib_device *ibdev, int mad_flags, u8 port_num,</span>
 	}
 	mutex_unlock(&amp;dev-&gt;counters_table[port_num - 1].mutex);
 	if (stats_avail) {
<span class="p_del">-		memset(out_mad-&gt;data, 0, sizeof out_mad-&gt;data);</span>
<span class="p_add">+		memset(out_mad-&gt;data, 0, sizeof(out_mad-&gt;data));</span>
 		switch (counter_stats.counter_mode &amp; 0xf) {
 		case 0:
 			edit_counter(&amp;counter_stats,
<span class="p_chunk">@@ -1014,8 +1014,8 @@</span> <span class="p_context"> static void handle_slaves_guid_change(struct mlx4_ib_dev *dev, u8 port_num,</span>
 	if (!mlx4_is_mfunc(dev-&gt;dev) || !mlx4_is_master(dev-&gt;dev))
 		return;
 
<span class="p_del">-	in_mad  = kmalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kmalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad) {
 		mlx4_ib_warn(&amp;dev-&gt;ib_dev, &quot;failed to allocate memory for guid info mads\n&quot;);
 		goto out;
<span class="p_chunk">@@ -1026,8 +1026,8 @@</span> <span class="p_context"> static void handle_slaves_guid_change(struct mlx4_ib_dev *dev, u8 port_num,</span>
 	for (i = 0; i &lt; 4; i++) {
 		if (change_bitmap &amp;&amp; (!((change_bitmap &gt;&gt; (8 * i)) &amp; 0xff)))
 			continue;
<span class="p_del">-		memset(in_mad, 0, sizeof *in_mad);</span>
<span class="p_del">-		memset(out_mad, 0, sizeof *out_mad);</span>
<span class="p_add">+		memset(in_mad, 0, sizeof(*in_mad));</span>
<span class="p_add">+		memset(out_mad, 0, sizeof(*out_mad));</span>
 
 		in_mad-&gt;base_version  = 1;
 		in_mad-&gt;mgmt_class    = IB_MGMT_CLASS_SUBN_LID_ROUTED;
<span class="p_chunk">@@ -1259,7 +1259,7 @@</span> <span class="p_context"> int mlx4_ib_send_to_wire(struct mlx4_ib_dev *dev, int slave, u8 port,</span>
 				   sizeof (struct mlx4_mad_snd_buf),
 				   DMA_TO_DEVICE);
 
<span class="p_del">-	memcpy(&amp;sqp_mad-&gt;payload, mad, sizeof *mad);</span>
<span class="p_add">+	memcpy(&amp;sqp_mad-&gt;payload, mad, sizeof(*mad));</span>
 
 	ib_dma_sync_single_for_device(&amp;dev-&gt;ib_dev,
 				      sqp-&gt;tx_ring[wire_tx_ix].buf.map,
<span class="p_chunk">@@ -1634,7 +1634,7 @@</span> <span class="p_context"> static int create_pv_sqp(struct mlx4_ib_demux_pv_ctx *ctx,</span>
 
 	tun_qp = &amp;ctx-&gt;qp[qp_type];
 
<span class="p_del">-	memset(&amp;qp_init_attr, 0, sizeof qp_init_attr);</span>
<span class="p_add">+	memset(&amp;qp_init_attr, 0, sizeof(qp_init_attr));</span>
 	qp_init_attr.init_attr.send_cq = ctx-&gt;cq;
 	qp_init_attr.init_attr.recv_cq = ctx-&gt;cq;
 	qp_init_attr.init_attr.sq_sig_type = IB_SIGNAL_ALL_WR;
<span class="p_chunk">@@ -1667,7 +1667,7 @@</span> <span class="p_context"> static int create_pv_sqp(struct mlx4_ib_demux_pv_ctx *ctx,</span>
 		return ret;
 	}
 
<span class="p_del">-	memset(&amp;attr, 0, sizeof attr);</span>
<span class="p_add">+	memset(&amp;attr, 0, sizeof(attr));</span>
 	attr.qp_state = IB_QPS_INIT;
 	ret = 0;
 	if (create_tun)
<span class="p_chunk">@@ -2020,7 +2020,7 @@</span> <span class="p_context"> static int mlx4_ib_alloc_demux_ctx(struct mlx4_ib_dev *dev,</span>
 		goto err_mcg;
 	}
 
<span class="p_del">-	snprintf(name, sizeof name, &quot;mlx4_ibt%d&quot;, port);</span>
<span class="p_add">+	snprintf(name, sizeof(name), &quot;mlx4_ibt%d&quot;, port);</span>
 	ctx-&gt;wq = create_singlethread_workqueue(name);
 	if (!ctx-&gt;wq) {
 		pr_err(&quot;Failed to create tunnelling WQ for port %d\n&quot;, port);
<span class="p_chunk">@@ -2028,7 +2028,7 @@</span> <span class="p_context"> static int mlx4_ib_alloc_demux_ctx(struct mlx4_ib_dev *dev,</span>
 		goto err_wq;
 	}
 
<span class="p_del">-	snprintf(name, sizeof name, &quot;mlx4_ibud%d&quot;, port);</span>
<span class="p_add">+	snprintf(name, sizeof(name), &quot;mlx4_ibud%d&quot;, port);</span>
 	ctx-&gt;ud_wq = create_singlethread_workqueue(name);
 	if (!ctx-&gt;ud_wq) {
 		pr_err(&quot;Failed to create up/down WQ for port %d\n&quot;, port);
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/main.c b/drivers/infiniband/hw/mlx4/main.c</span>
<span class="p_header">index 1c7ab6cabbb8..a1b777088d86 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/main.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/main.c</span>
<span class="p_chunk">@@ -452,8 +452,8 @@</span> <span class="p_context"> static int mlx4_ib_query_device(struct ib_device *ibdev,</span>
 
 	resp.response_length = offsetof(typeof(resp), response_length) +
 		sizeof(resp.response_length);
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -465,7 +465,7 @@</span> <span class="p_context"> static int mlx4_ib_query_device(struct ib_device *ibdev,</span>
 	if (err)
 		goto out;
 
<span class="p_del">-	memset(props, 0, sizeof *props);</span>
<span class="p_add">+	memset(props, 0, sizeof(*props));</span>
 
 	have_ib_ports = num_ib_ports(dev-&gt;dev);
 
<span class="p_chunk">@@ -588,8 +588,8 @@</span> <span class="p_context"> static int ib_link_query_port(struct ib_device *ibdev, u8 port,</span>
 	int mad_ifc_flags = MLX4_MAD_IFC_IGNORE_KEYS;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -736,7 +736,7 @@</span> <span class="p_context"> int __mlx4_ib_query_port(struct ib_device *ibdev, u8 port,</span>
 {
 	int err;
 
<span class="p_del">-	memset(props, 0, sizeof *props);</span>
<span class="p_add">+	memset(props, 0, sizeof(*props));</span>
 
 	err = mlx4_ib_port_link_layer(ibdev, port) == IB_LINK_LAYER_INFINIBAND ?
 		ib_link_query_port(ibdev, port, props, netw_view) :
<span class="p_chunk">@@ -762,8 +762,8 @@</span> <span class="p_context"> int __mlx4_ib_query_gid(struct ib_device *ibdev, u8 port, int index,</span>
 	int clear = 0;
 	int mad_ifc_flags = MLX4_MAD_IFC_IGNORE_KEYS;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -839,8 +839,8 @@</span> <span class="p_context"> int __mlx4_ib_query_pkey(struct ib_device *ibdev, u8 port, u16 index,</span>
 	int mad_ifc_flags = MLX4_MAD_IFC_IGNORE_KEYS;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -1211,7 +1211,7 @@</span> <span class="p_context"> static struct ib_pd *mlx4_ib_alloc_pd(struct ib_device *ibdev,</span>
 	struct mlx4_ib_pd *pd;
 	int err;
 
<span class="p_del">-	pd = kmalloc(sizeof *pd, GFP_KERNEL);</span>
<span class="p_add">+	pd = kmalloc(sizeof(*pd), GFP_KERNEL);</span>
 	if (!pd)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -1250,7 +1250,7 @@</span> <span class="p_context"> static struct ib_xrcd *mlx4_ib_alloc_xrcd(struct ib_device *ibdev,</span>
 	if (!(to_mdev(ibdev)-&gt;dev-&gt;caps.flags &amp; MLX4_DEV_CAP_FLAG_XRC))
 		return ERR_PTR(-ENOSYS);
 
<span class="p_del">-	xrcd = kmalloc(sizeof *xrcd, GFP_KERNEL);</span>
<span class="p_add">+	xrcd = kmalloc(sizeof(*xrcd), GFP_KERNEL);</span>
 	if (!xrcd)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -1298,7 +1298,7 @@</span> <span class="p_context"> static int add_gid_entry(struct ib_qp *ibqp, union ib_gid *gid)</span>
 	struct mlx4_ib_dev *mdev = to_mdev(ibqp-&gt;device);
 	struct mlx4_ib_gid_entry *ge;
 
<span class="p_del">-	ge = kzalloc(sizeof *ge, GFP_KERNEL);</span>
<span class="p_add">+	ge = kzalloc(sizeof(*ge), GFP_KERNEL);</span>
 	if (!ge)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1916,8 +1916,8 @@</span> <span class="p_context"> static int init_node_data(struct mlx4_ib_dev *dev)</span>
 	int mad_ifc_flags = MLX4_MAD_IFC_IGNORE_KEYS;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -2233,7 +2233,7 @@</span> <span class="p_context"> static void *mlx4_ib_add(struct mlx4_dev *dev)</span>
 	if (num_ports == 0)
 		return NULL;
 
<span class="p_del">-	ibdev = (struct mlx4_ib_dev *) ib_alloc_device(sizeof *ibdev);</span>
<span class="p_add">+	ibdev = (struct mlx4_ib_dev *) ib_alloc_device(sizeof(*ibdev));</span>
 	if (!ibdev) {
 		dev_err(&amp;dev-&gt;persist-&gt;pdev-&gt;dev,
 			&quot;Device struct alloc failed\n&quot;);
<span class="p_chunk">@@ -2877,14 +2877,14 @@</span> <span class="p_context"> static void mlx4_ib_event(struct mlx4_dev *dev, void *ibdev_ptr,</span>
 		break;
 
 	case MLX4_DEV_EVENT_PORT_MGMT_CHANGE:
<span class="p_del">-		ew = kmalloc(sizeof *ew, GFP_ATOMIC);</span>
<span class="p_add">+		ew = kmalloc(sizeof(*ew), GFP_ATOMIC);</span>
 		if (!ew) {
 			pr_err(&quot;failed to allocate memory for events work\n&quot;);
 			break;
 		}
 
 		INIT_WORK(&amp;ew-&gt;work, handle_port_mgmt_change_event);
<span class="p_del">-		memcpy(&amp;ew-&gt;ib_eqe, eqe, sizeof *eqe);</span>
<span class="p_add">+		memcpy(&amp;ew-&gt;ib_eqe, eqe, sizeof(*eqe));</span>
 		ew-&gt;ib_dev = ibdev;
 		/* need to queue only for port owner, which uses GEN_EQE */
 		if (mlx4_is_master(dev))
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/mcg.c b/drivers/infiniband/hw/mlx4/mcg.c</span>
<span class="p_header">index 99451d887266..d113031cfaea 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/mcg.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/mcg.c</span>
<span class="p_chunk">@@ -168,7 +168,7 @@</span> <span class="p_context"> static struct mcast_group *mcast_find(struct mlx4_ib_demux_ctx *ctx,</span>
 
 	while (node) {
 		group = rb_entry(node, struct mcast_group, node);
<span class="p_del">-		ret = memcmp(mgid-&gt;raw, group-&gt;rec.mgid.raw, sizeof *mgid);</span>
<span class="p_add">+		ret = memcmp(mgid-&gt;raw, group-&gt;rec.mgid.raw, sizeof(*mgid));</span>
 		if (!ret)
 			return group;
 
<span class="p_chunk">@@ -193,7 +193,7 @@</span> <span class="p_context"> static struct mcast_group *mcast_insert(struct mlx4_ib_demux_ctx *ctx,</span>
 		cur_group = rb_entry(parent, struct mcast_group, node);
 
 		ret = memcmp(group-&gt;rec.mgid.raw, cur_group-&gt;rec.mgid.raw,
<span class="p_del">-			     sizeof group-&gt;rec.mgid);</span>
<span class="p_add">+			     sizeof(group-&gt;rec.mgid));</span>
 		if (ret &lt; 0)
 			link = &amp;(*link)-&gt;rb_left;
 		else if (ret &gt; 0)
<span class="p_chunk">@@ -256,7 +256,7 @@</span> <span class="p_context"> static int send_join_to_wire(struct mcast_group *group, struct ib_sa_mad *sa_mad</span>
 	int ret;
 
 	/* we rely on a mad request as arrived from a VF */
<span class="p_del">-	memcpy(&amp;mad, sa_mad, sizeof mad);</span>
<span class="p_add">+	memcpy(&amp;mad, sa_mad, sizeof(mad));</span>
 
 	/* fix port GID to be the real one (slave 0) */
 	sa_mad_data-&gt;port_gid.global.interface_id = group-&gt;demux-&gt;guid_cache[0];
<span class="p_chunk">@@ -282,7 +282,7 @@</span> <span class="p_context"> static int send_leave_to_wire(struct mcast_group *group, u8 join_state)</span>
 	struct ib_sa_mcmember_data *sa_data = (struct ib_sa_mcmember_data *)&amp;mad.data;
 	int ret;
 
<span class="p_del">-	memset(&amp;mad, 0, sizeof mad);</span>
<span class="p_add">+	memset(&amp;mad, 0, sizeof(mad));</span>
 	mad.mad_hdr.base_version = 1;
 	mad.mad_hdr.mgmt_class = IB_MGMT_CLASS_SUBN_ADM;
 	mad.mad_hdr.class_version = 2;
<span class="p_chunk">@@ -323,7 +323,7 @@</span> <span class="p_context"> static int send_reply_to_slave(int slave, struct mcast_group *group,</span>
 	struct ib_sa_mcmember_data *req_sa_data = (struct ib_sa_mcmember_data *)&amp;req_sa_mad-&gt;data;
 	int ret;
 
<span class="p_del">-	memset(&amp;mad, 0, sizeof mad);</span>
<span class="p_add">+	memset(&amp;mad, 0, sizeof(mad));</span>
 	mad.mad_hdr.base_version = 1;
 	mad.mad_hdr.mgmt_class = IB_MGMT_CLASS_SUBN_ADM;
 	mad.mad_hdr.class_version = 2;
<span class="p_chunk">@@ -343,7 +343,7 @@</span> <span class="p_context"> static int send_reply_to_slave(int slave, struct mcast_group *group,</span>
 	/* reconstruct VF&#39;s requested join_state and port_gid */
 	sa_data-&gt;scope_join_state &amp;= 0xf0;
 	sa_data-&gt;scope_join_state |= (group-&gt;func[slave].join_state &amp; 0x0f);
<span class="p_del">-	memcpy(&amp;sa_data-&gt;port_gid, &amp;req_sa_data-&gt;port_gid, sizeof req_sa_data-&gt;port_gid);</span>
<span class="p_add">+	memcpy(&amp;sa_data-&gt;port_gid, &amp;req_sa_data-&gt;port_gid, sizeof(req_sa_data-&gt;port_gid));</span>
 
 	ret = send_mad_to_slave(slave, group-&gt;demux, (struct ib_mad *)&amp;mad);
 	return ret;
<span class="p_chunk">@@ -452,7 +452,7 @@</span> <span class="p_context"> static int release_group(struct mcast_group *group, int from_timeout_handler)</span>
 			}
 		}
 
<span class="p_del">-		nzgroup = memcmp(&amp;group-&gt;rec.mgid, &amp;mgid0, sizeof mgid0);</span>
<span class="p_add">+		nzgroup = memcmp(&amp;group-&gt;rec.mgid, &amp;mgid0, sizeof(mgid0));</span>
 		if (nzgroup)
 			del_sysfs_port_mcg_attr(ctx-&gt;dev, ctx-&gt;port, &amp;group-&gt;dentry.attr);
 		if (!list_empty(&amp;group-&gt;pending_list))
<span class="p_chunk">@@ -553,7 +553,7 @@</span> <span class="p_context"> static void mlx4_ib_mcg_timeout_handler(struct work_struct *work)</span>
 			--group-&gt;func[req-&gt;func].num_pend_reqs;
 			mutex_unlock(&amp;group-&gt;lock);
 			kfree(req);
<span class="p_del">-			if (memcmp(&amp;group-&gt;rec.mgid, &amp;mgid0, sizeof mgid0)) {</span>
<span class="p_add">+			if (memcmp(&amp;group-&gt;rec.mgid, &amp;mgid0, sizeof(mgid0))) {</span>
 				if (release_group(group, 1))
 					return;
 			} else {
<span class="p_chunk">@@ -699,7 +699,7 @@</span> <span class="p_context"> static void mlx4_ib_mcg_work_handler(struct work_struct *work)</span>
 					--rc;
 			} else if (!resp_join_state)
 					++rc;
<span class="p_del">-			memcpy(&amp;group-&gt;rec, group-&gt;response_sa_mad.data, sizeof group-&gt;rec);</span>
<span class="p_add">+			memcpy(&amp;group-&gt;rec, group-&gt;response_sa_mad.data, sizeof(group-&gt;rec));</span>
 		}
 		group-&gt;state = MCAST_IDLE;
 	}
<span class="p_chunk">@@ -757,7 +757,7 @@</span> <span class="p_context"> static struct mcast_group *search_relocate_mgid0_group(struct mlx4_ib_demux_ctx</span>
 		group = list_entry(pos, struct mcast_group, mgid0_list);
 		mutex_lock(&amp;group-&gt;lock);
 		if (group-&gt;last_req_tid == tid) {
<span class="p_del">-			if (memcmp(new_mgid, &amp;mgid0, sizeof mgid0)) {</span>
<span class="p_add">+			if (memcmp(new_mgid, &amp;mgid0, sizeof(mgid0))) {</span>
 				group-&gt;rec.mgid = *new_mgid;
 				sprintf(group-&gt;name, &quot;%016llx%016llx&quot;,
 						be64_to_cpu(group-&gt;rec.mgid.global.subnet_prefix),
<span class="p_chunk">@@ -818,7 +818,7 @@</span> <span class="p_context"> static struct mcast_group *acquire_group(struct mlx4_ib_demux_ctx *ctx,</span>
 	int is_mgid0;
 	int i;
 
<span class="p_del">-	is_mgid0 = !memcmp(&amp;mgid0, mgid, sizeof mgid0);</span>
<span class="p_add">+	is_mgid0 = !memcmp(&amp;mgid0, mgid, sizeof(mgid0));</span>
 	if (!is_mgid0) {
 		group = mcast_find(ctx, mgid);
 		if (group)
<span class="p_chunk">@@ -828,7 +828,7 @@</span> <span class="p_context"> static struct mcast_group *acquire_group(struct mlx4_ib_demux_ctx *ctx,</span>
 	if (!create)
 		return ERR_PTR(-ENOENT);
 
<span class="p_del">-	group = kzalloc(sizeof *group, gfp_mask);</span>
<span class="p_add">+	group = kzalloc(sizeof(*group), gfp_mask);</span>
 	if (!group)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -949,7 +949,7 @@</span> <span class="p_context"> int mlx4_ib_mcg_multiplex_handler(struct ib_device *ibdev, int port,</span>
 	case IB_MGMT_METHOD_SET:
 		may_create = 1;
 	case IB_SA_METHOD_DELETE:
<span class="p_del">-		req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+		req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 		if (!req)
 			return -ENOMEM;
 
<span class="p_chunk">@@ -1142,7 +1142,7 @@</span> <span class="p_context"> void mlx4_ib_mcg_port_cleanup(struct mlx4_ib_demux_ctx *ctx, int destroy_wq)</span>
 		return;
 	}
 
<span class="p_del">-	work = kmalloc(sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kmalloc(sizeof(*work), GFP_KERNEL);</span>
 	if (!work) {
 		ctx-&gt;flushing = 0;
 		mcg_warn(&quot;failed allocating work for cleanup\n&quot;);
<span class="p_chunk">@@ -1204,7 +1204,7 @@</span> <span class="p_context"> static int push_deleteing_req(struct mcast_group *group, int slave)</span>
 	if (!group-&gt;func[slave].join_state)
 		return 0;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req) {
 		mcg_warn_group(group, &quot;failed allocation - may leave stall groups\n&quot;);
 		return -ENOMEM;
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/mr.c b/drivers/infiniband/hw/mlx4/mr.c</span>
<span class="p_header">index 242b94ec105b..f6a7b85623c7 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/mr.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/mr.c</span>
<span class="p_chunk">@@ -428,7 +428,7 @@</span> <span class="p_context"> struct ib_fmr *mlx4_ib_fmr_alloc(struct ib_pd *pd, int acc,</span>
 	struct mlx4_ib_fmr *fmr;
 	int err = -ENOMEM;
 
<span class="p_del">-	fmr = kmalloc(sizeof *fmr, GFP_KERNEL);</span>
<span class="p_add">+	fmr = kmalloc(sizeof(*fmr), GFP_KERNEL);</span>
 	if (!fmr)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/qp.c b/drivers/infiniband/hw/mlx4/qp.c</span>
<span class="p_header">index bc5536f00b6c..65a1c32d37de 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/qp.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/qp.c</span>
<span class="p_chunk">@@ -251,9 +251,9 @@</span> <span class="p_context"> static void post_nop_wqe(struct mlx4_ib_qp *qp, int n, int size)</span>
 	s = sizeof(struct mlx4_wqe_ctrl_seg);
 
 	if (qp-&gt;ibqp.qp_type == IB_QPT_UD) {
<span class="p_del">-		struct mlx4_wqe_datagram_seg *dgram = wqe + sizeof *ctrl;</span>
<span class="p_add">+		struct mlx4_wqe_datagram_seg *dgram = wqe + sizeof(*ctrl);</span>
 		struct mlx4_av *av = (struct mlx4_av *)dgram-&gt;av;
<span class="p_del">-		memset(dgram, 0, sizeof *dgram);</span>
<span class="p_add">+		memset(dgram, 0, sizeof(*dgram));</span>
 		av-&gt;port_pd = cpu_to_be32((qp-&gt;port &lt;&lt; 24) | to_mpd(qp-&gt;ibqp.pd)-&gt;pdn);
 		s += sizeof(struct mlx4_wqe_datagram_seg);
 	}
<span class="p_chunk">@@ -261,7 +261,7 @@</span> <span class="p_context"> static void post_nop_wqe(struct mlx4_ib_qp *qp, int n, int size)</span>
 	/* Pad the remainder of the WQE with an inline data segment. */
 	if (size &gt; s) {
 		inl = wqe + s;
<span class="p_del">-		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | (size - s - sizeof *inl));</span>
<span class="p_add">+		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | (size - s - sizeof(*inl)));</span>
 	}
 	ctrl-&gt;srcrb_flags = 0;
 	ctrl-&gt;fence_size = size / 16;
<span class="p_chunk">@@ -728,7 +728,7 @@</span> <span class="p_context"> static int create_qp_common(struct mlx4_ib_dev *dev, struct ib_pd *pd,</span>
 	if (pd-&gt;uobject) {
 		struct mlx4_ib_create_qp ucmd;
 
<span class="p_del">-		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd)) {</span>
<span class="p_add">+		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd))) {</span>
 			err = -EFAULT;
 			goto err;
 		}
<span class="p_chunk">@@ -1166,7 +1166,7 @@</span> <span class="p_context"> static struct ib_qp *_mlx4_ib_create_qp(struct ib_pd *pd,</span>
 	case IB_QPT_RC:
 	case IB_QPT_UC:
 	case IB_QPT_RAW_PACKET:
<span class="p_del">-		qp = kzalloc(sizeof *qp, gfp);</span>
<span class="p_add">+		qp = kzalloc(sizeof(*qp), gfp);</span>
 		if (!qp)
 			return ERR_PTR(-ENOMEM);
 		qp-&gt;pri.vid = 0xFFFF;
<span class="p_chunk">@@ -1618,7 +1618,7 @@</span> <span class="p_context"> static int __mlx4_ib_modify_qp(struct ib_qp *ibqp,</span>
 	    IB_LINK_LAYER_ETHERNET)
 		return -ENOTSUPP;
 
<span class="p_del">-	context = kzalloc(sizeof *context, GFP_KERNEL);</span>
<span class="p_add">+	context = kzalloc(sizeof(*context), GFP_KERNEL);</span>
 	if (!context)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -2278,7 +2278,7 @@</span> <span class="p_context"> static int build_sriov_qp0_header(struct mlx4_ib_sqp *sqp,</span>
 	struct mlx4_ib_dev *mdev = to_mdev(sqp-&gt;qp.ibqp.device);
 	struct ib_device *ib_dev = &amp;mdev-&gt;ib_dev;
 	struct mlx4_wqe_mlx_seg *mlx = wqe;
<span class="p_del">-	struct mlx4_wqe_inline_seg *inl = wqe + sizeof *mlx;</span>
<span class="p_add">+	struct mlx4_wqe_inline_seg *inl = wqe + sizeof(*mlx);</span>
 	struct mlx4_ib_ah *ah = to_mah(wr-&gt;ah);
 	u16 pkey;
 	u32 qkey;
<span class="p_chunk">@@ -2391,7 +2391,7 @@</span> <span class="p_context"> static int build_mlx_header(struct mlx4_ib_sqp *sqp, struct ib_ud_wr *wr,</span>
 	struct ib_device *ib_dev = sqp-&gt;qp.ibqp.device;
 	struct mlx4_wqe_mlx_seg *mlx = wqe;
 	struct mlx4_wqe_ctrl_seg *ctrl = wqe;
<span class="p_del">-	struct mlx4_wqe_inline_seg *inl = wqe + sizeof *mlx;</span>
<span class="p_add">+	struct mlx4_wqe_inline_seg *inl = wqe + sizeof(*mlx);</span>
 	struct mlx4_ib_ah *ah = to_mah(wr-&gt;ah);
 	union ib_gid sgid;
 	u16 pkey;
<span class="p_chunk">@@ -2764,7 +2764,7 @@</span> <span class="p_context"> static void build_tunnel_header(struct ib_ud_wr *wr, void *wqe, unsigned *mlx_se</span>
 	int spc;
 	int i;
 
<span class="p_del">-	memcpy(&amp;hdr.av, &amp;ah-&gt;av, sizeof hdr.av);</span>
<span class="p_add">+	memcpy(&amp;hdr.av, &amp;ah-&gt;av, sizeof(hdr.av));</span>
 	hdr.remote_qpn = cpu_to_be32(wr-&gt;remote_qpn);
 	hdr.pkey_index = cpu_to_be16(wr-&gt;pkey_index);
 	hdr.qkey = cpu_to_be32(wr-&gt;remote_qkey);
<span class="p_chunk">@@ -2773,10 +2773,10 @@</span> <span class="p_context"> static void build_tunnel_header(struct ib_ud_wr *wr, void *wqe, unsigned *mlx_se</span>
 
 	spc = MLX4_INLINE_ALIGN -
 		((unsigned long) (inl + 1) &amp; (MLX4_INLINE_ALIGN - 1));
<span class="p_del">-	if (sizeof (hdr) &lt;= spc) {</span>
<span class="p_del">-		memcpy(inl + 1, &amp;hdr, sizeof (hdr));</span>
<span class="p_add">+	if (sizeof(hdr) &lt;= spc) {</span>
<span class="p_add">+		memcpy(inl + 1, &amp;hdr, sizeof(hdr));</span>
 		wmb();
<span class="p_del">-		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | sizeof (hdr));</span>
<span class="p_add">+		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | sizeof(hdr));</span>
 		i = 1;
 	} else {
 		memcpy(inl + 1, &amp;hdr, spc);
<span class="p_chunk">@@ -2784,14 +2784,14 @@</span> <span class="p_context"> static void build_tunnel_header(struct ib_ud_wr *wr, void *wqe, unsigned *mlx_se</span>
 		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | spc);
 
 		inl = (void *) (inl + 1) + spc;
<span class="p_del">-		memcpy(inl + 1, (void *) &amp;hdr + spc, sizeof (hdr) - spc);</span>
<span class="p_add">+		memcpy(inl + 1, (void *) &amp;hdr + spc, sizeof(hdr) - spc);</span>
 		wmb();
<span class="p_del">-		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | (sizeof (hdr) - spc));</span>
<span class="p_add">+		inl-&gt;byte_count = cpu_to_be32(1 &lt;&lt; 31 | (sizeof(hdr) - spc));</span>
 		i = 2;
 	}
 
 	*mlx_seg_len =
<span class="p_del">-		ALIGN(i * sizeof (struct mlx4_wqe_inline_seg) + sizeof (hdr), 16);</span>
<span class="p_add">+		ALIGN(i * sizeof (struct mlx4_wqe_inline_seg) + sizeof(hdr), 16);</span>
 }
 
 static void set_mlx_icrc_seg(void *dseg)
<span class="p_chunk">@@ -2843,7 +2843,7 @@</span> <span class="p_context"> static int build_lso_seg(struct mlx4_wqe_lso_seg *wqe, struct ib_ud_wr *wr,</span>
 			 struct mlx4_ib_qp *qp, unsigned *lso_seg_len,
 			 __be32 *lso_hdr_sz, __be32 *blh)
 {
<span class="p_del">-	unsigned halign = ALIGN(sizeof *wqe + wr-&gt;hlen, 16);</span>
<span class="p_add">+	unsigned halign = ALIGN(sizeof(*wqe) + wr-&gt;hlen, 16);</span>
 
 	if (unlikely(halign &gt; MLX4_IB_CACHE_LINE_SIZE))
 		*blh = cpu_to_be32(1 &lt;&lt; 6);
<span class="p_chunk">@@ -2966,8 +2966,8 @@</span> <span class="p_context"> int mlx4_ib_post_send(struct ib_qp *ibqp, struct ib_send_wr *wr,</span>
 
 		ctrl-&gt;imm = send_ieth(wr);
 
<span class="p_del">-		wqe += sizeof *ctrl;</span>
<span class="p_del">-		size = sizeof *ctrl / 16;</span>
<span class="p_add">+		wqe += sizeof(*ctrl);</span>
<span class="p_add">+		size = sizeof(*ctrl) / 16;</span>
 
 		switch (qp-&gt;mlx4_ib_qp_type) {
 		case MLX4_IB_QPT_RC:
<span class="p_chunk">@@ -3348,7 +3348,7 @@</span> <span class="p_context"> static void to_ib_ah_attr(struct mlx4_ib_dev *ibdev, struct ib_ah_attr *ib_ah_at</span>
 	struct mlx4_dev *dev = ibdev-&gt;dev;
 	int is_eth;
 
<span class="p_del">-	memset(ib_ah_attr, 0, sizeof *ib_ah_attr);</span>
<span class="p_add">+	memset(ib_ah_attr, 0, sizeof(*ib_ah_attr));</span>
 	ib_ah_attr-&gt;port_num	  = path-&gt;sched_queue &amp; 0x40 ? 2 : 1;
 
 	if (ib_ah_attr-&gt;port_num == 0 || ib_ah_attr-&gt;port_num &gt; dev-&gt;caps.num_ports)
<span class="p_chunk">@@ -3374,7 +3374,7 @@</span> <span class="p_context"> static void to_ib_ah_attr(struct mlx4_ib_dev *ibdev, struct ib_ah_attr *ib_ah_at</span>
 		ib_ah_attr-&gt;grh.flow_label =
 			be32_to_cpu(path-&gt;tclass_flowlabel) &amp; 0xfffff;
 		memcpy(ib_ah_attr-&gt;grh.dgid.raw,
<span class="p_del">-			path-&gt;rgid, sizeof ib_ah_attr-&gt;grh.dgid.raw);</span>
<span class="p_add">+			path-&gt;rgid, sizeof(ib_ah_attr-&gt;grh.dgid.raw));</span>
 	}
 }
 
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/srq.c b/drivers/infiniband/hw/mlx4/srq.c</span>
<span class="p_header">index 0597f3eef5d0..5f7fdb8fcfbf 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/srq.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/srq.c</span>
<span class="p_chunk">@@ -89,7 +89,7 @@</span> <span class="p_context"> struct ib_srq *mlx4_ib_create_srq(struct ib_pd *pd,</span>
 	    init_attr-&gt;attr.max_sge &gt;  dev-&gt;dev-&gt;caps.max_srq_sge)
 		return ERR_PTR(-EINVAL);
 
<span class="p_del">-	srq = kmalloc(sizeof *srq, GFP_KERNEL);</span>
<span class="p_add">+	srq = kmalloc(sizeof(*srq), GFP_KERNEL);</span>
 	if (!srq)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -109,7 +109,7 @@</span> <span class="p_context"> struct ib_srq *mlx4_ib_create_srq(struct ib_pd *pd,</span>
 	if (pd-&gt;uobject) {
 		struct mlx4_ib_create_srq ucmd;
 
<span class="p_del">-		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd)) {</span>
<span class="p_add">+		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd))) {</span>
 			err = -EFAULT;
 			goto err_srq;
 		}
<span class="p_chunk">@@ -197,7 +197,7 @@</span> <span class="p_context"> struct ib_srq *mlx4_ib_create_srq(struct ib_pd *pd,</span>
 	srq-&gt;ibsrq.ext.xrc.srq_num = srq-&gt;msrq.srqn;
 
 	if (pd-&gt;uobject)
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;srq-&gt;msrq.srqn, sizeof (__u32))) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;srq-&gt;msrq.srqn, sizeof(__u32))) {</span>
 			err = -EFAULT;
 			goto err_wrid;
 		}
<span class="p_header">diff --git a/drivers/infiniband/hw/mlx4/sysfs.c b/drivers/infiniband/hw/mlx4/sysfs.c</span>
<span class="p_header">index 69fb5ba94d0f..29a2d42323da 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mlx4/sysfs.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mlx4/sysfs.c</span>
<span class="p_chunk">@@ -514,8 +514,8 @@</span> <span class="p_context"> alloc_group_attrs(ssize_t (*show)(struct mlx4_port *,</span>
 				  GFP_KERNEL);
 		if (!element)
 			goto err;
<span class="p_del">-		if (snprintf(element-&gt;name, sizeof (element-&gt;name),</span>
<span class="p_del">-			     &quot;%d&quot;, i) &gt;= sizeof (element-&gt;name)) {</span>
<span class="p_add">+		if (snprintf(element-&gt;name, sizeof(element-&gt;name),</span>
<span class="p_add">+			     &quot;%d&quot;, i) &gt;= sizeof(element-&gt;name)) {</span>
 			kfree(element);
 			goto err;
 		}
<span class="p_chunk">@@ -643,7 +643,7 @@</span> <span class="p_context"> static int add_port(struct mlx4_ib_dev *dev, int port_num, int slave)</span>
 	int is_eth = rdma_port_get_link_layer(&amp;dev-&gt;ib_dev, port_num) ==
 			IB_LINK_LAYER_ETHERNET;
 
<span class="p_del">-	p = kzalloc(sizeof *p, GFP_KERNEL);</span>
<span class="p_add">+	p = kzalloc(sizeof(*p), GFP_KERNEL);</span>
 	if (!p)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -713,7 +713,7 @@</span> <span class="p_context"> static int register_one_pkey_tree(struct mlx4_ib_dev *dev, int slave)</span>
 	struct mlx4_port *mport;
 	struct mlx4_active_ports actv_ports;
 
<span class="p_del">-	get_name(dev, name, slave, sizeof name);</span>
<span class="p_add">+	get_name(dev, name, slave, sizeof(name));</span>
 
 	dev-&gt;pkeys.device_parent[slave] =
 		kobject_create_and_add(name, kobject_get(dev-&gt;iov_parent));
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_allocator.c b/drivers/infiniband/hw/mthca/mthca_allocator.c</span>
<span class="p_header">index b4e0cf4e95cd..01eef569c2e3 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_allocator.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_allocator.c</span>
<span class="p_chunk">@@ -162,7 +162,7 @@</span> <span class="p_context"> int mthca_array_init(struct mthca_array *array, int nent)</span>
 	int npage = (nent * sizeof (void *) + PAGE_SIZE - 1) / PAGE_SIZE;
 	int i;
 
<span class="p_del">-	array-&gt;page_list = kmalloc(npage * sizeof *array-&gt;page_list, GFP_KERNEL);</span>
<span class="p_add">+	array-&gt;page_list = kmalloc(npage * sizeof(*array-&gt;page_list), GFP_KERNEL);</span>
 	if (!array-&gt;page_list)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -220,7 +220,7 @@</span> <span class="p_context"> int mthca_buf_alloc(struct mthca_dev *dev, int size, int max_direct,</span>
 			npages *= 2;
 		}
 
<span class="p_del">-		dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);</span>
<span class="p_add">+		dma_list = kmalloc(npages * sizeof(*dma_list), GFP_KERNEL);</span>
 		if (!dma_list)
 			goto err_free;
 
<span class="p_chunk">@@ -231,11 +231,11 @@</span> <span class="p_context"> int mthca_buf_alloc(struct mthca_dev *dev, int size, int max_direct,</span>
 		npages     = (size + PAGE_SIZE - 1) / PAGE_SIZE;
 		shift      = PAGE_SHIFT;
 
<span class="p_del">-		dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);</span>
<span class="p_add">+		dma_list = kmalloc(npages * sizeof(*dma_list), GFP_KERNEL);</span>
 		if (!dma_list)
 			return -ENOMEM;
 
<span class="p_del">-		buf-&gt;page_list = kmalloc(npages * sizeof *buf-&gt;page_list,</span>
<span class="p_add">+		buf-&gt;page_list = kmalloc(npages * sizeof(*buf-&gt;page_list),</span>
 					 GFP_KERNEL);
 		if (!buf-&gt;page_list)
 			goto err_out;
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_av.c b/drivers/infiniband/hw/mthca/mthca_av.c</span>
<span class="p_header">index bcac294042f5..46bb2b52a731 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_av.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_av.c</span>
<span class="p_chunk">@@ -161,7 +161,7 @@</span> <span class="p_context"> int mthca_create_ah(struct mthca_dev *dev,</span>
 	ah-&gt;type = MTHCA_AH_PCI_POOL;
 
 	if (mthca_is_memfree(dev)) {
<span class="p_del">-		ah-&gt;av   = kmalloc(sizeof *ah-&gt;av, GFP_ATOMIC);</span>
<span class="p_add">+		ah-&gt;av   = kmalloc(sizeof(*ah-&gt;av), GFP_ATOMIC);</span>
 		if (!ah-&gt;av)
 			return -ENOMEM;
 
<span class="p_chunk">@@ -175,7 +175,7 @@</span> <span class="p_context"> int mthca_create_ah(struct mthca_dev *dev,</span>
 		if (index == -1)
 			goto on_hca_fail;
 
<span class="p_del">-		av = kmalloc(sizeof *av, GFP_ATOMIC);</span>
<span class="p_add">+		av = kmalloc(sizeof(*av), GFP_ATOMIC);</span>
 		if (!av)
 			goto on_hca_fail;
 
<span class="p_chunk">@@ -298,7 +298,7 @@</span> <span class="p_context"> int mthca_ah_query(struct ib_ah *ibah, struct ib_ah_attr *attr)</span>
 	if (ah-&gt;type == MTHCA_AH_ON_HCA)
 		return -ENOSYS;
 
<span class="p_del">-	memset(attr, 0, sizeof *attr);</span>
<span class="p_add">+	memset(attr, 0, sizeof(*attr));</span>
 	attr-&gt;dlid          = be16_to_cpu(ah-&gt;av-&gt;dlid);
 	attr-&gt;sl            = be32_to_cpu(ah-&gt;av-&gt;sl_tclass_flowlabel) &gt;&gt; 28;
 	attr-&gt;port_num      = be32_to_cpu(ah-&gt;av-&gt;port_pd) &gt;&gt; 24;
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_cmd.c b/drivers/infiniband/hw/mthca/mthca_cmd.c</span>
<span class="p_header">index c7f49bbb0c72..cb62eaa3ca42 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_cmd.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_cmd.c</span>
<span class="p_chunk">@@ -609,7 +609,7 @@</span> <span class="p_context"> struct mthca_mailbox *mthca_alloc_mailbox(struct mthca_dev *dev,</span>
 {
 	struct mthca_mailbox *mailbox;
 
<span class="p_del">-	mailbox = kmalloc(sizeof *mailbox, gfp_mask);</span>
<span class="p_add">+	mailbox = kmalloc(sizeof(*mailbox), gfp_mask);</span>
 	if (!mailbox)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_cq.c b/drivers/infiniband/hw/mthca/mthca_cq.c</span>
<span class="p_header">index a6531ffe29a6..b08be138d095 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_cq.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_cq.c</span>
<span class="p_chunk">@@ -824,7 +824,7 @@</span> <span class="p_context"> int mthca_init_cq(struct mthca_dev *dev, int nent,</span>
 	init_waitqueue_head(&amp;cq-&gt;wait);
 	mutex_init(&amp;cq-&gt;mutex);
 
<span class="p_del">-	memset(cq_context, 0, sizeof *cq_context);</span>
<span class="p_add">+	memset(cq_context, 0, sizeof(*cq_context));</span>
 	cq_context-&gt;flags           = cpu_to_be32(MTHCA_CQ_STATUS_OK      |
 						  MTHCA_CQ_STATE_DISARMED |
 						  MTHCA_CQ_FLAG_TR);
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_eq.c b/drivers/infiniband/hw/mthca/mthca_eq.c</span>
<span class="p_header">index 690201738993..927ac756af95 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_eq.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_eq.c</span>
<span class="p_chunk">@@ -479,7 +479,7 @@</span> <span class="p_context"> static int mthca_create_eq(struct mthca_dev *dev,</span>
 	eq-&gt;nent = roundup_pow_of_two(max(nent, 2));
 	npages = ALIGN(eq-&gt;nent * MTHCA_EQ_ENTRY_SIZE, PAGE_SIZE) / PAGE_SIZE;
 
<span class="p_del">-	eq-&gt;page_list = kmalloc(npages * sizeof *eq-&gt;page_list,</span>
<span class="p_add">+	eq-&gt;page_list = kmalloc(npages * sizeof(*eq-&gt;page_list),</span>
 				GFP_KERNEL);
 	if (!eq-&gt;page_list)
 		goto err_out;
<span class="p_chunk">@@ -487,7 +487,7 @@</span> <span class="p_context"> static int mthca_create_eq(struct mthca_dev *dev,</span>
 	for (i = 0; i &lt; npages; ++i)
 		eq-&gt;page_list[i].buf = NULL;
 
<span class="p_del">-	dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);</span>
<span class="p_add">+	dma_list = kmalloc(npages * sizeof(*dma_list), GFP_KERNEL);</span>
 	if (!dma_list)
 		goto err_out_free;
 
<span class="p_chunk">@@ -524,7 +524,7 @@</span> <span class="p_context"> static int mthca_create_eq(struct mthca_dev *dev,</span>
 	if (err)
 		goto err_out_free_eq;
 
<span class="p_del">-	memset(eq_context, 0, sizeof *eq_context);</span>
<span class="p_add">+	memset(eq_context, 0, sizeof(*eq_context));</span>
 	eq_context-&gt;flags           = cpu_to_be32(MTHCA_EQ_STATUS_OK   |
 						  MTHCA_EQ_OWNER_HW    |
 						  MTHCA_EQ_STATE_ARMED |
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_mad.c b/drivers/infiniband/hw/mthca/mthca_mad.c</span>
<span class="p_header">index 7c3f2fb44ba5..7da71b822f04 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_mad.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_mad.c</span>
<span class="p_chunk">@@ -52,7 +52,7 @@</span> <span class="p_context"> static int mthca_update_rate(struct mthca_dev *dev, u8 port_num)</span>
 	struct ib_port_attr *tprops = NULL;
 	int                  ret;
 
<span class="p_del">-	tprops = kmalloc(sizeof *tprops, GFP_KERNEL);</span>
<span class="p_add">+	tprops = kmalloc(sizeof(*tprops), GFP_KERNEL);</span>
 	if (!tprops)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -81,7 +81,7 @@</span> <span class="p_context"> static void update_sm_ah(struct mthca_dev *dev,</span>
 	if (!dev-&gt;send_agent[port_num - 1][0])
 		return;
 
<span class="p_del">-	memset(&amp;ah_attr, 0, sizeof ah_attr);</span>
<span class="p_add">+	memset(&amp;ah_attr, 0, sizeof(ah_attr));</span>
 	ah_attr.dlid     = lid;
 	ah_attr.sl       = sl;
 	ah_attr.port_num = port_num;
<span class="p_chunk">@@ -181,7 +181,7 @@</span> <span class="p_context"> static void forward_trap(struct mthca_dev *dev,</span>
 		 * it&#39;s OK for our devices).
 		 */
 		spin_lock_irqsave(&amp;dev-&gt;sm_lock, flags);
<span class="p_del">-		memcpy(send_buf-&gt;mad, mad, sizeof *mad);</span>
<span class="p_add">+		memcpy(send_buf-&gt;mad, mad, sizeof(*mad));</span>
 		if ((send_buf-&gt;ah = dev-&gt;sm_ah[port_num - 1]))
 			ret = ib_post_send_mad(send_buf, NULL);
 		else
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_main.c b/drivers/infiniband/hw/mthca/mthca_main.c</span>
<span class="p_header">index ded76c101dde..03a0ef0c7782 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_main.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_main.c</span>
<span class="p_chunk">@@ -683,7 +683,7 @@</span> <span class="p_context"> static int mthca_init_hca(struct mthca_dev *mdev)</span>
 	mdev-&gt;eq_table.inta_pin = adapter.inta_pin;
 	if (!mthca_is_memfree(mdev))
 		mdev-&gt;rev_id = adapter.revision_id;
<span class="p_del">-	memcpy(mdev-&gt;board_id, adapter.board_id, sizeof mdev-&gt;board_id);</span>
<span class="p_add">+	memcpy(mdev-&gt;board_id, adapter.board_id, sizeof(mdev-&gt;board_id));</span>
 
 	return 0;
 
<span class="p_chunk">@@ -964,7 +964,7 @@</span> <span class="p_context"> static int __mthca_init_one(struct pci_dev *pdev, int hca_type)</span>
 	/* We can handle large RDMA requests, so allow larger segments. */
 	dma_set_max_seg_size(&amp;pdev-&gt;dev, 1024 * 1024 * 1024);
 
<span class="p_del">-	mdev = (struct mthca_dev *) ib_alloc_device(sizeof *mdev);</span>
<span class="p_add">+	mdev = (struct mthca_dev *) ib_alloc_device(sizeof(*mdev));</span>
 	if (!mdev) {
 		dev_err(&amp;pdev-&gt;dev, &quot;Device struct alloc failed, &quot;
 			&quot;aborting.\n&quot;);
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_mcg.c b/drivers/infiniband/hw/mthca/mthca_mcg.c</span>
<span class="p_header">index 6304ae8f4a6c..9cb36a345fc2 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_mcg.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_mcg.c</span>
<span class="p_chunk">@@ -157,7 +157,7 @@</span> <span class="p_context"> int mthca_multicast_attach(struct ib_qp *ibqp, union ib_gid *gid, u16 lid)</span>
 			mthca_err(dev, &quot;READ_MGM failed (%d)\n&quot;, err);
 			goto out;
 		}
<span class="p_del">-		memset(mgm, 0, sizeof *mgm);</span>
<span class="p_add">+		memset(mgm, 0, sizeof(*mgm));</span>
 		memcpy(mgm-&gt;gid, gid-&gt;raw, 16);
 	}
 
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_memfree.c b/drivers/infiniband/hw/mthca/mthca_memfree.c</span>
<span class="p_header">index 7d2e42dd6926..fcd43f68d9e3 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_memfree.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_memfree.c</span>
<span class="p_chunk">@@ -145,7 +145,7 @@</span> <span class="p_context"> struct mthca_icm *mthca_alloc_icm(struct mthca_dev *dev, int npages,</span>
 	/* We use sg_set_buf for coherent allocs, which assumes low memory */
 	BUG_ON(coherent &amp;&amp; (gfp_mask &amp; __GFP_HIGHMEM));
 
<span class="p_del">-	icm = kmalloc(sizeof *icm, gfp_mask &amp; ~(__GFP_HIGHMEM | __GFP_NOWARN));</span>
<span class="p_add">+	icm = kmalloc(sizeof(*icm), gfp_mask &amp; ~(__GFP_HIGHMEM | __GFP_NOWARN));</span>
 	if (!icm)
 		return icm;
 
<span class="p_chunk">@@ -156,7 +156,7 @@</span> <span class="p_context"> struct mthca_icm *mthca_alloc_icm(struct mthca_dev *dev, int npages,</span>
 
 	while (npages &gt; 0) {
 		if (!chunk) {
<span class="p_del">-			chunk = kmalloc(sizeof *chunk,</span>
<span class="p_add">+			chunk = kmalloc(sizeof(*chunk),</span>
 					gfp_mask &amp; ~(__GFP_HIGHMEM | __GFP_NOWARN));
 			if (!chunk)
 				goto fail;
<span class="p_chunk">@@ -367,7 +367,7 @@</span> <span class="p_context"> struct mthca_icm_table *mthca_alloc_icm_table(struct mthca_dev *dev,</span>
 	obj_per_chunk = MTHCA_TABLE_CHUNK_SIZE / obj_size;
 	num_icm = DIV_ROUND_UP(nobj, obj_per_chunk);
 
<span class="p_del">-	table = kmalloc(sizeof *table + num_icm * sizeof *table-&gt;icm, GFP_KERNEL);</span>
<span class="p_add">+	table = kmalloc(sizeof(*table) + num_icm * sizeof(*table-&gt;icm), GFP_KERNEL);</span>
 	if (!table)
 		return NULL;
 
<span class="p_chunk">@@ -530,7 +530,7 @@</span> <span class="p_context"> struct mthca_user_db_table *mthca_init_user_db_tab(struct mthca_dev *dev)</span>
 		return NULL;
 
 	npages = dev-&gt;uar_table.uarc_size / MTHCA_ICM_PAGE_SIZE;
<span class="p_del">-	db_tab = kmalloc(sizeof *db_tab + npages * sizeof *db_tab-&gt;page, GFP_KERNEL);</span>
<span class="p_add">+	db_tab = kmalloc(sizeof(*db_tab) + npages * sizeof(*db_tab-&gt;page), GFP_KERNEL);</span>
 	if (!db_tab)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -704,7 +704,7 @@</span> <span class="p_context"> int mthca_init_db_tab(struct mthca_dev *dev)</span>
 	if (!mthca_is_memfree(dev))
 		return 0;
 
<span class="p_del">-	dev-&gt;db_tab = kmalloc(sizeof *dev-&gt;db_tab, GFP_KERNEL);</span>
<span class="p_add">+	dev-&gt;db_tab = kmalloc(sizeof(*dev-&gt;db_tab), GFP_KERNEL);</span>
 	if (!dev-&gt;db_tab)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -715,7 +715,7 @@</span> <span class="p_context"> int mthca_init_db_tab(struct mthca_dev *dev)</span>
 	dev-&gt;db_tab-&gt;min_group2 = dev-&gt;db_tab-&gt;npages - 1;
 
 	dev-&gt;db_tab-&gt;page = kmalloc(dev-&gt;db_tab-&gt;npages *
<span class="p_del">-				    sizeof *dev-&gt;db_tab-&gt;page,</span>
<span class="p_add">+				    sizeof(*dev-&gt;db_tab-&gt;page),</span>
 				    GFP_KERNEL);
 	if (!dev-&gt;db_tab-&gt;page) {
 		kfree(dev-&gt;db_tab);
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_mr.c b/drivers/infiniband/hw/mthca/mthca_mr.c</span>
<span class="p_header">index ed9a989e501b..3b4cc911771c 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_mr.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_mr.c</span>
<span class="p_chunk">@@ -146,7 +146,7 @@</span> <span class="p_context"> static int mthca_buddy_init(struct mthca_buddy *buddy, int max_order)</span>
 
 	buddy-&gt;bits = kzalloc((buddy-&gt;max_order + 1) * sizeof (long *),
 			      GFP_KERNEL);
<span class="p_del">-	buddy-&gt;num_free = kcalloc((buddy-&gt;max_order + 1), sizeof *buddy-&gt;num_free,</span>
<span class="p_add">+	buddy-&gt;num_free = kcalloc((buddy-&gt;max_order + 1), sizeof(*buddy-&gt;num_free),</span>
 				  GFP_KERNEL);
 	if (!buddy-&gt;bits || !buddy-&gt;num_free)
 		goto err_out;
<span class="p_chunk">@@ -214,7 +214,7 @@</span> <span class="p_context"> static struct mthca_mtt *__mthca_alloc_mtt(struct mthca_dev *dev, int size,</span>
 	if (size &lt;= 0)
 		return ERR_PTR(-EINVAL);
 
<span class="p_del">-	mtt = kmalloc(sizeof *mtt, GFP_KERNEL);</span>
<span class="p_add">+	mtt = kmalloc(sizeof(*mtt), GFP_KERNEL);</span>
 	if (!mtt)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -470,7 +470,7 @@</span> <span class="p_context"> int mthca_mr_alloc(struct mthca_dev *dev, u32 pd, int buffer_size_shift,</span>
 	mpt_entry-&gt;length    = cpu_to_be64(total_size);
 
 	memset(&amp;mpt_entry-&gt;lkey, 0,
<span class="p_del">-	       sizeof *mpt_entry - offsetof(struct mthca_mpt_entry, lkey));</span>
<span class="p_add">+	       sizeof(*mpt_entry) - offsetof(struct mthca_mpt_entry, lkey));</span>
 
 	if (mr-&gt;mtt)
 		mpt_entry-&gt;mtt_seg =
<span class="p_chunk">@@ -580,7 +580,7 @@</span> <span class="p_context"> int mthca_fmr_alloc(struct mthca_dev *dev, u32 pd,</span>
 
 	/* For Arbel, all MTTs must fit in the same page. */
 	if (mthca_is_memfree(dev) &amp;&amp;
<span class="p_del">-	    mr-&gt;attr.max_pages * sizeof *mr-&gt;mem.arbel.mtts &gt; PAGE_SIZE)</span>
<span class="p_add">+	    mr-&gt;attr.max_pages * sizeof(*mr-&gt;mem.arbel.mtts) &gt; PAGE_SIZE)</span>
 		return -EINVAL;
 
 	mr-&gt;maps = 0;
<span class="p_chunk">@@ -602,7 +602,7 @@</span> <span class="p_context"> int mthca_fmr_alloc(struct mthca_dev *dev, u32 pd,</span>
 		BUG_ON(!mr-&gt;mem.arbel.mpt);
 	} else
 		mr-&gt;mem.tavor.mpt = dev-&gt;mr_table.tavor_fmr.mpt_base +
<span class="p_del">-			sizeof *(mr-&gt;mem.tavor.mpt) * idx;</span>
<span class="p_add">+			sizeof(*(mr-&gt;mem.tavor.mpt)) * idx;</span>
 
 	mr-&gt;mtt = __mthca_alloc_mtt(dev, list_len, dev-&gt;mr_table.fmr_mtt_buddy);
 	if (IS_ERR(mr-&gt;mtt)) {
<span class="p_chunk">@@ -637,7 +637,7 @@</span> <span class="p_context"> int mthca_fmr_alloc(struct mthca_dev *dev, u32 pd,</span>
 	mpt_entry-&gt;key       = cpu_to_be32(key);
 	mpt_entry-&gt;pd        = cpu_to_be32(pd);
 	memset(&amp;mpt_entry-&gt;start, 0,
<span class="p_del">-	       sizeof *mpt_entry - offsetof(struct mthca_mpt_entry, start));</span>
<span class="p_add">+	       sizeof(*mpt_entry) - offsetof(struct mthca_mpt_entry, start));</span>
 	mpt_entry-&gt;mtt_seg   = cpu_to_be64(dev-&gt;mr_table.mtt_base + mtt_seg);
 
 	if (0) {
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_profile.c b/drivers/infiniband/hw/mthca/mthca_profile.c</span>
<span class="p_header">index 15d064479ef6..d7f759c507c6 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_profile.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_profile.c</span>
<span class="p_chunk">@@ -79,7 +79,7 @@</span> <span class="p_context"> s64 mthca_make_profile(struct mthca_dev *dev,</span>
 	struct mthca_resource *profile;
 	int i, j;
 
<span class="p_del">-	profile = kzalloc(MTHCA_RES_NUM * sizeof *profile, GFP_KERNEL);</span>
<span class="p_add">+	profile = kzalloc(MTHCA_RES_NUM * sizeof(*profile), GFP_KERNEL);</span>
 	if (!profile)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_provider.c b/drivers/infiniband/hw/mthca/mthca_provider.c</span>
<span class="p_header">index 9866c35cc977..5955f2c12f7c 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_provider.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_provider.c</span>
<span class="p_chunk">@@ -68,12 +68,12 @@</span> <span class="p_context"> static int mthca_query_device(struct ib_device *ibdev, struct ib_device_attr *pr</span>
 	if (uhw-&gt;inlen || uhw-&gt;outlen)
 		return -EINVAL;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_del">-	memset(props, 0, sizeof *props);</span>
<span class="p_add">+	memset(props, 0, sizeof(*props));</span>
 
 	props-&gt;fw_ver              = mdev-&gt;fw_ver;
 
<span class="p_chunk">@@ -141,12 +141,12 @@</span> <span class="p_context"> static int mthca_query_port(struct ib_device *ibdev,</span>
 	struct ib_smp *out_mad = NULL;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_del">-	memset(props, 0, sizeof *props);</span>
<span class="p_add">+	memset(props, 0, sizeof(*props));</span>
 
 	init_query_mad(in_mad);
 	in_mad-&gt;attr_id  = IB_SMP_ATTR_PORT_INFO;
<span class="p_chunk">@@ -236,8 +236,8 @@</span> <span class="p_context"> static int mthca_query_pkey(struct ib_device *ibdev,</span>
 	struct ib_smp *out_mad = NULL;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -265,8 +265,8 @@</span> <span class="p_context"> static int mthca_query_gid(struct ib_device *ibdev, u8 port,</span>
 	struct ib_smp *out_mad = NULL;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_chunk">@@ -308,7 +308,7 @@</span> <span class="p_context"> static struct ib_ucontext *mthca_alloc_ucontext(struct ib_device *ibdev,</span>
 	if (!(to_mdev(ibdev)-&gt;active))
 		return ERR_PTR(-EAGAIN);
 
<span class="p_del">-	memset(&amp;uresp, 0, sizeof uresp);</span>
<span class="p_add">+	memset(&amp;uresp, 0, sizeof(uresp));</span>
 
 	uresp.qp_tab_size = to_mdev(ibdev)-&gt;limits.num_qps;
 	if (mthca_is_memfree(to_mdev(ibdev)))
<span class="p_chunk">@@ -316,7 +316,7 @@</span> <span class="p_context"> static struct ib_ucontext *mthca_alloc_ucontext(struct ib_device *ibdev,</span>
 	else
 		uresp.uarc_size = 0;
 
<span class="p_del">-	context = kmalloc(sizeof *context, GFP_KERNEL);</span>
<span class="p_add">+	context = kmalloc(sizeof(*context), GFP_KERNEL);</span>
 	if (!context)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -334,7 +334,7 @@</span> <span class="p_context"> static struct ib_ucontext *mthca_alloc_ucontext(struct ib_device *ibdev,</span>
 		return ERR_PTR(err);
 	}
 
<span class="p_del">-	if (ib_copy_to_udata(udata, &amp;uresp, sizeof uresp)) {</span>
<span class="p_add">+	if (ib_copy_to_udata(udata, &amp;uresp, sizeof(uresp))) {</span>
 		mthca_cleanup_user_db_tab(to_mdev(ibdev), &amp;context-&gt;uar, context-&gt;db_tab);
 		mthca_uar_free(to_mdev(ibdev), &amp;context-&gt;uar);
 		kfree(context);
<span class="p_chunk">@@ -379,7 +379,7 @@</span> <span class="p_context"> static struct ib_pd *mthca_alloc_pd(struct ib_device *ibdev,</span>
 	struct mthca_pd *pd;
 	int err;
 
<span class="p_del">-	pd = kmalloc(sizeof *pd, GFP_KERNEL);</span>
<span class="p_add">+	pd = kmalloc(sizeof(*pd), GFP_KERNEL);</span>
 	if (!pd)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -390,7 +390,7 @@</span> <span class="p_context"> static struct ib_pd *mthca_alloc_pd(struct ib_device *ibdev,</span>
 	}
 
 	if (context) {
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;pd-&gt;pd_num, sizeof (__u32))) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;pd-&gt;pd_num, sizeof(__u32))) {</span>
 			mthca_pd_free(to_mdev(ibdev), pd);
 			kfree(pd);
 			return ERR_PTR(-EFAULT);
<span class="p_chunk">@@ -414,7 +414,7 @@</span> <span class="p_context"> static struct ib_ah *mthca_ah_create(struct ib_pd *pd,</span>
 	int err;
 	struct mthca_ah *ah;
 
<span class="p_del">-	ah = kmalloc(sizeof *ah, GFP_ATOMIC);</span>
<span class="p_add">+	ah = kmalloc(sizeof(*ah), GFP_ATOMIC);</span>
 	if (!ah)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -447,14 +447,14 @@</span> <span class="p_context"> static struct ib_srq *mthca_create_srq(struct ib_pd *pd,</span>
 	if (init_attr-&gt;srq_type != IB_SRQT_BASIC)
 		return ERR_PTR(-ENOSYS);
 
<span class="p_del">-	srq = kmalloc(sizeof *srq, GFP_KERNEL);</span>
<span class="p_add">+	srq = kmalloc(sizeof(*srq), GFP_KERNEL);</span>
 	if (!srq)
 		return ERR_PTR(-ENOMEM);
 
 	if (pd-&gt;uobject) {
 		context = to_mucontext(pd-&gt;uobject-&gt;context);
 
<span class="p_del">-		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd)) {</span>
<span class="p_add">+		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd))) {</span>
 			err = -EFAULT;
 			goto err_free;
 		}
<span class="p_chunk">@@ -480,7 +480,7 @@</span> <span class="p_context"> static struct ib_srq *mthca_create_srq(struct ib_pd *pd,</span>
 	if (err)
 		goto err_free;
 
<span class="p_del">-	if (context &amp;&amp; ib_copy_to_udata(udata, &amp;srq-&gt;srqn, sizeof (__u32))) {</span>
<span class="p_add">+	if (context &amp;&amp; ib_copy_to_udata(udata, &amp;srq-&gt;srqn, sizeof(__u32))) {</span>
 		mthca_free_srq(to_mdev(pd-&gt;device), srq);
 		err = -EFAULT;
 		goto err_free;
<span class="p_chunk">@@ -529,14 +529,14 @@</span> <span class="p_context"> static struct ib_qp *mthca_create_qp(struct ib_pd *pd,</span>
 	{
 		struct mthca_ucontext *context;
 
<span class="p_del">-		qp = kmalloc(sizeof *qp, GFP_KERNEL);</span>
<span class="p_add">+		qp = kmalloc(sizeof(*qp), GFP_KERNEL);</span>
 		if (!qp)
 			return ERR_PTR(-ENOMEM);
 
 		if (pd-&gt;uobject) {
 			context = to_mucontext(pd-&gt;uobject-&gt;context);
 
<span class="p_del">-			if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd)) {</span>
<span class="p_add">+			if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd))) {</span>
 				kfree(qp);
 				return ERR_PTR(-EFAULT);
 			}
<span class="p_chunk">@@ -663,7 +663,7 @@</span> <span class="p_context"> static struct ib_cq *mthca_create_cq(struct ib_device *ibdev,</span>
 		return ERR_PTR(-EINVAL);
 
 	if (context) {
<span class="p_del">-		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd))</span>
<span class="p_add">+		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd)))</span>
 			return ERR_PTR(-EFAULT);
 
 		err = mthca_map_user_db(to_mdev(ibdev), &amp;to_mucontext(context)-&gt;uar,
<span class="p_chunk">@@ -679,7 +679,7 @@</span> <span class="p_context"> static struct ib_cq *mthca_create_cq(struct ib_device *ibdev,</span>
 			goto err_unmap_set;
 	}
 
<span class="p_del">-	cq = kmalloc(sizeof *cq, GFP_KERNEL);</span>
<span class="p_add">+	cq = kmalloc(sizeof(*cq), GFP_KERNEL);</span>
 	if (!cq) {
 		err = -ENOMEM;
 		goto err_unmap_arm;
<span class="p_chunk">@@ -701,7 +701,7 @@</span> <span class="p_context"> static struct ib_cq *mthca_create_cq(struct ib_device *ibdev,</span>
 	if (err)
 		goto err_free;
 
<span class="p_del">-	if (context &amp;&amp; ib_copy_to_udata(udata, &amp;cq-&gt;cqn, sizeof (__u32))) {</span>
<span class="p_add">+	if (context &amp;&amp; ib_copy_to_udata(udata, &amp;cq-&gt;cqn, sizeof(__u32))) {</span>
 		mthca_free_cq(to_mdev(ibdev), cq);
 		err = -EFAULT;
 		goto err_free;
<span class="p_chunk">@@ -738,7 +738,7 @@</span> <span class="p_context"> static int mthca_alloc_resize_buf(struct mthca_dev *dev, struct mthca_cq *cq,</span>
 		goto unlock;
 	}
 
<span class="p_del">-	cq-&gt;resize_buf = kmalloc(sizeof *cq-&gt;resize_buf, GFP_ATOMIC);</span>
<span class="p_add">+	cq-&gt;resize_buf = kmalloc(sizeof(*cq-&gt;resize_buf), GFP_ATOMIC);</span>
 	if (!cq-&gt;resize_buf) {
 		ret = -ENOMEM;
 		goto unlock;
<span class="p_chunk">@@ -797,7 +797,7 @@</span> <span class="p_context"> static int mthca_resize_cq(struct ib_cq *ibcq, int entries, struct ib_udata *uda</span>
 			goto out;
 		lkey = cq-&gt;resize_buf-&gt;buf.mr.ibmr.lkey;
 	} else {
<span class="p_del">-		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd)) {</span>
<span class="p_add">+		if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd))) {</span>
 			ret = -EFAULT;
 			goto out;
 		}
<span class="p_chunk">@@ -880,7 +880,7 @@</span> <span class="p_context"> static struct ib_mr *mthca_get_dma_mr(struct ib_pd *pd, int acc)</span>
 	struct mthca_mr *mr;
 	int err;
 
<span class="p_del">-	mr = kmalloc(sizeof *mr, GFP_KERNEL);</span>
<span class="p_add">+	mr = kmalloc(sizeof(*mr), GFP_KERNEL);</span>
 	if (!mr)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -911,7 +911,7 @@</span> <span class="p_context"> static struct ib_mr *mthca_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,</span>
 	int err = 0;
 	int write_mtt_size;
 
<span class="p_del">-	if (udata-&gt;inlen - sizeof (struct ib_uverbs_cmd_hdr) &lt; sizeof ucmd) {</span>
<span class="p_add">+	if (udata-&gt;inlen - sizeof (struct ib_uverbs_cmd_hdr) &lt; sizeof(ucmd)) {</span>
 		if (!to_mucontext(pd-&gt;uobject-&gt;context)-&gt;reg_mr_warned) {
 			mthca_warn(dev, &quot;Process &#39;%s&#39; did not pass in MR attrs.\n&quot;,
 				   current-&gt;comm);
<span class="p_chunk">@@ -919,10 +919,10 @@</span> <span class="p_context"> static struct ib_mr *mthca_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,</span>
 		}
 		++to_mucontext(pd-&gt;uobject-&gt;context)-&gt;reg_mr_warned;
 		ucmd.mr_attrs = 0;
<span class="p_del">-	} else if (ib_copy_from_udata(&amp;ucmd, udata, sizeof ucmd))</span>
<span class="p_add">+	} else if (ib_copy_from_udata(&amp;ucmd, udata, sizeof(ucmd)))</span>
 		return ERR_PTR(-EFAULT);
 
<span class="p_del">-	mr = kmalloc(sizeof *mr, GFP_KERNEL);</span>
<span class="p_add">+	mr = kmalloc(sizeof(*mr), GFP_KERNEL);</span>
 	if (!mr)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -951,7 +951,7 @@</span> <span class="p_context"> static struct ib_mr *mthca_reg_user_mr(struct ib_pd *pd, u64 start, u64 length,</span>
 
 	i = n = 0;
 
<span class="p_del">-	write_mtt_size = min(mthca_write_mtt_size(dev), (int) (PAGE_SIZE / sizeof *pages));</span>
<span class="p_add">+	write_mtt_size = min(mthca_write_mtt_size(dev), (int) (PAGE_SIZE / sizeof(*pages)));</span>
 
 	for_each_sg(mr-&gt;umem-&gt;sg_head.sgl, sg, mr-&gt;umem-&gt;nmap, entry) {
 		len = sg_dma_len(sg) &gt;&gt; shift;
<span class="p_chunk">@@ -1016,11 +1016,11 @@</span> <span class="p_context"> static struct ib_fmr *mthca_alloc_fmr(struct ib_pd *pd, int mr_access_flags,</span>
 	struct mthca_fmr *fmr;
 	int err;
 
<span class="p_del">-	fmr = kmalloc(sizeof *fmr, GFP_KERNEL);</span>
<span class="p_add">+	fmr = kmalloc(sizeof(*fmr), GFP_KERNEL);</span>
 	if (!fmr)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_del">-	memcpy(&amp;fmr-&gt;attr, fmr_attr, sizeof *fmr_attr);</span>
<span class="p_add">+	memcpy(&amp;fmr-&gt;attr, fmr_attr, sizeof(*fmr_attr));</span>
 	err = mthca_fmr_alloc(to_mdev(pd-&gt;device), to_mpd(pd)-&gt;pd_num,
 			     convert_access(mr_access_flags), fmr);
 
<span class="p_chunk">@@ -1137,8 +1137,8 @@</span> <span class="p_context"> static int mthca_init_node_data(struct mthca_dev *dev)</span>
 	struct ib_smp *out_mad = NULL;
 	int err = -ENOMEM;
 
<span class="p_del">-	in_mad  = kzalloc(sizeof *in_mad, GFP_KERNEL);</span>
<span class="p_del">-	out_mad = kmalloc(sizeof *out_mad, GFP_KERNEL);</span>
<span class="p_add">+	in_mad  = kzalloc(sizeof(*in_mad), GFP_KERNEL);</span>
<span class="p_add">+	out_mad = kmalloc(sizeof(*out_mad), GFP_KERNEL);</span>
 	if (!in_mad || !out_mad)
 		goto out;
 
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_qp.c b/drivers/infiniband/hw/mthca/mthca_qp.c</span>
<span class="p_header">index 96e5fb91fb48..648c82727995 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_qp.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_qp.c</span>
<span class="p_chunk">@@ -311,7 +311,7 @@</span> <span class="p_context"> static void init_port(struct mthca_dev *dev, int port)</span>
 	int err;
 	struct mthca_init_ib_param param;
 
<span class="p_del">-	memset(&amp;param, 0, sizeof param);</span>
<span class="p_add">+	memset(&amp;param, 0, sizeof(param));</span>
 
 	param.port_width = dev-&gt;limits.port_width_cap;
 	param.vl_cap     = dev-&gt;limits.vl_cap;
<span class="p_chunk">@@ -396,7 +396,7 @@</span> <span class="p_context"> static int to_ib_qp_access_flags(int mthca_flags)</span>
 static void to_ib_ah_attr(struct mthca_dev *dev, struct ib_ah_attr *ib_ah_attr,
 				struct mthca_qp_path *path)
 {
<span class="p_del">-	memset(ib_ah_attr, 0, sizeof *ib_ah_attr);</span>
<span class="p_add">+	memset(ib_ah_attr, 0, sizeof(*ib_ah_attr));</span>
 	ib_ah_attr-&gt;port_num 	  = (be32_to_cpu(path-&gt;port_pkey) &gt;&gt; 24) &amp; 0x3;
 
 	if (ib_ah_attr-&gt;port_num == 0 || ib_ah_attr-&gt;port_num &gt; dev-&gt;limits.num_ports)
<span class="p_chunk">@@ -417,7 +417,7 @@</span> <span class="p_context"> static void to_ib_ah_attr(struct mthca_dev *dev, struct ib_ah_attr *ib_ah_attr,</span>
 		ib_ah_attr-&gt;grh.flow_label =
 			be32_to_cpu(path-&gt;sl_tclass_flowlabel) &amp; 0xfffff;
 		memcpy(ib_ah_attr-&gt;grh.dgid.raw,
<span class="p_del">-			path-&gt;rgid, sizeof ib_ah_attr-&gt;grh.dgid.raw);</span>
<span class="p_add">+			path-&gt;rgid, sizeof(ib_ah_attr-&gt;grh.dgid.raw));</span>
 	}
 }
 
<span class="p_chunk">@@ -559,7 +559,7 @@</span> <span class="p_context"> static int __mthca_modify_qp(struct ib_qp *ibqp,</span>
 	}
 	qp_param = mailbox-&gt;buf;
 	qp_context = &amp;qp_param-&gt;context;
<span class="p_del">-	memset(qp_param, 0, sizeof *qp_param);</span>
<span class="p_add">+	memset(qp_param, 0, sizeof(*qp_param));</span>
 
 	qp_context-&gt;flags      = cpu_to_be32((to_mthca_state(new_state) &lt;&lt; 28) |
 					     (to_mthca_st(qp-&gt;transport) &lt;&lt; 16));
<span class="p_header">diff --git a/drivers/infiniband/hw/mthca/mthca_srq.c b/drivers/infiniband/hw/mthca/mthca_srq.c</span>
<span class="p_header">index d22f970480c0..eb0c642d0154 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/mthca/mthca_srq.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/mthca/mthca_srq.c</span>
<span class="p_chunk">@@ -97,7 +97,7 @@</span> <span class="p_context"> static void mthca_tavor_init_srq_context(struct mthca_dev *dev,</span>
 					 struct mthca_srq *srq,
 					 struct mthca_tavor_srq_context *context)
 {
<span class="p_del">-	memset(context, 0, sizeof *context);</span>
<span class="p_add">+	memset(context, 0, sizeof(*context));</span>
 
 	context-&gt;wqe_base_ds = cpu_to_be64(1 &lt;&lt; (srq-&gt;wqe_shift - 4));
 	context-&gt;state_pd    = cpu_to_be32(pd-&gt;pd_num);
<span class="p_chunk">@@ -117,7 +117,7 @@</span> <span class="p_context"> static void mthca_arbel_init_srq_context(struct mthca_dev *dev,</span>
 {
 	int logsize, max;
 
<span class="p_del">-	memset(context, 0, sizeof *context);</span>
<span class="p_add">+	memset(context, 0, sizeof(*context));</span>
 
 	/*
 	 * Put max in a temporary variable to work around gcc bug
<span class="p_chunk">@@ -155,7 +155,7 @@</span> <span class="p_context"> static int mthca_alloc_srq_buf(struct mthca_dev *dev, struct mthca_pd *pd,</span>
 	if (pd-&gt;ibpd.uobject)
 		return 0;
 
<span class="p_del">-	srq-&gt;wrid = kmalloc(srq-&gt;max * sizeof (u64), GFP_KERNEL);</span>
<span class="p_add">+	srq-&gt;wrid = kmalloc(srq-&gt;max * sizeof(u64), GFP_KERNEL);</span>
 	if (!srq-&gt;wrid)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/infiniband/hw/nes/nes_cm.c b/drivers/infiniband/hw/nes/nes_cm.c</span>
<span class="p_header">index cb9f0f27308d..e73ab04ce8dd 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/nes/nes_cm.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/nes/nes_cm.c</span>
<span class="p_chunk">@@ -3000,7 +3000,7 @@</span> <span class="p_context"> int nes_cm_disconn(struct nes_qp *nesqp)</span>
 {
 	struct disconn_work *work;
 
<span class="p_del">-	work = kzalloc(sizeof *work, GFP_ATOMIC);</span>
<span class="p_add">+	work = kzalloc(sizeof(*work), GFP_ATOMIC);</span>
 	if (!work)
 		return -ENOMEM;  /* Timer will clean up */
 
<span class="p_header">diff --git a/drivers/infiniband/hw/nes/nes_hw.c b/drivers/infiniband/hw/nes/nes_hw.c</span>
<span class="p_header">index 4713dd7ed764..3b8b7b216ce9 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/nes/nes_hw.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/nes/nes_hw.c</span>
<span class="p_chunk">@@ -386,7 +386,7 @@</span> <span class="p_context"> struct nes_adapter *nes_init_adapter(struct nes_device *nesdev, u8 hw_rev) {</span>
 	nes_init_csr_ne020(nesdev, hw_rev, port_count);
 
 	memset(nesadapter-&gt;pft_mcast_map, 255,
<span class="p_del">-	       sizeof nesadapter-&gt;pft_mcast_map);</span>
<span class="p_add">+	       sizeof(nesadapter-&gt;pft_mcast_map));</span>
 
 	/* populate the new nesadapter */
 	nesadapter-&gt;devfn = nesdev-&gt;pcidev-&gt;devfn;
<span class="p_header">diff --git a/drivers/infiniband/hw/nes/nes_mgt.c b/drivers/infiniband/hw/nes/nes_mgt.c</span>
<span class="p_header">index 416645259b0f..5e20fc7224b4 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/nes/nes_mgt.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/nes/nes_mgt.c</span>
<span class="p_chunk">@@ -273,7 +273,7 @@</span> <span class="p_context"> static int get_fpdu_info(struct nes_device *nesdev, struct nes_qp *nesqp,</span>
 
 		/* See if we have all of the fpdu */
 		frag_tot = 0;
<span class="p_del">-		memset(&amp;frags, 0, sizeof frags);</span>
<span class="p_add">+		memset(&amp;frags, 0, sizeof(frags));</span>
 		for (i = 0; i &lt; MAX_FPDU_FRAGS; i++) {
 			frags[i].physaddr = cb-&gt;busaddr;
 			frags[i].physaddr += skb-&gt;data - cb-&gt;data_start;
<span class="p_chunk">@@ -728,7 +728,7 @@</span> <span class="p_context"> static int nes_change_quad_hash(struct nes_device *nesdev,</span>
 		goto chg_qh_err;
 	}
 
<span class="p_del">-	qh_chg = kmalloc(sizeof *qh_chg, GFP_ATOMIC);</span>
<span class="p_add">+	qh_chg = kmalloc(sizeof(*qh_chg), GFP_ATOMIC);</span>
 	if (qh_chg == NULL) {
 		nes_debug(NES_DBG_PAU, &quot;Failed to get a cqp_request.\n&quot;);
 		ret = -ENOMEM;
<span class="p_header">diff --git a/drivers/infiniband/hw/nes/nes_verbs.c b/drivers/infiniband/hw/nes/nes_verbs.c</span>
<span class="p_header">index 8c4daf7f22ec..09f64b0a9030 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/nes/nes_verbs.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/nes/nes_verbs.c</span>
<span class="p_chunk">@@ -566,7 +566,7 @@</span> <span class="p_context"> static struct ib_ucontext *nes_alloc_ucontext(struct ib_device *ibdev,</span>
 	}
 
 
<span class="p_del">-	memset(&amp;uresp, 0, sizeof uresp);</span>
<span class="p_add">+	memset(&amp;uresp, 0, sizeof(uresp));</span>
 
 	uresp.max_qps = nesibdev-&gt;max_qp;
 	uresp.max_pds = nesibdev-&gt;max_pd;
<span class="p_chunk">@@ -574,7 +574,7 @@</span> <span class="p_context"> static struct ib_ucontext *nes_alloc_ucontext(struct ib_device *ibdev,</span>
 	uresp.virtwq = nesadapter-&gt;virtwq;
 	uresp.kernel_ver = NES_ABI_KERNEL_VER;
 
<span class="p_del">-	nes_ucontext = kzalloc(sizeof *nes_ucontext, GFP_KERNEL);</span>
<span class="p_add">+	nes_ucontext = kzalloc(sizeof(*nes_ucontext), GFP_KERNEL);</span>
 	if (!nes_ucontext)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -585,7 +585,7 @@</span> <span class="p_context"> static struct ib_ucontext *nes_alloc_ucontext(struct ib_device *ibdev,</span>
 			PAGE_SIZE;
 
 
<span class="p_del">-	if (ib_copy_to_udata(udata, &amp;uresp, sizeof uresp)) {</span>
<span class="p_add">+	if (ib_copy_to_udata(udata, &amp;uresp, sizeof(uresp))) {</span>
 		kfree(nes_ucontext);
 		return ERR_PTR(-EFAULT);
 	}
<span class="p_chunk">@@ -1297,7 +1297,7 @@</span> <span class="p_context"> static struct ib_qp *nes_create_qp(struct ib_pd *ibpd,</span>
 				uresp.actual_rq_size = rq_size;
 				uresp.qp_id = nesqp-&gt;hwqp.qp_id;
 				uresp.nes_drv_opt = nes_drv_opt;
<span class="p_del">-				if (ib_copy_to_udata(udata, &amp;uresp, sizeof uresp)) {</span>
<span class="p_add">+				if (ib_copy_to_udata(udata, &amp;uresp, sizeof(uresp))) {</span>
 					nes_free_resource(nesadapter, nesadapter-&gt;allocated_qps, qp_num);
 					nes_free_qp_mem(nesdev, nesqp,virt_wqs);
 					kfree(nesqp-&gt;allocated_buffer);
<span class="p_chunk">@@ -1680,7 +1680,7 @@</span> <span class="p_context"> static struct ib_cq *nes_create_cq(struct ib_device *ibdev,</span>
 		resp.cq_id = nescq-&gt;hw_cq.cq_number;
 		resp.cq_size = nescq-&gt;hw_cq.cq_size;
 		resp.mmap_db_index = 0;
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;resp, sizeof resp - sizeof resp.reserved)) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;resp, sizeof(resp) - sizeof(resp.reserved))) {</span>
 			nes_free_resource(nesadapter, nesadapter-&gt;allocated_cqs, cq_num);
 			kfree(nescq);
 			return ERR_PTR(-EFAULT);
<span class="p_chunk">@@ -3502,7 +3502,7 @@</span> <span class="p_context"> static int nes_poll_cq(struct ib_cq *ibcq, int num_entries, struct ib_wc *entry)</span>
 
 		if (u64temp) {
 			nesqp = (struct nes_qp *)(unsigned long)u64temp;
<span class="p_del">-			memset(entry, 0, sizeof *entry);</span>
<span class="p_add">+			memset(entry, 0, sizeof(*entry));</span>
 			if (cqe.cqe_words[NES_CQE_ERROR_CODE_IDX] == 0) {
 				entry-&gt;status = IB_WC_SUCCESS;
 			} else {
<span class="p_header">diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_stats.c b/drivers/infiniband/hw/ocrdma/ocrdma_stats.c</span>
<span class="p_header">index 86c303a620c1..7bbbdec1f7f0 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/ocrdma/ocrdma_stats.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/ocrdma/ocrdma_stats.c</span>
<span class="p_chunk">@@ -677,7 +677,7 @@</span> <span class="p_context"> int ocrdma_pma_counters(struct ocrdma_dev *dev,</span>
 {
 	struct ib_pma_portcounters *pma_cnt;
 
<span class="p_del">-	memset(out_mad-&gt;data, 0, sizeof out_mad-&gt;data);</span>
<span class="p_add">+	memset(out_mad-&gt;data, 0, sizeof(out_mad-&gt;data));</span>
 	pma_cnt = (void *)(out_mad-&gt;data + 40);
 	ocrdma_update_stats(dev);
 
<span class="p_header">diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c</span>
<span class="p_header">index d4c687b548d8..c28b66fd12db 100644</span>
<span class="p_header">--- a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c</span>
<span class="p_header">+++ b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c</span>
<span class="p_chunk">@@ -106,7 +106,7 @@</span> <span class="p_context"> int ocrdma_query_device(struct ib_device *ibdev, struct ib_device_attr *attr,</span>
 	if (uhw-&gt;inlen || uhw-&gt;outlen)
 		return -EINVAL;
 
<span class="p_del">-	memset(attr, 0, sizeof *attr);</span>
<span class="p_add">+	memset(attr, 0, sizeof(*attr));</span>
 	memcpy(&amp;attr-&gt;fw_ver, &amp;dev-&gt;attr.fw_ver[0],
 	       min(sizeof(dev-&gt;attr.fw_ver), sizeof(attr-&gt;fw_ver)));
 	ocrdma_get_guid(dev, (u8 *)&amp;attr-&gt;sys_image_guid);
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_cm.c b/drivers/infiniband/ulp/ipoib/ipoib_cm.c</span>
<span class="p_header">index 917e46ea3bf6..fa09406f0033 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_cm.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_cm.c</span>
<span class="p_chunk">@@ -354,14 +354,14 @@</span> <span class="p_context"> static int ipoib_cm_nonsrq_init_rx(struct net_device *dev, struct ib_cm_id *cm_i</span>
 	int ret;
 	int i;
 
<span class="p_del">-	rx-&gt;rx_ring = vzalloc(ipoib_recvq_size * sizeof *rx-&gt;rx_ring);</span>
<span class="p_add">+	rx-&gt;rx_ring = vzalloc(ipoib_recvq_size * sizeof(*rx-&gt;rx_ring));</span>
 	if (!rx-&gt;rx_ring) {
 		printk(KERN_WARNING &quot;%s: failed to allocate CM non-SRQ ring (%d entries)\n&quot;,
 		       priv-&gt;ca-&gt;name, ipoib_recvq_size);
 		return -ENOMEM;
 	}
 
<span class="p_del">-	t = kmalloc(sizeof *t, GFP_KERNEL);</span>
<span class="p_add">+	t = kmalloc(sizeof(*t), GFP_KERNEL);</span>
 	if (!t) {
 		ret = -ENOMEM;
 		goto err_free;
<span class="p_chunk">@@ -428,7 +428,7 @@</span> <span class="p_context"> static int ipoib_cm_send_rep(struct net_device *dev, struct ib_cm_id *cm_id,</span>
 	data.mtu = cpu_to_be32(IPOIB_CM_BUF_SIZE);
 
 	rep.private_data = &amp;data;
<span class="p_del">-	rep.private_data_len = sizeof data;</span>
<span class="p_add">+	rep.private_data_len = sizeof(data);</span>
 	rep.flow_control = 0;
 	rep.rnr_retry_count = req-&gt;rnr_retry_count;
 	rep.srq = ipoib_cm_has_srq(dev);
<span class="p_chunk">@@ -446,7 +446,7 @@</span> <span class="p_context"> static int ipoib_cm_req_handler(struct ib_cm_id *cm_id, struct ib_cm_event *even</span>
 	int ret;
 
 	ipoib_dbg(priv, &quot;REQ arrived\n&quot;);
<span class="p_del">-	p = kzalloc(sizeof *p, GFP_KERNEL);</span>
<span class="p_add">+	p = kzalloc(sizeof(*p), GFP_KERNEL);</span>
 	if (!p)
 		return -ENOMEM;
 	p-&gt;dev = dev;
<span class="p_chunk">@@ -654,7 +654,7 @@</span> <span class="p_context"> void ipoib_cm_handle_rx_wc(struct net_device *dev, struct ib_wc *wc)</span>
 	}
 
 	ipoib_cm_dma_unmap_rx(priv, frags, rx_ring[wr_id].mapping);
<span class="p_del">-	memcpy(rx_ring[wr_id].mapping, mapping, (frags + 1) * sizeof *mapping);</span>
<span class="p_add">+	memcpy(rx_ring[wr_id].mapping, mapping, (frags + 1) * sizeof(*mapping));</span>
 
 	ipoib_dbg_data(priv, &quot;received %d bytes, SLID 0x%04x\n&quot;,
 		       wc-&gt;byte_len, wc-&gt;slid);
<span class="p_chunk">@@ -1061,7 +1061,7 @@</span> <span class="p_context"> static int ipoib_cm_send_req(struct net_device *dev,</span>
 	req.qp_num			= qp-&gt;qp_num;
 	req.qp_type			= qp-&gt;qp_type;
 	req.private_data		= &amp;data;
<span class="p_del">-	req.private_data_len		= sizeof data;</span>
<span class="p_add">+	req.private_data_len		= sizeof(data);</span>
 	req.flow_control		= 0;
 
 	req.starting_psn		= 0; /* FIXME */
<span class="p_chunk">@@ -1111,14 +1111,14 @@</span> <span class="p_context"> static int ipoib_cm_tx_init(struct ipoib_cm_tx *p, u32 qpn,</span>
 	struct ipoib_dev_priv *priv = netdev_priv(p-&gt;dev);
 	int ret;
 
<span class="p_del">-	p-&gt;tx_ring = __vmalloc(ipoib_sendq_size * sizeof *p-&gt;tx_ring,</span>
<span class="p_add">+	p-&gt;tx_ring = __vmalloc(ipoib_sendq_size * sizeof(*p-&gt;tx_ring),</span>
 			       GFP_NOIO, PAGE_KERNEL);
 	if (!p-&gt;tx_ring) {
 		ipoib_warn(priv, &quot;failed to allocate tx ring\n&quot;);
 		ret = -ENOMEM;
 		goto err_tx;
 	}
<span class="p_del">-	memset(p-&gt;tx_ring, 0, ipoib_sendq_size * sizeof *p-&gt;tx_ring);</span>
<span class="p_add">+	memset(p-&gt;tx_ring, 0, ipoib_sendq_size * sizeof(*p-&gt;tx_ring));</span>
 
 	p-&gt;qp = ipoib_cm_create_tx_qp(p-&gt;dev, p);
 	if (IS_ERR(p-&gt;qp)) {
<span class="p_chunk">@@ -1270,7 +1270,7 @@</span> <span class="p_context"> struct ipoib_cm_tx *ipoib_cm_create_tx(struct net_device *dev, struct ipoib_path</span>
 	struct ipoib_dev_priv *priv = netdev_priv(dev);
 	struct ipoib_cm_tx *tx;
 
<span class="p_del">-	tx = kzalloc(sizeof *tx, GFP_ATOMIC);</span>
<span class="p_add">+	tx = kzalloc(sizeof(*tx), GFP_ATOMIC);</span>
 	if (!tx)
 		return NULL;
 
<span class="p_chunk">@@ -1320,7 +1320,7 @@</span> <span class="p_context"> static void ipoib_cm_tx_start(struct work_struct *work)</span>
 		list_del_init(&amp;p-&gt;list);
 		neigh = p-&gt;neigh;
 		qpn = IPOIB_QPN(neigh-&gt;daddr);
<span class="p_del">-		memcpy(&amp;pathrec, &amp;p-&gt;path-&gt;pathrec, sizeof pathrec);</span>
<span class="p_add">+		memcpy(&amp;pathrec, &amp;p-&gt;path-&gt;pathrec, sizeof(pathrec));</span>
 
 		spin_unlock_irqrestore(&amp;priv-&gt;lock, flags);
 		netif_tx_unlock_bh(dev);
<span class="p_chunk">@@ -1508,7 +1508,7 @@</span> <span class="p_context"> static void ipoib_cm_create_srq(struct net_device *dev, int max_sge)</span>
 		return;
 	}
 
<span class="p_del">-	priv-&gt;cm.srq_ring = vzalloc(ipoib_recvq_size * sizeof *priv-&gt;cm.srq_ring);</span>
<span class="p_add">+	priv-&gt;cm.srq_ring = vzalloc(ipoib_recvq_size * sizeof(*priv-&gt;cm.srq_ring));</span>
 	if (!priv-&gt;cm.srq_ring) {
 		printk(KERN_WARNING &quot;%s: failed to allocate CM SRQ ring (%d entries)\n&quot;,
 		       priv-&gt;ca-&gt;name, ipoib_recvq_size);
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_fs.c b/drivers/infiniband/ulp/ipoib/ipoib_fs.c</span>
<span class="p_header">index 6bd5740e2691..c65de8155d8d 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_fs.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_fs.c</span>
<span class="p_chunk">@@ -97,7 +97,7 @@</span> <span class="p_context"> static void ipoib_mcg_seq_stop(struct seq_file *file, void *iter_ptr)</span>
 static int ipoib_mcg_seq_show(struct seq_file *file, void *iter_ptr)
 {
 	struct ipoib_mcast_iter *iter = iter_ptr;
<span class="p_del">-	char gid_buf[sizeof &quot;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&quot;];</span>
<span class="p_add">+	char gid_buf[sizeof(&quot;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&quot;)];</span>
 	union ib_gid mgid;
 	unsigned long created;
 	unsigned int queuelen, complete, send_only;
<span class="p_chunk">@@ -196,7 +196,7 @@</span> <span class="p_context"> static void ipoib_path_seq_stop(struct seq_file *file, void *iter_ptr)</span>
 static int ipoib_path_seq_show(struct seq_file *file, void *iter_ptr)
 {
 	struct ipoib_path_iter *iter = iter_ptr;
<span class="p_del">-	char gid_buf[sizeof &quot;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&quot;];</span>
<span class="p_add">+	char gid_buf[sizeof(&quot;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&quot;)];</span>
 	struct ipoib_path path;
 	int rate;
 
<span class="p_chunk">@@ -262,15 +262,15 @@</span> <span class="p_context"> static const struct file_operations ipoib_path_fops = {</span>
 void ipoib_create_debug_files(struct net_device *dev)
 {
 	struct ipoib_dev_priv *priv = netdev_priv(dev);
<span class="p_del">-	char name[IFNAMSIZ + sizeof &quot;_path&quot;];</span>
<span class="p_add">+	char name[IFNAMSIZ + sizeof(&quot;_path&quot;)];</span>
 
<span class="p_del">-	snprintf(name, sizeof name, &quot;%s_mcg&quot;, dev-&gt;name);</span>
<span class="p_add">+	snprintf(name, sizeof(name), &quot;%s_mcg&quot;, dev-&gt;name);</span>
 	priv-&gt;mcg_dentry = debugfs_create_file(name, S_IFREG | S_IRUGO,
 					       ipoib_root, dev, &amp;ipoib_mcg_fops);
 	if (!priv-&gt;mcg_dentry)
 		ipoib_warn(priv, &quot;failed to create mcg debug file\n&quot;);
 
<span class="p_del">-	snprintf(name, sizeof name, &quot;%s_path&quot;, dev-&gt;name);</span>
<span class="p_add">+	snprintf(name, sizeof(name), &quot;%s_path&quot;, dev-&gt;name);</span>
 	priv-&gt;path_dentry = debugfs_create_file(name, S_IFREG | S_IRUGO,
 						ipoib_root, dev, &amp;ipoib_path_fops);
 	if (!priv-&gt;path_dentry)
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_ib.c b/drivers/infiniband/ulp/ipoib/ipoib_ib.c</span>
<span class="p_header">index 5ea0c14070d1..35f341ecdc07 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_ib.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_ib.c</span>
<span class="p_chunk">@@ -59,7 +59,7 @@</span> <span class="p_context"> struct ipoib_ah *ipoib_create_ah(struct net_device *dev,</span>
 	struct ipoib_ah *ah;
 	struct ib_ah *vah;
 
<span class="p_del">-	ah = kmalloc(sizeof *ah, GFP_KERNEL);</span>
<span class="p_add">+	ah = kmalloc(sizeof(*ah), GFP_KERNEL);</span>
 	if (!ah)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -211,7 +211,7 @@</span> <span class="p_context"> static void ipoib_ib_handle_rx_wc(struct net_device *dev, struct ib_wc *wc)</span>
 		goto repost;
 
 	memcpy(mapping, priv-&gt;rx_ring[wr_id].mapping,
<span class="p_del">-	       IPOIB_UD_RX_SG * sizeof *mapping);</span>
<span class="p_add">+	       IPOIB_UD_RX_SG * sizeof(*mapping));</span>
 
 	/*
 	 * If we can&#39;t allocate a new RX buffer, dump
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_main.c b/drivers/infiniband/ulp/ipoib/ipoib_main.c</span>
<span class="p_header">index 25509bbd4a05..443928f3cbee 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_main.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_main.c</span>
<span class="p_chunk">@@ -559,7 +559,7 @@</span> <span class="p_context"> struct ipoib_path_iter *ipoib_path_iter_init(struct net_device *dev)</span>
 {
 	struct ipoib_path_iter *iter;
 
<span class="p_del">-	iter = kmalloc(sizeof *iter, GFP_KERNEL);</span>
<span class="p_add">+	iter = kmalloc(sizeof(*iter), GFP_KERNEL);</span>
 	if (!iter)
 		return NULL;
 
<span class="p_chunk">@@ -761,7 +761,7 @@</span> <span class="p_context"> static struct ipoib_path *path_rec_create(struct net_device *dev, void *gid)</span>
 	if (!priv-&gt;broadcast)
 		return NULL;
 
<span class="p_del">-	path = kzalloc(sizeof *path, GFP_ATOMIC);</span>
<span class="p_add">+	path = kzalloc(sizeof(*path), GFP_ATOMIC);</span>
 	if (!path)
 		return NULL;
 
<span class="p_chunk">@@ -1050,7 +1050,7 @@</span> <span class="p_context"> static int ipoib_hard_header(struct sk_buff *skb,</span>
 	struct ipoib_header *header;
 	struct ipoib_cb *cb = ipoib_skb_cb(skb);
 
<span class="p_del">-	header = (struct ipoib_header *) skb_push(skb, sizeof *header);</span>
<span class="p_add">+	header = (struct ipoib_header *) skb_push(skb, sizeof(*header));</span>
 
 	header-&gt;proto = htons(type);
 	header-&gt;reserved = 0;
<span class="p_chunk">@@ -1062,7 +1062,7 @@</span> <span class="p_context"> static int ipoib_hard_header(struct sk_buff *skb,</span>
 	 */
 	memcpy(cb-&gt;hwaddr, daddr, INFINIBAND_ALEN);
 
<span class="p_del">-	return sizeof *header;</span>
<span class="p_add">+	return sizeof(*header);</span>
 }
 
 static void ipoib_set_mcast_list(struct net_device *dev)
<span class="p_chunk">@@ -1216,7 +1216,7 @@</span> <span class="p_context"> static struct ipoib_neigh *ipoib_neigh_ctor(u8 *daddr,</span>
 {
 	struct ipoib_neigh *neigh;
 
<span class="p_del">-	neigh = kzalloc(sizeof *neigh, GFP_ATOMIC);</span>
<span class="p_add">+	neigh = kzalloc(sizeof(*neigh), GFP_ATOMIC);</span>
 	if (!neigh)
 		return NULL;
 
<span class="p_chunk">@@ -1515,7 +1515,7 @@</span> <span class="p_context"> int ipoib_dev_init(struct net_device *dev, struct ib_device *ca, int port)</span>
 	struct ipoib_dev_priv *priv = netdev_priv(dev);
 
 	/* Allocate RX/TX &quot;rings&quot; to hold queued skbs */
<span class="p_del">-	priv-&gt;rx_ring =	kzalloc(ipoib_recvq_size * sizeof *priv-&gt;rx_ring,</span>
<span class="p_add">+	priv-&gt;rx_ring =	kzalloc(ipoib_recvq_size * sizeof(*priv-&gt;rx_ring),</span>
 				GFP_KERNEL);
 	if (!priv-&gt;rx_ring) {
 		printk(KERN_WARNING &quot;%s: failed to allocate RX ring (%d entries)\n&quot;,
<span class="p_chunk">@@ -1523,7 +1523,7 @@</span> <span class="p_context"> int ipoib_dev_init(struct net_device *dev, struct ib_device *ca, int port)</span>
 		goto out;
 	}
 
<span class="p_del">-	priv-&gt;tx_ring = vzalloc(ipoib_sendq_size * sizeof *priv-&gt;tx_ring);</span>
<span class="p_add">+	priv-&gt;tx_ring = vzalloc(ipoib_sendq_size * sizeof(*priv-&gt;tx_ring));</span>
 	if (!priv-&gt;tx_ring) {
 		printk(KERN_WARNING &quot;%s: failed to allocate TX ring (%d entries)\n&quot;,
 		       ca-&gt;name, ipoib_sendq_size);
<span class="p_chunk">@@ -1903,7 +1903,7 @@</span> <span class="p_context"> static void ipoib_add_one(struct ib_device *device)</span>
 	int p;
 	int count = 0;
 
<span class="p_del">-	dev_list = kmalloc(sizeof *dev_list, GFP_KERNEL);</span>
<span class="p_add">+	dev_list = kmalloc(sizeof(*dev_list), GFP_KERNEL);</span>
 	if (!dev_list)
 		return;
 
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_multicast.c b/drivers/infiniband/ulp/ipoib/ipoib_multicast.c</span>
<span class="p_header">index 050dfa175d16..0b0d9aa28df2 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_multicast.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_multicast.c</span>
<span class="p_chunk">@@ -137,7 +137,7 @@</span> <span class="p_context"> static struct ipoib_mcast *ipoib_mcast_alloc(struct net_device *dev,</span>
 {
 	struct ipoib_mcast *mcast;
 
<span class="p_del">-	mcast = kzalloc(sizeof *mcast, can_sleep ? GFP_KERNEL : GFP_ATOMIC);</span>
<span class="p_add">+	mcast = kzalloc(sizeof(*mcast), can_sleep ? GFP_KERNEL : GFP_ATOMIC);</span>
 	if (!mcast)
 		return NULL;
 
<span class="p_chunk">@@ -894,7 +894,7 @@</span> <span class="p_context"> void ipoib_mcast_restart_task(struct work_struct *work)</span>
 		if (!ipoib_mcast_addr_is_valid(ha-&gt;addr, dev-&gt;broadcast))
 			continue;
 
<span class="p_del">-		memcpy(mgid.raw, ha-&gt;addr + 4, sizeof mgid);</span>
<span class="p_add">+		memcpy(mgid.raw, ha-&gt;addr + 4, sizeof(mgid));</span>
 
 		mcast = __ipoib_mcast_find(dev, &amp;mgid);
 		if (!mcast || test_bit(IPOIB_MCAST_FLAG_SENDONLY, &amp;mcast-&gt;flags)) {
<span class="p_chunk">@@ -983,7 +983,7 @@</span> <span class="p_context"> struct ipoib_mcast_iter *ipoib_mcast_iter_init(struct net_device *dev)</span>
 {
 	struct ipoib_mcast_iter *iter;
 
<span class="p_del">-	iter = kmalloc(sizeof *iter, GFP_KERNEL);</span>
<span class="p_add">+	iter = kmalloc(sizeof(*iter), GFP_KERNEL);</span>
 	if (!iter)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_verbs.c b/drivers/infiniband/ulp/ipoib/ipoib_verbs.c</span>
<span class="p_header">index d48c5bae7877..a0ecc0d907a7 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_verbs.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_verbs.c</span>
<span class="p_chunk">@@ -51,7 +51,7 @@</span> <span class="p_context"> int ipoib_mcast_attach(struct net_device *dev, u16 mlid, union ib_gid *mgid, int</span>
 
 	if (set_qkey) {
 		ret = -ENOMEM;
<span class="p_del">-		qp_attr = kmalloc(sizeof *qp_attr, GFP_KERNEL);</span>
<span class="p_add">+		qp_attr = kmalloc(sizeof(*qp_attr), GFP_KERNEL);</span>
 		if (!qp_attr)
 			goto out;
 
<span class="p_header">diff --git a/drivers/infiniband/ulp/ipoib/ipoib_vlan.c b/drivers/infiniband/ulp/ipoib/ipoib_vlan.c</span>
<span class="p_header">index fca1a882de27..6df51bc0b9f2 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/ipoib/ipoib_vlan.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/ipoib/ipoib_vlan.c</span>
<span class="p_chunk">@@ -129,7 +129,7 @@</span> <span class="p_context"> int ipoib_vlan_add(struct net_device *pdev, unsigned short pkey)</span>
 
 	ppriv = netdev_priv(pdev);
 
<span class="p_del">-	snprintf(intf_name, sizeof intf_name, &quot;%s.%04x&quot;,</span>
<span class="p_add">+	snprintf(intf_name, sizeof(intf_name), &quot;%s.%04x&quot;,</span>
 		 ppriv-&gt;dev-&gt;name, pkey);
 	priv = ipoib_intf_alloc(intf_name);
 	if (!priv)
<span class="p_header">diff --git a/drivers/infiniband/ulp/iser/iser_verbs.c b/drivers/infiniband/ulp/iser/iser_verbs.c</span>
<span class="p_header">index 40c0f4978e2f..2c8a65ed5b1d 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/iser/iser_verbs.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/iser/iser_verbs.c</span>
<span class="p_chunk">@@ -439,7 +439,7 @@</span> <span class="p_context"> static int iser_create_ib_conn_res(struct ib_conn *ib_conn)</span>
 	device = ib_conn-&gt;device;
 	ib_dev = device-&gt;ib_device;
 
<span class="p_del">-	memset(&amp;init_attr, 0, sizeof init_attr);</span>
<span class="p_add">+	memset(&amp;init_attr, 0, sizeof(init_attr));</span>
 
 	mutex_lock(&amp;ig.connlist_mutex);
 	/* select the CQ with the minimal number of usages */
<span class="p_chunk">@@ -516,7 +516,7 @@</span> <span class="p_context"> struct iser_device *iser_device_find_by_ib_device(struct rdma_cm_id *cma_id)</span>
 		if (device-&gt;ib_device-&gt;node_guid == cma_id-&gt;device-&gt;node_guid)
 			goto inc_refcnt;
 
<span class="p_del">-	device = kzalloc(sizeof *device, GFP_KERNEL);</span>
<span class="p_add">+	device = kzalloc(sizeof(*device), GFP_KERNEL);</span>
 	if (device == NULL)
 		goto out;
 
<span class="p_chunk">@@ -805,7 +805,7 @@</span> <span class="p_context"> static void iser_route_handler(struct rdma_cm_id *cma_id)</span>
 	if (ret)
 		goto failure;
 
<span class="p_del">-	memset(&amp;conn_param, 0, sizeof conn_param);</span>
<span class="p_add">+	memset(&amp;conn_param, 0, sizeof(conn_param));</span>
 	conn_param.responder_resources = device-&gt;ib_device-&gt;attrs.max_qp_rd_atom;
 	conn_param.initiator_depth     = 1;
 	conn_param.retry_count	       = 7;
<span class="p_header">diff --git a/drivers/infiniband/ulp/srp/ib_srp.c b/drivers/infiniband/ulp/srp/ib_srp.c</span>
<span class="p_header">index 03022f6420d7..2057b1543764 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/srp/ib_srp.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/srp/ib_srp.c</span>
<span class="p_chunk">@@ -203,8 +203,8 @@</span> <span class="p_context"> static int srp_target_is_topspin(struct srp_target_port *target)</span>
 	static const u8 cisco_oui[3]   = { 0x00, 0x1b, 0x0d };
 
 	return topspin_workarounds &amp;&amp;
<span class="p_del">-		(!memcmp(&amp;target-&gt;ioc_guid, topspin_oui, sizeof topspin_oui) ||</span>
<span class="p_del">-		 !memcmp(&amp;target-&gt;ioc_guid, cisco_oui, sizeof cisco_oui));</span>
<span class="p_add">+		(!memcmp(&amp;target-&gt;ioc_guid, topspin_oui, sizeof(topspin_oui)) ||</span>
<span class="p_add">+		 !memcmp(&amp;target-&gt;ioc_guid, cisco_oui, sizeof(cisco_oui)));</span>
 }
 
 static struct srp_iu *srp_alloc_iu(struct srp_host *host, size_t size,
<span class="p_chunk">@@ -213,7 +213,7 @@</span> <span class="p_context"> static struct srp_iu *srp_alloc_iu(struct srp_host *host, size_t size,</span>
 {
 	struct srp_iu *iu;
 
<span class="p_del">-	iu = kmalloc(sizeof *iu, gfp_mask);</span>
<span class="p_add">+	iu = kmalloc(sizeof(*iu), gfp_mask);</span>
 	if (!iu)
 		goto out;
 
<span class="p_chunk">@@ -262,7 +262,7 @@</span> <span class="p_context"> static int srp_init_qp(struct srp_target_port *target,</span>
 	struct ib_qp_attr *attr;
 	int ret;
 
<span class="p_del">-	attr = kmalloc(sizeof *attr, GFP_KERNEL);</span>
<span class="p_add">+	attr = kmalloc(sizeof(*attr), GFP_KERNEL);</span>
 	if (!attr)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -504,7 +504,7 @@</span> <span class="p_context"> static int srp_create_ch_ib(struct srp_rdma_ch *ch)</span>
 	const int m = dev-&gt;use_fast_reg ? 3 : 1;
 	int ret;
 
<span class="p_del">-	init_attr = kzalloc(sizeof *init_attr, GFP_KERNEL);</span>
<span class="p_add">+	init_attr = kzalloc(sizeof(*init_attr), GFP_KERNEL);</span>
 	if (!init_attr)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -719,7 +719,7 @@</span> <span class="p_context"> static int srp_send_req(struct srp_rdma_ch *ch, bool multich)</span>
 	} *req = NULL;
 	int status;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -729,7 +729,7 @@</span> <span class="p_context"> static int srp_send_req(struct srp_rdma_ch *ch, bool multich)</span>
 	req-&gt;param.qp_num		      = ch-&gt;qp-&gt;qp_num;
 	req-&gt;param.qp_type		      = ch-&gt;qp-&gt;qp_type;
 	req-&gt;param.private_data 	      = &amp;req-&gt;priv;
<span class="p_del">-	req-&gt;param.private_data_len 	      = sizeof req-&gt;priv;</span>
<span class="p_add">+	req-&gt;param.private_data_len 	      = sizeof(req-&gt;priv);</span>
 	req-&gt;param.flow_control 	      = 1;
 
 	get_random_bytes(&amp;req-&gt;param.starting_psn, 4);
<span class="p_chunk">@@ -2084,7 +2084,7 @@</span> <span class="p_context"> static int srp_queuecommand(struct Scsi_Host *shost, struct scsi_cmnd *scmnd)</span>
 	scmnd-&gt;host_scribble = (void *) req;
 
 	cmd = iu-&gt;buf;
<span class="p_del">-	memset(cmd, 0, sizeof *cmd);</span>
<span class="p_add">+	memset(cmd, 0, sizeof(*cmd));</span>
 
 	cmd-&gt;opcode = SRP_CMD;
 	int_to_scsilun(scmnd-&gt;device-&gt;lun, &amp;cmd-&gt;lun);
<span class="p_chunk">@@ -2267,7 +2267,7 @@</span> <span class="p_context"> static void srp_cm_rep_handler(struct ib_cm_id *cm_id,</span>
 	}
 
 	ret = -ENOMEM;
<span class="p_del">-	qp_attr = kmalloc(sizeof *qp_attr, GFP_KERNEL);</span>
<span class="p_add">+	qp_attr = kmalloc(sizeof(*qp_attr), GFP_KERNEL);</span>
 	if (!qp_attr)
 		goto error;
 
<span class="p_chunk">@@ -2496,10 +2496,10 @@</span> <span class="p_context"> static int srp_send_tsk_mgmt(struct srp_rdma_ch *ch, u64 req_tag, u64 lun,</span>
 		return -1;
 	}
 
<span class="p_del">-	ib_dma_sync_single_for_cpu(dev, iu-&gt;dma, sizeof *tsk_mgmt,</span>
<span class="p_add">+	ib_dma_sync_single_for_cpu(dev, iu-&gt;dma, sizeof(*tsk_mgmt),</span>
 				   DMA_TO_DEVICE);
 	tsk_mgmt = iu-&gt;buf;
<span class="p_del">-	memset(tsk_mgmt, 0, sizeof *tsk_mgmt);</span>
<span class="p_add">+	memset(tsk_mgmt, 0, sizeof(*tsk_mgmt));</span>
 
 	tsk_mgmt-&gt;opcode 	= SRP_TSK_MGMT;
 	int_to_scsilun(lun, &amp;tsk_mgmt-&gt;lun);
<span class="p_chunk">@@ -2507,7 +2507,7 @@</span> <span class="p_context"> static int srp_send_tsk_mgmt(struct srp_rdma_ch *ch, u64 req_tag, u64 lun,</span>
 	tsk_mgmt-&gt;tsk_mgmt_func = func;
 	tsk_mgmt-&gt;task_tag	= req_tag;
 
<span class="p_del">-	ib_dma_sync_single_for_device(dev, iu-&gt;dma, sizeof *tsk_mgmt,</span>
<span class="p_add">+	ib_dma_sync_single_for_device(dev, iu-&gt;dma, sizeof(*tsk_mgmt),</span>
 				      DMA_TO_DEVICE);
 	if (srp_post_send(ch, iu, sizeof(*tsk_mgmt))) {
 		srp_put_tx_iu(ch, iu, SRP_IU_TSK_MGMT);
<span class="p_chunk">@@ -3204,7 +3204,7 @@</span> <span class="p_context"> static ssize_t srp_create_target(struct device *dev,</span>
 	target_host-&gt;max_channel = 0;
 	target_host-&gt;max_id      = 1;
 	target_host-&gt;max_lun     = -1LL;
<span class="p_del">-	target_host-&gt;max_cmd_len = sizeof ((struct srp_cmd *) (void *) 0L)-&gt;cdb;</span>
<span class="p_add">+	target_host-&gt;max_cmd_len = sizeof(((struct srp_cmd *)(void *)0L)-&gt;cdb);</span>
 
 	target = host_to_target(target_host);
 
<span class="p_chunk">@@ -3400,7 +3400,7 @@</span> <span class="p_context"> static struct srp_host *srp_add_port(struct srp_device *device, u8 port)</span>
 {
 	struct srp_host *host;
 
<span class="p_del">-	host = kzalloc(sizeof *host, GFP_KERNEL);</span>
<span class="p_add">+	host = kzalloc(sizeof(*host), GFP_KERNEL);</span>
 	if (!host)
 		return NULL;
 
<span class="p_chunk">@@ -3442,7 +3442,7 @@</span> <span class="p_context"> static void srp_add_one(struct ib_device *device)</span>
 	int mr_page_shift, p;
 	u64 max_pages_per_mr;
 
<span class="p_del">-	srp_dev = kmalloc(sizeof *srp_dev, GFP_KERNEL);</span>
<span class="p_add">+	srp_dev = kmalloc(sizeof(*srp_dev), GFP_KERNEL);</span>
 	if (!srp_dev)
 		return;
 
<span class="p_header">diff --git a/drivers/infiniband/ulp/srpt/ib_srpt.c b/drivers/infiniband/ulp/srpt/ib_srpt.c</span>
<span class="p_header">index 0c37fee363b1..f65ae6029612 100644</span>
<span class="p_header">--- a/drivers/infiniband/ulp/srpt/ib_srpt.c</span>
<span class="p_header">+++ b/drivers/infiniband/ulp/srpt/ib_srpt.c</span>
<span class="p_chunk">@@ -281,7 +281,7 @@</span> <span class="p_context"> static void srpt_get_class_port_info(struct ib_dm_mad *mad)</span>
 	struct ib_class_port_info *cif;
 
 	cif = (struct ib_class_port_info *)mad-&gt;data;
<span class="p_del">-	memset(cif, 0, sizeof *cif);</span>
<span class="p_add">+	memset(cif, 0, sizeof(*cif));</span>
 	cif-&gt;base_version = 1;
 	cif-&gt;class_version = 1;
 	cif-&gt;resp_time_value = 20;
<span class="p_chunk">@@ -340,7 +340,7 @@</span> <span class="p_context"> static void srpt_get_ioc(struct srpt_port *sport, u32 slot,</span>
 		return;
 	}
 
<span class="p_del">-	memset(iocp, 0, sizeof *iocp);</span>
<span class="p_add">+	memset(iocp, 0, sizeof(*iocp));</span>
 	strcpy(iocp-&gt;id_string, SRPT_ID_STRING);
 	iocp-&gt;guid = cpu_to_be64(srpt_service_guid);
 	iocp-&gt;vendor_id = cpu_to_be32(sdev-&gt;device-&gt;attrs.vendor_id);
<span class="p_chunk">@@ -390,7 +390,7 @@</span> <span class="p_context"> static void srpt_get_svc_entries(u64 ioc_guid,</span>
 	}
 
 	svc_entries = (struct ib_dm_svc_entries *)mad-&gt;data;
<span class="p_del">-	memset(svc_entries, 0, sizeof *svc_entries);</span>
<span class="p_add">+	memset(svc_entries, 0, sizeof(*svc_entries));</span>
 	svc_entries-&gt;service_entries[0].id = cpu_to_be64(ioc_guid);
 	snprintf(svc_entries-&gt;service_entries[0].name,
 		 sizeof(svc_entries-&gt;service_entries[0].name),
<span class="p_chunk">@@ -484,7 +484,7 @@</span> <span class="p_context"> static void srpt_mad_recv_handler(struct ib_mad_agent *mad_agent,</span>
 	rsp-&gt;ah = ah;
 
 	dm_mad = rsp-&gt;mad;
<span class="p_del">-	memcpy(dm_mad, mad_wc-&gt;recv_buf.mad, sizeof *dm_mad);</span>
<span class="p_add">+	memcpy(dm_mad, mad_wc-&gt;recv_buf.mad, sizeof(*dm_mad));</span>
 	dm_mad-&gt;mad_hdr.method = IB_MGMT_METHOD_GET_RESP;
 	dm_mad-&gt;mad_hdr.status = 0;
 
<span class="p_chunk">@@ -532,7 +532,7 @@</span> <span class="p_context"> static int srpt_refresh_port(struct srpt_port *sport)</span>
 	struct ib_port_attr port_attr;
 	int ret;
 
<span class="p_del">-	memset(&amp;port_modify, 0, sizeof port_modify);</span>
<span class="p_add">+	memset(&amp;port_modify, 0, sizeof(port_modify));</span>
 	port_modify.set_port_cap_mask = IB_PORT_DEVICE_MGMT_SUP;
 	port_modify.clr_port_cap_mask = 0;
 
<span class="p_chunk">@@ -553,7 +553,7 @@</span> <span class="p_context"> static int srpt_refresh_port(struct srpt_port *sport)</span>
 		goto err_query_port;
 
 	if (!sport-&gt;mad_agent) {
<span class="p_del">-		memset(&amp;reg_req, 0, sizeof reg_req);</span>
<span class="p_add">+		memset(&amp;reg_req, 0, sizeof(reg_req));</span>
 		reg_req.mgmt_class = IB_MGMT_CLASS_DEVICE_MGMT;
 		reg_req.mgmt_class_version = IB_MGMT_BASE_VERSION;
 		set_bit(IB_MGMT_METHOD_GET, reg_req.method_mask);
<span class="p_chunk">@@ -903,14 +903,14 @@</span> <span class="p_context"> static int srpt_get_desc_tbl(struct srpt_send_ioctx *ioctx,</span>
 
 		db = (struct srp_direct_buf *)(srp_cmd-&gt;add_data
 					       + add_cdb_offset);
<span class="p_del">-		memcpy(ioctx-&gt;rbufs, db, sizeof *db);</span>
<span class="p_add">+		memcpy(ioctx-&gt;rbufs, db, sizeof(*db));</span>
 		*data_len = be32_to_cpu(db-&gt;len);
 	} else if (((srp_cmd-&gt;buf_fmt &amp; 0xf) == SRP_DATA_DESC_INDIRECT) ||
 		   ((srp_cmd-&gt;buf_fmt &gt;&gt; 4) == SRP_DATA_DESC_INDIRECT)) {
 		idb = (struct srp_indirect_buf *)(srp_cmd-&gt;add_data
 						  + add_cdb_offset);
 
<span class="p_del">-		ioctx-&gt;n_rbuf = be32_to_cpu(idb-&gt;table_desc.len) / sizeof *db;</span>
<span class="p_add">+		ioctx-&gt;n_rbuf = be32_to_cpu(idb-&gt;table_desc.len) / sizeof(*db);</span>
 
 		if (ioctx-&gt;n_rbuf &gt;
 		    (srp_cmd-&gt;data_out_desc_cnt + srp_cmd-&gt;data_in_desc_cnt)) {
<span class="p_chunk">@@ -929,7 +929,7 @@</span> <span class="p_context"> static int srpt_get_desc_tbl(struct srpt_send_ioctx *ioctx,</span>
 			ioctx-&gt;rbufs = &amp;ioctx-&gt;single_rbuf;
 		else {
 			ioctx-&gt;rbufs =
<span class="p_del">-				kmalloc(ioctx-&gt;n_rbuf * sizeof *db, GFP_ATOMIC);</span>
<span class="p_add">+				kmalloc(ioctx-&gt;n_rbuf * sizeof(*db), GFP_ATOMIC);</span>
 			if (!ioctx-&gt;rbufs) {
 				ioctx-&gt;n_rbuf = 0;
 				ret = -ENOMEM;
<span class="p_chunk">@@ -938,7 +938,7 @@</span> <span class="p_context"> static int srpt_get_desc_tbl(struct srpt_send_ioctx *ioctx,</span>
 		}
 
 		db = idb-&gt;desc_list;
<span class="p_del">-		memcpy(ioctx-&gt;rbufs, db, ioctx-&gt;n_rbuf * sizeof *db);</span>
<span class="p_add">+		memcpy(ioctx-&gt;rbufs, db, ioctx-&gt;n_rbuf * sizeof(*db));</span>
 		*data_len = be32_to_cpu(idb-&gt;len);
 	}
 out:
<span class="p_chunk">@@ -956,7 +956,7 @@</span> <span class="p_context"> static int srpt_init_ch_qp(struct srpt_rdma_ch *ch, struct ib_qp *qp)</span>
 	struct ib_qp_attr *attr;
 	int ret;
 
<span class="p_del">-	attr = kzalloc(sizeof *attr, GFP_KERNEL);</span>
<span class="p_add">+	attr = kzalloc(sizeof(*attr), GFP_KERNEL);</span>
 	if (!attr)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1464,7 +1464,7 @@</span> <span class="p_context"> static int srpt_build_cmd_rsp(struct srpt_rdma_ch *ch,</span>
 	sense_data_len = ioctx-&gt;cmd.scsi_sense_length;
 	WARN_ON(sense_data_len &gt; sizeof(ioctx-&gt;sense_data));
 
<span class="p_del">-	memset(srp_rsp, 0, sizeof *srp_rsp);</span>
<span class="p_add">+	memset(srp_rsp, 0, sizeof(*srp_rsp));</span>
 	srp_rsp-&gt;opcode = SRP_RSP;
 	srp_rsp-&gt;req_lim_delta =
 		cpu_to_be32(1 + atomic_xchg(&amp;ch-&gt;req_lim_delta, 0));
<span class="p_chunk">@@ -1514,7 +1514,7 @@</span> <span class="p_context"> static int srpt_build_tskmgmt_rsp(struct srpt_rdma_ch *ch,</span>
 
 	srp_rsp = ioctx-&gt;ioctx.buf;
 	BUG_ON(!srp_rsp);
<span class="p_del">-	memset(srp_rsp, 0, sizeof *srp_rsp);</span>
<span class="p_add">+	memset(srp_rsp, 0, sizeof(*srp_rsp));</span>
 
 	srp_rsp-&gt;opcode = SRP_RSP;
 	srp_rsp-&gt;req_lim_delta =
<span class="p_chunk">@@ -1950,7 +1950,7 @@</span> <span class="p_context"> static int srpt_create_ch_ib(struct srpt_rdma_ch *ch)</span>
 	WARN_ON(ch-&gt;rq_size &lt; 1);
 
 	ret = -ENOMEM;
<span class="p_del">-	qp_init = kzalloc(sizeof *qp_init, GFP_KERNEL);</span>
<span class="p_add">+	qp_init = kzalloc(sizeof(*qp_init), GFP_KERNEL);</span>
 	if (!qp_init)
 		goto out;
 
<span class="p_chunk">@@ -2266,9 +2266,9 @@</span> <span class="p_context"> static int srpt_cm_req_recv(struct ib_cm_id *cm_id,</span>
 		be64_to_cpu(*(__be64 *)&amp;sdev-&gt;port[param-&gt;port - 1].gid.raw[0]),
 		be64_to_cpu(*(__be64 *)&amp;sdev-&gt;port[param-&gt;port - 1].gid.raw[8]));
 
<span class="p_del">-	rsp = kzalloc(sizeof *rsp, GFP_KERNEL);</span>
<span class="p_del">-	rej = kzalloc(sizeof *rej, GFP_KERNEL);</span>
<span class="p_del">-	rep_param = kzalloc(sizeof *rep_param, GFP_KERNEL);</span>
<span class="p_add">+	rsp = kzalloc(sizeof(*rsp), GFP_KERNEL);</span>
<span class="p_add">+	rej = kzalloc(sizeof(*rej), GFP_KERNEL);</span>
<span class="p_add">+	rep_param = kzalloc(sizeof(*rep_param), GFP_KERNEL);</span>
 
 	if (!rsp || !rej || !rep_param) {
 		ret = -ENOMEM;
<span class="p_chunk">@@ -2340,7 +2340,7 @@</span> <span class="p_context"> static int srpt_cm_req_recv(struct ib_cm_id *cm_id,</span>
 		goto reject;
 	}
 
<span class="p_del">-	ch = kzalloc(sizeof *ch, GFP_KERNEL);</span>
<span class="p_add">+	ch = kzalloc(sizeof(*ch), GFP_KERNEL);</span>
 	if (!ch) {
 		rej-&gt;reason = cpu_to_be32(
 			      SRP_LOGIN_REJ_INSUFFICIENT_RESOURCES);
<span class="p_chunk">@@ -2453,7 +2453,7 @@</span> <span class="p_context"> static int srpt_cm_req_recv(struct ib_cm_id *cm_id,</span>
 	/* create cm reply */
 	rep_param-&gt;qp_num = ch-&gt;qp-&gt;qp_num;
 	rep_param-&gt;private_data = (void *)rsp;
<span class="p_del">-	rep_param-&gt;private_data_len = sizeof *rsp;</span>
<span class="p_add">+	rep_param-&gt;private_data_len = sizeof(*rsp);</span>
 	rep_param-&gt;rnr_retry_count = 7;
 	rep_param-&gt;flow_control = 1;
 	rep_param-&gt;failover_accepted = 0;
<span class="p_chunk">@@ -2497,7 +2497,7 @@</span> <span class="p_context"> static int srpt_cm_req_recv(struct ib_cm_id *cm_id,</span>
 				   | SRP_BUF_FORMAT_INDIRECT);
 
 	ib_send_cm_rej(cm_id, IB_CM_REJ_CONSUMER_DEFINED, NULL, 0,
<span class="p_del">-			     (void *)rej, sizeof *rej);</span>
<span class="p_add">+			     (void *)rej, sizeof(*rej));</span>
 
 out:
 	kfree(rep_param);
<span class="p_chunk">@@ -3003,7 +3003,7 @@</span> <span class="p_context"> static void srpt_add_one(struct ib_device *device)</span>
 	pr_debug(&quot;device = %p, device-&gt;dma_ops = %p\n&quot;, device,
 		 device-&gt;dma_ops);
 
<span class="p_del">-	sdev = kzalloc(sizeof *sdev, GFP_KERNEL);</span>
<span class="p_add">+	sdev = kzalloc(sizeof(*sdev), GFP_KERNEL);</span>
 	if (!sdev)
 		goto err;
 
<span class="p_header">diff --git a/drivers/input/keyboard/lm8323.c b/drivers/input/keyboard/lm8323.c</span>
<span class="p_header">index 21bea52d4365..bb1f3ed5134d 100644</span>
<span class="p_header">--- a/drivers/input/keyboard/lm8323.c</span>
<span class="p_header">+++ b/drivers/input/keyboard/lm8323.c</span>
<span class="p_chunk">@@ -655,7 +655,7 @@</span> <span class="p_context"> static int lm8323_probe(struct i2c_client *client,</span>
 		return -EINVAL;
 	}
 
<span class="p_del">-	lm = kzalloc(sizeof *lm, GFP_KERNEL);</span>
<span class="p_add">+	lm = kzalloc(sizeof(*lm), GFP_KERNEL);</span>
 	idev = input_allocate_device();
 	if (!lm || !idev) {
 		err = -ENOMEM;
<span class="p_header">diff --git a/drivers/input/misc/dm355evm_keys.c b/drivers/input/misc/dm355evm_keys.c</span>
<span class="p_header">index b6b7bd4e5462..a890dd6a8626 100644</span>
<span class="p_header">--- a/drivers/input/misc/dm355evm_keys.c</span>
<span class="p_header">+++ b/drivers/input/misc/dm355evm_keys.c</span>
<span class="p_chunk">@@ -179,7 +179,7 @@</span> <span class="p_context"> static int dm355evm_keys_probe(struct platform_device *pdev)</span>
 	int			status;
 
 	/* allocate instance struct and input dev */
<span class="p_del">-	keys = kzalloc(sizeof *keys, GFP_KERNEL);</span>
<span class="p_add">+	keys = kzalloc(sizeof(*keys), GFP_KERNEL);</span>
 	input = input_allocate_device();
 	if (!keys || !input) {
 		status = -ENOMEM;
<span class="p_header">diff --git a/drivers/input/touchscreen/ad7877.c b/drivers/input/touchscreen/ad7877.c</span>
<span class="p_header">index 9c250ae780d9..7e6e7760723e 100644</span>
<span class="p_header">--- a/drivers/input/touchscreen/ad7877.c</span>
<span class="p_header">+++ b/drivers/input/touchscreen/ad7877.c</span>
<span class="p_chunk">@@ -215,7 +215,7 @@</span> <span class="p_context"> static int ad7877_read(struct spi_device *spi, u16 reg)</span>
 	struct ser_req *req;
 	int status, ret;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -246,7 +246,7 @@</span> <span class="p_context"> static int ad7877_write(struct spi_device *spi, u16 reg, u16 val)</span>
 	struct ser_req *req;
 	int status;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -273,7 +273,7 @@</span> <span class="p_context"> static int ad7877_read_adc(struct spi_device *spi, unsigned command)</span>
 	int sample;
 	int i;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/input/touchscreen/ads7846.c b/drivers/input/touchscreen/ads7846.c</span>
<span class="p_header">index a61b2153ab8c..33fa0c7c21db 100644</span>
<span class="p_header">--- a/drivers/input/touchscreen/ads7846.c</span>
<span class="p_header">+++ b/drivers/input/touchscreen/ads7846.c</span>
<span class="p_chunk">@@ -316,7 +316,7 @@</span> <span class="p_context"> static int ads7846_read12_ser(struct device *dev, unsigned command)</span>
 	struct ser_req *req;
 	int status;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -390,7 +390,7 @@</span> <span class="p_context"> static int ads7845_read12_ser(struct device *dev, unsigned command)</span>
 	struct ads7845_ser_req *req;
 	int status;
 
<span class="p_del">-	req = kzalloc(sizeof *req, GFP_KERNEL);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), GFP_KERNEL);</span>
 	if (!req)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/isdn/gigaset/bas-gigaset.c b/drivers/isdn/gigaset/bas-gigaset.c</span>
<span class="p_header">index aecec6d32463..b9f4120f84aa 100644</span>
<span class="p_header">--- a/drivers/isdn/gigaset/bas-gigaset.c</span>
<span class="p_header">+++ b/drivers/isdn/gigaset/bas-gigaset.c</span>
<span class="p_chunk">@@ -2200,7 +2200,7 @@</span> <span class="p_context"> static int gigaset_initcshw(struct cardstate *cs)</span>
 {
 	struct bas_cardstate *ucs;
 
<span class="p_del">-	cs-&gt;hw.bas = ucs = kmalloc(sizeof *ucs, GFP_KERNEL);</span>
<span class="p_add">+	cs-&gt;hw.bas = ucs = kmalloc(sizeof(*ucs), GFP_KERNEL);</span>
 	if (!ucs) {
 		pr_err(&quot;out of memory\n&quot;);
 		return -ENOMEM;
<span class="p_header">diff --git a/drivers/isdn/gigaset/capi.c b/drivers/isdn/gigaset/capi.c</span>
<span class="p_header">index ccec7778cad2..bf9678697cbd 100644</span>
<span class="p_header">--- a/drivers/isdn/gigaset/capi.c</span>
<span class="p_header">+++ b/drivers/isdn/gigaset/capi.c</span>
<span class="p_chunk">@@ -1370,7 +1370,7 @@</span> <span class="p_context"> static void do_connect_req(struct gigaset_capi_ctr *iif,</span>
 	cmsg-&gt;adr.adrPLCI |= (bcs-&gt;channel + 1) &lt;&lt; 8;
 
 	/* build command table */
<span class="p_del">-	commands = kzalloc(AT_NUM * (sizeof *commands), GFP_KERNEL);</span>
<span class="p_add">+	commands = kzalloc(AT_NUM * (sizeof(*commands)), GFP_KERNEL);</span>
 	if (!commands)
 		goto oom;
 
<span class="p_header">diff --git a/drivers/isdn/gigaset/common.c b/drivers/isdn/gigaset/common.c</span>
<span class="p_header">index 7c7814497e3e..c3b25307fec9 100644</span>
<span class="p_header">--- a/drivers/isdn/gigaset/common.c</span>
<span class="p_header">+++ b/drivers/isdn/gigaset/common.c</span>
<span class="p_chunk">@@ -53,7 +53,7 @@</span> <span class="p_context"> void gigaset_dbg_buffer(enum debuglevel level, const unsigned char *msg,</span>
 {
 	unsigned char outbuf[80];
 	unsigned char c;
<span class="p_del">-	size_t space = sizeof outbuf - 1;</span>
<span class="p_add">+	size_t space = sizeof(outbuf) - 1;</span>
 	unsigned char *out = outbuf;
 	size_t numin = len;
 
<span class="p_chunk">@@ -1077,7 +1077,7 @@</span> <span class="p_context"> struct gigaset_driver *gigaset_initdriver(unsigned minor, unsigned minors,</span>
 	unsigned long flags;
 	unsigned i;
 
<span class="p_del">-	drv = kmalloc(sizeof *drv, GFP_KERNEL);</span>
<span class="p_add">+	drv = kmalloc(sizeof(*drv), GFP_KERNEL);</span>
 	if (!drv)
 		return NULL;
 
<span class="p_chunk">@@ -1090,7 +1090,7 @@</span> <span class="p_context"> struct gigaset_driver *gigaset_initdriver(unsigned minor, unsigned minors,</span>
 	drv-&gt;owner = owner;
 	INIT_LIST_HEAD(&amp;drv-&gt;list);
 
<span class="p_del">-	drv-&gt;cs = kmalloc(minors * sizeof *drv-&gt;cs, GFP_KERNEL);</span>
<span class="p_add">+	drv-&gt;cs = kmalloc(minors * sizeof(*drv-&gt;cs), GFP_KERNEL);</span>
 	if (!drv-&gt;cs)
 		goto error;
 
<span class="p_header">diff --git a/drivers/isdn/gigaset/ev-layer.c b/drivers/isdn/gigaset/ev-layer.c</span>
<span class="p_header">index 1cfcea62aed9..c6a59ff091b4 100644</span>
<span class="p_header">--- a/drivers/isdn/gigaset/ev-layer.c</span>
<span class="p_header">+++ b/drivers/isdn/gigaset/ev-layer.c</span>
<span class="p_chunk">@@ -1472,7 +1472,7 @@</span> <span class="p_context"> static void do_action(int action, struct cardstate *cs,</span>
 		else if (cs-&gt;gotfwver != 1) {
 			cs-&gt;cmd_result = -ENOENT;
 		} else {
<span class="p_del">-			memcpy(ev-&gt;arg, cs-&gt;fwver, sizeof cs-&gt;fwver);</span>
<span class="p_add">+			memcpy(ev-&gt;arg, cs-&gt;fwver, sizeof(cs-&gt;fwver));</span>
 			cs-&gt;cmd_result = 0;
 		}
 		cs-&gt;waiting = 0;
<span class="p_header">diff --git a/drivers/isdn/gigaset/i4l.c b/drivers/isdn/gigaset/i4l.c</span>
<span class="p_header">index 2d75329007f1..c51642cd4460 100644</span>
<span class="p_header">--- a/drivers/isdn/gigaset/i4l.c</span>
<span class="p_header">+++ b/drivers/isdn/gigaset/i4l.c</span>
<span class="p_chunk">@@ -243,7 +243,7 @@</span> <span class="p_context"> static int command_from_LL(isdn_ctrl *cntrl)</span>
 		dev_kfree_skb(bcs-&gt;rx_skb);
 		gigaset_new_rx_skb(bcs);
 
<span class="p_del">-		commands = kzalloc(AT_NUM * (sizeof *commands), GFP_ATOMIC);</span>
<span class="p_add">+		commands = kzalloc(AT_NUM * (sizeof(*commands)), GFP_ATOMIC);</span>
 		if (!commands) {
 			gigaset_free_channel(bcs);
 			dev_err(cs-&gt;dev, &quot;ISDN_CMD_DIAL: out of memory\n&quot;);
<span class="p_chunk">@@ -487,12 +487,12 @@</span> <span class="p_context"> int gigaset_isdn_icall(struct at_state_t *at_state)</span>
 	}
 	if (at_state-&gt;str_var[STR_NMBR]) {
 		strlcpy(response.parm.setup.phone, at_state-&gt;str_var[STR_NMBR],
<span class="p_del">-			sizeof response.parm.setup.phone);</span>
<span class="p_add">+			sizeof(response.parm.setup.phone));</span>
 	} else
 		response.parm.setup.phone[0] = 0;
 	if (at_state-&gt;str_var[STR_ZCPN]) {
 		strlcpy(response.parm.setup.eazmsn, at_state-&gt;str_var[STR_ZCPN],
<span class="p_del">-			sizeof response.parm.setup.eazmsn);</span>
<span class="p_add">+			sizeof(response.parm.setup.eazmsn));</span>
 	} else
 		response.parm.setup.eazmsn[0] = 0;
 
<span class="p_chunk">@@ -624,14 +624,14 @@</span> <span class="p_context"> int gigaset_isdn_regdev(struct cardstate *cs, const char *isdnid)</span>
 {
 	isdn_if *iif;
 
<span class="p_del">-	iif = kmalloc(sizeof *iif, GFP_KERNEL);</span>
<span class="p_add">+	iif = kmalloc(sizeof(*iif), GFP_KERNEL);</span>
 	if (!iif) {
 		pr_err(&quot;out of memory\n&quot;);
 		return -ENOMEM;
 	}
 
<span class="p_del">-	if (snprintf(iif-&gt;id, sizeof iif-&gt;id, &quot;%s_%u&quot;, isdnid, cs-&gt;minor_index)</span>
<span class="p_del">-	    &gt;= sizeof iif-&gt;id) {</span>
<span class="p_add">+	if (snprintf(iif-&gt;id, sizeof(iif-&gt;id), &quot;%s_%u&quot;, isdnid, cs-&gt;minor_index)</span>
<span class="p_add">+	    &gt;= sizeof(iif-&gt;id)) {</span>
 		pr_err(&quot;ID too long: %s\n&quot;, isdnid);
 		kfree(iif);
 		return -EINVAL;
<span class="p_header">diff --git a/drivers/isdn/gigaset/interface.c b/drivers/isdn/gigaset/interface.c</span>
<span class="p_header">index 600c79b030cd..0b10a0d0e30a 100644</span>
<span class="p_header">--- a/drivers/isdn/gigaset/interface.c</span>
<span class="p_header">+++ b/drivers/isdn/gigaset/interface.c</span>
<span class="p_chunk">@@ -67,10 +67,10 @@</span> <span class="p_context"> static int if_version(struct cardstate *cs, unsigned arg[4])</span>
 
 	switch (cmd) {
 	case GIGVER_DRIVER:
<span class="p_del">-		memcpy(arg, version, sizeof version);</span>
<span class="p_add">+		memcpy(arg, version, sizeof(version));</span>
 		return 0;
 	case GIGVER_COMPAT:
<span class="p_del">-		memcpy(arg, compat, sizeof compat);</span>
<span class="p_add">+		memcpy(arg, compat, sizeof(compat));</span>
 		return 0;
 	case GIGVER_FWBASE:
 		cs-&gt;waiting = 1;
<span class="p_chunk">@@ -212,13 +212,13 @@</span> <span class="p_context"> static int if_ioctl(struct tty_struct *tty,</span>
 			break;
 		case GIGASET_VERSION:
 			retval = copy_from_user(version,
<span class="p_del">-						(unsigned __user *) arg, sizeof version)</span>
<span class="p_add">+						(unsigned __user *) arg, sizeof(version))</span>
 				? -EFAULT : 0;
 			if (retval &gt;= 0)
 				retval = if_version(cs, version);
 			if (retval &gt;= 0)
 				retval = copy_to_user((unsigned __user *) arg,
<span class="p_del">-						      version, sizeof version)</span>
<span class="p_add">+						      version, sizeof(version))</span>
 					? -EFAULT : 0;
 			break;
 		default:
<span class="p_header">diff --git a/drivers/isdn/i4l/isdn_tty.c b/drivers/isdn/i4l/isdn_tty.c</span>
<span class="p_header">index 2175225af742..7678e414a08e 100644</span>
<span class="p_header">--- a/drivers/isdn/i4l/isdn_tty.c</span>
<span class="p_header">+++ b/drivers/isdn/i4l/isdn_tty.c</span>
<span class="p_chunk">@@ -3427,7 +3427,7 @@</span> <span class="p_context"> isdn_tty_parse_at(modem_info *info)</span>
 				isdn_tty_modem_result(RESULT_NO_CARRIER, info);
 				return;
 			}
<span class="p_del">-			isdn_tty_getdial(++p, ds, sizeof ds);</span>
<span class="p_add">+			isdn_tty_getdial(++p, ds, sizeof(ds));</span>
 			p += strlen(p);
 			if (!strlen(m-&gt;msn))
 				isdn_tty_modem_result(RESULT_NO_MSN_EAZ, info);
<span class="p_header">diff --git a/drivers/md/dm-bufio.c b/drivers/md/dm-bufio.c</span>
<span class="p_header">index cd77216beff1..f3467958f282 100644</span>
<span class="p_header">--- a/drivers/md/dm-bufio.c</span>
<span class="p_header">+++ b/drivers/md/dm-bufio.c</span>
<span class="p_chunk">@@ -1852,8 +1852,8 @@</span> <span class="p_context"> static int __init dm_bufio_init(void)</span>
 	dm_bufio_allocated_vmalloc = 0;
 	dm_bufio_current_allocated = 0;
 
<span class="p_del">-	memset(&amp;dm_bufio_caches, 0, sizeof dm_bufio_caches);</span>
<span class="p_del">-	memset(&amp;dm_bufio_cache_names, 0, sizeof dm_bufio_cache_names);</span>
<span class="p_add">+	memset(&amp;dm_bufio_caches, 0, sizeof(dm_bufio_caches));</span>
<span class="p_add">+	memset(&amp;dm_bufio_cache_names, 0, sizeof(dm_bufio_cache_names));</span>
 
 	mem = (__u64)((totalram_pages - totalhigh_pages) *
 		      DM_BUFIO_MEMORY_PERCENT / 100) &lt;&lt; PAGE_SHIFT;
<span class="p_header">diff --git a/drivers/md/dm-kcopyd.c b/drivers/md/dm-kcopyd.c</span>
<span class="p_header">index 1452ed9aacb4..93d49354ce72 100644</span>
<span class="p_header">--- a/drivers/md/dm-kcopyd.c</span>
<span class="p_header">+++ b/drivers/md/dm-kcopyd.c</span>
<span class="p_chunk">@@ -727,7 +727,7 @@</span> <span class="p_context"> int dm_kcopyd_copy(struct dm_kcopyd_client *kc, struct dm_io_region *from,</span>
 		job-&gt;pages = NULL;
 		job-&gt;rw = READ;
 	} else {
<span class="p_del">-		memset(&amp;job-&gt;source, 0, sizeof job-&gt;source);</span>
<span class="p_add">+		memset(&amp;job-&gt;source, 0, sizeof(job-&gt;source));</span>
 		job-&gt;source.count = job-&gt;dests[0].count;
 		job-&gt;pages = &amp;zero_page_list;
 
<span class="p_header">diff --git a/drivers/media/dvb-core/dvb_net.c b/drivers/media/dvb-core/dvb_net.c</span>
<span class="p_header">index ce6a711b42d4..8f535e7ee2a1 100644</span>
<span class="p_header">--- a/drivers/media/dvb-core/dvb_net.c</span>
<span class="p_header">+++ b/drivers/media/dvb-core/dvb_net.c</span>
<span class="p_chunk">@@ -577,8 +577,8 @@</span> <span class="p_context"> static void dvb_net_ule( struct net_device *dev, const u8 *buf, size_t buf_len )</span>
 			__be16 utype = htons(priv-&gt;ule_sndu_type);
 			const u8 *tail;
 			struct kvec iov[3] = {
<span class="p_del">-				{ &amp;ulen, sizeof ulen },</span>
<span class="p_del">-				{ &amp;utype, sizeof utype },</span>
<span class="p_add">+				{ &amp;ulen, sizeof(ulen) },</span>
<span class="p_add">+				{ &amp;utype, sizeof(utype) },</span>
 				{ priv-&gt;ule_skb-&gt;data, priv-&gt;ule_skb-&gt;len - 4 }
 			};
 			u32 ule_crc = ~0L, expected_crc;
<span class="p_header">diff --git a/drivers/media/i2c/tvp5150.c b/drivers/media/i2c/tvp5150.c</span>
<span class="p_header">index 6c3769d44b75..799bf8545e13 100644</span>
<span class="p_header">--- a/drivers/media/i2c/tvp5150.c</span>
<span class="p_header">+++ b/drivers/media/i2c/tvp5150.c</span>
<span class="p_chunk">@@ -593,7 +593,7 @@</span> <span class="p_context"> static int tvp5150_g_sliced_vbi_cap(struct v4l2_subdev *sd,</span>
 	int line;
 
 	v4l2_dbg(1, debug, sd, &quot;g_sliced_vbi_cap\n&quot;);
<span class="p_del">-	memset(cap, 0, sizeof *cap);</span>
<span class="p_add">+	memset(cap, 0, sizeof(*cap));</span>
 
 	while (regs-&gt;reg != (u16)-1 ) {
 		for (line=regs-&gt;type.ini_line;line&lt;=regs-&gt;type.end_line;line++) {
<span class="p_header">diff --git a/drivers/media/pci/ngene/ngene-dvb.c b/drivers/media/pci/ngene/ngene-dvb.c</span>
<span class="p_header">index 59bb2858c8d0..7ce12f15bd55 100644</span>
<span class="p_header">--- a/drivers/media/pci/ngene/ngene-dvb.c</span>
<span class="p_header">+++ b/drivers/media/pci/ngene/ngene-dvb.c</span>
<span class="p_chunk">@@ -138,7 +138,7 @@</span> <span class="p_context"> void *tsin_exchange(void *priv, void *buf, u32 len, u32 clock, u32 flags)</span>
 
 	if (dev-&gt;ci.en &amp;&amp; chan-&gt;number == 2) {
 		while (len &gt;= 188) {
<span class="p_del">-			if (memcmp(buf, fill_ts, sizeof fill_ts) != 0) {</span>
<span class="p_add">+			if (memcmp(buf, fill_ts, sizeof(fill_ts)) != 0) {</span>
 				if (dvb_ringbuffer_free(&amp;dev-&gt;tsin_rbuf) &gt;= 188) {
 					dvb_ringbuffer_write(&amp;dev-&gt;tsin_rbuf, buf, 188);
 					wake_up(&amp;dev-&gt;tsin_rbuf.queue);
<span class="p_header">diff --git a/drivers/media/pci/saa7134/saa7134-video.c b/drivers/media/pci/saa7134/saa7134-video.c</span>
<span class="p_header">index a63c1366a64e..063e348187f5 100644</span>
<span class="p_header">--- a/drivers/media/pci/saa7134/saa7134-video.c</span>
<span class="p_header">+++ b/drivers/media/pci/saa7134/saa7134-video.c</span>
<span class="p_chunk">@@ -673,8 +673,8 @@</span> <span class="p_context"> static int setup_clipping(struct saa7134_dev *dev, struct v4l2_clip *clips,</span>
 		row[rows].disable  = (1 &lt;&lt; i);
 		rows++;
 	}
<span class="p_del">-	sort(col, cols, sizeof col[0], cliplist_cmp, NULL);</span>
<span class="p_del">-	sort(row, rows, sizeof row[0], cliplist_cmp, NULL);</span>
<span class="p_add">+	sort(col, cols, sizeof(col[0]), cliplist_cmp, NULL);</span>
<span class="p_add">+	sort(row, rows, sizeof(row[0]), cliplist_cmp, NULL);</span>
 	set_cliplist(dev,0x380,col,cols,&quot;cols&quot;);
 	set_cliplist(dev,0x384,row,rows,&quot;rows&quot;);
 	return 0;
<span class="p_header">diff --git a/drivers/media/pci/ttpci/av7110_ir.c b/drivers/media/pci/ttpci/av7110_ir.c</span>
<span class="p_header">index 0e763a784e2b..842d2a92bf30 100644</span>
<span class="p_header">--- a/drivers/media/pci/ttpci/av7110_ir.c</span>
<span class="p_header">+++ b/drivers/media/pci/ttpci/av7110_ir.c</span>
<span class="p_chunk">@@ -273,7 +273,7 @@</span> <span class="p_context"> static ssize_t av7110_ir_proc_write(struct file *file, const char __user *buffer</span>
 {
 	char *page;
 	u32 ir_config;
<span class="p_del">-	int size = sizeof ir_config + sizeof av_list[0]-&gt;ir.key_map;</span>
<span class="p_add">+	int size = sizeof(ir_config) + sizeof(av_list[0]-&gt;ir.key_map);</span>
 	int i;
 
 	if (count &lt; size)
<span class="p_chunk">@@ -288,11 +288,11 @@</span> <span class="p_context"> static ssize_t av7110_ir_proc_write(struct file *file, const char __user *buffer</span>
 		return -EFAULT;
 	}
 
<span class="p_del">-	memcpy(&amp;ir_config, page, sizeof ir_config);</span>
<span class="p_add">+	memcpy(&amp;ir_config, page, sizeof(ir_config));</span>
 
 	for (i = 0; i &lt; av_cnt; i++) {
 		/* keymap */
<span class="p_del">-		memcpy(av_list[i]-&gt;ir.key_map, page + sizeof ir_config,</span>
<span class="p_add">+		memcpy(av_list[i]-&gt;ir.key_map, page + sizeof(ir_config),</span>
 			sizeof(av_list[i]-&gt;ir.key_map));
 		/* protocol, inversion, address */
 		ir_protocol[i] = ir_config &amp; 0x0001;
<span class="p_chunk">@@ -362,7 +362,7 @@</span> <span class="p_context"> int av7110_ir_init(struct av7110 *av7110)</span>
 	}
 	input_dev-&gt;dev.parent = &amp;av7110-&gt;dev-&gt;pci-&gt;dev;
 	/* initial keymap */
<span class="p_del">-	memcpy(av7110-&gt;ir.key_map, default_key_map, sizeof av7110-&gt;ir.key_map);</span>
<span class="p_add">+	memcpy(av7110-&gt;ir.key_map, default_key_map, sizeof(av7110-&gt;ir.key_map));</span>
 	input_register_keys(&amp;av7110-&gt;ir);
 	err = input_register_device(input_dev);
 	if (err) {
<span class="p_header">diff --git a/drivers/media/pci/ttpci/av7110_v4l.c b/drivers/media/pci/ttpci/av7110_v4l.c</span>
<span class="p_header">index 479aff02db81..cd1ff925518f 100644</span>
<span class="p_header">--- a/drivers/media/pci/ttpci/av7110_v4l.c</span>
<span class="p_header">+++ b/drivers/media/pci/ttpci/av7110_v4l.c</span>
<span class="p_chunk">@@ -562,7 +562,7 @@</span> <span class="p_context"> static int vidioc_g_fmt_sliced_vbi_out(struct file *file, void *fh,</span>
 	dprintk(2, &quot;VIDIOC_G_FMT:\n&quot;);
 	if (FW_VERSION(av7110-&gt;arm_app) &lt; 0x2623)
 		return -EINVAL;
<span class="p_del">-	memset(&amp;f-&gt;fmt.sliced, 0, sizeof f-&gt;fmt.sliced);</span>
<span class="p_add">+	memset(&amp;f-&gt;fmt.sliced, 0, sizeof(f-&gt;fmt.sliced));</span>
 	if (av7110-&gt;wssMode) {
 		f-&gt;fmt.sliced.service_set = V4L2_SLICED_WSS_625;
 		f-&gt;fmt.sliced.service_lines[0][23] = V4L2_SLICED_WSS_625;
<span class="p_chunk">@@ -624,7 +624,7 @@</span> <span class="p_context"> static ssize_t av7110_vbi_write(struct file *file, const char __user *data, size</span>
 	int rc;
 
 	dprintk(2, &quot;%s\n&quot;, __func__);
<span class="p_del">-	if (FW_VERSION(av7110-&gt;arm_app) &lt; 0x2623 || !av7110-&gt;wssMode || count != sizeof d)</span>
<span class="p_add">+	if (FW_VERSION(av7110-&gt;arm_app) &lt; 0x2623 || !av7110-&gt;wssMode || count != sizeof(d))</span>
 		return -EINVAL;
 	if (copy_from_user(&amp;d, data, count))
 		return -EFAULT;
<span class="p_header">diff --git a/drivers/media/platform/m2m-deinterlace.c b/drivers/media/platform/m2m-deinterlace.c</span>
<span class="p_header">index 7383818c2be6..c5ed8938b8e3 100644</span>
<span class="p_header">--- a/drivers/media/platform/m2m-deinterlace.c</span>
<span class="p_header">+++ b/drivers/media/platform/m2m-deinterlace.c</span>
<span class="p_chunk">@@ -908,7 +908,7 @@</span> <span class="p_context"> static int deinterlace_open(struct file *file)</span>
 	struct deinterlace_dev *pcdev = video_drvdata(file);
 	struct deinterlace_ctx *ctx = NULL;
 
<span class="p_del">-	ctx = kzalloc(sizeof *ctx, GFP_KERNEL);</span>
<span class="p_add">+	ctx = kzalloc(sizeof(*ctx), GFP_KERNEL);</span>
 	if (!ctx)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/media/platform/mx2_emmaprp.c b/drivers/media/platform/mx2_emmaprp.c</span>
<span class="p_header">index 3c4012d42d69..43661330afb9 100644</span>
<span class="p_header">--- a/drivers/media/platform/mx2_emmaprp.c</span>
<span class="p_header">+++ b/drivers/media/platform/mx2_emmaprp.c</span>
<span class="p_chunk">@@ -789,7 +789,7 @@</span> <span class="p_context"> static int emmaprp_open(struct file *file)</span>
 	struct emmaprp_dev *pcdev = video_drvdata(file);
 	struct emmaprp_ctx *ctx;
 
<span class="p_del">-	ctx = kzalloc(sizeof *ctx, GFP_KERNEL);</span>
<span class="p_add">+	ctx = kzalloc(sizeof(*ctx), GFP_KERNEL);</span>
 	if (!ctx)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/media/rc/ir-rc6-decoder.c b/drivers/media/rc/ir-rc6-decoder.c</span>
<span class="p_header">index e0e2edefa651..15b806f43f97 100644</span>
<span class="p_header">--- a/drivers/media/rc/ir-rc6-decoder.c</span>
<span class="p_header">+++ b/drivers/media/rc/ir-rc6-decoder.c</span>
<span class="p_chunk">@@ -195,7 +195,7 @@</span> <span class="p_context"> static int ir_rc6_decode(struct rc_dev *dev, struct ir_raw_event ev)</span>
 	case STATE_BODY_BIT_START:
 		if (eq_margin(ev.duration, RC6_BIT_START, RC6_UNIT / 2)) {
 			/* Discard LSB&#39;s that won&#39;t fit in data-&gt;body */
<span class="p_del">-			if (data-&gt;count++ &lt; CHAR_BIT * sizeof data-&gt;body) {</span>
<span class="p_add">+			if (data-&gt;count++ &lt; CHAR_BIT * sizeof(data-&gt;body)) {</span>
 				data-&gt;body &lt;&lt;= 1;
 				if (ev.pulse)
 					data-&gt;body |= 1;
<span class="p_chunk">@@ -235,7 +235,7 @@</span> <span class="p_context"> static int ir_rc6_decode(struct rc_dev *dev, struct ir_raw_event ev)</span>
 			break;
 
 		case RC6_MODE_6A:
<span class="p_del">-			if (data-&gt;count &gt; CHAR_BIT * sizeof data-&gt;body) {</span>
<span class="p_add">+			if (data-&gt;count &gt; CHAR_BIT * sizeof(data-&gt;body)) {</span>
 				IR_dprintk(1, &quot;RC6 too many (%u) data bits\n&quot;,
 					data-&gt;count);
 				goto out;
<span class="p_header">diff --git a/drivers/media/usb/gspca/etoms.c b/drivers/media/usb/gspca/etoms.c</span>
<span class="p_header">index 26c9ee1f1045..8e7b06093f62 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/etoms.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/etoms.c</span>
<span class="p_chunk">@@ -418,7 +418,7 @@</span> <span class="p_context"> static void setcolors(struct gspca_dev *gspca_dev, s32 val)</span>
 	/* I2cc[1] = I2cc[2] = green; */
 	if (sd-&gt;sensor == SENSOR_PAS106) {
 		i2c_w(gspca_dev, PAS106_REG13, &amp;i2cflags, 1, 3);
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG9, I2cc, sizeof I2cc, 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG9, I2cc, sizeof(I2cc), 1);</span>
 	}
 /*	PDEBUG(D_CONF , &quot;Etoms red %d blue %d green %d&quot;,
 		I2cc[3], I2cc[0], green); */
<span class="p_chunk">@@ -511,22 +511,22 @@</span> <span class="p_context"> static void Et_init1(struct gspca_dev *gspca_dev)</span>
 	/* set the sensor */
 	if (gspca_dev-&gt;cam.cam_mode[(int) gspca_dev-&gt;curr_mode].priv) {
 		I2c0[0] = 0x06;
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG2, I2c0, sizeof I2c0, 1);</span>
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG9, I2c2, sizeof I2c2, 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG2, I2c0, sizeof(I2c0), 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG9, I2c2, sizeof(I2c2), 1);</span>
 		value = 0x06;
 		i2c_w(gspca_dev, PAS106_REG2, &amp;value, 1, 1);
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG3, I2c3, sizeof I2c3, 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG3, I2c3, sizeof(I2c3), 1);</span>
 		/* value = 0x1f; */
 		value = 0x04;
 		i2c_w(gspca_dev, PAS106_REG0e, &amp;value, 1, 1);
 	} else {
 		I2c0[0] = 0x0a;
 
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG2, I2c0, sizeof I2c0, 1);</span>
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG9, I2c2, sizeof I2c2, 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG2, I2c0, sizeof(I2c0), 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG9, I2c2, sizeof(I2c2), 1);</span>
 		value = 0x0a;
 		i2c_w(gspca_dev, PAS106_REG2, &amp;value, 1, 1);
<span class="p_del">-		i2c_w(gspca_dev, PAS106_REG3, I2c3, sizeof I2c3, 1);</span>
<span class="p_add">+		i2c_w(gspca_dev, PAS106_REG3, I2c3, sizeof(I2c3), 1);</span>
 		value = 0x04;
 		/* value = 0x10; */
 		i2c_w(gspca_dev, PAS106_REG0e, &amp;value, 1, 1);
<span class="p_chunk">@@ -540,7 +540,7 @@</span> <span class="p_context"> static void Et_init1(struct gspca_dev *gspca_dev)</span>
 /*	value = 0x22; */
 /*	i2c_w(gspca_dev, PAS106_REG5, &amp;value, 1, 1); */
 	/* magnetude and sign bit for DAC */
<span class="p_del">-	i2c_w(gspca_dev, PAS106_REG7, I2c4, sizeof I2c4, 1);</span>
<span class="p_add">+	i2c_w(gspca_dev, PAS106_REG7, I2c4, sizeof(I2c4), 1);</span>
 	/* now set by fifo the whole colors setting */
 	reg_w(gspca_dev, ET_G_RED, GainRGBG, 6);
 	setcolors(gspca_dev, getcolors(gspca_dev));
<span class="p_header">diff --git a/drivers/media/usb/gspca/gspca.c b/drivers/media/usb/gspca/gspca.c</span>
<span class="p_header">index af5cd8213e8b..4889f9db5357 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/gspca.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/gspca.c</span>
<span class="p_chunk">@@ -1321,12 +1321,12 @@</span> <span class="p_context"> static int vidioc_querycap(struct file *file, void  *priv,</span>
 	struct gspca_dev *gspca_dev = video_drvdata(file);
 
 	strlcpy((char *) cap-&gt;driver, gspca_dev-&gt;sd_desc-&gt;name,
<span class="p_del">-			sizeof cap-&gt;driver);</span>
<span class="p_add">+			sizeof(cap-&gt;driver));</span>
 	if (gspca_dev-&gt;dev-&gt;product != NULL) {
 		strlcpy((char *) cap-&gt;card, gspca_dev-&gt;dev-&gt;product,
<span class="p_del">-			sizeof cap-&gt;card);</span>
<span class="p_add">+			sizeof(cap-&gt;card));</span>
 	} else {
<span class="p_del">-		snprintf((char *) cap-&gt;card, sizeof cap-&gt;card,</span>
<span class="p_add">+		snprintf((char *) cap-&gt;card, sizeof(cap-&gt;card),</span>
 			&quot;USB Camera (%04x:%04x)&quot;,
 			le16_to_cpu(gspca_dev-&gt;dev-&gt;descriptor.idVendor),
 			le16_to_cpu(gspca_dev-&gt;dev-&gt;descriptor.idProduct));
<span class="p_chunk">@@ -1350,7 +1350,7 @@</span> <span class="p_context"> static int vidioc_enum_input(struct file *file, void *priv,</span>
 	input-&gt;type = V4L2_INPUT_TYPE_CAMERA;
 	input-&gt;status = gspca_dev-&gt;cam.input_flags;
 	strlcpy(input-&gt;name, gspca_dev-&gt;sd_desc-&gt;name,
<span class="p_del">-		sizeof input-&gt;name);</span>
<span class="p_add">+		sizeof(input-&gt;name));</span>
 	return 0;
 }
 
<span class="p_chunk">@@ -1445,7 +1445,7 @@</span> <span class="p_context"> static int vidioc_querybuf(struct file *file, void *priv,</span>
 		return -EINVAL;
 
 	frame = &amp;gspca_dev-&gt;frame[v4l2_buf-&gt;index];
<span class="p_del">-	memcpy(v4l2_buf, &amp;frame-&gt;v4l2_buf, sizeof *v4l2_buf);</span>
<span class="p_add">+	memcpy(v4l2_buf, &amp;frame-&gt;v4l2_buf, sizeof(*v4l2_buf));</span>
 	return 0;
 }
 
<span class="p_chunk">@@ -1721,7 +1721,7 @@</span> <span class="p_context"> static int vidioc_dqbuf(struct file *file, void *priv,</span>
 	gspca_dev-&gt;fr_o = (i + 1) % GSPCA_MAX_FRAMES;
 
 	frame-&gt;v4l2_buf.flags &amp;= ~V4L2_BUF_FLAG_DONE;
<span class="p_del">-	memcpy(v4l2_buf, &amp;frame-&gt;v4l2_buf, sizeof *v4l2_buf);</span>
<span class="p_add">+	memcpy(v4l2_buf, &amp;frame-&gt;v4l2_buf, sizeof(*v4l2_buf));</span>
 	PDEBUG(D_FRAM, &quot;dqbuf %d&quot;, j);
 	ret = 0;
 
<span class="p_chunk">@@ -1822,7 +1822,7 @@</span> <span class="p_context"> static int read_alloc(struct gspca_dev *gspca_dev,</span>
 	if (gspca_dev-&gt;nframes == 0) {
 		struct v4l2_requestbuffers rb;
 
<span class="p_del">-		memset(&amp;rb, 0, sizeof rb);</span>
<span class="p_add">+		memset(&amp;rb, 0, sizeof(rb));</span>
 		rb.count = gspca_dev-&gt;nbufread;
 		rb.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
 		rb.memory = GSPCA_MEMORY_READ;
<span class="p_chunk">@@ -1831,7 +1831,7 @@</span> <span class="p_context"> static int read_alloc(struct gspca_dev *gspca_dev,</span>
 			PDEBUG(D_STREAM, &quot;read reqbuf err %d&quot;, ret);
 			goto out;
 		}
<span class="p_del">-		memset(&amp;v4l2_buf, 0, sizeof v4l2_buf);</span>
<span class="p_add">+		memset(&amp;v4l2_buf, 0, sizeof(v4l2_buf));</span>
 		v4l2_buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
 		v4l2_buf.memory = GSPCA_MEMORY_READ;
 		for (i = 0; i &lt; gspca_dev-&gt;nbufread; i++) {
<span class="p_chunk">@@ -1913,7 +1913,7 @@</span> <span class="p_context"> static ssize_t dev_read(struct file *file, char __user *data,</span>
 	timestamp.tv_sec--;
 	n = 2;
 	for (;;) {
<span class="p_del">-		memset(&amp;v4l2_buf, 0, sizeof v4l2_buf);</span>
<span class="p_add">+		memset(&amp;v4l2_buf, 0, sizeof(v4l2_buf));</span>
 		v4l2_buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
 		v4l2_buf.memory = GSPCA_MEMORY_READ;
 		ret = vidioc_dqbuf(file, gspca_dev, &amp;v4l2_buf);
<span class="p_chunk">@@ -2021,8 +2021,8 @@</span> <span class="p_context"> int gspca_dev_probe2(struct usb_interface *intf,</span>
 		sd_desc-&gt;name, id-&gt;idVendor, id-&gt;idProduct);
 
 	/* create the device */
<span class="p_del">-	if (dev_size &lt; sizeof *gspca_dev)</span>
<span class="p_del">-		dev_size = sizeof *gspca_dev;</span>
<span class="p_add">+	if (dev_size &lt; sizeof(*gspca_dev))</span>
<span class="p_add">+		dev_size = sizeof(*gspca_dev);</span>
 	gspca_dev = kzalloc(dev_size, GFP_KERNEL);
 	if (!gspca_dev) {
 		pr_err(&quot;couldn&#39;t kzalloc gspca struct\n&quot;);
<span class="p_header">diff --git a/drivers/media/usb/gspca/jeilinj.c b/drivers/media/usb/gspca/jeilinj.c</span>
<span class="p_header">index 19736e237b37..3cc14adcf99e 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/jeilinj.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/jeilinj.c</span>
<span class="p_chunk">@@ -488,7 +488,7 @@</span> <span class="p_context"> static int sd_get_jcomp(struct gspca_dev *gspca_dev,</span>
 {
 	struct sd *sd = (struct sd *) gspca_dev;
 
<span class="p_del">-	memset(jcomp, 0, sizeof *jcomp);</span>
<span class="p_add">+	memset(jcomp, 0, sizeof(*jcomp));</span>
 	jcomp-&gt;quality = v4l2_ctrl_g_ctrl(sd-&gt;jpegqual);
 	jcomp-&gt;jpeg_markers = V4L2_JPEG_MARKER_DHT
 			| V4L2_JPEG_MARKER_DQT;
<span class="p_header">diff --git a/drivers/media/usb/gspca/mars.c b/drivers/media/usb/gspca/mars.c</span>
<span class="p_header">index 779a8785f421..ea31bdf72cc6 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/mars.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/mars.c</span>
<span class="p_chunk">@@ -333,7 +333,7 @@</span> <span class="p_context"> static int sd_start(struct gspca_dev *gspca_dev)</span>
 /*jfm: win trace - many writes here to reg 0x64*/
 
 	/* initialize the MI sensor */
<span class="p_del">-	for (i = 0; i &lt; sizeof mi_data; i++)</span>
<span class="p_add">+	for (i = 0; i &lt; sizeof(mi_data); i++)</span>
 		mi_w(gspca_dev, i + 1, mi_data[i]);
 
 	data[0] = 0x00;
<span class="p_header">diff --git a/drivers/media/usb/gspca/mr97310a.c b/drivers/media/usb/gspca/mr97310a.c</span>
<span class="p_header">index f006e29ca019..357af10d0d61 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/mr97310a.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/mr97310a.c</span>
<span class="p_chunk">@@ -1032,15 +1032,15 @@</span> <span class="p_context"> static void sd_pkt_scan(struct gspca_dev *gspca_dev,</span>
 
 		/* finish decoding current frame */
 		n = sof - data;
<span class="p_del">-		if (n &gt; sizeof pac_sof_marker)</span>
<span class="p_del">-			n -= sizeof pac_sof_marker;</span>
<span class="p_add">+		if (n &gt; sizeof(pac_sof_marker))</span>
<span class="p_add">+			n -= sizeof(pac_sof_marker);</span>
 		else
 			n = 0;
 		gspca_frame_add(gspca_dev, LAST_PACKET,
 					data, n);
 		/* Start next frame. */
 		gspca_frame_add(gspca_dev, FIRST_PACKET,
<span class="p_del">-			pac_sof_marker, sizeof pac_sof_marker);</span>
<span class="p_add">+			pac_sof_marker, sizeof(pac_sof_marker));</span>
 		len -= sof - data;
 		data = sof;
 	}
<span class="p_header">diff --git a/drivers/media/usb/gspca/ov519.c b/drivers/media/usb/gspca/ov519.c</span>
<span class="p_header">index c95f32a0c02b..ec278c2868d7 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/ov519.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/ov519.c</span>
<span class="p_chunk">@@ -4803,7 +4803,7 @@</span> <span class="p_context"> static int sd_get_jcomp(struct gspca_dev *gspca_dev,</span>
 	if (sd-&gt;bridge != BRIDGE_W9968CF)
 		return -ENOTTY;
 
<span class="p_del">-	memset(jcomp, 0, sizeof *jcomp);</span>
<span class="p_add">+	memset(jcomp, 0, sizeof(*jcomp));</span>
 	jcomp-&gt;quality = v4l2_ctrl_g_ctrl(sd-&gt;jpegqual);
 	jcomp-&gt;jpeg_markers = V4L2_JPEG_MARKER_DHT | V4L2_JPEG_MARKER_DQT |
 			      V4L2_JPEG_MARKER_DRI;
<span class="p_header">diff --git a/drivers/media/usb/gspca/pac207.c b/drivers/media/usb/gspca/pac207.c</span>
<span class="p_header">index 07529e5a0c56..9e97a4f175a9 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/pac207.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/pac207.c</span>
<span class="p_chunk">@@ -379,8 +379,8 @@</span> <span class="p_context"> static void sd_pkt_scan(struct gspca_dev *gspca_dev,</span>
 
 		/* finish decoding current frame */
 		n = sof - data;
<span class="p_del">-		if (n &gt; sizeof pac_sof_marker)</span>
<span class="p_del">-			n -= sizeof pac_sof_marker;</span>
<span class="p_add">+		if (n &gt; sizeof(pac_sof_marker))</span>
<span class="p_add">+			n -= sizeof(pac_sof_marker);</span>
 		else
 			n = 0;
 		gspca_frame_add(gspca_dev, LAST_PACKET,
<span class="p_header">diff --git a/drivers/media/usb/gspca/pac7302.c b/drivers/media/usb/gspca/pac7302.c</span>
<span class="p_header">index 8b08bd0172f4..010f5eddbc05 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/pac7302.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/pac7302.c</span>
<span class="p_chunk">@@ -801,11 +801,11 @@</span> <span class="p_context"> static void sd_pkt_scan(struct gspca_dev *gspca_dev,</span>
 		 * image, the 14th and 15th byte after the EOF seem to
 		 * correspond to the center of the image.
 		 */
<span class="p_del">-		lum_offset = 61 + sizeof pac_sof_marker;</span>
<span class="p_add">+		lum_offset = 61 + sizeof(pac_sof_marker);</span>
 		footer_length = 74;
 
 		/* Finish decoding current frame */
<span class="p_del">-		n = (sof - data) - (footer_length + sizeof pac_sof_marker);</span>
<span class="p_add">+		n = (sof - data) - (footer_length + sizeof(pac_sof_marker));</span>
 		if (n &lt; 0) {
 			gspca_dev-&gt;image_len += n;
 			n = 0;
<span class="p_chunk">@@ -832,7 +832,7 @@</span> <span class="p_context"> static void sd_pkt_scan(struct gspca_dev *gspca_dev,</span>
 		/* Start the new frame with the jpeg header */
 		/* The PAC7302 has the image rotated 90 degrees */
 		gspca_frame_add(gspca_dev, FIRST_PACKET,
<span class="p_del">-				jpeg_header, sizeof jpeg_header);</span>
<span class="p_add">+				jpeg_header, sizeof(jpeg_header));</span>
 	}
 	gspca_frame_add(gspca_dev, INTER_PACKET, data, len);
 }
<span class="p_header">diff --git a/drivers/media/usb/gspca/pac7311.c b/drivers/media/usb/gspca/pac7311.c</span>
<span class="p_header">index 25f86b1e74a8..b58c078e481e 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/pac7311.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/pac7311.c</span>
<span class="p_chunk">@@ -584,11 +584,11 @@</span> <span class="p_context"> static void sd_pkt_scan(struct gspca_dev *gspca_dev,</span>
 		 * image, the 14th and 15th byte after the EOF seem to
 		 * correspond to the center of the image.
 		 */
<span class="p_del">-		lum_offset = 24 + sizeof pac_sof_marker;</span>
<span class="p_add">+		lum_offset = 24 + sizeof(pac_sof_marker);</span>
 		footer_length = 26;
 
 		/* Finish decoding current frame */
<span class="p_del">-		n = (sof - data) - (footer_length + sizeof pac_sof_marker);</span>
<span class="p_add">+		n = (sof - data) - (footer_length + sizeof(pac_sof_marker));</span>
 		if (n &lt; 0) {
 			gspca_dev-&gt;image_len += n;
 			n = 0;
<span class="p_header">diff --git a/drivers/media/usb/gspca/sn9c2028.c b/drivers/media/usb/gspca/sn9c2028.c</span>
<span class="p_header">index 4f2050a5ec94..9cee0b9d7983 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/sn9c2028.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/sn9c2028.c</span>
<span class="p_chunk">@@ -910,14 +910,14 @@</span> <span class="p_context"> static void sd_pkt_scan(struct gspca_dev *gspca_dev,</span>
 
 		/* finish decoding current frame */
 		n = sof - data;
<span class="p_del">-		if (n &gt; sizeof sn9c2028_sof_marker)</span>
<span class="p_del">-			n -= sizeof sn9c2028_sof_marker;</span>
<span class="p_add">+		if (n &gt; sizeof(sn9c2028_sof_marker))</span>
<span class="p_add">+			n -= sizeof(sn9c2028_sof_marker);</span>
 		else
 			n = 0;
 		gspca_frame_add(gspca_dev, LAST_PACKET, data, n);
 		/* Start next frame. */
 		gspca_frame_add(gspca_dev, FIRST_PACKET,
<span class="p_del">-			sn9c2028_sof_marker, sizeof sn9c2028_sof_marker);</span>
<span class="p_add">+			sn9c2028_sof_marker, sizeof(sn9c2028_sof_marker));</span>
 		len -= sof - data;
 		data = sof;
 	}
<span class="p_header">diff --git a/drivers/media/usb/gspca/sonixj.c b/drivers/media/usb/gspca/sonixj.c</span>
<span class="p_header">index fd1c8706d86a..a0be6743456e 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/sonixj.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/sonixj.c</span>
<span class="p_chunk">@@ -1862,7 +1862,7 @@</span> <span class="p_context"> static void setcontrast(struct gspca_dev *gspca_dev)</span>
 	contrast[3] = 0;
 	contrast[4] = k2 / 5;			/* blue */
 	contrast[5] = 0;
<span class="p_del">-	reg_w(gspca_dev, 0x84, contrast, sizeof contrast);</span>
<span class="p_add">+	reg_w(gspca_dev, 0x84, contrast, sizeof(contrast));</span>
 }
 
 static void setcolors(struct gspca_dev *gspca_dev)
<span class="p_chunk">@@ -1890,7 +1890,7 @@</span> <span class="p_context"> static void setcolors(struct gspca_dev *gspca_dev)</span>
 		reg8a[i * 2] = v;
 		reg8a[i * 2 + 1] = (v &gt;&gt; 8) &amp; 0x0f;
 	}
<span class="p_del">-	reg_w(gspca_dev, 0x8a, reg8a, sizeof reg8a);</span>
<span class="p_add">+	reg_w(gspca_dev, 0x8a, reg8a, sizeof(reg8a));</span>
 }
 
 static void setredblue(struct gspca_dev *gspca_dev)
<span class="p_chunk">@@ -1944,10 +1944,10 @@</span> <span class="p_context"> static void setgamma(struct gspca_dev *gspca_dev)</span>
 	}
 
 	val = sd-&gt;gamma-&gt;val;
<span class="p_del">-	for (i = 0; i &lt; sizeof gamma; i++)</span>
<span class="p_add">+	for (i = 0; i &lt; sizeof(gamma); i++)</span>
 		gamma[i] = gamma_base[i]
 			+ delta[i] * (val - GAMMA_DEF) / 32;
<span class="p_del">-	reg_w(gspca_dev, 0x20, gamma, sizeof gamma);</span>
<span class="p_add">+	reg_w(gspca_dev, 0x20, gamma, sizeof(gamma));</span>
 }
 
 static void setexposure(struct gspca_dev *gspca_dev)
<span class="p_chunk">@@ -2241,7 +2241,7 @@</span> <span class="p_context"> static int sd_start(struct gspca_dev *gspca_dev)</span>
 	}
 	reg_w(gspca_dev, 0x9a, reg9a, 6);
 
<span class="p_del">-	reg_w(gspca_dev, 0xd4, regd4, sizeof regd4);</span>
<span class="p_add">+	reg_w(gspca_dev, 0xd4, regd4, sizeof(regd4));</span>
 
 	reg_w(gspca_dev, 0x03, &amp;sn9c1xx[3], 0x0f);
 
<span class="p_chunk">@@ -2334,7 +2334,7 @@</span> <span class="p_context"> static int sd_start(struct gspca_dev *gspca_dev)</span>
 
 /*fixme: 8 times with all zeroes and 1 or 2 times with normal values */
 	for (i = 0; i &lt; 8; i++)
<span class="p_del">-		reg_w(gspca_dev, 0x84, reg84, sizeof reg84);</span>
<span class="p_add">+		reg_w(gspca_dev, 0x84, reg84, sizeof(reg84));</span>
 	switch (sd-&gt;sensor) {
 	case SENSOR_ADCM1700:
 	case SENSOR_OV7660:
<span class="p_chunk">@@ -2360,7 +2360,7 @@</span> <span class="p_context"> static int sd_start(struct gspca_dev *gspca_dev)</span>
 	}
 	setsharpness(gspca_dev);
 
<span class="p_del">-	reg_w(gspca_dev, 0x84, reg84, sizeof reg84);</span>
<span class="p_add">+	reg_w(gspca_dev, 0x84, reg84, sizeof(reg84));</span>
 	reg_w1(gspca_dev, 0x05, 0x20);		/* red */
 	reg_w1(gspca_dev, 0x07, 0x20);		/* green */
 	reg_w1(gspca_dev, 0x06, 0x20);		/* blue */
<span class="p_header">diff --git a/drivers/media/usb/gspca/sq930x.c b/drivers/media/usb/gspca/sq930x.c</span>
<span class="p_header">index e274cf19a3ea..54418fe3fd4b 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/sq930x.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/sq930x.c</span>
<span class="p_chunk">@@ -683,7 +683,7 @@</span> <span class="p_context"> static void mt9v111_init(struct gspca_dev *gspca_dev)</span>
 		{0x02, 0x01, 0xae, 0x01, 0x00, 0x00, 0x00},
 	};
 
<span class="p_del">-	reg_wb(gspca_dev, 0x001b, 0x0000, cmd_001b, sizeof cmd_001b);</span>
<span class="p_add">+	reg_wb(gspca_dev, 0x001b, 0x0000, cmd_001b, sizeof(cmd_001b));</span>
 	for (i = 0; i &lt; ARRAY_SIZE(cmd_011b); i++) {
 		reg_wb(gspca_dev, 0x001b, 0x0000, cmd_011b[i],
 				ARRAY_SIZE(cmd_011b[0]));
<span class="p_header">diff --git a/drivers/media/usb/gspca/t613.c b/drivers/media/usb/gspca/t613.c</span>
<span class="p_header">index e2cc4e5a0ccb..8bb1b4de1711 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/t613.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/t613.c</span>
<span class="p_chunk">@@ -150,7 +150,7 @@</span> <span class="p_context"> static const struct additional_sensor_data sensor_data[] = {</span>
 	.n3 =
 		{0x61, 0x68, 0x65, 0x0a, 0x60, 0x04},
 	.n4 = n4_om6802,
<span class="p_del">-	.n4sz = sizeof n4_om6802,</span>
<span class="p_add">+	.n4sz = sizeof(n4_om6802),</span>
 	.reg80 = 0x3c,
 	.reg8e = 0x33,
 	.nset8 = {0xa8, 0xf0, 0xc6, 0x88, 0xc0, 0x00},
<span class="p_chunk">@@ -172,7 +172,7 @@</span> <span class="p_context"> static const struct additional_sensor_data sensor_data[] = {</span>
 	.n3 =
 		{0x61, 0xc2, 0x65, 0x88, 0x60, 0x00},
 	.n4 = n4_other,
<span class="p_del">-	.n4sz = sizeof n4_other,</span>
<span class="p_add">+	.n4sz = sizeof(n4_other),</span>
 	.reg80 = 0xac,
 	.reg8e = 0xb8,
 	.nset8 = {0xa8, 0xa8, 0xc6, 0xda, 0xc0, 0x00},
<span class="p_chunk">@@ -194,7 +194,7 @@</span> <span class="p_context"> static const struct additional_sensor_data sensor_data[] = {</span>
 	.n3 =
 		{0x61, 0xc2, 0x65, 0x0d, 0x60, 0x08},
 	.n4 = n4_tas5130a,
<span class="p_del">-	.n4sz = sizeof n4_tas5130a,</span>
<span class="p_add">+	.n4sz = sizeof(n4_tas5130a),</span>
 	.reg80 = 0x3c,
 	.reg8e = 0xb4,
 	.nset8 = {0xa8, 0xf0, 0xc6, 0xda, 0xc0, 0x00},
<span class="p_chunk">@@ -215,7 +215,7 @@</span> <span class="p_context"> static const struct additional_sensor_data sensor_data[] = {</span>
 [SENSOR_LT168G] = {
 	.n3 = {0x61, 0xc2, 0x65, 0x68, 0x60, 0x00},
 	.n4 = n4_lt168g,
<span class="p_del">-	.n4sz = sizeof n4_lt168g,</span>
<span class="p_add">+	.n4sz = sizeof(n4_lt168g),</span>
 	.reg80 = 0x7c,
 	.reg8e = 0xb3,
 	.nset8 = {0xa8, 0xf0, 0xc6, 0xba, 0xc0, 0x00},
<span class="p_chunk">@@ -412,7 +412,7 @@</span> <span class="p_context"> static void om6802_sensor_init(struct gspca_dev *gspca_dev)</span>
 		0x00			/* table end */
 	};
 
<span class="p_del">-	reg_w_buf(gspca_dev, sensor_reset, sizeof sensor_reset);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor_reset, sizeof(sensor_reset));</span>
 	msleep(100);
 	i = 4;
 	while (--i &gt; 0) {
<span class="p_chunk">@@ -433,7 +433,7 @@</span> <span class="p_context"> static void om6802_sensor_init(struct gspca_dev *gspca_dev)</span>
 		val[3] = *p++;
 		if (*p == 0)
 			reg_w(gspca_dev, 0x3c80);
<span class="p_del">-		reg_w_buf(gspca_dev, val, sizeof val);</span>
<span class="p_add">+		reg_w_buf(gspca_dev, val, sizeof(val));</span>
 		i = 4;
 		while (--i &gt;= 0) {
 			msleep(15);
<span class="p_chunk">@@ -469,7 +469,7 @@</span> <span class="p_context"> static void setbrightness(struct gspca_dev *gspca_dev, s32 brightness)</span>
 		set6[3] = 0x00 + ((brightness - 7) * 0x10);
 	}
 
<span class="p_del">-	reg_w_buf(gspca_dev, set6, sizeof set6);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, set6, sizeof(set6));</span>
 }
 
 static void setcontrast(struct gspca_dev *gspca_dev, s32 contrast)
<span class="p_chunk">@@ -496,7 +496,7 @@</span> <span class="p_context"> static void setgamma(struct gspca_dev *gspca_dev, s32 val)</span>
 {
 	PDEBUG(D_CONF, &quot;Gamma: %d&quot;, val);
 	reg_w_ixbuf(gspca_dev, 0x90,
<span class="p_del">-		gamma_table[val], sizeof gamma_table[0]);</span>
<span class="p_add">+		gamma_table[val], sizeof(gamma_table[0]));</span>
 }
 
 static void setawb_n_RGB(struct gspca_dev *gspca_dev)
<span class="p_chunk">@@ -527,7 +527,7 @@</span> <span class="p_context"> static void setawb_n_RGB(struct gspca_dev *gspca_dev)</span>
 	if (!sd-&gt;awb-&gt;val)
 		all_gain_reg[7] &amp;= ~0x04; /* AWB off */
 
<span class="p_del">-	reg_w_buf(gspca_dev, all_gain_reg, sizeof all_gain_reg);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, all_gain_reg, sizeof(all_gain_reg));</span>
 }
 
 static void setsharpness(struct gspca_dev *gspca_dev, s32 val)
<span class="p_chunk">@@ -568,7 +568,7 @@</span> <span class="p_context"> static void setfreq(struct gspca_dev *gspca_dev, s32 val)</span>
 	}
 	freq[1] = reg66;
 
<span class="p_del">-	reg_w_buf(gspca_dev, freq, sizeof freq);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, freq, sizeof(freq));</span>
 }
 
 /* this function is called at probe and resume time */
<span class="p_chunk">@@ -617,10 +617,10 @@</span> <span class="p_context"> static int sd_init(struct gspca_dev *gspca_dev)</span>
 	}
 
 	if (sd-&gt;sensor == SENSOR_OM6802) {
<span class="p_del">-		reg_w_buf(gspca_dev, n1, sizeof n1);</span>
<span class="p_add">+		reg_w_buf(gspca_dev, n1, sizeof(n1));</span>
 		i = 5;
 		while (--i &gt;= 0) {
<span class="p_del">-			reg_w_buf(gspca_dev, sensor_reset, sizeof sensor_reset);</span>
<span class="p_add">+			reg_w_buf(gspca_dev, sensor_reset, sizeof(sensor_reset));</span>
 			test_byte = reg_r(gspca_dev, 0x0063);
 			msleep(100);
 			if (test_byte == 0x17)
<span class="p_chunk">@@ -630,7 +630,7 @@</span> <span class="p_context"> static int sd_init(struct gspca_dev *gspca_dev)</span>
 			pr_err(&quot;Bad sensor reset %02x\n&quot;, test_byte);
 			return -EIO;
 		}
<span class="p_del">-		reg_w_buf(gspca_dev, n2, sizeof n2);</span>
<span class="p_add">+		reg_w_buf(gspca_dev, n2, sizeof(n2));</span>
 	}
 
 	i = 0;
<span class="p_chunk">@@ -642,7 +642,7 @@</span> <span class="p_context"> static int sd_init(struct gspca_dev *gspca_dev)</span>
 	}
 
 	sensor = &amp;sensor_data[sd-&gt;sensor];
<span class="p_del">-	reg_w_buf(gspca_dev, sensor-&gt;n3, sizeof sensor-&gt;n3);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor-&gt;n3, sizeof(sensor-&gt;n3));</span>
 	reg_w_buf(gspca_dev, sensor-&gt;n4, sensor-&gt;n4sz);
 
 	if (sd-&gt;sensor == SENSOR_LT168G) {
<span class="p_chunk">@@ -652,9 +652,9 @@</span> <span class="p_context"> static int sd_init(struct gspca_dev *gspca_dev)</span>
 		reg_w(gspca_dev, 0x6c80);
 	}
 
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xd0, sensor-&gt;data1, sizeof sensor-&gt;data1);</span>
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xc7, sensor-&gt;data2, sizeof sensor-&gt;data2);</span>
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xe0, sensor-&gt;data3, sizeof sensor-&gt;data3);</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xd0, sensor-&gt;data1, sizeof(sensor-&gt;data1));</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xc7, sensor-&gt;data2, sizeof(sensor-&gt;data2));</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xe0, sensor-&gt;data3, sizeof(sensor-&gt;data3));</span>
 
 	reg_w(gspca_dev, (sensor-&gt;reg80 &lt;&lt; 8) + 0x80);
 	reg_w(gspca_dev, (sensor-&gt;reg80 &lt;&lt; 8) + 0x80);
<span class="p_chunk">@@ -663,9 +663,9 @@</span> <span class="p_context"> static int sd_init(struct gspca_dev *gspca_dev)</span>
 	reg_w(gspca_dev, (0x20 &lt;&lt; 8) + 0x88);
 	reg_w(gspca_dev, (0x20 &lt;&lt; 8) + 0x89);
 
<span class="p_del">-	reg_w_buf(gspca_dev, sensor-&gt;data5, sizeof sensor-&gt;data5);</span>
<span class="p_del">-	reg_w_buf(gspca_dev, sensor-&gt;nset8, sizeof sensor-&gt;nset8);</span>
<span class="p_del">-	reg_w_buf(gspca_dev, sensor-&gt;stream, sizeof sensor-&gt;stream);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor-&gt;data5, sizeof(sensor-&gt;data5));</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor-&gt;nset8, sizeof(sensor-&gt;nset8));</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor-&gt;stream, sizeof(sensor-&gt;stream));</span>
 
 	if (sd-&gt;sensor == SENSOR_LT168G) {
 		test_byte = reg_r(gspca_dev, 0x80);
<span class="p_chunk">@@ -674,9 +674,9 @@</span> <span class="p_context"> static int sd_init(struct gspca_dev *gspca_dev)</span>
 		reg_w(gspca_dev, 0x6c80);
 	}
 
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xd0, sensor-&gt;data1, sizeof sensor-&gt;data1);</span>
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xc7, sensor-&gt;data2, sizeof sensor-&gt;data2);</span>
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xe0, sensor-&gt;data3, sizeof sensor-&gt;data3);</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xd0, sensor-&gt;data1, sizeof(sensor-&gt;data1));</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xc7, sensor-&gt;data2, sizeof(sensor-&gt;data2));</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xe0, sensor-&gt;data3, sizeof(sensor-&gt;data3));</span>
 
 	return 0;
 }
<span class="p_chunk">@@ -689,7 +689,7 @@</span> <span class="p_context"> static void setmirror(struct gspca_dev *gspca_dev, s32 val)</span>
 	if (val)
 		hflipcmd[3] = 0x01;
 
<span class="p_del">-	reg_w_buf(gspca_dev, hflipcmd, sizeof hflipcmd);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, hflipcmd, sizeof(hflipcmd));</span>
 }
 
 static void seteffect(struct gspca_dev *gspca_dev, s32 val)
<span class="p_chunk">@@ -716,7 +716,7 @@</span> <span class="p_context"> static void seteffect(struct gspca_dev *gspca_dev, s32 val)</span>
 	}
 
 	reg_w_buf(gspca_dev, effects_table[idx],
<span class="p_del">-				sizeof effects_table[0]);</span>
<span class="p_add">+				sizeof(effects_table[0]));</span>
 
 	if (val == V4L2_COLORFX_SKETCH)
 		reg_w(gspca_dev, 0x4aa6);
<span class="p_chunk">@@ -742,9 +742,9 @@</span> <span class="p_context"> static void poll_sensor(struct gspca_dev *gspca_dev)</span>
 		 0xc2, 0x80, 0xc3, 0x10};
 
 	PDEBUG(D_STREAM, &quot;[Sensor requires polling]&quot;);
<span class="p_del">-	reg_w_buf(gspca_dev, poll1, sizeof poll1);</span>
<span class="p_del">-	reg_w_buf(gspca_dev, poll2, sizeof poll2);</span>
<span class="p_del">-	reg_w_buf(gspca_dev, noise03, sizeof noise03);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, poll1, sizeof(poll1));</span>
<span class="p_add">+	reg_w_buf(gspca_dev, poll2, sizeof(poll2));</span>
<span class="p_add">+	reg_w_buf(gspca_dev, noise03, sizeof(noise03));</span>
 }
 
 static int sd_start(struct gspca_dev *gspca_dev)
<span class="p_chunk">@@ -783,7 +783,7 @@</span> <span class="p_context"> static int sd_start(struct gspca_dev *gspca_dev)</span>
 		i = 0;
 		for (;;) {
 			reg_w_buf(gspca_dev, tas5130a_sensor_init[i],
<span class="p_del">-					 sizeof tas5130a_sensor_init[0]);</span>
<span class="p_add">+					 sizeof(tas5130a_sensor_init[0]));</span>
 			if (i &gt;= ARRAY_SIZE(tas5130a_sensor_init) - 1)
 				break;
 			i++;
<span class="p_chunk">@@ -791,19 +791,19 @@</span> <span class="p_context"> static int sd_start(struct gspca_dev *gspca_dev)</span>
 		reg_w(gspca_dev, 0x3c80);
 		/* just in case and to keep sync with logs (for mine) */
 		reg_w_buf(gspca_dev, tas5130a_sensor_init[i],
<span class="p_del">-				 sizeof tas5130a_sensor_init[0]);</span>
<span class="p_add">+				 sizeof(tas5130a_sensor_init[0]));</span>
 		reg_w(gspca_dev, 0x3c80);
 		break;
 	}
 	sensor = &amp;sensor_data[sd-&gt;sensor];
 	setfreq(gspca_dev, v4l2_ctrl_g_ctrl(sd-&gt;freq));
 	reg_r(gspca_dev, 0x0012);
<span class="p_del">-	reg_w_buf(gspca_dev, t2, sizeof t2);</span>
<span class="p_del">-	reg_w_ixbuf(gspca_dev, 0xb3, t3, sizeof t3);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, t2, sizeof(t2));</span>
<span class="p_add">+	reg_w_ixbuf(gspca_dev, 0xb3, t3, sizeof(t3));</span>
 	reg_w(gspca_dev, 0x0013);
 	msleep(15);
<span class="p_del">-	reg_w_buf(gspca_dev, sensor-&gt;stream, sizeof sensor-&gt;stream);</span>
<span class="p_del">-	reg_w_buf(gspca_dev, sensor-&gt;stream, sizeof sensor-&gt;stream);</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor-&gt;stream, sizeof(sensor-&gt;stream));</span>
<span class="p_add">+	reg_w_buf(gspca_dev, sensor-&gt;stream, sizeof(sensor-&gt;stream));</span>
 
 	if (sd-&gt;sensor == SENSOR_OM6802)
 		poll_sensor(gspca_dev);
<span class="p_chunk">@@ -816,9 +816,9 @@</span> <span class="p_context"> static void sd_stopN(struct gspca_dev *gspca_dev)</span>
 	struct sd *sd = (struct sd *) gspca_dev;
 
 	reg_w_buf(gspca_dev, sensor_data[sd-&gt;sensor].stream,
<span class="p_del">-			sizeof sensor_data[sd-&gt;sensor].stream);</span>
<span class="p_add">+			sizeof(sensor_data[sd-&gt;sensor].stream));</span>
 	reg_w_buf(gspca_dev, sensor_data[sd-&gt;sensor].stream,
<span class="p_del">-			sizeof sensor_data[sd-&gt;sensor].stream);</span>
<span class="p_add">+			sizeof(sensor_data[sd-&gt;sensor].stream));</span>
 	if (sd-&gt;sensor == SENSOR_OM6802) {
 		msleep(20);
 		reg_w(gspca_dev, 0x0309);
<span class="p_header">diff --git a/drivers/media/usb/gspca/topro.c b/drivers/media/usb/gspca/topro.c</span>
<span class="p_header">index c028a5c2438e..e647cf6cf675 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/topro.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/topro.c</span>
<span class="p_chunk">@@ -956,7 +956,7 @@</span> <span class="p_context"> static void jpeg_define(u8 *jpeg_hdr,</span>
 			int height,
 			int width)
 {
<span class="p_del">-	memcpy(jpeg_hdr, jpeg_head, sizeof jpeg_head);</span>
<span class="p_add">+	memcpy(jpeg_hdr, jpeg_head, sizeof(jpeg_head));</span>
 	jpeg_hdr[JPEG_HEIGHT_OFFSET + 0] = height &gt;&gt; 8;
 	jpeg_hdr[JPEG_HEIGHT_OFFSET + 1] = height;
 	jpeg_hdr[JPEG_HEIGHT_OFFSET + 2] = width &gt;&gt; 8;
<span class="p_chunk">@@ -1460,7 +1460,7 @@</span> <span class="p_context"> static void set_dqt(struct gspca_dev *gspca_dev, u8 q)</span>
 		jpeg_set_qual(sd-&gt;jpeg_hdr, jpeg_q[q]);
 	else
 		memcpy(&amp;sd-&gt;jpeg_hdr[JPEG_QT0_OFFSET - 1],
<span class="p_del">-			DQT[q], sizeof DQT[0]);</span>
<span class="p_add">+			DQT[q], sizeof(DQT[0]));</span>
 }
 
 /* set the JPEG compression quality factor */
<span class="p_chunk">@@ -4141,7 +4141,7 @@</span> <span class="p_context"> static int sd_isoc_init(struct gspca_dev *gspca_dev)</span>
 				ARRAY_SIZE(cx_sensor_init));
 		reg_w_buf(gspca_dev, cx_bridge_init,
 				ARRAY_SIZE(cx_bridge_init));
<span class="p_del">-		bulk_w(gspca_dev, 0x03, color_null, sizeof color_null);</span>
<span class="p_add">+		bulk_w(gspca_dev, 0x03, color_null, sizeof(color_null));</span>
 		reg_w(gspca_dev, 0x59, 0x40);
 	} else {
 		reg_w(gspca_dev, TP6800_R12_SIF_ADDR_S, 0x21);
<span class="p_chunk">@@ -4501,7 +4501,7 @@</span> <span class="p_context"> static void soi763a_6810_start(struct gspca_dev *gspca_dev)</span>
 	};
 
 	reg_w(gspca_dev, 0x22, gspca_dev-&gt;alt);
<span class="p_del">-	bulk_w(gspca_dev, 0x03, color_null, sizeof color_null);</span>
<span class="p_add">+	bulk_w(gspca_dev, 0x03, color_null, sizeof(color_null));</span>
 	reg_w(gspca_dev, 0x59, 0x40);
 	if (sd-&gt;sensor == SENSOR_CX0342)
 		setexposure(gspca_dev, v4l2_ctrl_g_ctrl(gspca_dev-&gt;exposure),
<span class="p_chunk">@@ -4838,7 +4838,7 @@</span> <span class="p_context"> static int sd_get_jcomp(struct gspca_dev *gspca_dev,</span>
 
 	if (sd-&gt;sensor != SENSOR_SOI763A)
 		return -ENOTTY;
<span class="p_del">-	memset(jcomp, 0, sizeof *jcomp);</span>
<span class="p_add">+	memset(jcomp, 0, sizeof(*jcomp));</span>
 	jcomp-&gt;quality = v4l2_ctrl_g_ctrl(sd-&gt;jpegqual);
 	jcomp-&gt;jpeg_markers = V4L2_JPEG_MARKER_DHT
 			| V4L2_JPEG_MARKER_DQT;
<span class="p_header">diff --git a/drivers/media/usb/gspca/zc3xx.c b/drivers/media/usb/gspca/zc3xx.c</span>
<span class="p_header">index c5d8ee6fa3c7..b33754710e9b 100644</span>
<span class="p_header">--- a/drivers/media/usb/gspca/zc3xx.c</span>
<span class="p_header">+++ b/drivers/media/usb/gspca/zc3xx.c</span>
<span class="p_chunk">@@ -6895,7 +6895,7 @@</span> <span class="p_context"> static int sd_get_jcomp(struct gspca_dev *gspca_dev,</span>
 {
 	struct sd *sd = (struct sd *) gspca_dev;
 
<span class="p_del">-	memset(jcomp, 0, sizeof *jcomp);</span>
<span class="p_add">+	memset(jcomp, 0, sizeof(*jcomp));</span>
 	jcomp-&gt;quality = v4l2_ctrl_g_ctrl(sd-&gt;jpegqual);
 	jcomp-&gt;jpeg_markers = V4L2_JPEG_MARKER_DHT
 			| V4L2_JPEG_MARKER_DQT;
<span class="p_header">diff --git a/drivers/media/usb/uvc/uvc_ctrl.c b/drivers/media/usb/uvc/uvc_ctrl.c</span>
<span class="p_header">index c2ee6e39fd0c..91cc583a08c7 100644</span>
<span class="p_header">--- a/drivers/media/usb/uvc/uvc_ctrl.c</span>
<span class="p_header">+++ b/drivers/media/usb/uvc/uvc_ctrl.c</span>
<span class="p_chunk">@@ -1019,10 +1019,10 @@</span> <span class="p_context"> static int __uvc_query_v4l2_ctrl(struct uvc_video_chain *chain,</span>
 	struct uvc_menu_info *menu;
 	unsigned int i;
 
<span class="p_del">-	memset(v4l2_ctrl, 0, sizeof *v4l2_ctrl);</span>
<span class="p_add">+	memset(v4l2_ctrl, 0, sizeof(*v4l2_ctrl));</span>
 	v4l2_ctrl-&gt;id = mapping-&gt;id;
 	v4l2_ctrl-&gt;type = mapping-&gt;v4l2_type;
<span class="p_del">-	strlcpy(v4l2_ctrl-&gt;name, mapping-&gt;name, sizeof v4l2_ctrl-&gt;name);</span>
<span class="p_add">+	strlcpy(v4l2_ctrl-&gt;name, mapping-&gt;name, sizeof(v4l2_ctrl-&gt;name));</span>
 	v4l2_ctrl-&gt;flags = 0;
 
 	if (!(ctrl-&gt;info.flags &amp; UVC_CTRL_FLAG_GET_CUR))
<span class="p_chunk">@@ -1182,7 +1182,7 @@</span> <span class="p_context"> int uvc_query_v4l2_menu(struct uvc_video_chain *chain,</span>
 		}
 	}
 
<span class="p_del">-	strlcpy(query_menu-&gt;name, menu_info-&gt;name, sizeof query_menu-&gt;name);</span>
<span class="p_add">+	strlcpy(query_menu-&gt;name, menu_info-&gt;name, sizeof(query_menu-&gt;name));</span>
 
 done:
 	mutex_unlock(&amp;chain-&gt;ctrl_mutex);
<span class="p_header">diff --git a/drivers/media/usb/uvc/uvc_driver.c b/drivers/media/usb/uvc/uvc_driver.c</span>
<span class="p_header">index 4e7148815a78..b7e88c3ad614 100644</span>
<span class="p_header">--- a/drivers/media/usb/uvc/uvc_driver.c</span>
<span class="p_header">+++ b/drivers/media/usb/uvc/uvc_driver.c</span>
<span class="p_chunk">@@ -213,7 +213,7 @@</span> <span class="p_context"> void uvc_simplify_fraction(uint32_t *numerator, uint32_t *denominator,</span>
 	uint32_t x, y, r;
 	unsigned int i, n;
 
<span class="p_del">-	an = kmalloc(n_terms * sizeof *an, GFP_KERNEL);</span>
<span class="p_add">+	an = kmalloc(n_terms * sizeof(*an), GFP_KERNEL);</span>
 	if (an == NULL)
 		return;
 
<span class="p_chunk">@@ -362,7 +362,7 @@</span> <span class="p_context"> static int uvc_parse_format(struct uvc_device *dev,</span>
 
 		if (fmtdesc != NULL) {
 			strlcpy(format-&gt;name, fmtdesc-&gt;name,
<span class="p_del">-				sizeof format-&gt;name);</span>
<span class="p_add">+				sizeof(format-&gt;name));</span>
 			format-&gt;fcc = fmtdesc-&gt;fcc;
 		} else {
 			uvc_printk(KERN_INFO, &quot;Unknown video format %pUl\n&quot;,
<span class="p_chunk">@@ -405,7 +405,7 @@</span> <span class="p_context"> static int uvc_parse_format(struct uvc_device *dev,</span>
 			return -EINVAL;
 		}
 
<span class="p_del">-		strlcpy(format-&gt;name, &quot;MJPEG&quot;, sizeof format-&gt;name);</span>
<span class="p_add">+		strlcpy(format-&gt;name, &quot;MJPEG&quot;, sizeof(format-&gt;name));</span>
 		format-&gt;fcc = V4L2_PIX_FMT_MJPEG;
 		format-&gt;flags = UVC_FMT_FLAG_COMPRESSED;
 		format-&gt;bpp = 0;
<span class="p_chunk">@@ -423,13 +423,13 @@</span> <span class="p_context"> static int uvc_parse_format(struct uvc_device *dev,</span>
 
 		switch (buffer[8] &amp; 0x7f) {
 		case 0:
<span class="p_del">-			strlcpy(format-&gt;name, &quot;SD-DV&quot;, sizeof format-&gt;name);</span>
<span class="p_add">+			strlcpy(format-&gt;name, &quot;SD-DV&quot;, sizeof(format-&gt;name));</span>
 			break;
 		case 1:
<span class="p_del">-			strlcpy(format-&gt;name, &quot;SDL-DV&quot;, sizeof format-&gt;name);</span>
<span class="p_add">+			strlcpy(format-&gt;name, &quot;SDL-DV&quot;, sizeof(format-&gt;name));</span>
 			break;
 		case 2:
<span class="p_del">-			strlcpy(format-&gt;name, &quot;HD-DV&quot;, sizeof format-&gt;name);</span>
<span class="p_add">+			strlcpy(format-&gt;name, &quot;HD-DV&quot;, sizeof(format-&gt;name));</span>
 			break;
 		default:
 			uvc_trace(UVC_TRACE_DESCR, &quot;device %d videostreaming &quot;
<span class="p_chunk">@@ -440,7 +440,7 @@</span> <span class="p_context"> static int uvc_parse_format(struct uvc_device *dev,</span>
 		}
 
 		strlcat(format-&gt;name, buffer[8] &amp; (1 &lt;&lt; 7) ? &quot; 60Hz&quot; : &quot; 50Hz&quot;,
<span class="p_del">-			sizeof format-&gt;name);</span>
<span class="p_add">+			sizeof(format-&gt;name));</span>
 
 		format-&gt;fcc = V4L2_PIX_FMT_DV;
 		format-&gt;flags = UVC_FMT_FLAG_COMPRESSED | UVC_FMT_FLAG_STREAM;
<span class="p_chunk">@@ -449,7 +449,7 @@</span> <span class="p_context"> static int uvc_parse_format(struct uvc_device *dev,</span>
 
 		/* Create a dummy frame descriptor. */
 		frame = &amp;format-&gt;frame[0];
<span class="p_del">-		memset(&amp;format-&gt;frame[0], 0, sizeof format-&gt;frame[0]);</span>
<span class="p_add">+		memset(&amp;format-&gt;frame[0], 0, sizeof(format-&gt;frame[0]));</span>
 		frame-&gt;bFrameIntervalType = 1;
 		frame-&gt;dwDefaultFrameInterval = 1;
 		frame-&gt;dwFrameInterval = *intervals;
<span class="p_chunk">@@ -616,7 +616,7 @@</span> <span class="p_context"> static int uvc_parse_streaming(struct uvc_device *dev,</span>
 		return -EINVAL;
 	}
 
<span class="p_del">-	streaming = kzalloc(sizeof *streaming, GFP_KERNEL);</span>
<span class="p_add">+	streaming = kzalloc(sizeof(*streaming), GFP_KERNEL);</span>
 	if (streaming == NULL) {
 		usb_driver_release_interface(&amp;uvc_driver.driver, intf);
 		return -EINVAL;
<span class="p_chunk">@@ -766,8 +766,8 @@</span> <span class="p_context"> static int uvc_parse_streaming(struct uvc_device *dev,</span>
 		goto error;
 	}
 
<span class="p_del">-	size = nformats * sizeof *format + nframes * sizeof *frame</span>
<span class="p_del">-	     + nintervals * sizeof *interval;</span>
<span class="p_add">+	size = nformats * sizeof(*format) + nframes * sizeof(*frame)</span>
<span class="p_add">+	     + nintervals * sizeof(*interval);</span>
 	format = kzalloc(size, GFP_KERNEL);
 	if (format == NULL) {
 		ret = -ENOMEM;
<span class="p_chunk">@@ -941,7 +941,7 @@</span> <span class="p_context"> static int uvc_parse_vendor_control(struct uvc_device *dev,</span>
 
 		if (buffer[24+p+2*n] != 0)
 			usb_string(udev, buffer[24+p+2*n], unit-&gt;name,
<span class="p_del">-				   sizeof unit-&gt;name);</span>
<span class="p_add">+				   sizeof(unit-&gt;name));</span>
 		else
 			sprintf(unit-&gt;name, &quot;Extension %u&quot;, buffer[3]);
 
<span class="p_chunk">@@ -1040,7 +1040,7 @@</span> <span class="p_context"> static int uvc_parse_standard_control(struct uvc_device *dev,</span>
 
 		if (UVC_ENTITY_TYPE(term) == UVC_ITT_CAMERA) {
 			term-&gt;camera.bControlSize = n;
<span class="p_del">-			term-&gt;camera.bmControls = (__u8 *)term + sizeof *term;</span>
<span class="p_add">+			term-&gt;camera.bmControls = (__u8 *)term + sizeof(*term);</span>
 			term-&gt;camera.wObjectiveFocalLengthMin =
 				get_unaligned_le16(&amp;buffer[8]);
 			term-&gt;camera.wObjectiveFocalLengthMax =
<span class="p_chunk">@@ -1051,17 +1051,17 @@</span> <span class="p_context"> static int uvc_parse_standard_control(struct uvc_device *dev,</span>
 		} else if (UVC_ENTITY_TYPE(term) ==
 			   UVC_ITT_MEDIA_TRANSPORT_INPUT) {
 			term-&gt;media.bControlSize = n;
<span class="p_del">-			term-&gt;media.bmControls = (__u8 *)term + sizeof *term;</span>
<span class="p_add">+			term-&gt;media.bmControls = (__u8 *)term + sizeof(*term);</span>
 			term-&gt;media.bTransportModeSize = p;
 			term-&gt;media.bmTransportModes = (__u8 *)term
<span class="p_del">-						     + sizeof *term + n;</span>
<span class="p_add">+						     + sizeof(*term) + n;</span>
 			memcpy(term-&gt;media.bmControls, &amp;buffer[9], n);
 			memcpy(term-&gt;media.bmTransportModes, &amp;buffer[10+n], p);
 		}
 
 		if (buffer[7] != 0)
 			usb_string(udev, buffer[7], term-&gt;name,
<span class="p_del">-				   sizeof term-&gt;name);</span>
<span class="p_add">+				   sizeof(term-&gt;name));</span>
 		else if (UVC_ENTITY_TYPE(term) == UVC_ITT_CAMERA)
 			sprintf(term-&gt;name, &quot;Camera %u&quot;, buffer[3]);
 		else if (UVC_ENTITY_TYPE(term) == UVC_ITT_MEDIA_TRANSPORT_INPUT)
<span class="p_chunk">@@ -1101,7 +1101,7 @@</span> <span class="p_context"> static int uvc_parse_standard_control(struct uvc_device *dev,</span>
 
 		if (buffer[8] != 0)
 			usb_string(udev, buffer[8], term-&gt;name,
<span class="p_del">-				   sizeof term-&gt;name);</span>
<span class="p_add">+				   sizeof(term-&gt;name));</span>
 		else
 			sprintf(term-&gt;name, &quot;Output %u&quot;, buffer[3]);
 
<span class="p_chunk">@@ -1126,7 +1126,7 @@</span> <span class="p_context"> static int uvc_parse_standard_control(struct uvc_device *dev,</span>
 
 		if (buffer[5+p] != 0)
 			usb_string(udev, buffer[5+p], unit-&gt;name,
<span class="p_del">-				   sizeof unit-&gt;name);</span>
<span class="p_add">+				   sizeof(unit-&gt;name));</span>
 		else
 			sprintf(unit-&gt;name, &quot;Selector %u&quot;, buffer[3]);
 
<span class="p_chunk">@@ -1152,14 +1152,14 @@</span> <span class="p_context"> static int uvc_parse_standard_control(struct uvc_device *dev,</span>
 		unit-&gt;processing.wMaxMultiplier =
 			get_unaligned_le16(&amp;buffer[5]);
 		unit-&gt;processing.bControlSize = buffer[7];
<span class="p_del">-		unit-&gt;processing.bmControls = (__u8 *)unit + sizeof *unit;</span>
<span class="p_add">+		unit-&gt;processing.bmControls = (__u8 *)unit + sizeof(*unit);</span>
 		memcpy(unit-&gt;processing.bmControls, &amp;buffer[8], n);
 		if (dev-&gt;uvc_version &gt;= 0x0110)
 			unit-&gt;processing.bmVideoStandards = buffer[9+n];
 
 		if (buffer[8+n] != 0)
 			usb_string(udev, buffer[8+n], unit-&gt;name,
<span class="p_del">-				   sizeof unit-&gt;name);</span>
<span class="p_add">+				   sizeof(unit-&gt;name));</span>
 		else
 			sprintf(unit-&gt;name, &quot;Processing %u&quot;, buffer[3]);
 
<span class="p_chunk">@@ -1185,12 +1185,12 @@</span> <span class="p_context"> static int uvc_parse_standard_control(struct uvc_device *dev,</span>
 		unit-&gt;extension.bNumControls = buffer[20];
 		memcpy(unit-&gt;baSourceID, &amp;buffer[22], p);
 		unit-&gt;extension.bControlSize = buffer[22+p];
<span class="p_del">-		unit-&gt;extension.bmControls = (__u8 *)unit + sizeof *unit;</span>
<span class="p_add">+		unit-&gt;extension.bmControls = (__u8 *)unit + sizeof(*unit);</span>
 		memcpy(unit-&gt;extension.bmControls, &amp;buffer[23+p], n);
 
 		if (buffer[23+p+n] != 0)
 			usb_string(udev, buffer[23+p+n], unit-&gt;name,
<span class="p_del">-				   sizeof unit-&gt;name);</span>
<span class="p_add">+				   sizeof(unit-&gt;name));</span>
 		else
 			sprintf(unit-&gt;name, &quot;Extension %u&quot;, buffer[3]);
 
<span class="p_chunk">@@ -1766,7 +1766,7 @@</span> <span class="p_context"> static int uvc_register_video(struct uvc_device *dev,</span>
 	vdev-&gt;prio = &amp;stream-&gt;chain-&gt;prio;
 	if (stream-&gt;type == V4L2_BUF_TYPE_VIDEO_OUTPUT)
 		vdev-&gt;vfl_dir = VFL_DIR_TX;
<span class="p_del">-	strlcpy(vdev-&gt;name, dev-&gt;name, sizeof vdev-&gt;name);</span>
<span class="p_add">+	strlcpy(vdev-&gt;name, dev-&gt;name, sizeof(vdev-&gt;name));</span>
 
 	/* Set the driver data before calling video_register_device, otherwise
 	 * uvc_v4l2_open might race us.
<span class="p_chunk">@@ -1863,7 +1863,7 @@</span> <span class="p_context"> static int uvc_probe(struct usb_interface *intf,</span>
 				udev-&gt;devpath);
 
 	/* Allocate memory for the device and initialize it. */
<span class="p_del">-	if ((dev = kzalloc(sizeof *dev, GFP_KERNEL)) == NULL)</span>
<span class="p_add">+	if ((dev = kzalloc(sizeof(*dev), GFP_KERNEL)) == NULL)</span>
 		return -ENOMEM;
 
 	INIT_LIST_HEAD(&amp;dev-&gt;entities);
<span class="p_chunk">@@ -1880,9 +1880,9 @@</span> <span class="p_context"> static int uvc_probe(struct usb_interface *intf,</span>
 		    ? id-&gt;driver_info : uvc_quirks_param;
 
 	if (udev-&gt;product != NULL)
<span class="p_del">-		strlcpy(dev-&gt;name, udev-&gt;product, sizeof dev-&gt;name);</span>
<span class="p_add">+		strlcpy(dev-&gt;name, udev-&gt;product, sizeof(dev-&gt;name));</span>
 	else
<span class="p_del">-		snprintf(dev-&gt;name, sizeof dev-&gt;name,</span>
<span class="p_add">+		snprintf(dev-&gt;name, sizeof(dev-&gt;name),</span>
 			&quot;UVC Camera (%04x:%04x)&quot;,
 			le16_to_cpu(udev-&gt;descriptor.idVendor),
 			le16_to_cpu(udev-&gt;descriptor.idProduct));
<span class="p_header">diff --git a/drivers/media/usb/uvc/uvc_v4l2.c b/drivers/media/usb/uvc/uvc_v4l2.c</span>
<span class="p_header">index d7723ce772b3..ee929a04ff44 100644</span>
<span class="p_header">--- a/drivers/media/usb/uvc/uvc_v4l2.c</span>
<span class="p_header">+++ b/drivers/media/usb/uvc/uvc_v4l2.c</span>
<span class="p_chunk">@@ -40,13 +40,13 @@</span> <span class="p_context"> static int uvc_ioctl_ctrl_map(struct uvc_video_chain *chain,</span>
 	unsigned int size;
 	int ret;
 
<span class="p_del">-	map = kzalloc(sizeof *map, GFP_KERNEL);</span>
<span class="p_add">+	map = kzalloc(sizeof(*map), GFP_KERNEL);</span>
 	if (map == NULL)
 		return -ENOMEM;
 
 	map-&gt;id = xmap-&gt;id;
<span class="p_del">-	memcpy(map-&gt;name, xmap-&gt;name, sizeof map-&gt;name);</span>
<span class="p_del">-	memcpy(map-&gt;entity, xmap-&gt;entity, sizeof map-&gt;entity);</span>
<span class="p_add">+	memcpy(map-&gt;name, xmap-&gt;name, sizeof(map-&gt;name));</span>
<span class="p_add">+	memcpy(map-&gt;entity, xmap-&gt;entity, sizeof(map-&gt;entity));</span>
 	map-&gt;selector = xmap-&gt;selector;
 	map-&gt;size = xmap-&gt;size;
 	map-&gt;offset = xmap-&gt;offset;
<span class="p_chunk">@@ -214,7 +214,7 @@</span> <span class="p_context"> static int uvc_v4l2_try_format(struct uvc_streaming *stream,</span>
 		(100000000/interval)%10);
 
 	/* Set the format index, frame index and frame interval. */
<span class="p_del">-	memset(probe, 0, sizeof *probe);</span>
<span class="p_add">+	memset(probe, 0, sizeof(*probe));</span>
 	probe-&gt;bmHint = 1;	/* dwFrameInterval */
 	probe-&gt;bFormatIndex = format-&gt;index;
 	probe-&gt;bFrameIndex = frame-&gt;bFrameIndex;
<span class="p_chunk">@@ -338,7 +338,7 @@</span> <span class="p_context"> static int uvc_v4l2_get_streamparm(struct uvc_streaming *stream,</span>
 	denominator = 10000000;
 	uvc_simplify_fraction(&amp;numerator, &amp;denominator, 8, 333);
 
<span class="p_del">-	memset(parm, 0, sizeof *parm);</span>
<span class="p_add">+	memset(parm, 0, sizeof(*parm));</span>
 	parm-&gt;type = stream-&gt;type;
 
 	if (stream-&gt;type == V4L2_BUF_TYPE_VIDEO_CAPTURE) {
<span class="p_chunk">@@ -488,7 +488,7 @@</span> <span class="p_context"> static int uvc_v4l2_open(struct file *file)</span>
 		return ret;
 
 	/* Create the device handle. */
<span class="p_del">-	handle = kzalloc(sizeof *handle, GFP_KERNEL);</span>
<span class="p_add">+	handle = kzalloc(sizeof(*handle), GFP_KERNEL);</span>
 	if (handle == NULL) {
 		usb_autopm_put_interface(stream-&gt;dev-&gt;intf);
 		return -ENOMEM;
<span class="p_header">diff --git a/drivers/media/usb/uvc/uvc_video.c b/drivers/media/usb/uvc/uvc_video.c</span>
<span class="p_header">index 075a0fe77485..26fb5f130460 100644</span>
<span class="p_header">--- a/drivers/media/usb/uvc/uvc_video.c</span>
<span class="p_header">+++ b/drivers/media/usb/uvc/uvc_video.c</span>
<span class="p_chunk">@@ -191,7 +191,7 @@</span> <span class="p_context"> static int uvc_get_video_ctrl(struct uvc_streaming *stream,</span>
 		uvc_warn_once(stream-&gt;dev, UVC_WARN_MINMAX, &quot;UVC non &quot;
 			&quot;compliance - GET_MIN/MAX(PROBE) incorrectly &quot;
 			&quot;supported. Enabling workaround.\n&quot;);
<span class="p_del">-		memset(ctrl, 0, sizeof *ctrl);</span>
<span class="p_add">+		memset(ctrl, 0, sizeof(*ctrl));</span>
 		ctrl-&gt;wCompQuality = le16_to_cpup((__le16 *)data);
 		ret = 0;
 		goto out;
<span class="p_header">diff --git a/drivers/media/v4l2-core/v4l2-mem2mem.c b/drivers/media/v4l2-core/v4l2-mem2mem.c</span>
<span class="p_header">index 61d56c940f80..909a5ffc56d3 100644</span>
<span class="p_header">--- a/drivers/media/v4l2-core/v4l2-mem2mem.c</span>
<span class="p_header">+++ b/drivers/media/v4l2-core/v4l2-mem2mem.c</span>
<span class="p_chunk">@@ -666,7 +666,7 @@</span> <span class="p_context"> struct v4l2_m2m_dev *v4l2_m2m_init(const struct v4l2_m2m_ops *m2m_ops)</span>
 			WARN_ON(!m2m_ops-&gt;job_abort))
 		return ERR_PTR(-EINVAL);
 
<span class="p_del">-	m2m_dev = kzalloc(sizeof *m2m_dev, GFP_KERNEL);</span>
<span class="p_add">+	m2m_dev = kzalloc(sizeof(*m2m_dev), GFP_KERNEL);</span>
 	if (!m2m_dev)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -707,7 +707,7 @@</span> <span class="p_context"> struct v4l2_m2m_ctx *v4l2_m2m_ctx_init(struct v4l2_m2m_dev *m2m_dev,</span>
 	struct v4l2_m2m_queue_ctx *out_q_ctx, *cap_q_ctx;
 	int ret;
 
<span class="p_del">-	m2m_ctx = kzalloc(sizeof *m2m_ctx, GFP_KERNEL);</span>
<span class="p_add">+	m2m_ctx = kzalloc(sizeof(*m2m_ctx), GFP_KERNEL);</span>
 	if (!m2m_ctx)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/media/v4l2-core/videobuf2-dma-contig.c b/drivers/media/v4l2-core/videobuf2-dma-contig.c</span>
<span class="p_header">index c33127284cfe..a6164bdafa3f 100644</span>
<span class="p_header">--- a/drivers/media/v4l2-core/videobuf2-dma-contig.c</span>
<span class="p_header">+++ b/drivers/media/v4l2-core/videobuf2-dma-contig.c</span>
<span class="p_chunk">@@ -143,7 +143,7 @@</span> <span class="p_context"> static void *vb2_dc_alloc(void *alloc_ctx, unsigned long size,</span>
 	struct device *dev = conf-&gt;dev;
 	struct vb2_dc_buf *buf;
 
<span class="p_del">-	buf = kzalloc(sizeof *buf, GFP_KERNEL);</span>
<span class="p_add">+	buf = kzalloc(sizeof(*buf), GFP_KERNEL);</span>
 	if (!buf)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -497,7 +497,7 @@</span> <span class="p_context"> static void *vb2_dc_get_userptr(void *alloc_ctx, unsigned long vaddr,</span>
 		return ERR_PTR(-EINVAL);
 	}
 
<span class="p_del">-	buf = kzalloc(sizeof *buf, GFP_KERNEL);</span>
<span class="p_add">+	buf = kzalloc(sizeof(*buf), GFP_KERNEL);</span>
 	if (!buf)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_chunk">@@ -725,7 +725,7 @@</span> <span class="p_context"> void *vb2_dma_contig_init_ctx(struct device *dev)</span>
 {
 	struct vb2_dc_conf *conf;
 
<span class="p_del">-	conf = kzalloc(sizeof *conf, GFP_KERNEL);</span>
<span class="p_add">+	conf = kzalloc(sizeof(*conf), GFP_KERNEL);</span>
 	if (!conf)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/media/v4l2-core/videobuf2-dma-sg.c b/drivers/media/v4l2-core/videobuf2-dma-sg.c</span>
<span class="p_header">index 9985c89f0513..f6c431985cb5 100644</span>
<span class="p_header">--- a/drivers/media/v4l2-core/videobuf2-dma-sg.c</span>
<span class="p_header">+++ b/drivers/media/v4l2-core/videobuf2-dma-sg.c</span>
<span class="p_chunk">@@ -113,7 +113,7 @@</span> <span class="p_context"> static void *vb2_dma_sg_alloc(void *alloc_ctx, unsigned long size,</span>
 
 	if (WARN_ON(alloc_ctx == NULL))
 		return NULL;
<span class="p_del">-	buf = kzalloc(sizeof *buf, GFP_KERNEL);</span>
<span class="p_add">+	buf = kzalloc(sizeof(*buf), GFP_KERNEL);</span>
 	if (!buf)
 		return NULL;
 
<span class="p_chunk">@@ -237,7 +237,7 @@</span> <span class="p_context"> static void *vb2_dma_sg_get_userptr(void *alloc_ctx, unsigned long vaddr,</span>
 	struct frame_vector *vec;
 
 	dma_set_attr(DMA_ATTR_SKIP_CPU_SYNC, &amp;attrs);
<span class="p_del">-	buf = kzalloc(sizeof *buf, GFP_KERNEL);</span>
<span class="p_add">+	buf = kzalloc(sizeof(*buf), GFP_KERNEL);</span>
 	if (!buf)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/mfd/t7l66xb.c b/drivers/mfd/t7l66xb.c</span>
<span class="p_header">index 94bd89cb1f06..c53e79a7414b 100644</span>
<span class="p_header">--- a/drivers/mfd/t7l66xb.c</span>
<span class="p_header">+++ b/drivers/mfd/t7l66xb.c</span>
<span class="p_chunk">@@ -317,7 +317,7 @@</span> <span class="p_context"> static int t7l66xb_probe(struct platform_device *dev)</span>
 	if (!iomem)
 		return -EINVAL;
 
<span class="p_del">-	t7l66xb = kzalloc(sizeof *t7l66xb, GFP_KERNEL);</span>
<span class="p_add">+	t7l66xb = kzalloc(sizeof(*t7l66xb), GFP_KERNEL);</span>
 	if (!t7l66xb)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/mfd/tc6393xb.c b/drivers/mfd/tc6393xb.c</span>
<span class="p_header">index 1ecbfa40d1b3..c095c1255a5b 100644</span>
<span class="p_header">--- a/drivers/mfd/tc6393xb.c</span>
<span class="p_header">+++ b/drivers/mfd/tc6393xb.c</span>
<span class="p_chunk">@@ -622,7 +622,7 @@</span> <span class="p_context"> static int tc6393xb_probe(struct platform_device *dev)</span>
 	if (!iomem)
 		return -EINVAL;
 
<span class="p_del">-	tc6393xb = kzalloc(sizeof *tc6393xb, GFP_KERNEL);</span>
<span class="p_add">+	tc6393xb = kzalloc(sizeof(*tc6393xb), GFP_KERNEL);</span>
 	if (!tc6393xb) {
 		ret = -ENOMEM;
 		goto err_kzalloc;
<span class="p_header">diff --git a/drivers/mfd/tps65010.c b/drivers/mfd/tps65010.c</span>
<span class="p_header">index 83e615ed100a..ba9a19d90d8e 100644</span>
<span class="p_header">--- a/drivers/mfd/tps65010.c</span>
<span class="p_header">+++ b/drivers/mfd/tps65010.c</span>
<span class="p_chunk">@@ -162,7 +162,7 @@</span> <span class="p_context"> static void show_chgstatus(const char *label, u8 chgstatus)</span>
 {
 	char buf [100];
 
<span class="p_del">-	dbg_chgstat(buf, sizeof buf, chgstatus);</span>
<span class="p_add">+	dbg_chgstat(buf, sizeof(buf), chgstatus);</span>
 	pr_debug(&quot;%s: %s %s&quot;, DRIVER_NAME, label, buf);
 }
 
<span class="p_chunk">@@ -170,7 +170,7 @@</span> <span class="p_context"> static void show_regstatus(const char *label, u8 regstatus)</span>
 {
 	char buf [100];
 
<span class="p_del">-	dbg_regstat(buf, sizeof buf, regstatus);</span>
<span class="p_add">+	dbg_regstat(buf, sizeof(buf), regstatus);</span>
 	pr_debug(&quot;%s: %s %s&quot;, DRIVER_NAME, label, buf);
 }
 
<span class="p_chunk">@@ -178,7 +178,7 @@</span> <span class="p_context"> static void show_chgconfig(int por, const char *label, u8 chgconfig)</span>
 {
 	char buf [100];
 
<span class="p_del">-	dbg_chgconf(por, buf, sizeof buf, chgconfig);</span>
<span class="p_add">+	dbg_chgconf(por, buf, sizeof(buf), chgconfig);</span>
 	pr_debug(&quot;%s: %s %s&quot;, DRIVER_NAME, label, buf);
 }
 
<span class="p_chunk">@@ -223,22 +223,22 @@</span> <span class="p_context"> static int dbg_show(struct seq_file *s, void *_)</span>
 	 * that reading chgstat and regstat may ack IRQs...
 	 */
 	value = i2c_smbus_read_byte_data(tps-&gt;client, TPS_CHGCONFIG);
<span class="p_del">-	dbg_chgconf(tps-&gt;por, buf, sizeof buf, value);</span>
<span class="p_add">+	dbg_chgconf(tps-&gt;por, buf, sizeof(buf), value);</span>
 	seq_printf(s, &quot;chgconfig %s&quot;, buf);
 
 	value = i2c_smbus_read_byte_data(tps-&gt;client, TPS_CHGSTATUS);
<span class="p_del">-	dbg_chgstat(buf, sizeof buf, value);</span>
<span class="p_add">+	dbg_chgstat(buf, sizeof(buf), value);</span>
 	seq_printf(s, &quot;chgstat   %s&quot;, buf);
 	value = i2c_smbus_read_byte_data(tps-&gt;client, TPS_MASK1);
<span class="p_del">-	dbg_chgstat(buf, sizeof buf, value);</span>
<span class="p_add">+	dbg_chgstat(buf, sizeof(buf), value);</span>
 	seq_printf(s, &quot;mask1     %s&quot;, buf);
 	/* ignore ackint1 */
 
 	value = i2c_smbus_read_byte_data(tps-&gt;client, TPS_REGSTATUS);
<span class="p_del">-	dbg_regstat(buf, sizeof buf, value);</span>
<span class="p_add">+	dbg_regstat(buf, sizeof(buf), value);</span>
 	seq_printf(s, &quot;regstat   %s&quot;, buf);
 	value = i2c_smbus_read_byte_data(tps-&gt;client, TPS_MASK2);
<span class="p_del">-	dbg_regstat(buf, sizeof buf, value);</span>
<span class="p_add">+	dbg_regstat(buf, sizeof(buf), value);</span>
 	seq_printf(s, &quot;mask2     %s\n&quot;, buf);
 	/* ignore ackint2 */
 
<span class="p_header">diff --git a/drivers/misc/apds990x.c b/drivers/misc/apds990x.c</span>
<span class="p_header">index a3e789b85cc8..b8272a00f21e 100644</span>
<span class="p_header">--- a/drivers/misc/apds990x.c</span>
<span class="p_header">+++ b/drivers/misc/apds990x.c</span>
<span class="p_chunk">@@ -1061,7 +1061,7 @@</span> <span class="p_context"> static int apds990x_probe(struct i2c_client *client,</span>
 	struct apds990x_chip *chip;
 	int err;
 
<span class="p_del">-	chip = kzalloc(sizeof *chip, GFP_KERNEL);</span>
<span class="p_add">+	chip = kzalloc(sizeof(*chip), GFP_KERNEL);</span>
 	if (!chip)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/misc/bh1770glc.c b/drivers/misc/bh1770glc.c</span>
<span class="p_header">index 753d7ecdadaa..7813d13023a8 100644</span>
<span class="p_header">--- a/drivers/misc/bh1770glc.c</span>
<span class="p_header">+++ b/drivers/misc/bh1770glc.c</span>
<span class="p_chunk">@@ -1185,7 +1185,7 @@</span> <span class="p_context"> static int bh1770_probe(struct i2c_client *client,</span>
 	struct bh1770_chip *chip;
 	int err;
 
<span class="p_del">-	chip = devm_kzalloc(&amp;client-&gt;dev, sizeof *chip, GFP_KERNEL);</span>
<span class="p_add">+	chip = devm_kzalloc(&amp;client-&gt;dev, sizeof(*chip), GFP_KERNEL);</span>
 	if (!chip)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/misc/eeprom/at25.c b/drivers/misc/eeprom/at25.c</span>
<span class="p_header">index f850ef556bcc..462271dc4d38 100644</span>
<span class="p_header">--- a/drivers/misc/eeprom/at25.c</span>
<span class="p_header">+++ b/drivers/misc/eeprom/at25.c</span>
<span class="p_chunk">@@ -104,7 +104,7 @@</span> <span class="p_context"> at25_ee_read(</span>
 	}
 
 	spi_message_init(&amp;m);
<span class="p_del">-	memset(t, 0, sizeof t);</span>
<span class="p_add">+	memset(t, 0, sizeof(t));</span>
 
 	t[0].tx_buf = command;
 	t[0].len = at25-&gt;addrlen + 1;
<span class="p_header">diff --git a/drivers/misc/ibmasm/r_heartbeat.c b/drivers/misc/ibmasm/r_heartbeat.c</span>
<span class="p_header">index 232034f5da48..e222ea7348cf 100644</span>
<span class="p_header">--- a/drivers/misc/ibmasm/r_heartbeat.c</span>
<span class="p_header">+++ b/drivers/misc/ibmasm/r_heartbeat.c</span>
<span class="p_chunk">@@ -64,12 +64,12 @@</span> <span class="p_context"> int ibmasm_start_reverse_heartbeat(struct service_processor *sp, struct reverse_</span>
 	int times_failed = 0;
 	int result = 1;
 
<span class="p_del">-	cmd = ibmasm_new_command(sp, sizeof rhb_dot_cmd);</span>
<span class="p_add">+	cmd = ibmasm_new_command(sp, sizeof(rhb_dot_cmd));</span>
 	if (!cmd)
 		return -ENOMEM;
 
 	while (times_failed &lt; 3) {
<span class="p_del">-		memcpy(cmd-&gt;buffer, (void *)&amp;rhb_dot_cmd, sizeof rhb_dot_cmd);</span>
<span class="p_add">+		memcpy(cmd-&gt;buffer, (void *)&amp;rhb_dot_cmd, sizeof(rhb_dot_cmd));</span>
 		cmd-&gt;status = IBMASM_CMD_PENDING;
 		ibmasm_exec_command(sp, cmd);
 		ibmasm_wait_for_response(cmd, IBMASM_CMD_TIMEOUT_NORMAL);
<span class="p_header">diff --git a/drivers/mtd/devices/m25p80.c b/drivers/mtd/devices/m25p80.c</span>
<span class="p_header">index c9c3b7fa3051..22de50e167e6 100644</span>
<span class="p_header">--- a/drivers/mtd/devices/m25p80.c</span>
<span class="p_header">+++ b/drivers/mtd/devices/m25p80.c</span>
<span class="p_chunk">@@ -132,7 +132,7 @@</span> <span class="p_context"> static int m25p80_read(struct spi_nor *nor, loff_t from, size_t len,</span>
 	dummy /= 8;
 
 	spi_message_init(&amp;m);
<span class="p_del">-	memset(t, 0, (sizeof t));</span>
<span class="p_add">+	memset(t, 0, (sizeof(t)));</span>
 
 	flash-&gt;command[0] = nor-&gt;read_opcode;
 	m25p_addr2cmd(nor, from, flash-&gt;command);
<span class="p_header">diff --git a/drivers/mtd/devices/mtd_dataflash.c b/drivers/mtd/devices/mtd_dataflash.c</span>
<span class="p_header">index f9e9bd1cfaa0..0b17faccf6bf 100644</span>
<span class="p_header">--- a/drivers/mtd/devices/mtd_dataflash.c</span>
<span class="p_header">+++ b/drivers/mtd/devices/mtd_dataflash.c</span>
<span class="p_chunk">@@ -481,7 +481,7 @@</span> <span class="p_context"> static ssize_t otp_read(struct spi_device *spi, unsigned base,</span>
 	 */
 	scratch[0] = OP_READ_SECURITY;
 
<span class="p_del">-	memset(&amp;t, 0, sizeof t);</span>
<span class="p_add">+	memset(&amp;t, 0, sizeof(t));</span>
 	t.tx_buf = scratch;
 	t.rx_buf = scratch;
 	t.len = l;
<span class="p_chunk">@@ -567,7 +567,7 @@</span> <span class="p_context"> static int dataflash_write_user_otp(struct mtd_info *mtd,</span>
 
 	spi_message_init(&amp;m);
 
<span class="p_del">-	memset(&amp;t, 0, sizeof t);</span>
<span class="p_add">+	memset(&amp;t, 0, sizeof(t));</span>
 	t.tx_buf = scratch;
 	t.len = l;
 	spi_message_add_tail(&amp;t, &amp;m);
<span class="p_chunk">@@ -628,7 +628,7 @@</span> <span class="p_context"> static int add_dataflash_otp(struct spi_device *spi, char *name, int nr_pages,</span>
 	char				*otp_tag = &quot;&quot;;
 	int				err = 0;
 
<span class="p_del">-	priv = kzalloc(sizeof *priv, GFP_KERNEL);</span>
<span class="p_add">+	priv = kzalloc(sizeof(*priv), GFP_KERNEL);</span>
 	if (!priv)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/net/ethernet/marvell/skge.c b/drivers/net/ethernet/marvell/skge.c</span>
<span class="p_header">index 7173836fe361..fe289ef00d79 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/marvell/skge.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/marvell/skge.c</span>
<span class="p_chunk">@@ -3510,7 +3510,7 @@</span> <span class="p_context"> static const char *skge_board_name(const struct skge_hw *hw)</span>
 		if (skge_chips[i].id == hw-&gt;chip_id)
 			return skge_chips[i].name;
 
<span class="p_del">-	snprintf(buf, sizeof buf, &quot;chipid 0x%x&quot;, hw-&gt;chip_id);</span>
<span class="p_add">+	snprintf(buf, sizeof(buf), &quot;chipid 0x%x&quot;, hw-&gt;chip_id);</span>
 	return buf;
 }
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/alloc.c b/drivers/net/ethernet/mellanox/mlx4/alloc.c</span>
<span class="p_header">index 0c51c69f802f..055a83f5bec3 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/alloc.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/alloc.c</span>
<span class="p_chunk">@@ -632,7 +632,7 @@</span> <span class="p_context"> int mlx4_buf_alloc(struct mlx4_dev *dev, int size, int max_direct,</span>
 
 		if (BITS_PER_LONG == 64) {
 			struct page **pages;
<span class="p_del">-			pages = kmalloc(sizeof *pages * buf-&gt;nbufs, gfp);</span>
<span class="p_add">+			pages = kmalloc(sizeof(*pages) * buf-&gt;nbufs, gfp);</span>
 			if (!pages)
 				goto err_free;
 			for (i = 0; i &lt; buf-&gt;nbufs; ++i)
<span class="p_chunk">@@ -681,7 +681,7 @@</span> <span class="p_context"> static struct mlx4_db_pgdir *mlx4_alloc_db_pgdir(struct device *dma_device,</span>
 {
 	struct mlx4_db_pgdir *pgdir;
 
<span class="p_del">-	pgdir = kzalloc(sizeof *pgdir, gfp);</span>
<span class="p_add">+	pgdir = kzalloc(sizeof(*pgdir), gfp);</span>
 	if (!pgdir)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/cmd.c b/drivers/net/ethernet/mellanox/mlx4/cmd.c</span>
<span class="p_header">index d48d5793407d..d8ecfb2f10a5 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/cmd.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/cmd.c</span>
<span class="p_chunk">@@ -2633,7 +2633,7 @@</span> <span class="p_context"> struct mlx4_cmd_mailbox *mlx4_alloc_cmd_mailbox(struct mlx4_dev *dev)</span>
 {
 	struct mlx4_cmd_mailbox *mailbox;
 
<span class="p_del">-	mailbox = kmalloc(sizeof *mailbox, GFP_KERNEL);</span>
<span class="p_add">+	mailbox = kmalloc(sizeof(*mailbox), GFP_KERNEL);</span>
 	if (!mailbox)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/en_resources.c b/drivers/net/ethernet/mellanox/mlx4/en_resources.c</span>
<span class="p_header">index 12aab5a659d3..36209dd20bbd 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/en_resources.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/en_resources.c</span>
<span class="p_chunk">@@ -44,7 +44,7 @@</span> <span class="p_context"> void mlx4_en_fill_qp_context(struct mlx4_en_priv *priv, int size, int stride,</span>
 	struct mlx4_en_dev *mdev = priv-&gt;mdev;
 	struct net_device *dev = priv-&gt;dev;
 
<span class="p_del">-	memset(context, 0, sizeof *context);</span>
<span class="p_add">+	memset(context, 0, sizeof(*context));</span>
 	context-&gt;flags = cpu_to_be32(7 &lt;&lt; 16 | rss &lt;&lt; MLX4_RSS_QPC_FLAG_OFFSET);
 	context-&gt;pd = cpu_to_be32(mdev-&gt;priv_pdn);
 	context-&gt;mtu_msgmax = 0xff;
<span class="p_chunk">@@ -114,7 +114,7 @@</span> <span class="p_context"> int mlx4_en_map_buffer(struct mlx4_buf *buf)</span>
 	if (BITS_PER_LONG == 64 || buf-&gt;nbufs == 1)
 		return 0;
 
<span class="p_del">-	pages = kmalloc(sizeof *pages * buf-&gt;nbufs, GFP_KERNEL);</span>
<span class="p_add">+	pages = kmalloc(sizeof(*pages) * buf-&gt;nbufs, GFP_KERNEL);</span>
 	if (!pages)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/en_rx.c b/drivers/net/ethernet/mellanox/mlx4/en_rx.c</span>
<span class="p_header">index 41440b2b20a3..c3e2f137636d 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/en_rx.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/en_rx.c</span>
<span class="p_chunk">@@ -1125,7 +1125,7 @@</span> <span class="p_context"> static int mlx4_en_config_rss_qp(struct mlx4_en_priv *priv, int qpn,</span>
 	}
 	qp-&gt;event = mlx4_en_sqp_event;
 
<span class="p_del">-	memset(context, 0, sizeof *context);</span>
<span class="p_add">+	memset(context, 0, sizeof(*context));</span>
 	mlx4_en_fill_qp_context(priv, ring-&gt;actual_size, ring-&gt;stride, 0, 0,
 				qpn, ring-&gt;cqn, -1, context);
 	context-&gt;db_rec_addr = cpu_to_be64(ring-&gt;wqres.db.dma);
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/en_tx.c b/drivers/net/ethernet/mellanox/mlx4/en_tx.c</span>
<span class="p_header">index 4421bf5463f6..b6049af395e8 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/en_tx.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/en_tx.c</span>
<span class="p_chunk">@@ -637,7 +637,7 @@</span> <span class="p_context"> static void build_inline_wqe(struct mlx4_en_tx_desc *tx_desc,</span>
 			     int tx_ind, void *fragptr)
 {
 	struct mlx4_wqe_inline_seg *inl = &amp;tx_desc-&gt;inl;
<span class="p_del">-	int spc = MLX4_INLINE_ALIGN - CTRL_SIZE - sizeof *inl;</span>
<span class="p_add">+	int spc = MLX4_INLINE_ALIGN - CTRL_SIZE - sizeof(*inl);</span>
 	unsigned int hlen = skb_headlen(skb);
 
 	if (skb-&gt;len &lt;= spc) {
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/eq.c b/drivers/net/ethernet/mellanox/mlx4/eq.c</span>
<span class="p_header">index 4696053165f8..ce57631d3eaf 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/eq.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/eq.c</span>
<span class="p_chunk">@@ -259,7 +259,7 @@</span> <span class="p_context"> int mlx4_gen_pkey_eqe(struct mlx4_dev *dev, int slave, u8 port)</span>
 	if (!s_slave-&gt;active)
 		return 0;
 
<span class="p_del">-	memset(&amp;eqe, 0, sizeof eqe);</span>
<span class="p_add">+	memset(&amp;eqe, 0, sizeof(eqe));</span>
 
 	eqe.type = MLX4_EVENT_TYPE_PORT_MNG_CHG_EVENT;
 	eqe.subtype = MLX4_DEV_PMC_SUBTYPE_PKEY_TABLE;
<span class="p_chunk">@@ -276,7 +276,7 @@</span> <span class="p_context"> int mlx4_gen_guid_change_eqe(struct mlx4_dev *dev, int slave, u8 port)</span>
 	/*don&#39;t send if we don&#39;t have the that slave */
 	if (dev-&gt;persist-&gt;num_vfs &lt; slave)
 		return 0;
<span class="p_del">-	memset(&amp;eqe, 0, sizeof eqe);</span>
<span class="p_add">+	memset(&amp;eqe, 0, sizeof(eqe));</span>
 
 	eqe.type = MLX4_EVENT_TYPE_PORT_MNG_CHG_EVENT;
 	eqe.subtype = MLX4_DEV_PMC_SUBTYPE_GUID_INFO;
<span class="p_chunk">@@ -295,7 +295,7 @@</span> <span class="p_context"> int mlx4_gen_port_state_change_eqe(struct mlx4_dev *dev, int slave, u8 port,</span>
 	/*don&#39;t send if we don&#39;t have the that slave */
 	if (dev-&gt;persist-&gt;num_vfs &lt; slave)
 		return 0;
<span class="p_del">-	memset(&amp;eqe, 0, sizeof eqe);</span>
<span class="p_add">+	memset(&amp;eqe, 0, sizeof(eqe));</span>
 
 	eqe.type = MLX4_EVENT_TYPE_PORT_CHANGE;
 	eqe.subtype = port_subtype_change;
<span class="p_chunk">@@ -432,7 +432,7 @@</span> <span class="p_context"> int mlx4_gen_slaves_port_mgt_ev(struct mlx4_dev *dev, u8 port, int attr)</span>
 {
 	struct mlx4_eqe eqe;
 
<span class="p_del">-	memset(&amp;eqe, 0, sizeof eqe);</span>
<span class="p_add">+	memset(&amp;eqe, 0, sizeof(eqe));</span>
 
 	eqe.type = MLX4_EVENT_TYPE_PORT_MNG_CHG_EVENT;
 	eqe.subtype = MLX4_DEV_PMC_SUBTYPE_PORT_INFO;
<span class="p_chunk">@@ -721,7 +721,7 @@</span> <span class="p_context"> static int mlx4_eq_int(struct mlx4_dev *dev, struct mlx4_eq *eq)</span>
 			}
 			memcpy(&amp;priv-&gt;mfunc.master.comm_arm_bit_vector,
 			       eqe-&gt;event.comm_channel_arm.bit_vec,
<span class="p_del">-			       sizeof eqe-&gt;event.comm_channel_arm.bit_vec);</span>
<span class="p_add">+			       sizeof(eqe-&gt;event.comm_channel_arm.bit_vec));</span>
 			queue_work(priv-&gt;mfunc.master.comm_wq,
 				   &amp;priv-&gt;mfunc.master.comm_work);
 			break;
<span class="p_chunk">@@ -985,7 +985,7 @@</span> <span class="p_context"> static int mlx4_create_eq(struct mlx4_dev *dev, int nent,</span>
 	 */
 	npages = PAGE_ALIGN(eq-&gt;nent * dev-&gt;caps.eqe_size) / PAGE_SIZE;
 
<span class="p_del">-	eq-&gt;page_list = kmalloc(npages * sizeof *eq-&gt;page_list,</span>
<span class="p_add">+	eq-&gt;page_list = kmalloc(npages * sizeof(*eq-&gt;page_list),</span>
 				GFP_KERNEL);
 	if (!eq-&gt;page_list)
 		goto err_out;
<span class="p_chunk">@@ -993,7 +993,7 @@</span> <span class="p_context"> static int mlx4_create_eq(struct mlx4_dev *dev, int nent,</span>
 	for (i = 0; i &lt; npages; ++i)
 		eq-&gt;page_list[i].buf = NULL;
 
<span class="p_del">-	dma_list = kmalloc(npages * sizeof *dma_list, GFP_KERNEL);</span>
<span class="p_add">+	dma_list = kmalloc(npages * sizeof(*dma_list), GFP_KERNEL);</span>
 	if (!dma_list)
 		goto err_out_free;
 
<span class="p_chunk">@@ -1162,7 +1162,7 @@</span> <span class="p_context"> int mlx4_alloc_eq_table(struct mlx4_dev *dev)</span>
 	struct mlx4_priv *priv = mlx4_priv(dev);
 
 	priv-&gt;eq_table.eq = kcalloc(dev-&gt;caps.num_eqs - dev-&gt;caps.reserved_eqs,
<span class="p_del">-				    sizeof *priv-&gt;eq_table.eq, GFP_KERNEL);</span>
<span class="p_add">+				    sizeof(*priv-&gt;eq_table.eq), GFP_KERNEL);</span>
 	if (!priv-&gt;eq_table.eq)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1181,7 +1181,7 @@</span> <span class="p_context"> int mlx4_init_eq_table(struct mlx4_dev *dev)</span>
 	int i;
 
 	priv-&gt;eq_table.uar_map = kcalloc(mlx4_num_eq_uar(dev),
<span class="p_del">-					 sizeof *priv-&gt;eq_table.uar_map,</span>
<span class="p_add">+					 sizeof(*priv-&gt;eq_table.uar_map),</span>
 					 GFP_KERNEL);
 	if (!priv-&gt;eq_table.uar_map) {
 		err = -ENOMEM;
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/icm.c b/drivers/net/ethernet/mellanox/mlx4/icm.c</span>
<span class="p_header">index 2a9dd460a95f..84fe587d5dfe 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/icm.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/icm.c</span>
<span class="p_chunk">@@ -396,7 +396,7 @@</span> <span class="p_context"> int mlx4_init_icm_table(struct mlx4_dev *dev, struct mlx4_icm_table *table,</span>
 	obj_per_chunk = MLX4_TABLE_CHUNK_SIZE / obj_size;
 	num_icm = (nobj + obj_per_chunk - 1) / obj_per_chunk;
 
<span class="p_del">-	table-&gt;icm      = kcalloc(num_icm, sizeof *table-&gt;icm, GFP_KERNEL);</span>
<span class="p_add">+	table-&gt;icm      = kcalloc(num_icm, sizeof(*table-&gt;icm), GFP_KERNEL);</span>
 	if (!table-&gt;icm)
 		return -ENOMEM;
 	table-&gt;virt     = virt;
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/intf.c b/drivers/net/ethernet/mellanox/mlx4/intf.c</span>
<span class="p_header">index 0472941af820..96c97b0d6541 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/intf.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/intf.c</span>
<span class="p_chunk">@@ -52,7 +52,7 @@</span> <span class="p_context"> static void mlx4_add_device(struct mlx4_interface *intf, struct mlx4_priv *priv)</span>
 {
 	struct mlx4_device_context *dev_ctx;
 
<span class="p_del">-	dev_ctx = kmalloc(sizeof *dev_ctx, GFP_KERNEL);</span>
<span class="p_add">+	dev_ctx = kmalloc(sizeof(*dev_ctx), GFP_KERNEL);</span>
 	if (!dev_ctx)
 		return;
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/main.c b/drivers/net/ethernet/mellanox/mlx4/main.c</span>
<span class="p_header">index f1b6d219e445..f58f65ef2f94 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/main.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/main.c</span>
<span class="p_chunk">@@ -2294,7 +2294,7 @@</span> <span class="p_context"> static int mlx4_init_hca(struct mlx4_dev *dev)</span>
 		dev-&gt;caps.rx_checksum_flags_port[2] = params.rx_csum_flags_port_2;
 	}
 	priv-&gt;eq_table.inta_pin = adapter.inta_pin;
<span class="p_del">-	memcpy(dev-&gt;board_id, adapter.board_id, sizeof dev-&gt;board_id);</span>
<span class="p_add">+	memcpy(dev-&gt;board_id, adapter.board_id, sizeof(dev-&gt;board_id));</span>
 
 	return 0;
 
<span class="p_chunk">@@ -2766,7 +2766,7 @@</span> <span class="p_context"> static void mlx4_enable_msi_x(struct mlx4_dev *dev)</span>
 		if (nreq &gt; MAX_MSIX)
 			nreq = MAX_MSIX;
 
<span class="p_del">-		entries = kcalloc(nreq, sizeof *entries, GFP_KERNEL);</span>
<span class="p_add">+		entries = kcalloc(nreq, sizeof(*entries), GFP_KERNEL);</span>
 		if (!entries)
 			goto no_msi;
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/mcg.c b/drivers/net/ethernet/mellanox/mlx4/mcg.c</span>
<span class="p_header">index 1d4e2e054647..bc2365da8922 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/mcg.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/mcg.c</span>
<span class="p_chunk">@@ -163,7 +163,7 @@</span> <span class="p_context"> static int new_steering_entry(struct mlx4_dev *dev, u8 port,</span>
 		return -EINVAL;
 
 	s_steer = &amp;mlx4_priv(dev)-&gt;steer[port - 1];
<span class="p_del">-	new_entry = kzalloc(sizeof *new_entry, GFP_KERNEL);</span>
<span class="p_add">+	new_entry = kzalloc(sizeof(*new_entry), GFP_KERNEL);</span>
 	if (!new_entry)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -176,7 +176,7 @@</span> <span class="p_context"> static int new_steering_entry(struct mlx4_dev *dev, u8 port,</span>
 	 */
 	pqp = get_promisc_qp(dev, port, steer, qpn);
 	if (pqp) {
<span class="p_del">-		dqp = kmalloc(sizeof *dqp, GFP_KERNEL);</span>
<span class="p_add">+		dqp = kmalloc(sizeof(*dqp), GFP_KERNEL);</span>
 		if (!dqp) {
 			err = -ENOMEM;
 			goto out_alloc;
<span class="p_chunk">@@ -275,7 +275,7 @@</span> <span class="p_context"> static int existing_steering_entry(struct mlx4_dev *dev, u8 port,</span>
 	}
 
 	/* add the qp as a duplicate on this index */
<span class="p_del">-	dqp = kmalloc(sizeof *dqp, GFP_KERNEL);</span>
<span class="p_add">+	dqp = kmalloc(sizeof(*dqp), GFP_KERNEL);</span>
 	if (!dqp)
 		return -ENOMEM;
 	dqp-&gt;qpn = qpn;
<span class="p_chunk">@@ -444,7 +444,7 @@</span> <span class="p_context"> static int add_promisc_qp(struct mlx4_dev *dev, u8 port,</span>
 		goto out_mutex;
 	}
 
<span class="p_del">-	pqp = kmalloc(sizeof *pqp, GFP_KERNEL);</span>
<span class="p_add">+	pqp = kmalloc(sizeof(*pqp), GFP_KERNEL);</span>
 	if (!pqp) {
 		err = -ENOMEM;
 		goto out_mutex;
<span class="p_chunk">@@ -515,7 +515,7 @@</span> <span class="p_context"> static int add_promisc_qp(struct mlx4_dev *dev, u8 port,</span>
 	/* add the new qpn to list of promisc qps */
 	list_add_tail(&amp;pqp-&gt;list, &amp;s_steer-&gt;promisc_qps[steer]);
 	/* now need to add all the promisc qps to default entry */
<span class="p_del">-	memset(mgm, 0, sizeof *mgm);</span>
<span class="p_add">+	memset(mgm, 0, sizeof(*mgm));</span>
 	members_count = 0;
 	list_for_each_entry(dqp, &amp;s_steer-&gt;promisc_qps[steer], list) {
 		if (members_count == dev-&gt;caps.num_qp_per_mgm) {
<span class="p_chunk">@@ -1137,7 +1137,7 @@</span> <span class="p_context"> int mlx4_qp_attach_common(struct mlx4_dev *dev, struct mlx4_qp *qp, u8 gid[16],</span>
 		index += dev-&gt;caps.num_mgms;
 
 		new_entry = 1;
<span class="p_del">-		memset(mgm, 0, sizeof *mgm);</span>
<span class="p_add">+		memset(mgm, 0, sizeof(*mgm));</span>
 		memcpy(mgm-&gt;gid, gid, 16);
 	}
 
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/mr.c b/drivers/net/ethernet/mellanox/mlx4/mr.c</span>
<span class="p_header">index 93195191f45b..0cb3d6a96c3a 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/mr.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/mr.c</span>
<span class="p_chunk">@@ -108,7 +108,7 @@</span> <span class="p_context"> static int mlx4_buddy_init(struct mlx4_buddy *buddy, int max_order)</span>
 
 	buddy-&gt;bits = kcalloc(buddy-&gt;max_order + 1, sizeof (long *),
 			      GFP_KERNEL);
<span class="p_del">-	buddy-&gt;num_free = kcalloc((buddy-&gt;max_order + 1), sizeof *buddy-&gt;num_free,</span>
<span class="p_add">+	buddy-&gt;num_free = kcalloc((buddy-&gt;max_order + 1), sizeof(*buddy-&gt;num_free),</span>
 				  GFP_KERNEL);
 	if (!buddy-&gt;bits || !buddy-&gt;num_free)
 		goto err_out;
<span class="p_chunk">@@ -796,7 +796,7 @@</span> <span class="p_context"> int mlx4_buf_write_mtt(struct mlx4_dev *dev, struct mlx4_mtt *mtt,</span>
 	int err;
 	int i;
 
<span class="p_del">-	page_list = kmalloc(buf-&gt;npages * sizeof *page_list,</span>
<span class="p_add">+	page_list = kmalloc(buf-&gt;npages * sizeof(*page_list),</span>
 			    gfp);
 	if (!page_list)
 		return -ENOMEM;
<span class="p_chunk">@@ -1056,7 +1056,7 @@</span> <span class="p_context"> int mlx4_fmr_alloc(struct mlx4_dev *dev, u32 pd, u32 access, int max_pages,</span>
 		return -EINVAL;
 
 	/* All MTTs must fit in the same page */
<span class="p_del">-	if (max_pages * sizeof *fmr-&gt;mtts &gt; PAGE_SIZE)</span>
<span class="p_add">+	if (max_pages * sizeof(*fmr-&gt;mtts) &gt; PAGE_SIZE)</span>
 		return -EINVAL;
 
 	fmr-&gt;page_shift = page_shift;
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/qp.c b/drivers/net/ethernet/mellanox/mlx4/qp.c</span>
<span class="p_header">index d1cd9c32a9ae..0b9777864df4 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/qp.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/qp.c</span>
<span class="p_chunk">@@ -174,7 +174,7 @@</span> <span class="p_context"> static int __mlx4_qp_modify(struct mlx4_dev *dev, struct mlx4_mtt *mtt,</span>
 			cpu_to_be16(mlx4_qp_roce_entropy(dev, qp-&gt;qpn));
 
 	*(__be32 *) mailbox-&gt;buf = cpu_to_be32(optpar);
<span class="p_del">-	memcpy(mailbox-&gt;buf + 8, context, sizeof *context);</span>
<span class="p_add">+	memcpy(mailbox-&gt;buf + 8, context, sizeof(*context));</span>
 
 	((struct mlx4_qp_context *) (mailbox-&gt;buf + 8))-&gt;local_qpn =
 		cpu_to_be32(qp-&gt;qpn);
<span class="p_chunk">@@ -888,7 +888,7 @@</span> <span class="p_context"> int mlx4_qp_query(struct mlx4_dev *dev, struct mlx4_qp *qp,</span>
 			   MLX4_CMD_QUERY_QP, MLX4_CMD_TIME_CLASS_A,
 			   MLX4_CMD_WRAPPED);
 	if (!err)
<span class="p_del">-		memcpy(context, mailbox-&gt;buf + 8, sizeof *context);</span>
<span class="p_add">+		memcpy(context, mailbox-&gt;buf + 8, sizeof(*context));</span>
 
 	mlx4_free_cmd_mailbox(dev, mailbox);
 	return err;
<span class="p_header">diff --git a/drivers/net/ethernet/mellanox/mlx4/resource_tracker.c b/drivers/net/ethernet/mellanox/mlx4/resource_tracker.c</span>
<span class="p_header">index b46dbe29ef6c..21d551191478 100644</span>
<span class="p_header">--- a/drivers/net/ethernet/mellanox/mlx4/resource_tracker.c</span>
<span class="p_header">+++ b/drivers/net/ethernet/mellanox/mlx4/resource_tracker.c</span>
<span class="p_chunk">@@ -981,7 +981,7 @@</span> <span class="p_context"> static struct res_common *alloc_qp_tr(int id)</span>
 {
 	struct res_qp *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -999,7 +999,7 @@</span> <span class="p_context"> static struct res_common *alloc_mtt_tr(int id, int order)</span>
 {
 	struct res_mtt *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1015,7 +1015,7 @@</span> <span class="p_context"> static struct res_common *alloc_mpt_tr(int id, int key)</span>
 {
 	struct res_mpt *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1030,7 +1030,7 @@</span> <span class="p_context"> static struct res_common *alloc_eq_tr(int id)</span>
 {
 	struct res_eq *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1044,7 +1044,7 @@</span> <span class="p_context"> static struct res_common *alloc_cq_tr(int id)</span>
 {
 	struct res_cq *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1059,7 +1059,7 @@</span> <span class="p_context"> static struct res_common *alloc_srq_tr(int id)</span>
 {
 	struct res_srq *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1074,7 +1074,7 @@</span> <span class="p_context"> static struct res_common *alloc_counter_tr(int id, int port)</span>
 {
 	struct res_counter *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1089,7 +1089,7 @@</span> <span class="p_context"> static struct res_common *alloc_xrcdn_tr(int id)</span>
 {
 	struct res_xrcdn *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1103,7 +1103,7 @@</span> <span class="p_context"> static struct res_common *alloc_fs_rule_tr(u64 id, int qpn)</span>
 {
 	struct res_fs_rule *ret;
 
<span class="p_del">-	ret = kzalloc(sizeof *ret, GFP_KERNEL);</span>
<span class="p_add">+	ret = kzalloc(sizeof(*ret), GFP_KERNEL);</span>
 	if (!ret)
 		return NULL;
 
<span class="p_chunk">@@ -1215,7 +1215,7 @@</span> <span class="p_context"> static int add_res_range(struct mlx4_dev *dev, int slave, u64 base, int count,</span>
 	struct mlx4_resource_tracker *tracker = &amp;priv-&gt;mfunc.master.res_tracker;
 	struct rb_root *root = &amp;tracker-&gt;res_tree[type];
 
<span class="p_del">-	res_arr = kzalloc(count * sizeof *res_arr, GFP_KERNEL);</span>
<span class="p_add">+	res_arr = kzalloc(count * sizeof(*res_arr), GFP_KERNEL);</span>
 	if (!res_arr)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1967,7 +1967,7 @@</span> <span class="p_context"> static int mac_add_to_slave(struct mlx4_dev *dev, int slave, u64 mac, int port,</span>
 
 	if (mlx4_grant_resource(dev, slave, RES_MAC, 1, port))
 		return -EINVAL;
<span class="p_del">-	res = kzalloc(sizeof *res, GFP_KERNEL);</span>
<span class="p_add">+	res = kzalloc(sizeof(*res), GFP_KERNEL);</span>
 	if (!res) {
 		mlx4_release_resource(dev, slave, RES_MAC, 1, port);
 		return -ENOMEM;
<span class="p_chunk">@@ -3959,7 +3959,7 @@</span> <span class="p_context"> static int add_mcg_res(struct mlx4_dev *dev, int slave, struct res_qp *rqp,</span>
 	struct res_gid *res;
 	int err;
 
<span class="p_del">-	res = kzalloc(sizeof *res, GFP_KERNEL);</span>
<span class="p_add">+	res = kzalloc(sizeof(*res), GFP_KERNEL);</span>
 	if (!res)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/net/usb/mcs7830.c b/drivers/net/usb/mcs7830.c</span>
<span class="p_header">index 4f345bd4e6e2..e44f50322a3a 100644</span>
<span class="p_header">--- a/drivers/net/usb/mcs7830.c</span>
<span class="p_header">+++ b/drivers/net/usb/mcs7830.c</span>
<span class="p_chunk">@@ -344,7 +344,7 @@</span> <span class="p_context"> static void mcs7830_hif_update_multicast_hash(struct usbnet *dev)</span>
 {
 	struct mcs7830_data *data = mcs7830_get_data(dev);
 	mcs7830_set_reg_async(dev, HIF_REG_MULTICAST_HASH,
<span class="p_del">-				sizeof data-&gt;multi_filter,</span>
<span class="p_add">+				sizeof(data-&gt;multi_filter),</span>
 				data-&gt;multi_filter);
 }
 
<span class="p_chunk">@@ -361,7 +361,7 @@</span> <span class="p_context"> static void mcs7830_data_set_multicast(struct net_device *net)</span>
 	struct usbnet *dev = netdev_priv(net);
 	struct mcs7830_data *data = mcs7830_get_data(dev);
 
<span class="p_del">-	memset(data-&gt;multi_filter, 0, sizeof data-&gt;multi_filter);</span>
<span class="p_add">+	memset(data-&gt;multi_filter, 0, sizeof(data-&gt;multi_filter));</span>
 
 	data-&gt;config = HIF_REG_CONFIG_TXENABLE;
 
<span class="p_header">diff --git a/drivers/net/usb/net1080.c b/drivers/net/usb/net1080.c</span>
<span class="p_header">index 4cbdb1307f3e..3f718c0123c3 100644</span>
<span class="p_header">--- a/drivers/net/usb/net1080.c</span>
<span class="p_header">+++ b/drivers/net/usb/net1080.c</span>
<span class="p_chunk">@@ -111,7 +111,7 @@</span> <span class="p_context"> nc_vendor_read(struct usbnet *dev, u8 req, u8 regnum, u16 *retval_ptr)</span>
 				     USB_DIR_IN | USB_TYPE_VENDOR |
 				     USB_RECIP_DEVICE,
 				     0, regnum, retval_ptr,
<span class="p_del">-				     sizeof *retval_ptr);</span>
<span class="p_add">+				     sizeof(*retval_ptr));</span>
 	if (status &gt; 0)
 		status = 0;
 	if (!status)
<span class="p_chunk">@@ -399,8 +399,8 @@</span> <span class="p_context"> static int net1080_rx_fixup(struct usbnet *dev, struct sk_buff *skb)</span>
 	skb_pull(skb, hdr_len);
 
 	trailer = (struct nc_trailer *)
<span class="p_del">-		(skb-&gt;data + skb-&gt;len - sizeof *trailer);</span>
<span class="p_del">-	skb_trim(skb, skb-&gt;len - sizeof *trailer);</span>
<span class="p_add">+		(skb-&gt;data + skb-&gt;len - sizeof(*trailer));</span>
<span class="p_add">+	skb_trim(skb, skb-&gt;len - sizeof(*trailer));</span>
 
 	if ((packet_len &amp; 0x01) == 0) {
 		if (skb-&gt;data [packet_len] != PAD_BYTE) {
<span class="p_chunk">@@ -475,15 +475,15 @@</span> <span class="p_context"> net1080_tx_fixup(struct usbnet *dev, struct sk_buff *skb, gfp_t flags)</span>
 
 encapsulate:
 	/* header first */
<span class="p_del">-	header = (struct nc_header *) skb_push(skb, sizeof *header);</span>
<span class="p_del">-	header-&gt;hdr_len = cpu_to_le16(sizeof (*header));</span>
<span class="p_add">+	header = (struct nc_header *) skb_push(skb, sizeof(*header));</span>
<span class="p_add">+	header-&gt;hdr_len = cpu_to_le16(sizeof(*header));</span>
 	header-&gt;packet_len = cpu_to_le16(len);
 	header-&gt;packet_id = cpu_to_le16((u16)dev-&gt;xid++);
 
 	/* maybe pad; then trailer */
<span class="p_del">-	if (!((skb-&gt;len + sizeof *trailer) &amp; 0x01))</span>
<span class="p_add">+	if (!((skb-&gt;len + sizeof(*trailer)) &amp; 0x01))</span>
 		*skb_put(skb, 1) = PAD_BYTE;
<span class="p_del">-	trailer = (struct nc_trailer *) skb_put(skb, sizeof *trailer);</span>
<span class="p_add">+	trailer = (struct nc_trailer *) skb_put(skb, sizeof(*trailer));</span>
 	put_unaligned(header-&gt;packet_id, &amp;trailer-&gt;packet_id);
 #if 0
 	netdev_dbg(dev-&gt;net, &quot;frame &gt;tx h %d p %d id %d\n&quot;,
<span class="p_header">diff --git a/drivers/net/usb/pegasus.c b/drivers/net/usb/pegasus.c</span>
<span class="p_header">index f84080215915..b12728aa5ab7 100644</span>
<span class="p_header">--- a/drivers/net/usb/pegasus.c</span>
<span class="p_header">+++ b/drivers/net/usb/pegasus.c</span>
<span class="p_chunk">@@ -927,7 +927,7 @@</span> <span class="p_context"> static inline void pegasus_reset_wol(struct net_device *dev)</span>
 {
 	struct ethtool_wolinfo wol;
 
<span class="p_del">-	memset(&amp;wol, 0, sizeof wol);</span>
<span class="p_add">+	memset(&amp;wol, 0, sizeof(wol));</span>
 	(void) pegasus_set_wol(dev, &amp;wol);
 }
 
<span class="p_header">diff --git a/drivers/net/usb/rndis_host.c b/drivers/net/usb/rndis_host.c</span>
<span class="p_header">index 524a47a28120..a4c6cc08d221 100644</span>
<span class="p_header">--- a/drivers/net/usb/rndis_host.c</span>
<span class="p_header">+++ b/drivers/net/usb/rndis_host.c</span>
<span class="p_chunk">@@ -188,14 +188,14 @@</span> <span class="p_context"> int rndis_command(struct usbnet *dev, struct rndis_msg_hdr *buf, int buflen)</span>
 				struct rndis_keepalive_c *msg = (void *)buf;
 
 				msg-&gt;msg_type = cpu_to_le32(RNDIS_MSG_KEEPALIVE_C);
<span class="p_del">-				msg-&gt;msg_len = cpu_to_le32(sizeof *msg);</span>
<span class="p_add">+				msg-&gt;msg_len = cpu_to_le32(sizeof(*msg));</span>
 				msg-&gt;status = cpu_to_le32(RNDIS_STATUS_SUCCESS);
 				retval = usb_control_msg(dev-&gt;udev,
 					usb_sndctrlpipe(dev-&gt;udev, 0),
 					USB_CDC_SEND_ENCAPSULATED_COMMAND,
 					USB_TYPE_CLASS | USB_RECIP_INTERFACE,
 					0, master_ifnum,
<span class="p_del">-					msg, sizeof *msg,</span>
<span class="p_add">+					msg, sizeof(*msg),</span>
 					RNDIS_CONTROL_TIMEOUT_MS);
 				if (unlikely(retval &lt; 0))
 					dev_dbg(&amp;info-&gt;control-&gt;dev,
<span class="p_chunk">@@ -251,9 +251,9 @@</span> <span class="p_context"> static int rndis_query(struct usbnet *dev, struct usb_interface *intf,</span>
 
 	u.buf = buf;
 
<span class="p_del">-	memset(u.get, 0, sizeof *u.get + in_len);</span>
<span class="p_add">+	memset(u.get, 0, sizeof(*u.get) + in_len);</span>
 	u.get-&gt;msg_type = cpu_to_le32(RNDIS_MSG_QUERY);
<span class="p_del">-	u.get-&gt;msg_len = cpu_to_le32(sizeof *u.get + in_len);</span>
<span class="p_add">+	u.get-&gt;msg_len = cpu_to_le32(sizeof(*u.get) + in_len);</span>
 	u.get-&gt;oid = cpu_to_le32(oid);
 	u.get-&gt;len = cpu_to_le32(in_len);
 	u.get-&gt;offset = cpu_to_le32(20);
<span class="p_chunk">@@ -326,7 +326,7 @@</span> <span class="p_context"> generic_rndis_bind(struct usbnet *dev, struct usb_interface *intf, int flags)</span>
 		goto fail;
 
 	u.init-&gt;msg_type = cpu_to_le32(RNDIS_MSG_INIT);
<span class="p_del">-	u.init-&gt;msg_len = cpu_to_le32(sizeof *u.init);</span>
<span class="p_add">+	u.init-&gt;msg_len = cpu_to_le32(sizeof(*u.init));</span>
 	u.init-&gt;major_version = cpu_to_le32(1);
 	u.init-&gt;minor_version = cpu_to_le32(0);
 
<span class="p_chunk">@@ -395,7 +395,7 @@</span> <span class="p_context"> generic_rndis_bind(struct usbnet *dev, struct usb_interface *intf, int flags)</span>
 
 	/* Check physical medium */
 	phym = NULL;
<span class="p_del">-	reply_len = sizeof *phym;</span>
<span class="p_add">+	reply_len = sizeof(*phym);</span>
 	retval = rndis_query(dev, intf, u.buf,
 			     RNDIS_OID_GEN_PHYSICAL_MEDIUM,
 			     0, (void **) &amp;phym, &amp;reply_len);
<span class="p_chunk">@@ -431,13 +431,13 @@</span> <span class="p_context"> generic_rndis_bind(struct usbnet *dev, struct usb_interface *intf, int flags)</span>
 	memcpy(net-&gt;dev_addr, bp, ETH_ALEN);
 
 	/* set a nonzero filter to enable data transfers */
<span class="p_del">-	memset(u.set, 0, sizeof *u.set);</span>
<span class="p_add">+	memset(u.set, 0, sizeof(*u.set));</span>
 	u.set-&gt;msg_type = cpu_to_le32(RNDIS_MSG_SET);
<span class="p_del">-	u.set-&gt;msg_len = cpu_to_le32(4 + sizeof *u.set);</span>
<span class="p_add">+	u.set-&gt;msg_len = cpu_to_le32(4 + sizeof(*u.set));</span>
 	u.set-&gt;oid = cpu_to_le32(RNDIS_OID_GEN_CURRENT_PACKET_FILTER);
 	u.set-&gt;len = cpu_to_le32(4);
<span class="p_del">-	u.set-&gt;offset = cpu_to_le32((sizeof *u.set) - 8);</span>
<span class="p_del">-	*(__le32 *)(u.buf + sizeof *u.set) = cpu_to_le32(RNDIS_DEFAULT_FILTER);</span>
<span class="p_add">+	u.set-&gt;offset = cpu_to_le32((sizeof(*u.set)) - 8);</span>
<span class="p_add">+	*(__le32 *)(u.buf + sizeof(*u.set)) = cpu_to_le32(RNDIS_DEFAULT_FILTER);</span>
 
 	retval = rndis_command(dev, u.header, CONTROL_BUFFER_SIZE);
 	if (unlikely(retval &lt; 0)) {
<span class="p_chunk">@@ -451,9 +451,9 @@</span> <span class="p_context"> generic_rndis_bind(struct usbnet *dev, struct usb_interface *intf, int flags)</span>
 	return retval;
 
 halt_fail_and_release:
<span class="p_del">-	memset(u.halt, 0, sizeof *u.halt);</span>
<span class="p_add">+	memset(u.halt, 0, sizeof(*u.halt));</span>
 	u.halt-&gt;msg_type = cpu_to_le32(RNDIS_MSG_HALT);
<span class="p_del">-	u.halt-&gt;msg_len = cpu_to_le32(sizeof *u.halt);</span>
<span class="p_add">+	u.halt-&gt;msg_len = cpu_to_le32(sizeof(*u.halt));</span>
 	(void) rndis_command(dev, (void *)u.halt, CONTROL_BUFFER_SIZE);
 fail_and_release:
 	usb_set_intfdata(info-&gt;data, NULL);
<span class="p_chunk">@@ -478,7 +478,7 @@</span> <span class="p_context"> void rndis_unbind(struct usbnet *dev, struct usb_interface *intf)</span>
 	halt = kzalloc(CONTROL_BUFFER_SIZE, GFP_KERNEL);
 	if (halt) {
 		halt-&gt;msg_type = cpu_to_le32(RNDIS_MSG_HALT);
<span class="p_del">-		halt-&gt;msg_len = cpu_to_le32(sizeof *halt);</span>
<span class="p_add">+		halt-&gt;msg_len = cpu_to_le32(sizeof(*halt));</span>
 		(void) rndis_command(dev, (void *)halt, CONTROL_BUFFER_SIZE);
 		kfree(halt);
 	}
<span class="p_chunk">@@ -519,7 +519,7 @@</span> <span class="p_context"> int rndis_rx_fixup(struct usbnet *dev, struct sk_buff *skb)</span>
 		skb_pull(skb, 8 + data_offset);
 
 		/* at most one packet left? */
<span class="p_del">-		if (likely((data_len - skb-&gt;len) &lt;= sizeof *hdr)) {</span>
<span class="p_add">+		if (likely((data_len - skb-&gt;len) &lt;= sizeof(*hdr))) {</span>
 			skb_trim(skb, data_len);
 			break;
 		}
<span class="p_chunk">@@ -528,7 +528,7 @@</span> <span class="p_context"> int rndis_rx_fixup(struct usbnet *dev, struct sk_buff *skb)</span>
 		skb2 = skb_clone(skb, GFP_ATOMIC);
 		if (unlikely(!skb2))
 			break;
<span class="p_del">-		skb_pull(skb, msg_len - sizeof *hdr);</span>
<span class="p_add">+		skb_pull(skb, msg_len - sizeof(*hdr));</span>
 		skb_trim(skb2, data_len);
 		usbnet_skb_return(dev, skb2);
 	}
<span class="p_chunk">@@ -549,13 +549,13 @@</span> <span class="p_context"> rndis_tx_fixup(struct usbnet *dev, struct sk_buff *skb, gfp_t flags)</span>
 		int	room = skb_headroom(skb);
 
 		/* enough head room as-is? */
<span class="p_del">-		if (unlikely((sizeof *hdr) &lt;= room))</span>
<span class="p_add">+		if (unlikely((sizeof(*hdr)) &lt;= room))</span>
 			goto fill;
 
 		/* enough room, but needs to be readjusted? */
 		room += skb_tailroom(skb);
<span class="p_del">-		if (likely((sizeof *hdr) &lt;= room)) {</span>
<span class="p_del">-			skb-&gt;data = memmove(skb-&gt;head + sizeof *hdr,</span>
<span class="p_add">+		if (likely((sizeof(*hdr)) &lt;= room)) {</span>
<span class="p_add">+			skb-&gt;data = memmove(skb-&gt;head + sizeof(*hdr),</span>
 					    skb-&gt;data, len);
 			skb_set_tail_pointer(skb, len);
 			goto fill;
<span class="p_chunk">@@ -563,7 +563,7 @@</span> <span class="p_context"> rndis_tx_fixup(struct usbnet *dev, struct sk_buff *skb, gfp_t flags)</span>
 	}
 
 	/* create a new skb, with the correct size (and tailpad) */
<span class="p_del">-	skb2 = skb_copy_expand(skb, sizeof *hdr, 1, flags);</span>
<span class="p_add">+	skb2 = skb_copy_expand(skb, sizeof(*hdr), 1, flags);</span>
 	dev_kfree_skb_any(skb);
 	if (unlikely(!skb2))
 		return skb2;
<span class="p_chunk">@@ -573,8 +573,8 @@</span> <span class="p_context"> rndis_tx_fixup(struct usbnet *dev, struct sk_buff *skb, gfp_t flags)</span>
 	 * packets; Linux minimizes wasted bandwidth through tx queues.
 	 */
 fill:
<span class="p_del">-	hdr = (void *) __skb_push(skb, sizeof *hdr);</span>
<span class="p_del">-	memset(hdr, 0, sizeof *hdr);</span>
<span class="p_add">+	hdr = (void *) __skb_push(skb, sizeof(*hdr));</span>
<span class="p_add">+	memset(hdr, 0, sizeof(*hdr));</span>
 	hdr-&gt;msg_type = cpu_to_le32(RNDIS_MSG_PACKET);
 	hdr-&gt;msg_len = cpu_to_le32(skb-&gt;len);
 	hdr-&gt;data_offset = cpu_to_le32(sizeof(*hdr) - 8);
<span class="p_header">diff --git a/drivers/net/usb/sierra_net.c b/drivers/net/usb/sierra_net.c</span>
<span class="p_header">index a251588762ec..4b3e0c8ecf1c 100644</span>
<span class="p_header">--- a/drivers/net/usb/sierra_net.c</span>
<span class="p_header">+++ b/drivers/net/usb/sierra_net.c</span>
<span class="p_chunk">@@ -576,7 +576,7 @@</span> <span class="p_context"> static void sierra_net_status(struct usbnet *dev, struct urb *urb)</span>
 
 	dev_dbg(&amp;dev-&gt;udev-&gt;dev, &quot;%s&quot;, __func__);
 
<span class="p_del">-	if (urb-&gt;actual_length &lt; sizeof *event)</span>
<span class="p_add">+	if (urb-&gt;actual_length &lt; sizeof(*event))</span>
 		return;
 
 	/* Add cases to handle other standard notifications. */
<span class="p_chunk">@@ -688,7 +688,7 @@</span> <span class="p_context"> static int sierra_net_bind(struct usbnet *dev, struct usb_interface *intf)</span>
 		return -ENODEV;
 	}
 	/* Initialize sierra private data */
<span class="p_del">-	priv = kzalloc(sizeof *priv, GFP_KERNEL);</span>
<span class="p_add">+	priv = kzalloc(sizeof(*priv), GFP_KERNEL);</span>
 	if (!priv)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/net/usb/usbnet.c b/drivers/net/usb/usbnet.c</span>
<span class="p_header">index 0b0ba7ef14e4..71e509a646a1 100644</span>
<span class="p_header">--- a/drivers/net/usb/usbnet.c</span>
<span class="p_header">+++ b/drivers/net/usb/usbnet.c</span>
<span class="p_chunk">@@ -164,7 +164,7 @@</span> <span class="p_context"> int usbnet_get_ethernet_addr(struct usbnet *dev, int iMACAddress)</span>
 	int 		tmp = -1, ret;
 	unsigned char	buf [13];
 
<span class="p_del">-	ret = usb_string(dev-&gt;udev, iMACAddress, buf, sizeof buf);</span>
<span class="p_add">+	ret = usb_string(dev-&gt;udev, iMACAddress, buf, sizeof(buf));</span>
 	if (ret == 12)
 		tmp = hex2bin(dev-&gt;net-&gt;dev_addr, buf, 6);
 	if (tmp &lt; 0) {
<span class="p_chunk">@@ -1011,11 +1011,11 @@</span> <span class="p_context"> void usbnet_get_drvinfo (struct net_device *net, struct ethtool_drvinfo *info)</span>
 {
 	struct usbnet *dev = netdev_priv(net);
 
<span class="p_del">-	strlcpy (info-&gt;driver, dev-&gt;driver_name, sizeof info-&gt;driver);</span>
<span class="p_del">-	strlcpy (info-&gt;version, DRIVER_VERSION, sizeof info-&gt;version);</span>
<span class="p_add">+	strlcpy (info-&gt;driver, dev-&gt;driver_name, sizeof(info-&gt;driver));</span>
<span class="p_add">+	strlcpy (info-&gt;version, DRIVER_VERSION, sizeof(info-&gt;version));</span>
 	strlcpy (info-&gt;fw_version, dev-&gt;driver_info-&gt;description,
<span class="p_del">-		sizeof info-&gt;fw_version);</span>
<span class="p_del">-	usb_make_path (dev-&gt;udev, info-&gt;bus_info, sizeof info-&gt;bus_info);</span>
<span class="p_add">+		sizeof(info-&gt;fw_version));</span>
<span class="p_add">+	usb_make_path (dev-&gt;udev, info-&gt;bus_info, sizeof(info-&gt;bus_info));</span>
 }
 EXPORT_SYMBOL_GPL(usbnet_get_drvinfo);
 
<span class="p_chunk">@@ -1659,7 +1659,7 @@</span> <span class="p_context"> usbnet_probe (struct usb_interface *udev, const struct usb_device_id *prod)</span>
 
 	dev-&gt;net = net;
 	strcpy (net-&gt;name, &quot;usb%d&quot;);
<span class="p_del">-	memcpy (net-&gt;dev_addr, node_id, sizeof node_id);</span>
<span class="p_add">+	memcpy (net-&gt;dev_addr, node_id, sizeof(node_id));</span>
 
 	/* rx and tx sides can use different message sizes;
 	 * bind() should set rx_urb_size in that case.
<span class="p_header">diff --git a/drivers/net/usb/zaurus.c b/drivers/net/usb/zaurus.c</span>
<span class="p_header">index 6aaa6eb9df72..5578dbafa17b 100644</span>
<span class="p_header">--- a/drivers/net/usb/zaurus.c</span>
<span class="p_header">+++ b/drivers/net/usb/zaurus.c</span>
<span class="p_chunk">@@ -166,7 +166,7 @@</span> <span class="p_context"> static int blan_mdlm_bind(struct usbnet *dev, struct usb_interface *intf)</span>
 				goto bad_desc;
 			}
 			desc = (void *) buf;
<span class="p_del">-			if (desc-&gt;bLength != sizeof *desc) {</span>
<span class="p_add">+			if (desc-&gt;bLength != sizeof(*desc)) {</span>
 				dev_dbg(&amp;intf-&gt;dev, &quot;MDLM len %u\n&quot;,
 					desc-&gt;bLength);
 				goto bad_desc;
<span class="p_chunk">@@ -187,11 +187,11 @@</span> <span class="p_context"> static int blan_mdlm_bind(struct usbnet *dev, struct usb_interface *intf)</span>
 			detail = (void *) buf;
 			switch (detail-&gt;bGuidDescriptorType) {
 			case 0:			/* &quot;SAFE&quot; */
<span class="p_del">-				if (detail-&gt;bLength != (sizeof *detail + 2))</span>
<span class="p_add">+				if (detail-&gt;bLength != (sizeof(*detail) + 2))</span>
 					goto bad_detail;
 				break;
 			case 1:			/* &quot;BLAN&quot; */
<span class="p_del">-				if (detail-&gt;bLength != (sizeof *detail + 3))</span>
<span class="p_add">+				if (detail-&gt;bLength != (sizeof(*detail) + 3))</span>
 					goto bad_detail;
 				break;
 			default:
<span class="p_header">diff --git a/drivers/net/virtio_net.c b/drivers/net/virtio_net.c</span>
<span class="p_header">index 767ab11a6e9f..3753a7964200 100644</span>
<span class="p_header">--- a/drivers/net/virtio_net.c</span>
<span class="p_header">+++ b/drivers/net/virtio_net.c</span>
<span class="p_chunk">@@ -264,7 +264,7 @@</span> <span class="p_context"> static struct sk_buff *page_to_skb(struct virtnet_info *vi,</span>
 
 	hdr_len = vi-&gt;hdr_len;
 	if (vi-&gt;mergeable_rx_bufs)
<span class="p_del">-		hdr_padded_len = sizeof *hdr;</span>
<span class="p_add">+		hdr_padded_len = sizeof(*hdr);</span>
 	else
 		hdr_padded_len = sizeof(struct padded_vnet_hdr);
 
<span class="p_header">diff --git a/drivers/net/wan/sbni.c b/drivers/net/wan/sbni.c</span>
<span class="p_header">index 8fef8d83436d..d2cb262f5e78 100644</span>
<span class="p_header">--- a/drivers/net/wan/sbni.c</span>
<span class="p_header">+++ b/drivers/net/wan/sbni.c</span>
<span class="p_chunk">@@ -660,7 +660,7 @@</span> <span class="p_context"> send_frame( struct net_device  *dev )</span>
 		nl-&gt;state |= FL_WAIT_ACK;
 	}
 
<span class="p_del">-	outsb( dev-&gt;base_addr + DAT, (u8 *)&amp;crc, sizeof crc );</span>
<span class="p_add">+	outsb( dev-&gt;base_addr + DAT, (u8 *)&amp;crc, sizeof(crc));</span>
 
 do_send:
 	outb( inb( dev-&gt;base_addr + CSR0 ) &amp; ~TR_REQ, dev-&gt;base_addr + CSR0 );
<span class="p_chunk">@@ -1323,7 +1323,7 @@</span> <span class="p_context"> sbni_ioctl( struct net_device  *dev,  struct ifreq  *ifr,  int  cmd )</span>
 		flags.rxl	= nl-&gt;cur_rxl_index;
 		flags.fixed_rxl	= nl-&gt;delta_rxl == 0;
 
<span class="p_del">-		if (copy_to_user( ifr-&gt;ifr_data, &amp;flags, sizeof flags ))</span>
<span class="p_add">+		if (copy_to_user( ifr-&gt;ifr_data, &amp;flags, sizeof(flags)))</span>
 			error = -EFAULT;
 		break;
 
<span class="p_chunk">@@ -1352,7 +1352,7 @@</span> <span class="p_context"> sbni_ioctl( struct net_device  *dev,  struct ifreq  *ifr,  int  cmd )</span>
 		if (!capable(CAP_NET_ADMIN))
 			return  -EPERM;
 
<span class="p_del">-		if (copy_from_user( slave_name, ifr-&gt;ifr_data, sizeof slave_name ))</span>
<span class="p_add">+		if (copy_from_user( slave_name, ifr-&gt;ifr_data, sizeof(slave_name)))</span>
 			return -EFAULT;
 		slave_dev = dev_get_by_name(&amp;init_net, slave_name );
 		if( !slave_dev  ||  !(slave_dev-&gt;flags &amp; IFF_UP) ) {
<span class="p_header">diff --git a/drivers/net/wireless/marvell/mwifiex/scan.c b/drivers/net/wireless/marvell/mwifiex/scan.c</span>
<span class="p_header">index c20017ced566..811b35c76a9a 100644</span>
<span class="p_header">--- a/drivers/net/wireless/marvell/mwifiex/scan.c</span>
<span class="p_header">+++ b/drivers/net/wireless/marvell/mwifiex/scan.c</span>
<span class="p_chunk">@@ -895,8 +895,7 @@</span> <span class="p_context"> mwifiex_config_scan(struct mwifiex_private *priv,</span>
 			wildcard_ssid_tlv-&gt;header.type =
 				cpu_to_le16(TLV_TYPE_WILDCARDSSID);
 			wildcard_ssid_tlv-&gt;header.len = cpu_to_le16(
<span class="p_del">-				(u16) (ssid_len + sizeof(wildcard_ssid_tlv-&gt;</span>
<span class="p_del">-							 max_ssid_length)));</span>
<span class="p_add">+				(u16) (ssid_len + sizeof(wildcard_ssid_tlv-&gt;max_ssid_length)));</span>
 
 			/*
 			 * max_ssid_length = 0 tells firmware to perform
<span class="p_header">diff --git a/drivers/net/wireless/rndis_wlan.c b/drivers/net/wireless/rndis_wlan.c</span>
<span class="p_header">index a13d1f2b5912..c55fc0553155 100644</span>
<span class="p_header">--- a/drivers/net/wireless/rndis_wlan.c</span>
<span class="p_header">+++ b/drivers/net/wireless/rndis_wlan.c</span>
<span class="p_chunk">@@ -729,9 +729,9 @@</span> <span class="p_context"> static int rndis_query_oid(struct usbnet *dev, u32 oid, void *data, int *len)</span>
 
 	mutex_lock(&amp;priv-&gt;command_lock);
 
<span class="p_del">-	memset(u.get, 0, sizeof *u.get);</span>
<span class="p_add">+	memset(u.get, 0, sizeof(*u.get));</span>
 	u.get-&gt;msg_type = cpu_to_le32(RNDIS_MSG_QUERY);
<span class="p_del">-	u.get-&gt;msg_len = cpu_to_le32(sizeof *u.get);</span>
<span class="p_add">+	u.get-&gt;msg_len = cpu_to_le32(sizeof(*u.get));</span>
 	u.get-&gt;oid = cpu_to_le32(oid);
 
 	priv-&gt;current_command_oid = oid;
<span class="p_chunk">@@ -813,7 +813,7 @@</span> <span class="p_context"> static int rndis_set_oid(struct usbnet *dev, u32 oid, const void *data,</span>
 
 	mutex_lock(&amp;priv-&gt;command_lock);
 
<span class="p_del">-	memset(u.set, 0, sizeof *u.set);</span>
<span class="p_add">+	memset(u.set, 0, sizeof(*u.set));</span>
 	u.set-&gt;msg_type = cpu_to_le32(RNDIS_MSG_SET);
 	u.set-&gt;msg_len = cpu_to_le32(sizeof(*u.set) + len);
 	u.set-&gt;oid = cpu_to_le32(oid);
<span class="p_header">diff --git a/drivers/oprofile/oprofile_perf.c b/drivers/oprofile/oprofile_perf.c</span>
<span class="p_header">index d5b2732b1b81..495b145f55d0 100644</span>
<span class="p_header">--- a/drivers/oprofile/oprofile_perf.c</span>
<span class="p_header">+++ b/drivers/oprofile/oprofile_perf.c</span>
<span class="p_chunk">@@ -146,7 +146,7 @@</span> <span class="p_context"> static int oprofile_perf_create_files(struct dentry *root)</span>
 		struct dentry *dir;
 		char buf[4];
 
<span class="p_del">-		snprintf(buf, sizeof buf, &quot;%d&quot;, i);</span>
<span class="p_add">+		snprintf(buf, sizeof(buf), &quot;%d&quot;, i);</span>
 		dir = oprofilefs_mkdir(root, buf);
 		oprofilefs_create_ulong(dir, &quot;enabled&quot;, &amp;counter_config[i].enabled);
 		oprofilefs_create_ulong(dir, &quot;event&quot;, &amp;counter_config[i].event);
<span class="p_header">diff --git a/drivers/parport/parport_serial.c b/drivers/parport/parport_serial.c</span>
<span class="p_header">index e15b4845f7c6..df9ebe23fe4d 100644</span>
<span class="p_header">--- a/drivers/parport/parport_serial.c</span>
<span class="p_header">+++ b/drivers/parport/parport_serial.c</span>
<span class="p_chunk">@@ -608,7 +608,7 @@</span> <span class="p_context"> static int parport_serial_pci_probe(struct pci_dev *dev,</span>
 	struct parport_serial_private *priv;
 	int err;
 
<span class="p_del">-	priv = kzalloc (sizeof *priv, GFP_KERNEL);</span>
<span class="p_add">+	priv = kzalloc (sizeof(*priv), GFP_KERNEL);</span>
 	if (!priv)
 		return -ENOMEM;
 	pci_set_drvdata (dev, priv);
<span class="p_header">diff --git a/drivers/parport/probe.c b/drivers/parport/probe.c</span>
<span class="p_header">index d763bc9e44c1..eacfbf201dfb 100644</span>
<span class="p_header">--- a/drivers/parport/probe.c</span>
<span class="p_header">+++ b/drivers/parport/probe.c</span>
<span class="p_chunk">@@ -238,7 +238,7 @@</span> <span class="p_context"> static ssize_t parport_read_device_id (struct parport *port, char *buffer,</span>
 		while(len2 &lt; idlen &amp;&amp; retval &gt; 0) {
 			char tmp[4];
 			retval = parport_read (port, tmp,
<span class="p_del">-					       min(sizeof tmp, idlen-len2));</span>
<span class="p_add">+					       min(sizeof(tmp), idlen-len2));</span>
 			if (retval &lt; 0)
 				return retval;
 			len2 += retval;
<span class="p_header">diff --git a/drivers/pcmcia/bfin_cf_pcmcia.c b/drivers/pcmcia/bfin_cf_pcmcia.c</span>
<span class="p_header">index bba1dcbb8075..1a1532e01296 100644</span>
<span class="p_header">--- a/drivers/pcmcia/bfin_cf_pcmcia.c</span>
<span class="p_header">+++ b/drivers/pcmcia/bfin_cf_pcmcia.c</span>
<span class="p_chunk">@@ -219,7 +219,7 @@</span> <span class="p_context"> static int bfin_cf_probe(struct platform_device *pdev)</span>
 	}
 	gpio_direction_input(cd_pfx);
 
<span class="p_del">-	cf = kzalloc(sizeof *cf, GFP_KERNEL);</span>
<span class="p_add">+	cf = kzalloc(sizeof(*cf), GFP_KERNEL);</span>
 	if (!cf) {
 		gpio_free(cd_pfx);
 		return -ENOMEM;
<span class="p_header">diff --git a/drivers/pcmcia/omap_cf.c b/drivers/pcmcia/omap_cf.c</span>
<span class="p_header">index 4e2f501e5548..41ee25f8e9e9 100644</span>
<span class="p_header">--- a/drivers/pcmcia/omap_cf.c</span>
<span class="p_header">+++ b/drivers/pcmcia/omap_cf.c</span>
<span class="p_chunk">@@ -217,7 +217,7 @@</span> <span class="p_context"> static int __init omap_cf_probe(struct platform_device *pdev)</span>
 	if (irq &lt; 0)
 		return -EINVAL;
 
<span class="p_del">-	cf = kzalloc(sizeof *cf, GFP_KERNEL);</span>
<span class="p_add">+	cf = kzalloc(sizeof(*cf), GFP_KERNEL);</span>
 	if (!cf)
 		return -ENOMEM;
 	setup_timer(&amp;cf-&gt;timer, omap_cf_timer, (unsigned long)cf);
<span class="p_header">diff --git a/drivers/rapidio/rio.c b/drivers/rapidio/rio.c</span>
<span class="p_header">index d7b87c64b7cd..2305e95e067d 100644</span>
<span class="p_header">--- a/drivers/rapidio/rio.c</span>
<span class="p_header">+++ b/drivers/rapidio/rio.c</span>
<span class="p_chunk">@@ -1871,7 +1871,7 @@</span> <span class="p_context"> int rio_init_mports(void)</span>
 		goto no_disc;
 	}
 
<span class="p_del">-	work = kcalloc(n, sizeof *work, GFP_KERNEL);</span>
<span class="p_add">+	work = kcalloc(n, sizeof(*work), GFP_KERNEL);</span>
 	if (!work) {
 		pr_err(&quot;RIO: no memory for work struct\n&quot;);
 		destroy_workqueue(rio_wq);
<span class="p_header">diff --git a/drivers/s390/crypto/zcrypt_api.c b/drivers/s390/crypto/zcrypt_api.c</span>
<span class="p_header">index 5d3d04c040c2..413e9ade9dc6 100644</span>
<span class="p_header">--- a/drivers/s390/crypto/zcrypt_api.c</span>
<span class="p_header">+++ b/drivers/s390/crypto/zcrypt_api.c</span>
<span class="p_chunk">@@ -1357,10 +1357,10 @@</span> <span class="p_context"> static int zcrypt_rng_data_read(struct hwrng *rng, u32 *data)</span>
 			rc = zcrypt_rng((char *) zcrypt_rng_buffer);
 		if (rc &lt; 0)
 			return -EIO;
<span class="p_del">-		zcrypt_rng_buffer_index = rc / sizeof *data;</span>
<span class="p_add">+		zcrypt_rng_buffer_index = rc / sizeof(*data);</span>
 	}
 	*data = zcrypt_rng_buffer[--zcrypt_rng_buffer_index];
<span class="p_del">-	return sizeof *data;</span>
<span class="p_add">+	return sizeof(*data);</span>
 }
 
 static struct hwrng zcrypt_rng_dev = {
<span class="p_header">diff --git a/drivers/scsi/aha152x.c b/drivers/scsi/aha152x.c</span>
<span class="p_header">index f44d0487236e..eb7d68724fba 100644</span>
<span class="p_header">--- a/drivers/scsi/aha152x.c</span>
<span class="p_header">+++ b/drivers/scsi/aha152x.c</span>
<span class="p_chunk">@@ -730,7 +730,7 @@</span> <span class="p_context"> struct Scsi_Host *aha152x_probe_one(struct aha152x_setup *setup)</span>
 		return NULL;
 	}
 
<span class="p_del">-	memset(HOSTDATA(shpnt), 0, sizeof *HOSTDATA(shpnt));</span>
<span class="p_add">+	memset(HOSTDATA(shpnt), 0, sizeof(*HOSTDATA(shpnt)));</span>
 	INIT_LIST_HEAD(&amp;HOSTDATA(shpnt)-&gt;host_list);
 
 	/* need to have host registered before triggering any interrupt */
<span class="p_header">diff --git a/drivers/scsi/lpfc/lpfc_init.c b/drivers/scsi/lpfc/lpfc_init.c</span>
<span class="p_header">index a544366a367e..d04e7bd69d13 100644</span>
<span class="p_header">--- a/drivers/scsi/lpfc/lpfc_init.c</span>
<span class="p_header">+++ b/drivers/scsi/lpfc/lpfc_init.c</span>
<span class="p_chunk">@@ -133,9 +133,9 @@</span> <span class="p_context"> lpfc_config_port_prep(struct lpfc_hba *phba)</span>
 
 		lpfc_read_nv(phba, pmb);
 		memset((char*)mb-&gt;un.varRDnvp.rsvd3, 0,
<span class="p_del">-			sizeof (mb-&gt;un.varRDnvp.rsvd3));</span>
<span class="p_add">+			sizeof(mb-&gt;un.varRDnvp.rsvd3));</span>
 		memcpy((char*)mb-&gt;un.varRDnvp.rsvd3, licensed,
<span class="p_del">-			 sizeof (licensed));</span>
<span class="p_add">+			 sizeof(licensed));</span>
 
 		rc = lpfc_sli_issue_mbox(phba, pmb, MBX_POLL);
 
<span class="p_chunk">@@ -214,7 +214,7 @@</span> <span class="p_context"> lpfc_config_port_prep(struct lpfc_hba *phba)</span>
 
 	if (lpfc_is_LC_HBA(phba-&gt;pcidev-&gt;device))
 		memcpy(phba-&gt;RandomData, (char *)&amp;mb-&gt;un.varWords[24],
<span class="p_del">-						sizeof (phba-&gt;RandomData));</span>
<span class="p_add">+						sizeof(phba-&gt;RandomData));</span>
 
 	/* Get adapter VPD information */
 	lpfc_vpd_data = kmalloc(DMP_VPD_SIZE, GFP_KERNEL);
<span class="p_chunk">@@ -3496,7 +3496,7 @@</span> <span class="p_context"> void lpfc_host_attrib_init(struct Scsi_Host *shost)</span>
 	fc_host_supported_fc4s(shost)[7] = 1;
 
 	lpfc_vport_symbolic_node_name(vport, fc_host_symbolic_name(shost),
<span class="p_del">-				 sizeof fc_host_symbolic_name(shost));</span>
<span class="p_add">+				 sizeof(fc_host_symbolic_name(shost)));</span>
 
 	fc_host_supported_speeds(shost) = 0;
 	if (phba-&gt;lmt &amp; LMT_32Gb)
<span class="p_header">diff --git a/drivers/scsi/ultrastor.c b/drivers/scsi/ultrastor.c</span>
<span class="p_header">index 14e0c40a68c9..ad8b6f408d6e 100644</span>
<span class="p_header">--- a/drivers/scsi/ultrastor.c</span>
<span class="p_header">+++ b/drivers/scsi/ultrastor.c</span>
<span class="p_chunk">@@ -1019,7 +1019,7 @@</span> <span class="p_context"> static int ultrastor_host_reset(struct scsi_cmnd * SCpnt)</span>
        Even bigger deal with new_eh! 
      */
 
<span class="p_del">-    memset((unsigned char *)config.aborted, 0, sizeof config.aborted);</span>
<span class="p_add">+    memset((unsigned char *)config.aborted, 0, sizeof(config.aborted));</span>
 #if ULTRASTOR_MAX_CMDS == 1
     config.mscp_busy = 0;
 #else
<span class="p_header">diff --git a/drivers/scsi/virtio_scsi.c b/drivers/scsi/virtio_scsi.c</span>
<span class="p_header">index 7dbbb29d24c6..3c2149ab6820 100644</span>
<span class="p_header">--- a/drivers/scsi/virtio_scsi.c</span>
<span class="p_header">+++ b/drivers/scsi/virtio_scsi.c</span>
<span class="p_chunk">@@ -646,7 +646,7 @@</span> <span class="p_context"> static int virtscsi_tmf(struct virtio_scsi *vscsi, struct virtio_scsi_cmd *cmd)</span>
 
 	cmd-&gt;comp = &amp;comp;
 	if (virtscsi_kick_cmd(&amp;vscsi-&gt;ctrl_vq, cmd,
<span class="p_del">-			      sizeof cmd-&gt;req.tmf, sizeof cmd-&gt;resp.tmf) &lt; 0)</span>
<span class="p_add">+			      sizeof(cmd-&gt;req.tmf), sizeof(cmd-&gt;resp.tmf)) &lt; 0)</span>
 		goto out;
 
 	wait_for_completion(&amp;comp);
<span class="p_header">diff --git a/drivers/scsi/vmw_pvscsi.c b/drivers/scsi/vmw_pvscsi.c</span>
<span class="p_header">index 6164634aff18..a6be9d847427 100644</span>
<span class="p_header">--- a/drivers/scsi/vmw_pvscsi.c</span>
<span class="p_header">+++ b/drivers/scsi/vmw_pvscsi.c</span>
<span class="p_chunk">@@ -1336,11 +1336,11 @@</span> <span class="p_context"> static u32 pvscsi_get_max_targets(struct pvscsi_adapter *adapter)</span>
 	 * indicate success.
 	 */
 	header = config_page;
<span class="p_del">-	memset(header, 0, sizeof *header);</span>
<span class="p_add">+	memset(header, 0, sizeof(*header));</span>
 	header-&gt;hostStatus = BTSTAT_INVPARAM;
 	header-&gt;scsiStatus = SDSTAT_CHECK;
 
<span class="p_del">-	pvscsi_write_cmd_desc(adapter, PVSCSI_CMD_CONFIG, &amp;cmd, sizeof cmd);</span>
<span class="p_add">+	pvscsi_write_cmd_desc(adapter, PVSCSI_CMD_CONFIG, &amp;cmd, sizeof(cmd));</span>
 
 	if (header-&gt;hostStatus == BTSTAT_SUCCESS &amp;&amp;
 	    header-&gt;scsiStatus == SDSTAT_GOOD) {
<span class="p_header">diff --git a/drivers/spi/spi-lm70llp.c b/drivers/spi/spi-lm70llp.c</span>
<span class="p_header">index 61ee0f4269ae..7ac6a4ac41e0 100644</span>
<span class="p_header">--- a/drivers/spi/spi-lm70llp.c</span>
<span class="p_header">+++ b/drivers/spi/spi-lm70llp.c</span>
<span class="p_chunk">@@ -210,7 +210,7 @@</span> <span class="p_context"> static void spi_lm70llp_attach(struct parport *p)</span>
 	 * the lm70 driver could verify it, reading the manf ID.
 	 */
 
<span class="p_del">-	master = spi_alloc_master(p-&gt;physport-&gt;dev, sizeof *pp);</span>
<span class="p_add">+	master = spi_alloc_master(p-&gt;physport-&gt;dev, sizeof(*pp));</span>
 	if (!master) {
 		status = -ENOMEM;
 		goto out_fail;
<span class="p_header">diff --git a/drivers/spi/spi-mpc512x-psc.c b/drivers/spi/spi-mpc512x-psc.c</span>
<span class="p_header">index c3ec46cd9f91..66fb04cb1687 100644</span>
<span class="p_header">--- a/drivers/spi/spi-mpc512x-psc.c</span>
<span class="p_header">+++ b/drivers/spi/spi-mpc512x-psc.c</span>
<span class="p_chunk">@@ -374,7 +374,7 @@</span> <span class="p_context"> static int mpc512x_psc_spi_setup(struct spi_device *spi)</span>
 		return -EINVAL;
 
 	if (!cs) {
<span class="p_del">-		cs = kzalloc(sizeof *cs, GFP_KERNEL);</span>
<span class="p_add">+		cs = kzalloc(sizeof(*cs), GFP_KERNEL);</span>
 		if (!cs)
 			return -ENOMEM;
 
<span class="p_chunk">@@ -496,7 +496,7 @@</span> <span class="p_context"> static int mpc512x_psc_spi_do_probe(struct device *dev, u32 regaddr,</span>
 	void *tempp;
 	struct clk *clk;
 
<span class="p_del">-	master = spi_alloc_master(dev, sizeof *mps);</span>
<span class="p_add">+	master = spi_alloc_master(dev, sizeof(*mps));</span>
 	if (master == NULL)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/spi/spi-mpc52xx-psc.c b/drivers/spi/spi-mpc52xx-psc.c</span>
<span class="p_header">index 72d11ebefb28..5287e1e822df 100644</span>
<span class="p_header">--- a/drivers/spi/spi-mpc52xx-psc.c</span>
<span class="p_header">+++ b/drivers/spi/spi-mpc52xx-psc.c</span>
<span class="p_chunk">@@ -271,7 +271,7 @@</span> <span class="p_context"> static int mpc52xx_psc_spi_setup(struct spi_device *spi)</span>
 		return -EINVAL;
 
 	if (!cs) {
<span class="p_del">-		cs = kzalloc(sizeof *cs, GFP_KERNEL);</span>
<span class="p_add">+		cs = kzalloc(sizeof(*cs), GFP_KERNEL);</span>
 		if (!cs)
 			return -ENOMEM;
 		spi-&gt;controller_state = cs;
<span class="p_chunk">@@ -371,7 +371,7 @@</span> <span class="p_context"> static int mpc52xx_psc_spi_do_probe(struct device *dev, u32 regaddr,</span>
 	struct spi_master *master;
 	int ret;
 
<span class="p_del">-	master = spi_alloc_master(dev, sizeof *mps);</span>
<span class="p_add">+	master = spi_alloc_master(dev, sizeof(*mps));</span>
 	if (master == NULL)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/drivers/spi/spi-mpc52xx.c b/drivers/spi/spi-mpc52xx.c</span>
<span class="p_header">index c36002110c30..fb044c8ad098 100644</span>
<span class="p_header">--- a/drivers/spi/spi-mpc52xx.c</span>
<span class="p_header">+++ b/drivers/spi/spi-mpc52xx.c</span>
<span class="p_chunk">@@ -414,7 +414,7 @@</span> <span class="p_context"> static int mpc52xx_spi_probe(struct platform_device *op)</span>
 	}
 
 	dev_dbg(&amp;op-&gt;dev, &quot;allocating spi_master struct\n&quot;);
<span class="p_del">-	master = spi_alloc_master(&amp;op-&gt;dev, sizeof *ms);</span>
<span class="p_add">+	master = spi_alloc_master(&amp;op-&gt;dev, sizeof(*ms));</span>
 	if (!master) {
 		rc = -ENOMEM;
 		goto err_alloc;
<span class="p_header">diff --git a/drivers/spi/spi-omap-uwire.c b/drivers/spi/spi-omap-uwire.c</span>
<span class="p_header">index ce8dbdbce312..d46a67099212 100644</span>
<span class="p_header">--- a/drivers/spi/spi-omap-uwire.c</span>
<span class="p_header">+++ b/drivers/spi/spi-omap-uwire.c</span>
<span class="p_chunk">@@ -453,7 +453,7 @@</span> <span class="p_context"> static int uwire_probe(struct platform_device *pdev)</span>
 	struct uwire_spi	*uwire;
 	int			status;
 
<span class="p_del">-	master = spi_alloc_master(&amp;pdev-&gt;dev, sizeof *uwire);</span>
<span class="p_add">+	master = spi_alloc_master(&amp;pdev-&gt;dev, sizeof(*uwire));</span>
 	if (!master)
 		return -ENODEV;
 
<span class="p_header">diff --git a/drivers/spi/spi-omap2-mcspi.c b/drivers/spi/spi-omap2-mcspi.c</span>
<span class="p_header">index 7273820275e9..cf1fb5f7fed9 100644</span>
<span class="p_header">--- a/drivers/spi/spi-omap2-mcspi.c</span>
<span class="p_header">+++ b/drivers/spi/spi-omap2-mcspi.c</span>
<span class="p_chunk">@@ -1014,7 +1014,7 @@</span> <span class="p_context"> static int omap2_mcspi_setup(struct spi_device *spi)</span>
 	mcspi_dma = &amp;mcspi-&gt;dma_channels[spi-&gt;chip_select];
 
 	if (!cs) {
<span class="p_del">-		cs = kzalloc(sizeof *cs, GFP_KERNEL);</span>
<span class="p_add">+		cs = kzalloc(sizeof(*cs), GFP_KERNEL);</span>
 		if (!cs)
 			return -ENOMEM;
 		cs-&gt;base = mcspi-&gt;base + spi-&gt;chip_select * 0x14;
<span class="p_chunk">@@ -1362,7 +1362,7 @@</span> <span class="p_context"> static int omap2_mcspi_probe(struct platform_device *pdev)</span>
 	struct device_node	*node = pdev-&gt;dev.of_node;
 	const struct of_device_id *match;
 
<span class="p_del">-	master = spi_alloc_master(&amp;pdev-&gt;dev, sizeof *mcspi);</span>
<span class="p_add">+	master = spi_alloc_master(&amp;pdev-&gt;dev, sizeof(*mcspi));</span>
 	if (master == NULL) {
 		dev_dbg(&amp;pdev-&gt;dev, &quot;master allocation failed\n&quot;);
 		return -ENOMEM;
<span class="p_header">diff --git a/drivers/spi/spi-ppc4xx.c b/drivers/spi/spi-ppc4xx.c</span>
<span class="p_header">index dd3d0a218d8b..2b45048e15ef 100644</span>
<span class="p_header">--- a/drivers/spi/spi-ppc4xx.c</span>
<span class="p_header">+++ b/drivers/spi/spi-ppc4xx.c</span>
<span class="p_chunk">@@ -230,7 +230,7 @@</span> <span class="p_context"> static int spi_ppc4xx_setup(struct spi_device *spi)</span>
 	}
 
 	if (cs == NULL) {
<span class="p_del">-		cs = kzalloc(sizeof *cs, GFP_KERNEL);</span>
<span class="p_add">+		cs = kzalloc(sizeof(*cs), GFP_KERNEL);</span>
 		if (!cs)
 			return -ENOMEM;
 		spi-&gt;controller_state = cs;
<span class="p_chunk">@@ -391,7 +391,7 @@</span> <span class="p_context"> static int spi_ppc4xx_of_probe(struct platform_device *op)</span>
 	int num_gpios;
 	const unsigned int *clk;
 
<span class="p_del">-	master = spi_alloc_master(dev, sizeof *hw);</span>
<span class="p_add">+	master = spi_alloc_master(dev, sizeof(*hw));</span>
 	if (master == NULL)
 		return -ENOMEM;
 	master-&gt;dev.of_node = np;
<span class="p_header">diff --git a/drivers/staging/most/hdm-dim2/dim2_hdm.c b/drivers/staging/most/hdm-dim2/dim2_hdm.c</span>
<span class="p_header">index 327d738c7194..33984bcfb411 100644</span>
<span class="p_header">--- a/drivers/staging/most/hdm-dim2/dim2_hdm.c</span>
<span class="p_header">+++ b/drivers/staging/most/hdm-dim2/dim2_hdm.c</span>
<span class="p_chunk">@@ -70,7 +70,7 @@</span> <span class="p_context"> static DECLARE_TASKLET(dim2_tasklet, dim2_tasklet_fn, 0);</span>
  * @data_type: channel data type
  */
 struct hdm_channel {
<span class="p_del">-	char name[sizeof &quot;caNNN&quot;];</span>
<span class="p_add">+	char name[sizeof(&quot;caNNN&quot;)];</span>
 	bool is_initialized;
 	struct dim_channel ch;
 	struct list_head pending_list;	/* before dim_enqueue_buffer() */
<span class="p_chunk">@@ -98,7 +98,7 @@</span> <span class="p_context"> struct dim2_hdm {</span>
 	struct hdm_channel hch[DMA_CHANNELS];
 	struct most_channel_capability capabilities[DMA_CHANNELS];
 	struct most_interface most_iface;
<span class="p_del">-	char name[16 + sizeof &quot;dim2-&quot;];</span>
<span class="p_add">+	char name[16 + sizeof(&quot;dim2-&quot;)];</span>
 	void *io_base;
 	unsigned int irq_ahb0;
 	int clk_speed;
<span class="p_header">diff --git a/drivers/staging/rdma/ehca/ehca_qp.c b/drivers/staging/rdma/ehca/ehca_qp.c</span>
<span class="p_header">index 896c01f810f6..b7e0b51b91ee 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ehca/ehca_qp.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ehca/ehca_qp.c</span>
<span class="p_chunk">@@ -903,7 +903,7 @@</span> <span class="p_context"> static struct ehca_qp *internal_create_qp(</span>
 		resp.fw_handle_ofs = (u32)
 			(my_qp-&gt;galpas.user.fw_handle &amp; (PAGE_SIZE - 1));
 
<span class="p_del">-		if (ib_copy_to_udata(udata, &amp;resp, sizeof resp)) {</span>
<span class="p_add">+		if (ib_copy_to_udata(udata, &amp;resp, sizeof(resp))) {</span>
 			ehca_err(pd-&gt;device, &quot;Copy to udata failed&quot;);
 			ret = -EINVAL;
 			goto create_qp_exit8;
<span class="p_header">diff --git a/drivers/staging/rdma/ehca/ehca_uverbs.c b/drivers/staging/rdma/ehca/ehca_uverbs.c</span>
<span class="p_header">index 1a1d5d99fcf9..7017302c49ec 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ehca/ehca_uverbs.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ehca/ehca_uverbs.c</span>
<span class="p_chunk">@@ -53,7 +53,7 @@</span> <span class="p_context"> struct ib_ucontext *ehca_alloc_ucontext(struct ib_device *device,</span>
 {
 	struct ehca_ucontext *my_context;
 
<span class="p_del">-	my_context = kzalloc(sizeof *my_context, GFP_KERNEL);</span>
<span class="p_add">+	my_context = kzalloc(sizeof(*my_context), GFP_KERNEL);</span>
 	if (!my_context) {
 		ehca_err(device, &quot;Out of memory device=%p&quot;, device);
 		return ERR_PTR(-ENOMEM);
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_driver.c b/drivers/staging/rdma/ipath/ipath_driver.c</span>
<span class="p_header">index 2ab22f98e3ba..59c4f397b8e1 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_driver.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_driver.c</span>
<span class="p_chunk">@@ -55,7 +55,7 @@</span> <span class="p_context"> static void ipath_update_pio_bufs(struct ipath_devdata *);</span>
 const char *ipath_get_unit_name(int unit)
 {
 	static char iname[16];
<span class="p_del">-	snprintf(iname, sizeof iname, &quot;infinipath%u&quot;, unit);</span>
<span class="p_add">+	snprintf(iname, sizeof(iname), &quot;infinipath%u&quot;, unit);</span>
 	return iname;
 }
 
<span class="p_chunk">@@ -1121,7 +1121,7 @@</span> <span class="p_context"> static void ipath_rcv_hdrerr(struct ipath_devdata *dd,</span>
 {
 	char emsg[128];
 
<span class="p_del">-	get_rhf_errstring(eflags, emsg, sizeof emsg);</span>
<span class="p_add">+	get_rhf_errstring(eflags, emsg, sizeof(emsg));</span>
 	ipath_cdbg(PKT, &quot;RHFerrs %x hdrqtail=%x typ=%u &quot;
 		   &quot;tlen=%x opcode=%x egridx=%x: %s\n&quot;,
 		   eflags, l,
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_eeprom.c b/drivers/staging/rdma/ipath/ipath_eeprom.c</span>
<span class="p_header">index ef84107c7ce0..0bbf2071f0da 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_eeprom.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_eeprom.c</span>
<span class="p_chunk">@@ -814,18 +814,18 @@</span> <span class="p_context"> void ipath_get_eeprom_info(struct ipath_devdata *dd)</span>
 		 * elsewhere for backward-compatibility.
 		 */
 		char *snp = dd-&gt;ipath_serial;
<span class="p_del">-		memcpy(snp, ifp-&gt;if_sprefix, sizeof ifp-&gt;if_sprefix);</span>
<span class="p_del">-		snp[sizeof ifp-&gt;if_sprefix] = &#39;\0&#39;;</span>
<span class="p_add">+		memcpy(snp, ifp-&gt;if_sprefix, sizeof(ifp-&gt;if_sprefix));</span>
<span class="p_add">+		snp[sizeof(ifp-&gt;if_sprefix)] = &#39;\0&#39;;</span>
 		len = strlen(snp);
 		snp += len;
<span class="p_del">-		len = (sizeof dd-&gt;ipath_serial) - len;</span>
<span class="p_del">-		if (len &gt; sizeof ifp-&gt;if_serial) {</span>
<span class="p_del">-			len = sizeof ifp-&gt;if_serial;</span>
<span class="p_add">+		len = (sizeof(dd-&gt;ipath_serial)) - len;</span>
<span class="p_add">+		if (len &gt; sizeof(ifp-&gt;if_serial)) {</span>
<span class="p_add">+			len = sizeof(ifp-&gt;if_serial);</span>
 		}
 		memcpy(snp, ifp-&gt;if_serial, len);
 	} else
 		memcpy(dd-&gt;ipath_serial, ifp-&gt;if_serial,
<span class="p_del">-		       sizeof ifp-&gt;if_serial);</span>
<span class="p_add">+		       sizeof(ifp-&gt;if_serial));</span>
 	if (!strstr(ifp-&gt;if_comment, &quot;Tested successfully&quot;))
 		ipath_dev_err(dd, &quot;Board SN %s did not pass functional &quot;
 			&quot;test: %s\n&quot;, dd-&gt;ipath_serial,
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_file_ops.c b/drivers/staging/rdma/ipath/ipath_file_ops.c</span>
<span class="p_header">index 6187b848b3ca..e51a66d71085 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_file_ops.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_file_ops.c</span>
<span class="p_chunk">@@ -474,7 +474,7 @@</span> <span class="p_context"> static int ipath_tid_update(struct ipath_portdata *pd, struct file *fp,</span>
 			goto cleanup;
 		}
 		if (copy_to_user((void __user *) (unsigned long) ti-&gt;tidmap,
<span class="p_del">-				 tidmap, sizeof tidmap)) {</span>
<span class="p_add">+				 tidmap, sizeof(tidmap))) {</span>
 			ret = -EFAULT;
 			goto cleanup;
 		}
<span class="p_chunk">@@ -525,7 +525,7 @@</span> <span class="p_context"> static int ipath_tid_free(struct ipath_portdata *pd, unsigned subport,</span>
 	}
 
 	if (copy_from_user(tidmap, (void __user *)(unsigned long)ti-&gt;tidmap,
<span class="p_del">-			   sizeof tidmap)) {</span>
<span class="p_add">+			   sizeof(tidmap))) {</span>
 		ret = -EFAULT;
 		goto done;
 	}
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_fs.c b/drivers/staging/rdma/ipath/ipath_fs.c</span>
<span class="p_header">index 476fcdf05acb..1349c7e5d8b5 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_fs.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_fs.c</span>
<span class="p_chunk">@@ -98,7 +98,7 @@</span> <span class="p_context"> static ssize_t atomic_stats_read(struct file *file, char __user *buf,</span>
 				 size_t count, loff_t *ppos)
 {
 	return simple_read_from_buffer(buf, count, ppos, &amp;ipath_stats,
<span class="p_del">-				       sizeof ipath_stats);</span>
<span class="p_add">+				       sizeof(ipath_stats));</span>
 }
 
 static const struct file_operations atomic_stats_ops = {
<span class="p_chunk">@@ -116,7 +116,7 @@</span> <span class="p_context"> static ssize_t atomic_counters_read(struct file *file, char __user *buf,</span>
 	dd-&gt;ipath_f_read_counters(dd, &amp;counters);
 
 	return simple_read_from_buffer(buf, count, ppos, &amp;counters,
<span class="p_del">-				       sizeof counters);</span>
<span class="p_add">+				       sizeof(counters));</span>
 }
 
 static const struct file_operations atomic_counters_ops = {
<span class="p_chunk">@@ -229,7 +229,7 @@</span> <span class="p_context"> static int create_device_files(struct super_block *sb,</span>
 	char unit[10];
 	int ret;
 
<span class="p_del">-	snprintf(unit, sizeof unit, &quot;%02d&quot;, dd-&gt;ipath_unit);</span>
<span class="p_add">+	snprintf(unit, sizeof(unit), &quot;%02d&quot;, dd-&gt;ipath_unit);</span>
 	ret = create_file(unit, S_IFDIR|S_IRUGO|S_IXUGO, sb-&gt;s_root, &amp;dir,
 			  &amp;simple_dir_operations, dd);
 	if (ret) {
<span class="p_chunk">@@ -296,7 +296,7 @@</span> <span class="p_context"> static int remove_device_files(struct super_block *sb,</span>
 
 	root = dget(sb-&gt;s_root);
 	inode_lock(d_inode(root));
<span class="p_del">-	snprintf(unit, sizeof unit, &quot;%02d&quot;, dd-&gt;ipath_unit);</span>
<span class="p_add">+	snprintf(unit, sizeof(unit), &quot;%02d&quot;, dd-&gt;ipath_unit);</span>
 	dir = lookup_one_len(unit, root, strlen(unit));
 
 	if (IS_ERR(dir)) {
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_iba6110.c b/drivers/staging/rdma/ipath/ipath_iba6110.c</span>
<span class="p_header">index 5f13572a5e24..62af0f497c71 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_iba6110.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_iba6110.c</span>
<span class="p_chunk">@@ -409,7 +409,7 @@</span> <span class="p_context"> static void hwerr_crcbits(struct ipath_devdata *dd, ipath_err_t hwerrs,</span>
 	 */
 	if (crcbits) {
 		u16 ctrl0, ctrl1;
<span class="p_del">-		snprintf(bitsmsg, sizeof bitsmsg,</span>
<span class="p_add">+		snprintf(bitsmsg, sizeof(bitsmsg),</span>
 			 &quot;[HT%s lane %s CRC (%llx); powercycle to completely clear]&quot;,
 			 !(crcbits &amp; _IPATH_HTLINK1_CRCBITS) ?
 			 &quot;0 (A)&quot; : (!(crcbits &amp; _IPATH_HTLINK0_CRCBITS)
<span class="p_chunk">@@ -589,7 +589,7 @@</span> <span class="p_context"> static void ipath_ht_handle_hwerrors(struct ipath_devdata *dd, char *msg,</span>
 		bits = (u32) ((hwerrs &gt;&gt;
 			       INFINIPATH_HWE_HTCMEMPARITYERR_SHIFT) &amp;
 			      INFINIPATH_HWE_HTCMEMPARITYERR_MASK);
<span class="p_del">-		snprintf(bitsmsg, sizeof bitsmsg, &quot;[HTC Parity Errs %x] &quot;,</span>
<span class="p_add">+		snprintf(bitsmsg, sizeof(bitsmsg), &quot;[HTC Parity Errs %x] &quot;,</span>
 			 bits);
 		strlcat(msg, bitsmsg, msgl);
 	}
<span class="p_chunk">@@ -618,7 +618,7 @@</span> <span class="p_context"> static void ipath_ht_handle_hwerrors(struct ipath_devdata *dd, char *msg,</span>
 			 INFINIPATH_HWE_HTAPLL_RFSLIP)
 
 	if (hwerrs &amp; _IPATH_PLL_FAIL) {
<span class="p_del">-		snprintf(bitsmsg, sizeof bitsmsg,</span>
<span class="p_add">+		snprintf(bitsmsg, sizeof(bitsmsg),</span>
 			 &quot;[PLL failed (%llx), InfiniPath hardware unusable]&quot;,
 			 (unsigned long long) (hwerrs &amp; _IPATH_PLL_FAIL));
 		strlcat(msg, bitsmsg, msgl);
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_init_chip.c b/drivers/staging/rdma/ipath/ipath_init_chip.c</span>
<span class="p_header">index a5eea199f733..05f353217e25 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_init_chip.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_init_chip.c</span>
<span class="p_chunk">@@ -641,7 +641,7 @@</span> <span class="p_context"> static int init_housekeeping(struct ipath_devdata *dd, int reinit)</span>
 				    INFINIPATH_R_BOARDID_SHIFT) &amp;
 				   INFINIPATH_R_BOARDID_MASK);
 
<span class="p_del">-	ret = dd-&gt;ipath_f_get_boardname(dd, boardn, sizeof boardn);</span>
<span class="p_add">+	ret = dd-&gt;ipath_f_get_boardname(dd, boardn, sizeof(boardn));</span>
 
 	snprintf(dd-&gt;ipath_boardversion, sizeof(dd-&gt;ipath_boardversion),
 		 &quot;ChipABI %u.%u, %s, InfiniPath%u %u.%u, PCI %u, &quot;
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_intr.c b/drivers/staging/rdma/ipath/ipath_intr.c</span>
<span class="p_header">index 0403fa28ed8d..17a8ef85994f 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_intr.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_intr.c</span>
<span class="p_chunk">@@ -532,7 +532,7 @@</span> <span class="p_context"> static void handle_sdma_errors(struct ipath_devdata *dd, ipath_err_t errs)</span>
 
 	if (ipath_debug &amp; __IPATH_DBG) {
 		char msg[128];
<span class="p_del">-		ipath_decode_err(dd, msg, sizeof msg, errs &amp;</span>
<span class="p_add">+		ipath_decode_err(dd, msg, sizeof(msg), errs &amp;</span>
 			INFINIPATH_E_SDMAERRS);
 		ipath_dbg(&quot;errors %lx (%s)\n&quot;, (unsigned long)errs, msg);
 	}
<span class="p_chunk">@@ -642,13 +642,13 @@</span> <span class="p_context"> static int handle_errors(struct ipath_devdata *dd, ipath_err_t errs)</span>
 	 */
 	errs &amp;= dd-&gt;ipath_errormask &amp; ~dd-&gt;ipath_maskederrs;
 
<span class="p_del">-	supp_msgs = handle_frequent_errors(dd, errs, msg, (u32)sizeof msg,</span>
<span class="p_add">+	supp_msgs = handle_frequent_errors(dd, errs, msg, (u32)sizeof(msg),</span>
 		&amp;noprint);
 
 	/* do these first, they are most important */
 	if (errs &amp; INFINIPATH_E_HARDWARE) {
 		/* reuse same msg buf */
<span class="p_del">-		dd-&gt;ipath_f_handle_hwerrors(dd, msg, sizeof msg);</span>
<span class="p_add">+		dd-&gt;ipath_f_handle_hwerrors(dd, msg, sizeof(msg));</span>
 	} else {
 		u64 mask;
 		for (log_idx = 0; log_idx &lt; IPATH_EEP_LOG_CNT; ++log_idx) {
<span class="p_chunk">@@ -695,7 +695,7 @@</span> <span class="p_context"> static int handle_errors(struct ipath_devdata *dd, ipath_err_t errs)</span>
 		dd-&gt;ipath_errormask &amp;= ~dd-&gt;ipath_maskederrs;
 		ipath_write_kreg(dd, dd-&gt;ipath_kregs-&gt;kr_errormask,
 				 dd-&gt;ipath_errormask);
<span class="p_del">-		s_iserr = ipath_decode_err(dd, msg, sizeof msg,</span>
<span class="p_add">+		s_iserr = ipath_decode_err(dd, msg, sizeof(msg),</span>
 					   dd-&gt;ipath_maskederrs);
 
 		if (dd-&gt;ipath_maskederrs &amp;
<span class="p_chunk">@@ -780,7 +780,7 @@</span> <span class="p_context"> static int handle_errors(struct ipath_devdata *dd, ipath_err_t errs)</span>
 		if (ipath_debug &amp; __IPATH_DBG)
 			mask &amp;= ~INFINIPATH_E_SDMADISABLED;
 
<span class="p_del">-		ipath_decode_err(dd, msg, sizeof msg, errs &amp; ~mask);</span>
<span class="p_add">+		ipath_decode_err(dd, msg, sizeof(msg), errs &amp; ~mask);</span>
 	} else
 		/* so we don&#39;t need if (!noprint) at strlcat&#39;s below */
 		*msg = 0;
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_mmap.c b/drivers/staging/rdma/ipath/ipath_mmap.c</span>
<span class="p_header">index e73274229404..7dc1dc9b99fb 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_mmap.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_mmap.c</span>
<span class="p_chunk">@@ -134,7 +134,7 @@</span> <span class="p_context"> struct ipath_mmap_info *ipath_create_mmap_info(struct ipath_ibdev *dev,</span>
 					       void *obj) {
 	struct ipath_mmap_info *ip;
 
<span class="p_del">-	ip = kmalloc(sizeof *ip, GFP_KERNEL);</span>
<span class="p_add">+	ip = kmalloc(sizeof(*ip), GFP_KERNEL);</span>
 	if (!ip)
 		goto bail;
 
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_mr.c b/drivers/staging/rdma/ipath/ipath_mr.c</span>
<span class="p_header">index b76b0ce66709..b80bb6c08aca 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_mr.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_mr.c</span>
<span class="p_chunk">@@ -65,7 +65,7 @@</span> <span class="p_context"> struct ib_mr *ipath_get_dma_mr(struct ib_pd *pd, int acc)</span>
 	struct ipath_mr *mr;
 	struct ib_mr *ret;
 
<span class="p_del">-	mr = kzalloc(sizeof *mr, GFP_KERNEL);</span>
<span class="p_add">+	mr = kzalloc(sizeof(*mr), GFP_KERNEL);</span>
 	if (!mr) {
 		ret = ERR_PTR(-ENOMEM);
 		goto bail;
<span class="p_chunk">@@ -86,13 +86,13 @@</span> <span class="p_context"> static struct ipath_mr *alloc_mr(int count,</span>
 
 	/* Allocate struct plus pointers to first level page tables. */
 	m = (count + IPATH_SEGSZ - 1) / IPATH_SEGSZ;
<span class="p_del">-	mr = kmalloc(sizeof *mr + m * sizeof mr-&gt;mr.map[0], GFP_KERNEL);</span>
<span class="p_add">+	mr = kmalloc(sizeof(*mr) + m * sizeof(mr-&gt;mr.map[0]), GFP_KERNEL);</span>
 	if (!mr)
 		goto done;
 
 	/* Allocate first level page tables. */
 	for (; i &lt; m; i++) {
<span class="p_del">-		mr-&gt;mr.map[i] = kmalloc(sizeof *mr-&gt;mr.map[0], GFP_KERNEL);</span>
<span class="p_add">+		mr-&gt;mr.map[i] = kmalloc(sizeof(*mr-&gt;mr.map[0]), GFP_KERNEL);</span>
 		if (!mr-&gt;mr.map[i])
 			goto bail;
 	}
<span class="p_chunk">@@ -233,13 +233,13 @@</span> <span class="p_context"> struct ib_fmr *ipath_alloc_fmr(struct ib_pd *pd, int mr_access_flags,</span>
 
 	/* Allocate struct plus pointers to first level page tables. */
 	m = (fmr_attr-&gt;max_pages + IPATH_SEGSZ - 1) / IPATH_SEGSZ;
<span class="p_del">-	fmr = kmalloc(sizeof *fmr + m * sizeof fmr-&gt;mr.map[0], GFP_KERNEL);</span>
<span class="p_add">+	fmr = kmalloc(sizeof(*fmr) + m * sizeof(fmr-&gt;mr.map[0]), GFP_KERNEL);</span>
 	if (!fmr)
 		goto bail;
 
 	/* Allocate first level page tables. */
 	for (; i &lt; m; i++) {
<span class="p_del">-		fmr-&gt;mr.map[i] = kmalloc(sizeof *fmr-&gt;mr.map[0],</span>
<span class="p_add">+		fmr-&gt;mr.map[i] = kmalloc(sizeof(*fmr-&gt;mr.map[0]),</span>
 					 GFP_KERNEL);
 		if (!fmr-&gt;mr.map[i])
 			goto bail;
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_rc.c b/drivers/staging/rdma/ipath/ipath_rc.c</span>
<span class="p_header">index d4aa53574e57..dfbbaf074f05 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_rc.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_rc.c</span>
<span class="p_chunk">@@ -948,7 +948,7 @@</span> <span class="p_context"> static int do_rc_ack(struct ipath_qp *qp, u32 aeth, u32 psn, int opcode,</span>
 		/* Post a send completion queue entry if requested. */
 		if (!(qp-&gt;s_flags &amp; IPATH_S_SIGNAL_REQ_WR) ||
 		    (wqe-&gt;wr.send_flags &amp; IB_SEND_SIGNALED)) {
<span class="p_del">-			memset(&amp;wc, 0, sizeof wc);</span>
<span class="p_add">+			memset(&amp;wc, 0, sizeof(wc));</span>
 			wc.wr_id = wqe-&gt;wr.wr_id;
 			wc.status = IB_WC_SUCCESS;
 			wc.opcode = ib_ipath_wc_opcode[wqe-&gt;wr.opcode];
<span class="p_chunk">@@ -1665,7 +1665,7 @@</span> <span class="p_context"> void ipath_rc_rcv(struct ipath_ibdev *dev, struct ipath_ib_header *hdr,</span>
 		break;
 	}
 
<span class="p_del">-	memset(&amp;wc, 0, sizeof wc);</span>
<span class="p_add">+	memset(&amp;wc, 0, sizeof(wc));</span>
 
 	/* OK, process the packet. */
 	switch (opcode) {
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_ruc.c b/drivers/staging/rdma/ipath/ipath_ruc.c</span>
<span class="p_header">index e541a01f1f61..95aee4184c00 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_ruc.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_ruc.c</span>
<span class="p_chunk">@@ -321,7 +321,7 @@</span> <span class="p_context"> static void ipath_ruc_loopback(struct ipath_qp *sqp)</span>
 		goto serr;
 	}
 
<span class="p_del">-	memset(&amp;wc, 0, sizeof wc);</span>
<span class="p_add">+	memset(&amp;wc, 0, sizeof(wc));</span>
 	send_status = IB_WC_SUCCESS;
 
 	sqp-&gt;s_sge.sge = wqe-&gt;sg_list[0];
<span class="p_chunk">@@ -709,7 +709,7 @@</span> <span class="p_context"> void ipath_send_complete(struct ipath_qp *qp, struct ipath_swqe *wqe,</span>
 	    status != IB_WC_SUCCESS) {
 		struct ib_wc wc;
 
<span class="p_del">-		memset(&amp;wc, 0, sizeof wc);</span>
<span class="p_add">+		memset(&amp;wc, 0, sizeof(wc));</span>
 		wc.wr_id = wqe-&gt;wr.wr_id;
 		wc.status = status;
 		wc.opcode = ib_ipath_wc_opcode[wqe-&gt;wr.opcode];
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_stats.c b/drivers/staging/rdma/ipath/ipath_stats.c</span>
<span class="p_header">index f63e143e3292..d3ceaa6d6583 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_stats.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_stats.c</span>
<span class="p_chunk">@@ -148,13 +148,13 @@</span> <span class="p_context"> static void ipath_qcheck(struct ipath_devdata *dd)</span>
 
 	*buf = 0;
 	if (pd-&gt;port_hdrqfull != dd-&gt;ipath_p0_hdrqfull) {
<span class="p_del">-		blen = snprintf(buf, sizeof buf, &quot;port 0 hdrqfull %u&quot;,</span>
<span class="p_add">+		blen = snprintf(buf, sizeof(buf), &quot;port 0 hdrqfull %u&quot;,</span>
 				pd-&gt;port_hdrqfull -
 				dd-&gt;ipath_p0_hdrqfull);
 		dd-&gt;ipath_p0_hdrqfull = pd-&gt;port_hdrqfull;
 	}
 	if (ipath_stats.sps_etidfull != dd-&gt;ipath_last_tidfull) {
<span class="p_del">-		blen += snprintf(buf + blen, sizeof buf - blen,</span>
<span class="p_add">+		blen += snprintf(buf + blen, sizeof(buf) - blen,</span>
 				 &quot;%srcvegrfull %llu&quot;,
 				 blen ? &quot;, &quot; : &quot;&quot;,
 				 (unsigned long long)
<span class="p_chunk">@@ -172,7 +172,7 @@</span> <span class="p_context"> static void ipath_qcheck(struct ipath_devdata *dd)</span>
 
 	if ((ipath_debug &amp; (__IPATH_PKTDBG | __IPATH_DBG)) &amp;&amp;
 	    ipath_stats.sps_hdrqfull != last_tot_hdrqfull) {
<span class="p_del">-		blen += snprintf(buf + blen, sizeof buf - blen,</span>
<span class="p_add">+		blen += snprintf(buf + blen, sizeof(buf) - blen,</span>
 				 &quot;%shdrqfull %llu (all ports)&quot;,
 				 blen ? &quot;, &quot; : &quot;&quot;,
 				 (unsigned long long)
<span class="p_chunk">@@ -300,7 +300,7 @@</span> <span class="p_context"> void ipath_get_faststats(unsigned long opaque)</span>
 	    &amp;&amp; time_after(jiffies, dd-&gt;ipath_unmasktime)) {
 		char ebuf[256];
 		int iserr;
<span class="p_del">-		iserr = ipath_decode_err(dd, ebuf, sizeof ebuf,</span>
<span class="p_add">+		iserr = ipath_decode_err(dd, ebuf, sizeof(ebuf),</span>
 					 dd-&gt;ipath_maskederrs);
 		if (dd-&gt;ipath_maskederrs &amp;
 		    ~(INFINIPATH_E_RRCVEGRFULL | INFINIPATH_E_RRCVHDRFULL |
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_sysfs.c b/drivers/staging/rdma/ipath/ipath_sysfs.c</span>
<span class="p_header">index b12b1f6caf59..2e4444a425e6 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_sysfs.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_sysfs.c</span>
<span class="p_chunk">@@ -361,8 +361,8 @@</span> <span class="p_context"> static ssize_t show_serial(struct device *dev,</span>
 {
 	struct ipath_devdata *dd = dev_get_drvdata(dev);
 
<span class="p_del">-	buf[sizeof dd-&gt;ipath_serial] = &#39;\0&#39;;</span>
<span class="p_del">-	memcpy(buf, dd-&gt;ipath_serial, sizeof dd-&gt;ipath_serial);</span>
<span class="p_add">+	buf[sizeof(dd-&gt;ipath_serial)] = &#39;\0&#39;;</span>
<span class="p_add">+	memcpy(buf, dd-&gt;ipath_serial, sizeof(dd-&gt;ipath_serial));</span>
 	strcat(buf, &quot;\n&quot;);
 	return strlen(buf);
 }
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_uc.c b/drivers/staging/rdma/ipath/ipath_uc.c</span>
<span class="p_header">index 0246b30280b9..a91ed22713b2 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_uc.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_uc.c</span>
<span class="p_chunk">@@ -282,7 +282,7 @@</span> <span class="p_context"> void ipath_uc_rcv(struct ipath_ibdev *dev, struct ipath_ib_header *hdr,</span>
 	 */
 	opcode = be32_to_cpu(ohdr-&gt;bth[0]) &gt;&gt; 24;
 
<span class="p_del">-	memset(&amp;wc, 0, sizeof wc);</span>
<span class="p_add">+	memset(&amp;wc, 0, sizeof(wc));</span>
 
 	/* Compare the PSN verses the expected PSN. */
 	if (unlikely(ipath_cmp24(psn, qp-&gt;r_psn) != 0)) {
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_ud.c b/drivers/staging/rdma/ipath/ipath_ud.c</span>
<span class="p_header">index 385d9410a51e..088d2b7cdd90 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_ud.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_ud.c</span>
<span class="p_chunk">@@ -89,7 +89,7 @@</span> <span class="p_context"> static void ipath_ud_loopback(struct ipath_qp *sqp, struct ipath_swqe *swqe)</span>
 	 * present on the wire.
 	 */
 	length = swqe-&gt;length;
<span class="p_del">-	memset(&amp;wc, 0, sizeof wc);</span>
<span class="p_add">+	memset(&amp;wc, 0, sizeof(wc));</span>
 	wc.byte_len = length + sizeof(struct ib_grh);
 
 	if (swqe-&gt;wr.opcode == IB_WR_SEND_WITH_IMM) {
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_verbs.c b/drivers/staging/rdma/ipath/ipath_verbs.c</span>
<span class="p_header">index 53f9dcab180d..8c2dc23941f5 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_verbs.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_verbs.c</span>
<span class="p_chunk">@@ -1729,7 +1729,7 @@</span> <span class="p_context"> static struct ib_pd *ipath_alloc_pd(struct ib_device *ibdev,</span>
 	 * we allow allocations of more than we report for this value.
 	 */
 
<span class="p_del">-	pd = kmalloc(sizeof *pd, GFP_KERNEL);</span>
<span class="p_add">+	pd = kmalloc(sizeof(*pd), GFP_KERNEL);</span>
 	if (!pd) {
 		ret = ERR_PTR(-ENOMEM);
 		goto bail;
<span class="p_chunk">@@ -1803,7 +1803,7 @@</span> <span class="p_context"> static struct ib_ah *ipath_create_ah(struct ib_pd *pd,</span>
 		goto bail;
 	}
 
<span class="p_del">-	ah = kmalloc(sizeof *ah, GFP_ATOMIC);</span>
<span class="p_add">+	ah = kmalloc(sizeof(*ah), GFP_ATOMIC);</span>
 	if (!ah) {
 		ret = ERR_PTR(-ENOMEM);
 		goto bail;
<span class="p_chunk">@@ -1918,7 +1918,7 @@</span> <span class="p_context"> static struct ib_ucontext *ipath_alloc_ucontext(struct ib_device *ibdev,</span>
 	struct ipath_ucontext *context;
 	struct ib_ucontext *ret;
 
<span class="p_del">-	context = kmalloc(sizeof *context, GFP_KERNEL);</span>
<span class="p_add">+	context = kmalloc(sizeof(*context), GFP_KERNEL);</span>
 	if (!context) {
 		ret = ERR_PTR(-ENOMEM);
 		goto bail;
<span class="p_chunk">@@ -2028,7 +2028,7 @@</span> <span class="p_context"> int ipath_register_ib_device(struct ipath_devdata *dd)</span>
 	unsigned i;
 	int ret;
 
<span class="p_del">-	idev = (struct ipath_ibdev *)ib_alloc_device(sizeof *idev);</span>
<span class="p_add">+	idev = (struct ipath_ibdev *)ib_alloc_device(sizeof(*idev));</span>
 	if (idev == NULL) {
 		ret = -ENOMEM;
 		goto bail;
<span class="p_chunk">@@ -2037,7 +2037,7 @@</span> <span class="p_context"> int ipath_register_ib_device(struct ipath_devdata *dd)</span>
 	dev = &amp;idev-&gt;ibdev;
 
 	if (dd-&gt;ipath_sdma_descq_cnt) {
<span class="p_del">-		tx = kmalloc_array(dd-&gt;ipath_sdma_descq_cnt, sizeof *tx,</span>
<span class="p_add">+		tx = kmalloc_array(dd-&gt;ipath_sdma_descq_cnt, sizeof(*tx),</span>
 				   GFP_KERNEL);
 		if (tx == NULL) {
 			ret = -ENOMEM;
<span class="p_header">diff --git a/drivers/staging/rdma/ipath/ipath_verbs_mcast.c b/drivers/staging/rdma/ipath/ipath_verbs_mcast.c</span>
<span class="p_header">index 72d476fa5b8f..dfba8010a276 100644</span>
<span class="p_header">--- a/drivers/staging/rdma/ipath/ipath_verbs_mcast.c</span>
<span class="p_header">+++ b/drivers/staging/rdma/ipath/ipath_verbs_mcast.c</span>
<span class="p_chunk">@@ -53,7 +53,7 @@</span> <span class="p_context"> static struct ipath_mcast_qp *ipath_mcast_qp_alloc(struct ipath_qp *qp)</span>
 {
 	struct ipath_mcast_qp *mqp;
 
<span class="p_del">-	mqp = kmalloc(sizeof *mqp, GFP_KERNEL);</span>
<span class="p_add">+	mqp = kmalloc(sizeof(*mqp), GFP_KERNEL);</span>
 	if (!mqp)
 		goto bail;
 
<span class="p_chunk">@@ -85,7 +85,7 @@</span> <span class="p_context"> static struct ipath_mcast *ipath_mcast_alloc(union ib_gid *mgid)</span>
 {
 	struct ipath_mcast *mcast;
 
<span class="p_del">-	mcast = kmalloc(sizeof *mcast, GFP_KERNEL);</span>
<span class="p_add">+	mcast = kmalloc(sizeof(*mcast), GFP_KERNEL);</span>
 	if (!mcast)
 		goto bail;
 
<span class="p_header">diff --git a/drivers/target/target_core_spc.c b/drivers/target/target_core_spc.c</span>
<span class="p_header">index 0aa47babd16c..59e79597b1e4 100644</span>
<span class="p_header">--- a/drivers/target/target_core_spc.c</span>
<span class="p_header">+++ b/drivers/target/target_core_spc.c</span>
<span class="p_chunk">@@ -1261,7 +1261,7 @@</span> <span class="p_context"> sense_reason_t spc_emulate_report_luns(struct se_cmd *cmd)</span>
 
 	if (buf) {
 		len = cpu_to_be32(lun_count * 8);
<span class="p_del">-		memcpy(buf, &amp;len, min_t(int, sizeof len, cmd-&gt;data_length));</span>
<span class="p_add">+		memcpy(buf, &amp;len, min_t(int, sizeof(len), cmd-&gt;data_length));</span>
 		transport_kunmap_data_sg(cmd);
 	}
 
<span class="p_header">diff --git a/drivers/tty/pty.c b/drivers/tty/pty.c</span>
<span class="p_header">index b3110040164a..783ef215ade4 100644</span>
<span class="p_header">--- a/drivers/tty/pty.c</span>
<span class="p_header">+++ b/drivers/tty/pty.c</span>
<span class="p_chunk">@@ -388,8 +388,8 @@</span> <span class="p_context"> static int pty_common_install(struct tty_driver *driver, struct tty_struct *tty,</span>
 	if (driver-&gt;subtype != PTY_TYPE_MASTER)
 		return -EIO;
 
<span class="p_del">-	ports[0] = kmalloc(sizeof **ports, GFP_KERNEL);</span>
<span class="p_del">-	ports[1] = kmalloc(sizeof **ports, GFP_KERNEL);</span>
<span class="p_add">+	ports[0] = kmalloc(sizeof(**ports), GFP_KERNEL);</span>
<span class="p_add">+	ports[1] = kmalloc(sizeof(**ports), GFP_KERNEL);</span>
 	if (!ports[0] || !ports[1])
 		goto err;
 	if (!try_module_get(driver-&gt;other-&gt;owner)) {
<span class="p_header">diff --git a/drivers/tty/serial/8250/8250_of.c b/drivers/tty/serial/8250/8250_of.c</span>
<span class="p_header">index 33021c1f7d55..9418e6641d5a 100644</span>
<span class="p_header">--- a/drivers/tty/serial/8250/8250_of.c</span>
<span class="p_header">+++ b/drivers/tty/serial/8250/8250_of.c</span>
<span class="p_chunk">@@ -62,7 +62,7 @@</span> <span class="p_context"> static int of_platform_serial_setup(struct platform_device *ofdev,</span>
 	u32 clk, spd, prop;
 	int ret;
 
<span class="p_del">-	memset(port, 0, sizeof *port);</span>
<span class="p_add">+	memset(port, 0, sizeof(*port));</span>
 	if (of_property_read_u32(np, &quot;clock-frequency&quot;, &amp;clk)) {
 
 		/* Get clk rate through clk driver if present */
<span class="p_header">diff --git a/drivers/tty/serial/crisv10.c b/drivers/tty/serial/crisv10.c</span>
<span class="p_header">index f13f2ebd215b..99c459d9169b 100644</span>
<span class="p_header">--- a/drivers/tty/serial/crisv10.c</span>
<span class="p_header">+++ b/drivers/tty/serial/crisv10.c</span>
<span class="p_chunk">@@ -1635,7 +1635,7 @@</span> <span class="p_context"> alloc_recv_buffer(unsigned int size)</span>
 {
 	struct etrax_recv_buffer *buffer;
 
<span class="p_del">-	buffer = kmalloc(sizeof *buffer + size, GFP_ATOMIC);</span>
<span class="p_add">+	buffer = kmalloc(sizeof(*buffer) + size, GFP_ATOMIC);</span>
 	if (!buffer)
 		return NULL;
 
<span class="p_chunk">@@ -1695,7 +1695,7 @@</span> <span class="p_context"> static unsigned int handle_descr_data(struct e100_serial *info,</span>
 				      struct etrax_dma_descr *descr,
 				      unsigned int recvl)
 {
<span class="p_del">-	struct etrax_recv_buffer *buffer = phys_to_virt(descr-&gt;buf) - sizeof *buffer;</span>
<span class="p_add">+	struct etrax_recv_buffer *buffer = phys_to_virt(descr-&gt;buf) - sizeof(*buffer);</span>
 
 	if (info-&gt;recv_cnt + recvl &gt; 65536) {
 		printk(KERN_WARNING
<span class="p_chunk">@@ -2764,7 +2764,7 @@</span> <span class="p_context"> shutdown(struct e100_serial * info)</span>
 
 	for (i = 0; i &lt; SERIAL_RECV_DESCRIPTORS; i++)
 		if (descr[i].buf) {
<span class="p_del">-			buffer = phys_to_virt(descr[i].buf) - sizeof *buffer;</span>
<span class="p_add">+			buffer = phys_to_virt(descr[i].buf) - sizeof(*buffer);</span>
 			kfree(buffer);
 			descr[i].buf = 0;
 		}
<span class="p_header">diff --git a/drivers/tty/vt/vt_ioctl.c b/drivers/tty/vt/vt_ioctl.c</span>
<span class="p_header">index 97d5a74558a3..9d8105740351 100644</span>
<span class="p_header">--- a/drivers/tty/vt/vt_ioctl.c</span>
<span class="p_header">+++ b/drivers/tty/vt/vt_ioctl.c</span>
<span class="p_chunk">@@ -264,7 +264,7 @@</span> <span class="p_context"> do_unimap_ioctl(int cmd, struct unimapdesc __user *user_ud, int perm, struct vc_</span>
 {
 	struct unimapdesc tmp;
 
<span class="p_del">-	if (copy_from_user(&amp;tmp, user_ud, sizeof tmp))</span>
<span class="p_add">+	if (copy_from_user(&amp;tmp, user_ud, sizeof(tmp)))</span>
 		return -EFAULT;
 	if (tmp.entries)
 		if (!access_ok(VERIFY_WRITE, tmp.entries,
<span class="p_chunk">@@ -1173,7 +1173,7 @@</span> <span class="p_context"> compat_unimap_ioctl(unsigned int cmd, struct compat_unimapdesc __user *user_ud,</span>
 	struct compat_unimapdesc tmp;
 	struct unipair __user *tmp_entries;
 
<span class="p_del">-	if (copy_from_user(&amp;tmp, user_ud, sizeof tmp))</span>
<span class="p_add">+	if (copy_from_user(&amp;tmp, user_ud, sizeof(tmp)))</span>
 		return -EFAULT;
 	tmp_entries = compat_ptr(tmp.entries);
 	if (tmp_entries)
<span class="p_header">diff --git a/drivers/usb/class/cdc-acm.c b/drivers/usb/class/cdc-acm.c</span>
<span class="p_header">index fa4e23930614..db4541d7b706 100644</span>
<span class="p_header">--- a/drivers/usb/class/cdc-acm.c</span>
<span class="p_header">+++ b/drivers/usb/class/cdc-acm.c</span>
<span class="p_chunk">@@ -154,7 +154,7 @@</span> <span class="p_context"> static inline int acm_set_control(struct acm *acm, int control)</span>
 }
 
 #define acm_set_line(acm, line) \
<span class="p_del">-	acm_ctrl_msg(acm, USB_CDC_REQ_SET_LINE_CODING, 0, line, sizeof *(line))</span>
<span class="p_add">+	acm_ctrl_msg(acm, USB_CDC_REQ_SET_LINE_CODING, 0, line, sizeof(*(line)))</span>
 #define acm_send_break(acm, ms) \
 	acm_ctrl_msg(acm, USB_CDC_REQ_SEND_BREAK, ms, NULL, 0)
 
<span class="p_chunk">@@ -1008,8 +1008,8 @@</span> <span class="p_context"> static void acm_tty_set_termios(struct tty_struct *tty,</span>
 	if (newctrl != acm-&gt;ctrlout)
 		acm_set_control(acm, acm-&gt;ctrlout = newctrl);
 
<span class="p_del">-	if (memcmp(&amp;acm-&gt;line, &amp;newline, sizeof newline)) {</span>
<span class="p_del">-		memcpy(&amp;acm-&gt;line, &amp;newline, sizeof newline);</span>
<span class="p_add">+	if (memcmp(&amp;acm-&gt;line, &amp;newline, sizeof(newline))) {</span>
<span class="p_add">+		memcpy(&amp;acm-&gt;line, &amp;newline, sizeof(newline));</span>
 		dev_dbg(&amp;acm-&gt;control-&gt;dev, &quot;%s - set line: %d %d %d %d\n&quot;,
 			__func__,
 			le32_to_cpu(newline.dwDTERate),
<span class="p_header">diff --git a/drivers/usb/core/hcd.c b/drivers/usb/core/hcd.c</span>
<span class="p_header">index df0e3b92533a..cd71c5ffbd67 100644</span>
<span class="p_header">--- a/drivers/usb/core/hcd.c</span>
<span class="p_header">+++ b/drivers/usb/core/hcd.c</span>
<span class="p_chunk">@@ -448,7 +448,7 @@</span> <span class="p_context"> rh_string(int id, struct usb_hcd const *hcd, u8 *data, unsigned len)</span>
 		break;
 	case 3:
 		/* Manufacturer */
<span class="p_del">-		snprintf (buf, sizeof buf, &quot;%s %s %s&quot;, init_utsname()-&gt;sysname,</span>
<span class="p_add">+		snprintf (buf, sizeof(buf), &quot;%s %s %s&quot;, init_utsname()-&gt;sysname,</span>
 			init_utsname()-&gt;release, hcd-&gt;driver-&gt;description);
 		s = buf;
 		break;
<span class="p_chunk">@@ -581,16 +581,16 @@</span> <span class="p_context"> static int rh_call_control (struct usb_hcd *hcd, struct urb *urb)</span>
 			case HCD_USB31:
 			case HCD_USB3:
 				bufp = ss_rh_config_descriptor;
<span class="p_del">-				len = sizeof ss_rh_config_descriptor;</span>
<span class="p_add">+				len = sizeof(ss_rh_config_descriptor);</span>
 				break;
 			case HCD_USB25:
 			case HCD_USB2:
 				bufp = hs_rh_config_descriptor;
<span class="p_del">-				len = sizeof hs_rh_config_descriptor;</span>
<span class="p_add">+				len = sizeof(hs_rh_config_descriptor);</span>
 				break;
 			case HCD_USB11:
 				bufp = fs_rh_config_descriptor;
<span class="p_del">-				len = sizeof fs_rh_config_descriptor;</span>
<span class="p_add">+				len = sizeof(fs_rh_config_descriptor);</span>
 				break;
 			default:
 				goto error;
<span class="p_chunk">@@ -1059,7 +1059,7 @@</span> <span class="p_context"> static int register_root_hub(struct usb_hcd *hcd)</span>
 	usb_dev-&gt;devnum = devnum;
 	usb_dev-&gt;bus-&gt;devnum_next = devnum + 1;
 	memset (&amp;usb_dev-&gt;bus-&gt;devmap.devicemap, 0,
<span class="p_del">-			sizeof usb_dev-&gt;bus-&gt;devmap.devicemap);</span>
<span class="p_add">+			sizeof(usb_dev-&gt;bus-&gt;devmap.devicemap));</span>
 	set_bit (devnum, usb_dev-&gt;bus-&gt;devmap.devicemap);
 	usb_set_device_state(usb_dev, USB_STATE_ADDRESS);
 
<span class="p_chunk">@@ -1067,7 +1067,7 @@</span> <span class="p_context"> static int register_root_hub(struct usb_hcd *hcd)</span>
 
 	usb_dev-&gt;ep0.desc.wMaxPacketSize = cpu_to_le16(64);
 	retval = usb_get_device_descriptor(usb_dev, USB_DT_DEVICE_SIZE);
<span class="p_del">-	if (retval != sizeof usb_dev-&gt;descriptor) {</span>
<span class="p_add">+	if (retval != sizeof(usb_dev-&gt;descriptor)) {</span>
 		mutex_unlock(&amp;usb_bus_list_lock);
 		dev_dbg (parent_dev, &quot;can&#39;t read %s device descriptor %d\n&quot;,
 				dev_name(&amp;usb_dev-&gt;dev), retval);
<span class="p_header">diff --git a/drivers/usb/core/hub.c b/drivers/usb/core/hub.c</span>
<span class="p_header">index 350dcd9af5d8..3c44b620e2d2 100644</span>
<span class="p_header">--- a/drivers/usb/core/hub.c</span>
<span class="p_header">+++ b/drivers/usb/core/hub.c</span>
<span class="p_chunk">@@ -799,7 +799,7 @@</span> <span class="p_context"> int usb_hub_clear_tt_buffer(struct urb *urb)</span>
 	 * since each TT has &quot;at least two&quot; buffers that can need it (and
 	 * there can be many TTs per hub).  even if they&#39;re uncommon.
 	 */
<span class="p_del">-	clear = kmalloc(sizeof *clear, GFP_ATOMIC);</span>
<span class="p_add">+	clear = kmalloc(sizeof(*clear), GFP_ATOMIC);</span>
 	if (clear == NULL) {
 		dev_err(&amp;udev-&gt;dev, &quot;can&#39;t save CLEAR_TT_BUFFER state\n&quot;);
 		/* FIXME recover somehow ... RESET_TT? */
<span class="p_chunk">@@ -3723,7 +3723,7 @@</span> <span class="p_context"> static int usb_req_set_sel(struct usb_device *udev, enum usb3_link_state state)</span>
 	 * which may be initiated by an error path of a mass storage driver.
 	 * Therefore, use GFP_NOIO.
 	 */
<span class="p_del">-	sel_values = kmalloc(sizeof *(sel_values), GFP_NOIO);</span>
<span class="p_add">+	sel_values = kmalloc(sizeof(*(sel_values)), GFP_NOIO);</span>
 	if (!sel_values)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -3736,7 +3736,7 @@</span> <span class="p_context"> static int usb_req_set_sel(struct usb_device *udev, enum usb3_link_state state)</span>
 			USB_REQ_SET_SEL,
 			USB_RECIP_DEVICE,
 			0, 0,
<span class="p_del">-			sel_values, sizeof *(sel_values),</span>
<span class="p_add">+			sel_values, sizeof(*(sel_values)),</span>
 			USB_CTRL_SET_TIMEOUT);
 	kfree(sel_values);
 	return ret;
<span class="p_chunk">@@ -4601,13 +4601,13 @@</span> <span class="p_context"> check_highspeed(struct usb_hub *hub, struct usb_device *udev, int port1)</span>
 	if (udev-&gt;quirks &amp; USB_QUIRK_DEVICE_QUALIFIER)
 		return;
 
<span class="p_del">-	qual = kmalloc(sizeof *qual, GFP_KERNEL);</span>
<span class="p_add">+	qual = kmalloc(sizeof(*qual), GFP_KERNEL);</span>
 	if (qual == NULL)
 		return;
 
 	status = usb_get_descriptor(udev, USB_DT_DEVICE_QUALIFIER, 0,
<span class="p_del">-			qual, sizeof *qual);</span>
<span class="p_del">-	if (status == sizeof *qual) {</span>
<span class="p_add">+			qual, sizeof(*qual));</span>
<span class="p_add">+	if (status == sizeof(*qual)) {</span>
 		dev_info(&amp;udev-&gt;dev, &quot;not running at top speed; &quot;
 			&quot;connect to a high speed hub\n&quot;);
 		/* hub LEDs are probably harder to miss than syslog */
<span class="p_header">diff --git a/drivers/usb/core/sysfs.c b/drivers/usb/core/sysfs.c</span>
<span class="p_header">index 65b6e6b84043..881c934cdd58 100644</span>
<span class="p_header">--- a/drivers/usb/core/sysfs.c</span>
<span class="p_header">+++ b/drivers/usb/core/sysfs.c</span>
<span class="p_chunk">@@ -428,11 +428,11 @@</span> <span class="p_context"> static ssize_t level_store(struct device *dev, struct device_attribute *attr,</span>
 
 	usb_lock_device(udev);
 
<span class="p_del">-	if (len == sizeof on_string - 1 &amp;&amp;</span>
<span class="p_add">+	if (len == sizeof(on_string) - 1 &amp;&amp;</span>
 			strncmp(buf, on_string, len) == 0)
 		usb_disable_autosuspend(udev);
 
<span class="p_del">-	else if (len == sizeof auto_string - 1 &amp;&amp;</span>
<span class="p_add">+	else if (len == sizeof(auto_string) - 1 &amp;&amp;</span>
 			strncmp(buf, auto_string, len) == 0)
 		usb_enable_autosuspend(udev);
 
<span class="p_header">diff --git a/drivers/usb/core/usb.c b/drivers/usb/core/usb.c</span>
<span class="p_header">index ebb29caa3fe4..73d57a4c7d87 100644</span>
<span class="p_header">--- a/drivers/usb/core/usb.c</span>
<span class="p_header">+++ b/drivers/usb/core/usb.c</span>
<span class="p_chunk">@@ -475,12 +475,12 @@</span> <span class="p_context"> struct usb_device *usb_alloc_dev(struct usb_device *parent,</span>
 	} else {
 		/* match any labeling on the hubs; it&#39;s one-based */
 		if (parent-&gt;devpath[0] == &#39;0&#39;) {
<span class="p_del">-			snprintf(dev-&gt;devpath, sizeof dev-&gt;devpath,</span>
<span class="p_add">+			snprintf(dev-&gt;devpath, sizeof(dev-&gt;devpath),</span>
 				&quot;%d&quot;, port1);
 			/* Root ports are not counted in route string */
 			dev-&gt;route = 0;
 		} else {
<span class="p_del">-			snprintf(dev-&gt;devpath, sizeof dev-&gt;devpath,</span>
<span class="p_add">+			snprintf(dev-&gt;devpath, sizeof(dev-&gt;devpath),</span>
 				&quot;%s.%d&quot;, parent-&gt;devpath, port1);
 			/* Route string assumes hubs have less than 16 ports */
 			if (port1 &lt; 15)
<span class="p_header">diff --git a/drivers/usb/gadget/composite.c b/drivers/usb/gadget/composite.c</span>
<span class="p_header">index 8b14c2a13ac5..563848bdd6e8 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/composite.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/composite.c</span>
<span class="p_chunk">@@ -1002,8 +1002,7 @@</span> <span class="p_context"> static int get_string(struct usb_composite_dev *cdev,</span>
 		struct usb_os_string *b = buf;
 		b-&gt;bLength = sizeof(*b);
 		b-&gt;bDescriptorType = USB_DT_STRING;
<span class="p_del">-		compiletime_assert(</span>
<span class="p_del">-			sizeof(b-&gt;qwSignature) == sizeof(cdev-&gt;qw_sign),</span>
<span class="p_add">+		compiletime_assert(sizeof(b-&gt;qwSignature) == sizeof(cdev-&gt;qw_sign),</span>
 			&quot;qwSignature size must be equal to qw_sign&quot;);
 		memcpy(&amp;b-&gt;qwSignature, cdev-&gt;qw_sign, sizeof(b-&gt;qwSignature));
 		b-&gt;bMS_VendorCode = cdev-&gt;b_vendor_code;
<span class="p_chunk">@@ -1508,7 +1507,7 @@</span> <span class="p_context"> composite_setup(struct usb_gadget *gadget, const struct usb_ctrlrequest *ctrl)</span>
 				cdev-&gt;desc.bcdUSB = cpu_to_le16(0x0200);
 			}
 
<span class="p_del">-			value = min(w_length, (u16) sizeof cdev-&gt;desc);</span>
<span class="p_add">+			value = min(w_length, (u16) sizeof(cdev-&gt;desc));</span>
 			memcpy(req-&gt;buf, &amp;cdev-&gt;desc, value);
 			break;
 		case USB_DT_DEVICE_QUALIFIER:
<span class="p_chunk">@@ -2067,7 +2066,7 @@</span> <span class="p_context"> static int composite_bind(struct usb_gadget *gadget,</span>
 	struct usb_composite_driver	*composite = to_cdriver(gdriver);
 	int				status = -ENOMEM;
 
<span class="p_del">-	cdev = kzalloc(sizeof *cdev, GFP_KERNEL);</span>
<span class="p_add">+	cdev = kzalloc(sizeof(*cdev), GFP_KERNEL);</span>
 	if (!cdev)
 		return status;
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_acm.c b/drivers/usb/gadget/function/f_acm.c</span>
<span class="p_header">index 2fa1e80a3ce7..9d428b992114 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_acm.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_acm.c</span>
<span class="p_chunk">@@ -95,7 +95,7 @@</span> <span class="p_context"> static inline struct f_acm *port_to_acm(struct gserial *p)</span>
 
 static struct usb_interface_assoc_descriptor
 acm_iad_descriptor = {
<span class="p_del">-	.bLength =		sizeof acm_iad_descriptor,</span>
<span class="p_add">+	.bLength =		sizeof(acm_iad_descriptor),</span>
 	.bDescriptorType =	USB_DT_INTERFACE_ASSOCIATION,
 
 	/* .bFirstInterface =	DYNAMIC, */
<span class="p_chunk">@@ -252,7 +252,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor acm_ss_out_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor acm_ss_bulk_comp_desc = {
<span class="p_del">-	.bLength =              sizeof acm_ss_bulk_comp_desc,</span>
<span class="p_add">+	.bLength =              sizeof(acm_ss_bulk_comp_desc),</span>
 	.bDescriptorType =      USB_DT_SS_ENDPOINT_COMP,
 };
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_ecm.c b/drivers/usb/gadget/function/f_ecm.c</span>
<span class="p_header">index 7ad60ee41914..f46f9b7f71df 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_ecm.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_ecm.c</span>
<span class="p_chunk">@@ -102,7 +102,7 @@</span> <span class="p_context"> static inline unsigned ecm_bitrate(struct usb_gadget *g)</span>
 
 static struct usb_interface_assoc_descriptor
 ecm_iad_descriptor = {
<span class="p_del">-	.bLength =		sizeof ecm_iad_descriptor,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_iad_descriptor),</span>
 	.bDescriptorType =	USB_DT_INTERFACE_ASSOCIATION,
 
 	/* .bFirstInterface =	DYNAMIC, */
<span class="p_chunk">@@ -115,7 +115,7 @@</span> <span class="p_context"> ecm_iad_descriptor = {</span>
 
 
 static struct usb_interface_descriptor ecm_control_intf = {
<span class="p_del">-	.bLength =		sizeof ecm_control_intf,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_control_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber = DYNAMIC */
<span class="p_chunk">@@ -128,7 +128,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor ecm_control_intf = {</span>
 };
 
 static struct usb_cdc_header_desc ecm_header_desc = {
<span class="p_del">-	.bLength =		sizeof ecm_header_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_header_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_HEADER_TYPE,
 
<span class="p_chunk">@@ -144,7 +144,7 @@</span> <span class="p_context"> static struct usb_cdc_union_desc ecm_union_desc = {</span>
 };
 
 static struct usb_cdc_ether_desc ecm_desc = {
<span class="p_del">-	.bLength =		sizeof ecm_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_ETHERNET_TYPE,
 
<span class="p_chunk">@@ -159,7 +159,7 @@</span> <span class="p_context"> static struct usb_cdc_ether_desc ecm_desc = {</span>
 /* the default data interface has no endpoints ... */
 
 static struct usb_interface_descriptor ecm_data_nop_intf = {
<span class="p_del">-	.bLength =		sizeof ecm_data_nop_intf,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_data_nop_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	.bInterfaceNumber =	1,
<span class="p_chunk">@@ -174,7 +174,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor ecm_data_nop_intf = {</span>
 /* ... but the &quot;real&quot; data interface has two bulk endpoints */
 
 static struct usb_interface_descriptor ecm_data_intf = {
<span class="p_del">-	.bLength =		sizeof ecm_data_intf,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_data_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	.bInterfaceNumber =	1,
<span class="p_chunk">@@ -295,7 +295,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor ss_ecm_notify_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor ss_ecm_intr_comp_desc = {
<span class="p_del">-	.bLength =		sizeof ss_ecm_intr_comp_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ss_ecm_intr_comp_desc),</span>
 	.bDescriptorType =	USB_DT_SS_ENDPOINT_COMP,
 
 	/* the following 3 values can be tweaked if necessary */
<span class="p_chunk">@@ -323,7 +323,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor ss_ecm_out_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor ss_ecm_bulk_comp_desc = {
<span class="p_del">-	.bLength =		sizeof ss_ecm_bulk_comp_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ss_ecm_bulk_comp_desc),</span>
 	.bDescriptorType =	USB_DT_SS_ENDPOINT_COMP,
 
 	/* the following 2 values can be tweaked if necessary */
<span class="p_chunk">@@ -399,7 +399,7 @@</span> <span class="p_context"> static void ecm_do_notify(struct f_ecm *ecm)</span>
 		else
 			event-&gt;wValue = cpu_to_le16(0);
 		event-&gt;wLength = 0;
<span class="p_del">-		req-&gt;length = sizeof *event;</span>
<span class="p_add">+		req-&gt;length = sizeof(*event);</span>
 
 		DBG(cdev, &quot;notify connect %s\n&quot;,
 				ecm-&gt;is_open ? &quot;true&quot; : &quot;false&quot;);
<span class="p_chunk">@@ -413,7 +413,7 @@</span> <span class="p_context"> static void ecm_do_notify(struct f_ecm *ecm)</span>
 		req-&gt;length = ECM_STATUS_BYTECOUNT;
 
 		/* SPEED_CHANGE data is up/down speeds in bits/sec */
<span class="p_del">-		data = req-&gt;buf + sizeof *event;</span>
<span class="p_add">+		data = req-&gt;buf + sizeof(*event);</span>
 		data[0] = cpu_to_le32(ecm_bitrate(cdev-&gt;gadget));
 		data[1] = data[0];
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_eem.c b/drivers/usb/gadget/function/f_eem.c</span>
<span class="p_header">index cad35a502d3f..35c78be4cb1a 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_eem.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_eem.c</span>
<span class="p_chunk">@@ -44,7 +44,7 @@</span> <span class="p_context"> static inline struct f_eem *func_to_eem(struct usb_function *f)</span>
 /* interface descriptor: */
 
 static struct usb_interface_descriptor eem_intf = {
<span class="p_del">-	.bLength =		sizeof eem_intf,</span>
<span class="p_add">+	.bLength =		sizeof(eem_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber = DYNAMIC */
<span class="p_chunk">@@ -130,7 +130,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor eem_ss_out_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor eem_ss_bulk_comp_desc = {
<span class="p_del">-	.bLength =		sizeof eem_ss_bulk_comp_desc,</span>
<span class="p_add">+	.bLength =		sizeof(eem_ss_bulk_comp_desc),</span>
 	.bDescriptorType =	USB_DT_SS_ENDPOINT_COMP,
 
 	/* the following 2 values can be tweaked if necessary */
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_fs.c b/drivers/usb/gadget/function/f_fs.c</span>
<span class="p_header">index cf43e9e18368..f27cb5216b17 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_fs.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_fs.c</span>
<span class="p_chunk">@@ -402,7 +402,7 @@</span> <span class="p_context"> static ssize_t __ffs_ep0_read_events(struct ffs_data *ffs, char __user *buf,</span>
 	 * we reserve.
 	 */
 	struct usb_functionfs_event events[ARRAY_SIZE(ffs-&gt;ev.types)];
<span class="p_del">-	const size_t size = n * sizeof *events;</span>
<span class="p_add">+	const size_t size = n * sizeof(*events);</span>
 	unsigned i = 0;
 
 	memset(events, 0, size);
<span class="p_chunk">@@ -418,7 +418,7 @@</span> <span class="p_context"> static ssize_t __ffs_ep0_read_events(struct ffs_data *ffs, char __user *buf,</span>
 	ffs-&gt;ev.count -= n;
 	if (ffs-&gt;ev.count)
 		memmove(ffs-&gt;ev.types, ffs-&gt;ev.types + n,
<span class="p_del">-			ffs-&gt;ev.count * sizeof *ffs-&gt;ev.types);</span>
<span class="p_add">+			ffs-&gt;ev.count * sizeof(*ffs-&gt;ev.types));</span>
 
 	spin_unlock_irq(&amp;ffs-&gt;ev.waitq.lock);
 	mutex_unlock(&amp;ffs-&gt;mutex);
<span class="p_chunk">@@ -1440,7 +1440,7 @@</span> <span class="p_context"> static void ffs_data_closed(struct ffs_data *ffs)</span>
 
 static struct ffs_data *ffs_data_new(void)
 {
<span class="p_del">-	struct ffs_data *ffs = kzalloc(sizeof *ffs, GFP_KERNEL);</span>
<span class="p_add">+	struct ffs_data *ffs = kzalloc(sizeof(*ffs), GFP_KERNEL);</span>
 	if (unlikely(!ffs))
 		return NULL;
 
<span class="p_chunk">@@ -1765,7 +1765,7 @@</span> <span class="p_context"> static int __must_check ffs_do_single_desc(char *data, unsigned len,</span>
 	case USB_DT_INTERFACE: {
 		struct usb_interface_descriptor *ds = (void *)_ds;
 		pr_vdebug(&quot;interface descriptor\n&quot;);
<span class="p_del">-		if (length != sizeof *ds)</span>
<span class="p_add">+		if (length != sizeof(*ds))</span>
 			goto inv_length;
 
 		__entity(INTERFACE, ds-&gt;bInterfaceNumber);
<span class="p_chunk">@@ -1798,7 +1798,7 @@</span> <span class="p_context"> static int __must_check ffs_do_single_desc(char *data, unsigned len,</span>
 	case USB_DT_INTERFACE_ASSOCIATION: {
 		struct usb_interface_assoc_descriptor *ds = (void *)_ds;
 		pr_vdebug(&quot;interface association descriptor\n&quot;);
<span class="p_del">-		if (length != sizeof *ds)</span>
<span class="p_add">+		if (length != sizeof(*ds))</span>
 			goto inv_length;
 		if (ds-&gt;iFunction)
 			__entity(STRING, ds-&gt;iFunction);
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_hid.c b/drivers/usb/gadget/function/f_hid.c</span>
<span class="p_header">index 99285b416308..72e11ecf59e3 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_hid.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_hid.c</span>
<span class="p_chunk">@@ -77,7 +77,7 @@</span> <span class="p_context"> static inline struct f_hidg *func_to_hidg(struct usb_function *f)</span>
 /*                           Static descriptors                            */
 
 static struct usb_interface_descriptor hidg_interface_desc = {
<span class="p_del">-	.bLength		= sizeof hidg_interface_desc,</span>
<span class="p_add">+	.bLength		= sizeof(hidg_interface_desc),</span>
 	.bDescriptorType	= USB_DT_INTERFACE,
 	/* .bInterfaceNumber	= DYNAMIC */
 	.bAlternateSetting	= 0,
<span class="p_chunk">@@ -89,7 +89,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor hidg_interface_desc = {</span>
 };
 
 static struct hid_descriptor hidg_desc = {
<span class="p_del">-	.bLength			= sizeof hidg_desc,</span>
<span class="p_add">+	.bLength			= sizeof(hidg_desc),</span>
 	.bDescriptorType		= HID_DT_HID,
 	.bcdHID				= 0x0101,
 	.bCountryCode			= 0x00,
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_loopback.c b/drivers/usb/gadget/function/f_loopback.c</span>
<span class="p_header">index ddc3aad886b7..552cf8edfa44 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_loopback.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_loopback.c</span>
<span class="p_chunk">@@ -433,7 +433,7 @@</span> <span class="p_context"> static struct usb_function *loopback_alloc(struct usb_function_instance *fi)</span>
 	struct f_loopback	*loop;
 	struct f_lb_opts	*lb_opts;
 
<span class="p_del">-	loop = kzalloc(sizeof *loop, GFP_KERNEL);</span>
<span class="p_add">+	loop = kzalloc(sizeof(*loop), GFP_KERNEL);</span>
 	if (!loop)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_mass_storage.c b/drivers/usb/gadget/function/f_mass_storage.c</span>
<span class="p_header">index 223ccf89d226..c2e38e2b4df9 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_mass_storage.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_mass_storage.c</span>
<span class="p_chunk">@@ -1107,7 +1107,7 @@</span> <span class="p_context"> static int do_inquiry(struct fsg_common *common, struct fsg_buffhd *bh)</span>
 	buf[5] = 0;		/* No special options */
 	buf[6] = 0;
 	buf[7] = 0;
<span class="p_del">-	memcpy(buf + 8, common-&gt;inquiry_string, sizeof common-&gt;inquiry_string);</span>
<span class="p_add">+	memcpy(buf + 8, common-&gt;inquiry_string, sizeof(common-&gt;inquiry_string));</span>
 	return 36;
 }
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_ncm.c b/drivers/usb/gadget/function/f_ncm.c</span>
<span class="p_header">index 7ad798ace1e5..432dc9aab308 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_ncm.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_ncm.c</span>
<span class="p_chunk">@@ -146,7 +146,7 @@</span> <span class="p_context"> static struct usb_cdc_ncm_ntb_parameters ntb_parameters = {</span>
 #define NCM_STATUS_BYTECOUNT		16	/* 8 byte header + data */
 
 static struct usb_interface_assoc_descriptor ncm_iad_desc = {
<span class="p_del">-	.bLength =		sizeof ncm_iad_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ncm_iad_desc),</span>
 	.bDescriptorType =	USB_DT_INTERFACE_ASSOCIATION,
 
 	/* .bFirstInterface =	DYNAMIC, */
<span class="p_chunk">@@ -160,7 +160,7 @@</span> <span class="p_context"> static struct usb_interface_assoc_descriptor ncm_iad_desc = {</span>
 /* interface descriptor: */
 
 static struct usb_interface_descriptor ncm_control_intf = {
<span class="p_del">-	.bLength =		sizeof ncm_control_intf,</span>
<span class="p_add">+	.bLength =		sizeof(ncm_control_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber = DYNAMIC */
<span class="p_chunk">@@ -172,7 +172,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor ncm_control_intf = {</span>
 };
 
 static struct usb_cdc_header_desc ncm_header_desc = {
<span class="p_del">-	.bLength =		sizeof ncm_header_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ncm_header_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_HEADER_TYPE,
 
<span class="p_chunk">@@ -188,7 +188,7 @@</span> <span class="p_context"> static struct usb_cdc_union_desc ncm_union_desc = {</span>
 };
 
 static struct usb_cdc_ether_desc ecm_desc = {
<span class="p_del">-	.bLength =		sizeof ecm_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ecm_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_ETHERNET_TYPE,
 
<span class="p_chunk">@@ -203,7 +203,7 @@</span> <span class="p_context"> static struct usb_cdc_ether_desc ecm_desc = {</span>
 #define NCAPS	(USB_CDC_NCM_NCAP_ETH_FILTER | USB_CDC_NCM_NCAP_CRC_MODE)
 
 static struct usb_cdc_ncm_desc ncm_desc = {
<span class="p_del">-	.bLength =		sizeof ncm_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ncm_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_NCM_TYPE,
 
<span class="p_chunk">@@ -215,7 +215,7 @@</span> <span class="p_context"> static struct usb_cdc_ncm_desc ncm_desc = {</span>
 /* the default data interface has no endpoints ... */
 
 static struct usb_interface_descriptor ncm_data_nop_intf = {
<span class="p_del">-	.bLength =		sizeof ncm_data_nop_intf,</span>
<span class="p_add">+	.bLength =		sizeof(ncm_data_nop_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	.bInterfaceNumber =	1,
<span class="p_chunk">@@ -230,7 +230,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor ncm_data_nop_intf = {</span>
 /* ... but the &quot;real&quot; data interface has two bulk endpoints */
 
 static struct usb_interface_descriptor ncm_data_intf = {
<span class="p_del">-	.bLength =		sizeof ncm_data_intf,</span>
<span class="p_add">+	.bLength =		sizeof(ncm_data_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	.bInterfaceNumber =	1,
<span class="p_chunk">@@ -495,7 +495,7 @@</span> <span class="p_context"> static void ncm_do_notify(struct f_ncm *ncm)</span>
 		else
 			event-&gt;wValue = cpu_to_le16(0);
 		event-&gt;wLength = 0;
<span class="p_del">-		req-&gt;length = sizeof *event;</span>
<span class="p_add">+		req-&gt;length = sizeof(*event);</span>
 
 		DBG(cdev, &quot;notify connect %s\n&quot;,
 				ncm-&gt;is_open ? &quot;true&quot; : &quot;false&quot;);
<span class="p_chunk">@@ -509,7 +509,7 @@</span> <span class="p_context"> static void ncm_do_notify(struct f_ncm *ncm)</span>
 		req-&gt;length = NCM_STATUS_BYTECOUNT;
 
 		/* SPEED_CHANGE data is up/down speeds in bits/sec */
<span class="p_del">-		data = req-&gt;buf + sizeof *event;</span>
<span class="p_add">+		data = req-&gt;buf + sizeof(*event);</span>
 		data[0] = cpu_to_le32(ncm_bitrate(cdev-&gt;gadget));
 		data[1] = data[0];
 
<span class="p_chunk">@@ -657,8 +657,8 @@</span> <span class="p_context"> static int ncm_setup(struct usb_function *f, const struct usb_ctrlrequest *ctrl)</span>
 
 		if (w_length == 0 || w_value != 0 || w_index != ncm-&gt;ctrl_id)
 			goto invalid;
<span class="p_del">-		value = w_length &gt; sizeof ntb_parameters ?</span>
<span class="p_del">-			sizeof ntb_parameters : w_length;</span>
<span class="p_add">+		value = w_length &gt; sizeof(ntb_parameters) ?</span>
<span class="p_add">+			sizeof(ntb_parameters) : w_length;</span>
 		memcpy(req-&gt;buf, &amp;ntb_parameters, value);
 		VDBG(cdev, &quot;Host asked NTB parameters\n&quot;);
 		break;
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_phonet.c b/drivers/usb/gadget/function/f_phonet.c</span>
<span class="p_header">index 157441dbfeba..ce43237367eb 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_phonet.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_phonet.c</span>
<span class="p_chunk">@@ -68,7 +68,7 @@</span> <span class="p_context"> static inline struct f_phonet *func_to_pn(struct usb_function *f)</span>
 
 static struct usb_interface_descriptor
 pn_control_intf_desc = {
<span class="p_del">-	.bLength =		sizeof pn_control_intf_desc,</span>
<span class="p_add">+	.bLength =		sizeof(pn_control_intf_desc),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber =	DYNAMIC, */
<span class="p_chunk">@@ -78,7 +78,7 @@</span> <span class="p_context"> pn_control_intf_desc = {</span>
 
 static const struct usb_cdc_header_desc
 pn_header_desc = {
<span class="p_del">-	.bLength =		sizeof pn_header_desc,</span>
<span class="p_add">+	.bLength =		sizeof(pn_header_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_HEADER_TYPE,
 	.bcdCDC =		cpu_to_le16(0x0110),
<span class="p_chunk">@@ -86,7 +86,7 @@</span> <span class="p_context"> pn_header_desc = {</span>
 
 static const struct usb_cdc_header_desc
 pn_phonet_desc = {
<span class="p_del">-	.bLength =		sizeof pn_phonet_desc,</span>
<span class="p_add">+	.bLength =		sizeof(pn_phonet_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_PHONET_TYPE,
 	.bcdCDC =		cpu_to_le16(0x1505), /* ??? */
<span class="p_chunk">@@ -94,7 +94,7 @@</span> <span class="p_context"> pn_phonet_desc = {</span>
 
 static struct usb_cdc_union_desc
 pn_union_desc = {
<span class="p_del">-	.bLength =		sizeof pn_union_desc,</span>
<span class="p_add">+	.bLength =		sizeof(pn_union_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_UNION_TYPE,
 
<span class="p_chunk">@@ -104,7 +104,7 @@</span> <span class="p_context"> pn_union_desc = {</span>
 
 static struct usb_interface_descriptor
 pn_data_nop_intf_desc = {
<span class="p_del">-	.bLength =		sizeof pn_data_nop_intf_desc,</span>
<span class="p_add">+	.bLength =		sizeof(pn_data_nop_intf_desc),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber =	DYNAMIC, */
<span class="p_chunk">@@ -115,7 +115,7 @@</span> <span class="p_context"> pn_data_nop_intf_desc = {</span>
 
 static struct usb_interface_descriptor
 pn_data_intf_desc = {
<span class="p_del">-	.bLength =		sizeof pn_data_intf_desc,</span>
<span class="p_add">+	.bLength =		sizeof(pn_data_intf_desc),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber =	DYNAMIC, */
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_rndis.c b/drivers/usb/gadget/function/f_rndis.c</span>
<span class="p_header">index e587767e374c..9720c7e229da 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_rndis.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_rndis.c</span>
<span class="p_chunk">@@ -111,7 +111,7 @@</span> <span class="p_context"> static unsigned int bitrate(struct usb_gadget *g)</span>
 /* interface descriptor: */
 
 static struct usb_interface_descriptor rndis_control_intf = {
<span class="p_del">-	.bLength =		sizeof rndis_control_intf,</span>
<span class="p_add">+	.bLength =		sizeof(rndis_control_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber = DYNAMIC */
<span class="p_chunk">@@ -124,7 +124,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor rndis_control_intf = {</span>
 };
 
 static struct usb_cdc_header_desc header_desc = {
<span class="p_del">-	.bLength =		sizeof header_desc,</span>
<span class="p_add">+	.bLength =		sizeof(header_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_HEADER_TYPE,
 
<span class="p_chunk">@@ -132,7 +132,7 @@</span> <span class="p_context"> static struct usb_cdc_header_desc header_desc = {</span>
 };
 
 static struct usb_cdc_call_mgmt_descriptor call_mgmt_descriptor = {
<span class="p_del">-	.bLength =		sizeof call_mgmt_descriptor,</span>
<span class="p_add">+	.bLength =		sizeof(call_mgmt_descriptor),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_CALL_MANAGEMENT_TYPE,
 
<span class="p_chunk">@@ -141,7 +141,7 @@</span> <span class="p_context"> static struct usb_cdc_call_mgmt_descriptor call_mgmt_descriptor = {</span>
 };
 
 static struct usb_cdc_acm_descriptor rndis_acm_descriptor = {
<span class="p_del">-	.bLength =		sizeof rndis_acm_descriptor,</span>
<span class="p_add">+	.bLength =		sizeof(rndis_acm_descriptor),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_ACM_TYPE,
 
<span class="p_chunk">@@ -159,7 +159,7 @@</span> <span class="p_context"> static struct usb_cdc_union_desc rndis_union_desc = {</span>
 /* the data interface has two bulk endpoints */
 
 static struct usb_interface_descriptor rndis_data_intf = {
<span class="p_del">-	.bLength =		sizeof rndis_data_intf,</span>
<span class="p_add">+	.bLength =		sizeof(rndis_data_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber = DYNAMIC */
<span class="p_chunk">@@ -173,7 +173,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor rndis_data_intf = {</span>
 
 static struct usb_interface_assoc_descriptor
 rndis_iad_descriptor = {
<span class="p_del">-	.bLength =		sizeof rndis_iad_descriptor,</span>
<span class="p_add">+	.bLength =		sizeof(rndis_iad_descriptor),</span>
 	.bDescriptorType =	USB_DT_INTERFACE_ASSOCIATION,
 
 	.bFirstInterface =	0, /* XXX, hardcoded */
<span class="p_chunk">@@ -291,7 +291,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor ss_notify_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor ss_intr_comp_desc = {
<span class="p_del">-	.bLength =		sizeof ss_intr_comp_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ss_intr_comp_desc),</span>
 	.bDescriptorType =	USB_DT_SS_ENDPOINT_COMP,
 
 	/* the following 3 values can be tweaked if necessary */
<span class="p_chunk">@@ -319,7 +319,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor ss_out_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor ss_bulk_comp_desc = {
<span class="p_del">-	.bLength =		sizeof ss_bulk_comp_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ss_bulk_comp_desc),</span>
 	.bDescriptorType =	USB_DT_SS_ENDPOINT_COMP,
 
 	/* the following 2 values can be tweaked if necessary */
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_serial.c b/drivers/usb/gadget/function/f_serial.c</span>
<span class="p_header">index 6bb44d613bab..33f8125f34fa 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_serial.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_serial.c</span>
<span class="p_chunk">@@ -114,7 +114,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor gser_ss_out_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor gser_ss_bulk_comp_desc = {
<span class="p_del">-	.bLength =              sizeof gser_ss_bulk_comp_desc,</span>
<span class="p_add">+	.bLength =              sizeof(gser_ss_bulk_comp_desc),</span>
 	.bDescriptorType =      USB_DT_SS_ENDPOINT_COMP,
 };
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_subset.c b/drivers/usb/gadget/function/f_subset.c</span>
<span class="p_header">index 829c78de9eba..a7a617c5a569 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_subset.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_subset.c</span>
<span class="p_chunk">@@ -77,7 +77,7 @@</span> <span class="p_context"> static inline struct f_gether *func_to_geth(struct usb_function *f)</span>
 /* interface descriptor: */
 
 static struct usb_interface_descriptor subset_data_intf = {
<span class="p_del">-	.bLength =		sizeof subset_data_intf,</span>
<span class="p_add">+	.bLength =		sizeof(subset_data_intf),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	/* .bInterfaceNumber = DYNAMIC */
<span class="p_chunk">@@ -90,7 +90,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor subset_data_intf = {</span>
 };
 
 static struct usb_cdc_header_desc mdlm_header_desc = {
<span class="p_del">-	.bLength =		sizeof mdlm_header_desc,</span>
<span class="p_add">+	.bLength =		sizeof(mdlm_header_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_HEADER_TYPE,
 
<span class="p_chunk">@@ -98,7 +98,7 @@</span> <span class="p_context"> static struct usb_cdc_header_desc mdlm_header_desc = {</span>
 };
 
 static struct usb_cdc_mdlm_desc mdlm_desc = {
<span class="p_del">-	.bLength =		sizeof mdlm_desc,</span>
<span class="p_add">+	.bLength =		sizeof(mdlm_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_MDLM_TYPE,
 
<span class="p_chunk">@@ -124,7 +124,7 @@</span> <span class="p_context"> static u8 mdlm_detail_desc[] = {</span>
 };
 
 static struct usb_cdc_ether_desc ether_desc = {
<span class="p_del">-	.bLength =		sizeof ether_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ether_desc),</span>
 	.bDescriptorType =	USB_DT_CS_INTERFACE,
 	.bDescriptorSubType =	USB_CDC_ETHERNET_TYPE,
 
<span class="p_chunk">@@ -213,7 +213,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor ss_subset_out_desc = {</span>
 };
 
 static struct usb_ss_ep_comp_descriptor ss_subset_bulk_comp_desc = {
<span class="p_del">-	.bLength =		sizeof ss_subset_bulk_comp_desc,</span>
<span class="p_add">+	.bLength =		sizeof(ss_subset_bulk_comp_desc),</span>
 	.bDescriptorType =	USB_DT_SS_ENDPOINT_COMP,
 
 	/* the following 2 values can be tweaked if necessary */
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_uac1.c b/drivers/usb/gadget/function/f_uac1.c</span>
<span class="p_header">index 6a2346b99f55..ed07adb58b8c 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_uac1.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_uac1.c</span>
<span class="p_chunk">@@ -254,7 +254,7 @@</span> <span class="p_context"> static struct f_audio_buf *f_audio_buffer_alloc(int buf_size)</span>
 {
 	struct f_audio_buf *copy_buf;
 
<span class="p_del">-	copy_buf = kzalloc(sizeof *copy_buf, GFP_ATOMIC);</span>
<span class="p_add">+	copy_buf = kzalloc(sizeof(*copy_buf), GFP_ATOMIC);</span>
 	if (!copy_buf)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/usb/gadget/function/f_uac2.c b/drivers/usb/gadget/function/f_uac2.c</span>
<span class="p_header">index 044ca79d3cb5..75706e02778d 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/f_uac2.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/f_uac2.c</span>
<span class="p_chunk">@@ -599,7 +599,7 @@</span> <span class="p_context"> static struct usb_gadget_strings *fn_strings[] = {</span>
 };
 
 static struct usb_qualifier_descriptor devqual_desc = {
<span class="p_del">-	.bLength = sizeof devqual_desc,</span>
<span class="p_add">+	.bLength = sizeof(devqual_desc),</span>
 	.bDescriptorType = USB_DT_DEVICE_QUALIFIER,
 
 	.bcdUSB = cpu_to_le16(0x200),
<span class="p_chunk">@@ -611,7 +611,7 @@</span> <span class="p_context"> static struct usb_qualifier_descriptor devqual_desc = {</span>
 };
 
 static struct usb_interface_assoc_descriptor iad_desc = {
<span class="p_del">-	.bLength = sizeof iad_desc,</span>
<span class="p_add">+	.bLength = sizeof(iad_desc),</span>
 	.bDescriptorType = USB_DT_INTERFACE_ASSOCIATION,
 
 	.bFirstInterface = 0,
<span class="p_chunk">@@ -623,7 +623,7 @@</span> <span class="p_context"> static struct usb_interface_assoc_descriptor iad_desc = {</span>
 
 /* Audio Control Interface */
 static struct usb_interface_descriptor std_ac_if_desc = {
<span class="p_del">-	.bLength = sizeof std_ac_if_desc,</span>
<span class="p_add">+	.bLength = sizeof(std_ac_if_desc),</span>
 	.bDescriptorType = USB_DT_INTERFACE,
 
 	.bAlternateSetting = 0,
<span class="p_chunk">@@ -635,7 +635,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor std_ac_if_desc = {</span>
 
 /* Clock source for IN traffic */
 static struct uac_clock_source_descriptor in_clk_src_desc = {
<span class="p_del">-	.bLength = sizeof in_clk_src_desc,</span>
<span class="p_add">+	.bLength = sizeof(in_clk_src_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC2_CLOCK_SOURCE,
<span class="p_chunk">@@ -647,7 +647,7 @@</span> <span class="p_context"> static struct uac_clock_source_descriptor in_clk_src_desc = {</span>
 
 /* Clock source for OUT traffic */
 static struct uac_clock_source_descriptor out_clk_src_desc = {
<span class="p_del">-	.bLength = sizeof out_clk_src_desc,</span>
<span class="p_add">+	.bLength = sizeof(out_clk_src_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC2_CLOCK_SOURCE,
<span class="p_chunk">@@ -659,7 +659,7 @@</span> <span class="p_context"> static struct uac_clock_source_descriptor out_clk_src_desc = {</span>
 
 /* Input Terminal for USB_OUT */
 static struct uac2_input_terminal_descriptor usb_out_it_desc = {
<span class="p_del">-	.bLength = sizeof usb_out_it_desc,</span>
<span class="p_add">+	.bLength = sizeof(usb_out_it_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_INPUT_TERMINAL,
<span class="p_chunk">@@ -673,7 +673,7 @@</span> <span class="p_context"> static struct uac2_input_terminal_descriptor usb_out_it_desc = {</span>
 
 /* Input Terminal for I/O-In */
 static struct uac2_input_terminal_descriptor io_in_it_desc = {
<span class="p_del">-	.bLength = sizeof io_in_it_desc,</span>
<span class="p_add">+	.bLength = sizeof(io_in_it_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_INPUT_TERMINAL,
<span class="p_chunk">@@ -687,7 +687,7 @@</span> <span class="p_context"> static struct uac2_input_terminal_descriptor io_in_it_desc = {</span>
 
 /* Ouput Terminal for USB_IN */
 static struct uac2_output_terminal_descriptor usb_in_ot_desc = {
<span class="p_del">-	.bLength = sizeof usb_in_ot_desc,</span>
<span class="p_add">+	.bLength = sizeof(usb_in_ot_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_OUTPUT_TERMINAL,
<span class="p_chunk">@@ -701,7 +701,7 @@</span> <span class="p_context"> static struct uac2_output_terminal_descriptor usb_in_ot_desc = {</span>
 
 /* Ouput Terminal for I/O-Out */
 static struct uac2_output_terminal_descriptor io_out_ot_desc = {
<span class="p_del">-	.bLength = sizeof io_out_ot_desc,</span>
<span class="p_add">+	.bLength = sizeof(io_out_ot_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_OUTPUT_TERMINAL,
<span class="p_chunk">@@ -714,21 +714,21 @@</span> <span class="p_context"> static struct uac2_output_terminal_descriptor io_out_ot_desc = {</span>
 };
 
 static struct uac2_ac_header_descriptor ac_hdr_desc = {
<span class="p_del">-	.bLength = sizeof ac_hdr_desc,</span>
<span class="p_add">+	.bLength = sizeof(ac_hdr_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_MS_HEADER,
 	.bcdADC = cpu_to_le16(0x200),
 	.bCategory = UAC2_FUNCTION_IO_BOX,
<span class="p_del">-	.wTotalLength = sizeof in_clk_src_desc + sizeof out_clk_src_desc</span>
<span class="p_del">-			 + sizeof usb_out_it_desc + sizeof io_in_it_desc</span>
<span class="p_del">-			+ sizeof usb_in_ot_desc + sizeof io_out_ot_desc,</span>
<span class="p_add">+	.wTotalLength = sizeof(in_clk_src_desc) + sizeof(out_clk_src_desc)</span>
<span class="p_add">+			 + sizeof(usb_out_it_desc) + sizeof(io_in_it_desc)</span>
<span class="p_add">+			+ sizeof(usb_in_ot_desc) + sizeof(io_out_ot_desc),</span>
 	.bmControls = 0,
 };
 
 /* Audio Streaming OUT Interface - Alt0 */
 static struct usb_interface_descriptor std_as_out_if0_desc = {
<span class="p_del">-	.bLength = sizeof std_as_out_if0_desc,</span>
<span class="p_add">+	.bLength = sizeof(std_as_out_if0_desc),</span>
 	.bDescriptorType = USB_DT_INTERFACE,
 
 	.bAlternateSetting = 0,
<span class="p_chunk">@@ -740,7 +740,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor std_as_out_if0_desc = {</span>
 
 /* Audio Streaming OUT Interface - Alt1 */
 static struct usb_interface_descriptor std_as_out_if1_desc = {
<span class="p_del">-	.bLength = sizeof std_as_out_if1_desc,</span>
<span class="p_add">+	.bLength = sizeof(std_as_out_if1_desc),</span>
 	.bDescriptorType = USB_DT_INTERFACE,
 
 	.bAlternateSetting = 1,
<span class="p_chunk">@@ -752,7 +752,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor std_as_out_if1_desc = {</span>
 
 /* Audio Stream OUT Intface Desc */
 static struct uac2_as_header_descriptor as_out_hdr_desc = {
<span class="p_del">-	.bLength = sizeof as_out_hdr_desc,</span>
<span class="p_add">+	.bLength = sizeof(as_out_hdr_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_AS_GENERAL,
<span class="p_chunk">@@ -765,7 +765,7 @@</span> <span class="p_context"> static struct uac2_as_header_descriptor as_out_hdr_desc = {</span>
 
 /* Audio USB_OUT Format */
 static struct uac2_format_type_i_descriptor as_out_fmt1_desc = {
<span class="p_del">-	.bLength = sizeof as_out_fmt1_desc,</span>
<span class="p_add">+	.bLength = sizeof(as_out_fmt1_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 	.bDescriptorSubtype = UAC_FORMAT_TYPE,
 	.bFormatType = UAC_FORMAT_TYPE_I,
<span class="p_chunk">@@ -793,7 +793,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor hs_epout_desc = {</span>
 
 /* CS AS ISO OUT Endpoint */
 static struct uac2_iso_endpoint_descriptor as_iso_out_desc = {
<span class="p_del">-	.bLength = sizeof as_iso_out_desc,</span>
<span class="p_add">+	.bLength = sizeof(as_iso_out_desc),</span>
 	.bDescriptorType = USB_DT_CS_ENDPOINT,
 
 	.bDescriptorSubtype = UAC_EP_GENERAL,
<span class="p_chunk">@@ -805,7 +805,7 @@</span> <span class="p_context"> static struct uac2_iso_endpoint_descriptor as_iso_out_desc = {</span>
 
 /* Audio Streaming IN Interface - Alt0 */
 static struct usb_interface_descriptor std_as_in_if0_desc = {
<span class="p_del">-	.bLength = sizeof std_as_in_if0_desc,</span>
<span class="p_add">+	.bLength = sizeof(std_as_in_if0_desc),</span>
 	.bDescriptorType = USB_DT_INTERFACE,
 
 	.bAlternateSetting = 0,
<span class="p_chunk">@@ -817,7 +817,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor std_as_in_if0_desc = {</span>
 
 /* Audio Streaming IN Interface - Alt1 */
 static struct usb_interface_descriptor std_as_in_if1_desc = {
<span class="p_del">-	.bLength = sizeof std_as_in_if1_desc,</span>
<span class="p_add">+	.bLength = sizeof(std_as_in_if1_desc),</span>
 	.bDescriptorType = USB_DT_INTERFACE,
 
 	.bAlternateSetting = 1,
<span class="p_chunk">@@ -829,7 +829,7 @@</span> <span class="p_context"> static struct usb_interface_descriptor std_as_in_if1_desc = {</span>
 
 /* Audio Stream IN Intface Desc */
 static struct uac2_as_header_descriptor as_in_hdr_desc = {
<span class="p_del">-	.bLength = sizeof as_in_hdr_desc,</span>
<span class="p_add">+	.bLength = sizeof(as_in_hdr_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 
 	.bDescriptorSubtype = UAC_AS_GENERAL,
<span class="p_chunk">@@ -842,7 +842,7 @@</span> <span class="p_context"> static struct uac2_as_header_descriptor as_in_hdr_desc = {</span>
 
 /* Audio USB_IN Format */
 static struct uac2_format_type_i_descriptor as_in_fmt1_desc = {
<span class="p_del">-	.bLength = sizeof as_in_fmt1_desc,</span>
<span class="p_add">+	.bLength = sizeof(as_in_fmt1_desc),</span>
 	.bDescriptorType = USB_DT_CS_INTERFACE,
 	.bDescriptorSubtype = UAC_FORMAT_TYPE,
 	.bFormatType = UAC_FORMAT_TYPE_I,
<span class="p_chunk">@@ -870,7 +870,7 @@</span> <span class="p_context"> static struct usb_endpoint_descriptor hs_epin_desc = {</span>
 
 /* CS AS ISO IN Endpoint */
 static struct uac2_iso_endpoint_descriptor as_iso_in_desc = {
<span class="p_del">-	.bLength = sizeof as_iso_in_desc,</span>
<span class="p_add">+	.bLength = sizeof(as_iso_in_desc),</span>
 	.bDescriptorType = USB_DT_CS_ENDPOINT,
 
 	.bDescriptorSubtype = UAC_EP_GENERAL,
<span class="p_chunk">@@ -1297,7 +1297,7 @@</span> <span class="p_context"> in_rq_cur(struct usb_function *fn, const struct usb_ctrlrequest *cr)</span>
 		else if (entity_id == USB_OUT_CLK_ID)
 			c.dCUR = c_srate;
 
<span class="p_del">-		value = min_t(unsigned, w_length, sizeof c);</span>
<span class="p_add">+		value = min_t(unsigned, w_length, sizeof(c));</span>
 		memcpy(req-&gt;buf, &amp;c, value);
 	} else if (control_selector == UAC2_CS_CONTROL_CLOCK_VALID) {
 		*(u8 *)req-&gt;buf = 1;
<span class="p_chunk">@@ -1343,7 +1343,7 @@</span> <span class="p_context"> in_rq_range(struct usb_function *fn, const struct usb_ctrlrequest *cr)</span>
 		r.dRES = 0;
 		r.wNumSubRanges = 1;
 
<span class="p_del">-		value = min_t(unsigned, w_length, sizeof r);</span>
<span class="p_add">+		value = min_t(unsigned, w_length, sizeof(r));</span>
 		memcpy(req-&gt;buf, &amp;r, value);
 	} else {
 		dev_err(&amp;uac2-&gt;pdev.dev,
<span class="p_header">diff --git a/drivers/usb/gadget/function/rndis.c b/drivers/usb/gadget/function/rndis.c</span>
<span class="p_header">index 70d3917cc003..7cb49fd1fefc 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/rndis.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/rndis.c</span>
<span class="p_chunk">@@ -625,7 +625,7 @@</span> <span class="p_context"> static int rndis_query_response(struct rndis_params *params,</span>
 			r)) {
 		/* OID not supported */
 		resp-&gt;Status = cpu_to_le32(RNDIS_STATUS_NOT_SUPPORTED);
<span class="p_del">-		resp-&gt;MessageLength = cpu_to_le32(sizeof *resp);</span>
<span class="p_add">+		resp-&gt;MessageLength = cpu_to_le32(sizeof(*resp));</span>
 		resp-&gt;InformationBufferLength = cpu_to_le32(0);
 		resp-&gt;InformationBufferOffset = cpu_to_le32(0);
 	} else
<span class="p_chunk">@@ -996,7 +996,7 @@</span> <span class="p_context"> void rndis_add_hdr(struct sk_buff *skb)</span>
 	if (!skb)
 		return;
 	header = (void *)skb_push(skb, sizeof(*header));
<span class="p_del">-	memset(header, 0, sizeof *header);</span>
<span class="p_add">+	memset(header, 0, sizeof(*header));</span>
 	header-&gt;MessageType = cpu_to_le32(RNDIS_MSG_PACKET);
 	header-&gt;MessageLength = cpu_to_le32(skb-&gt;len);
 	header-&gt;DataOffset = cpu_to_le32(36);
<span class="p_header">diff --git a/drivers/usb/gadget/function/storage_common.c b/drivers/usb/gadget/function/storage_common.c</span>
<span class="p_header">index d62683017cf3..2ab5f8011c0e 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/storage_common.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/storage_common.c</span>
<span class="p_chunk">@@ -34,7 +34,7 @@</span> <span class="p_context"></span>
 /* There is only one interface. */
 
 struct usb_interface_descriptor fsg_intf_desc = {
<span class="p_del">-	.bLength =		sizeof fsg_intf_desc,</span>
<span class="p_add">+	.bLength =		sizeof(fsg_intf_desc),</span>
 	.bDescriptorType =	USB_DT_INTERFACE,
 
 	.bNumEndpoints =	2,		/* Adjusted during fsg_bind() */
<span class="p_header">diff --git a/drivers/usb/gadget/function/u_ether.c b/drivers/usb/gadget/function/u_ether.c</span>
<span class="p_header">index 637809e3bd0d..403f4048e589 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/function/u_ether.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/function/u_ether.c</span>
<span class="p_chunk">@@ -763,7 +763,7 @@</span> <span class="p_context"> struct eth_dev *gether_setup_name(struct usb_gadget *g,</span>
 	struct net_device	*net;
 	int			status;
 
<span class="p_del">-	net = alloc_etherdev(sizeof *dev);</span>
<span class="p_add">+	net = alloc_etherdev(sizeof(*dev));</span>
 	if (!net)
 		return ERR_PTR(-ENOMEM);
 
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/acm_ms.c b/drivers/usb/gadget/legacy/acm_ms.c</span>
<span class="p_header">index c16089efc322..b6c409c6d14d 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/acm_ms.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/acm_ms.c</span>
<span class="p_chunk">@@ -37,7 +37,7 @@</span> <span class="p_context"></span>
 USB_GADGET_COMPOSITE_OPTIONS();
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/audio.c b/drivers/usb/gadget/legacy/audio.c</span>
<span class="p_header">index 5d7b3c6a422b..dbb3d115b4e1 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/audio.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/audio.c</span>
<span class="p_chunk">@@ -120,7 +120,7 @@</span> <span class="p_context"> static struct usb_function *f_uac1;</span>
 /*-------------------------------------------------------------------------*/
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/cdc2.c b/drivers/usb/gadget/legacy/cdc2.c</span>
<span class="p_header">index 51c08682de84..1f6b374582e6 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/cdc2.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/cdc2.c</span>
<span class="p_chunk">@@ -40,7 +40,7 @@</span> <span class="p_context"> USB_ETHERNET_MODULE_PARAMETERS();</span>
 /*-------------------------------------------------------------------------*/
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/dbgp.c b/drivers/usb/gadget/legacy/dbgp.c</span>
<span class="p_header">index 99ca3dabc4f3..607ca8e69cba 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/dbgp.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/dbgp.c</span>
<span class="p_chunk">@@ -33,7 +33,7 @@</span> <span class="p_context"> static struct dbgp {</span>
 } dbgp;
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength = sizeof device_desc,</span>
<span class="p_add">+	.bLength = sizeof(device_desc),</span>
 	.bDescriptorType = USB_DT_DEVICE,
 	.bcdUSB = cpu_to_le16(0x0200),
 	.bDeviceClass =	USB_CLASS_VENDOR_SPEC,
<span class="p_chunk">@@ -43,7 +43,7 @@</span> <span class="p_context"> static struct usb_device_descriptor device_desc = {</span>
 };
 
 static struct usb_debug_descriptor dbg_desc = {
<span class="p_del">-	.bLength = sizeof dbg_desc,</span>
<span class="p_add">+	.bLength = sizeof(dbg_desc),</span>
 	.bDescriptorType = USB_DT_DEBUG,
 };
 
<span class="p_chunk">@@ -348,13 +348,13 @@</span> <span class="p_context"> static int dbgp_setup(struct usb_gadget *gadget,</span>
 		switch (value&gt;&gt;8) {
 		case USB_DT_DEVICE:
 			dev_dbg(&amp;dbgp.gadget-&gt;dev, &quot;setup: desc device\n&quot;);
<span class="p_del">-			len = sizeof device_desc;</span>
<span class="p_add">+			len = sizeof(device_desc);</span>
 			data = &amp;device_desc;
 			device_desc.bMaxPacketSize0 = gadget-&gt;ep0-&gt;maxpacket;
 			break;
 		case USB_DT_DEBUG:
 			dev_dbg(&amp;dbgp.gadget-&gt;dev, &quot;setup: desc debug\n&quot;);
<span class="p_del">-			len = sizeof dbg_desc;</span>
<span class="p_add">+			len = sizeof(dbg_desc);</span>
 			data = &amp;dbg_desc;
 			break;
 		default:
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/ether.c b/drivers/usb/gadget/legacy/ether.c</span>
<span class="p_header">index 25a2c2e48592..6a105216668a 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/ether.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/ether.c</span>
<span class="p_chunk">@@ -148,7 +148,7 @@</span> <span class="p_context"> USB_ETHERNET_MODULE_PARAMETERS();</span>
 /*-------------------------------------------------------------------------*/
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/g_ffs.c b/drivers/usb/gadget/legacy/g_ffs.c</span>
<span class="p_header">index f85639ef8a8f..ab809e7b627d 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/g_ffs.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/g_ffs.c</span>
<span class="p_chunk">@@ -66,7 +66,7 @@</span> <span class="p_context"> MODULE_LICENSE(&quot;GPL&quot;);</span>
 USB_GADGET_COMPOSITE_OPTIONS();
 
 static struct usb_device_descriptor gfs_dev_desc = {
<span class="p_del">-	.bLength		= sizeof gfs_dev_desc,</span>
<span class="p_add">+	.bLength		= sizeof(gfs_dev_desc),</span>
 	.bDescriptorType	= USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/hid.c b/drivers/usb/gadget/legacy/hid.c</span>
<span class="p_header">index a71a884f79fc..822f0a5e47cd 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/hid.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/hid.c</span>
<span class="p_chunk">@@ -44,7 +44,7 @@</span> <span class="p_context"> static LIST_HEAD(hidg_func_list);</span>
 USB_GADGET_COMPOSITE_OPTIONS();
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/inode.c b/drivers/usb/gadget/legacy/inode.c</span>
<span class="p_header">index 7e179f81d05c..a91d2c7dc2b0 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/inode.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/inode.c</span>
<span class="p_chunk">@@ -608,7 +608,7 @@</span> <span class="p_context"> ep_read_iter(struct kiocb *iocb, struct iov_iter *to)</span>
 		if (value &gt;= 0 &amp;&amp; copy_to_iter(buf, value, to))
 			value = -EFAULT;
 	} else {
<span class="p_del">-		struct kiocb_priv *priv = kzalloc(sizeof *priv, GFP_KERNEL);</span>
<span class="p_add">+		struct kiocb_priv *priv = kzalloc(sizeof(*priv), GFP_KERNEL);</span>
 		value = -ENOMEM;
 		if (!priv)
 			goto fail;
<span class="p_chunk">@@ -676,7 +676,7 @@</span> <span class="p_context"> ep_write_iter(struct kiocb *iocb, struct iov_iter *from)</span>
 	} else if (is_sync_kiocb(iocb)) {
 		value = ep_io(epdata, buf, len);
 	} else {
<span class="p_del">-		struct kiocb_priv *priv = kzalloc(sizeof *priv, GFP_KERNEL);</span>
<span class="p_add">+		struct kiocb_priv *priv = kzalloc(sizeof(*priv), GFP_KERNEL);</span>
 		value = -ENOMEM;
 		if (priv) {
 			value = ep_aio(iocb, priv, epdata, buf, len);
<span class="p_chunk">@@ -892,7 +892,7 @@</span> <span class="p_context"> static int setup_req (struct usb_ep *ep, struct usb_request *req, u16 len)</span>
 		DBG (dev, &quot;ep0 request busy!\n&quot;);
 		return -EBUSY;
 	}
<span class="p_del">-	if (len &gt; sizeof (dev-&gt;rbuf))</span>
<span class="p_add">+	if (len &gt; sizeof(dev-&gt;rbuf))</span>
 		req-&gt;buf = kmalloc(len, GFP_ATOMIC);
 	if (req-&gt;buf == NULL) {
 		req-&gt;buf = dev-&gt;rbuf;
<span class="p_chunk">@@ -992,7 +992,7 @@</span> <span class="p_context"> ep0_read (struct file *fd, char __user *buf, size_t len, loff_t *ptr)</span>
 	}
 
 	/* else normal: return event data */
<span class="p_del">-	if (len &lt; sizeof dev-&gt;event [0]) {</span>
<span class="p_add">+	if (len &lt; sizeof(dev-&gt;event[0])) {</span>
 		retval = -EINVAL;
 		goto done;
 	}
<span class="p_chunk">@@ -1103,7 +1103,7 @@</span> <span class="p_context"> next_event (struct dev_data *dev, enum usb_gadgetfs_event_type type)</span>
 	VDEBUG(dev, &quot;event[%d] = %d\n&quot;, dev-&gt;ev_next, type);
 	event = &amp;dev-&gt;event [dev-&gt;ev_next++];
 	BUG_ON (dev-&gt;ev_next &gt; N_EVENT);
<span class="p_del">-	memset (event, 0, sizeof *event);</span>
<span class="p_add">+	memset (event, 0, sizeof(*event));</span>
 	event-&gt;type = type;
 	return event;
 }
<span class="p_chunk">@@ -1255,7 +1255,7 @@</span> <span class="p_context"> static void make_qualifier (struct dev_data *dev)</span>
 	struct usb_qualifier_descriptor		qual;
 	struct usb_device_descriptor		*desc;
 
<span class="p_del">-	qual.bLength = sizeof qual;</span>
<span class="p_add">+	qual.bLength = sizeof(qual);</span>
 	qual.bDescriptorType = USB_DT_DEVICE_QUALIFIER;
 	qual.bcdUSB = cpu_to_le16 (0x0200);
 
<span class="p_chunk">@@ -1270,7 +1270,7 @@</span> <span class="p_context"> static void make_qualifier (struct dev_data *dev)</span>
 	qual.bNumConfigurations = 1;
 	qual.bRESERVED = 0;
 
<span class="p_del">-	memcpy (dev-&gt;rbuf, &amp;qual, sizeof qual);</span>
<span class="p_add">+	memcpy (dev-&gt;rbuf, &amp;qual, sizeof(qual));</span>
 }
 
 static int
<span class="p_chunk">@@ -1346,7 +1346,7 @@</span> <span class="p_context"> gadgetfs_setup (struct usb_gadget *gadget, const struct usb_ctrlrequest *ctrl)</span>
 		switch (w_value &gt;&gt; 8) {
 
 		case USB_DT_DEVICE:
<span class="p_del">-			value = min (w_length, (u16) sizeof *dev-&gt;dev);</span>
<span class="p_add">+			value = min (w_length, (u16) sizeof(*dev-&gt;dev));</span>
 			dev-&gt;dev-&gt;bMaxPacketSize0 = dev-&gt;gadget-&gt;ep0-&gt;maxpacket;
 			req-&gt;buf = dev-&gt;dev;
 			break;
<span class="p_chunk">@@ -1550,7 +1550,7 @@</span> <span class="p_context"> static int activate_ep_files (struct dev_data *dev)</span>
 		mutex_init(&amp;data-&gt;lock);
 		init_waitqueue_head (&amp;data-&gt;wait);
 
<span class="p_del">-		strncpy (data-&gt;name, ep-&gt;name, sizeof (data-&gt;name) - 1);</span>
<span class="p_add">+		strncpy (data-&gt;name, ep-&gt;name, sizeof(data-&gt;name) - 1);</span>
 		atomic_set (&amp;data-&gt;count, 1);
 		data-&gt;dev = dev;
 		get_dev (dev);
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/mass_storage.c b/drivers/usb/gadget/legacy/mass_storage.c</span>
<span class="p_header">index e61af53c7d2b..21f3f29185be 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/mass_storage.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/mass_storage.c</span>
<span class="p_chunk">@@ -52,7 +52,7 @@</span> <span class="p_context"></span>
 USB_GADGET_COMPOSITE_OPTIONS();
 
 static struct usb_device_descriptor msg_device_desc = {
<span class="p_del">-	.bLength =		sizeof msg_device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(msg_device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/multi.c b/drivers/usb/gadget/legacy/multi.c</span>
<span class="p_header">index 229d704a620b..9f3e7950f927 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/multi.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/multi.c</span>
<span class="p_chunk">@@ -64,7 +64,7 @@</span> <span class="p_context"> enum {</span>
 
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/ncm.c b/drivers/usb/gadget/legacy/ncm.c</span>
<span class="p_header">index 0aba68253e3d..fd3c40ce48ac 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/ncm.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/ncm.c</span>
<span class="p_chunk">@@ -46,7 +46,7 @@</span> <span class="p_context"> USB_GADGET_COMPOSITE_OPTIONS();</span>
 USB_ETHERNET_MODULE_PARAMETERS();
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/printer.c b/drivers/usb/gadget/legacy/printer.c</span>
<span class="p_header">index 6f969a86175c..125420dc7000 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/printer.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/printer.c</span>
<span class="p_chunk">@@ -69,7 +69,7 @@</span> <span class="p_context"> static struct usb_function *f_printer;</span>
  */
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 	/* .bcdUSB = DYNAMIC */
 	.bDeviceClass =		USB_CLASS_PER_INTERFACE,
<span class="p_header">diff --git a/drivers/usb/gadget/legacy/zero.c b/drivers/usb/gadget/legacy/zero.c</span>
<span class="p_header">index d02e2ce73ea5..b5e7f1e54688 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/legacy/zero.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/legacy/zero.c</span>
<span class="p_chunk">@@ -112,7 +112,7 @@</span> <span class="p_context"> static unsigned autoresume_step_ms;</span>
 /*-------------------------------------------------------------------------*/
 
 static struct usb_device_descriptor device_desc = {
<span class="p_del">-	.bLength =		sizeof device_desc,</span>
<span class="p_add">+	.bLength =		sizeof(device_desc),</span>
 	.bDescriptorType =	USB_DT_DEVICE,
 
 	/* .bcdUSB = DYNAMIC */
<span class="p_header">diff --git a/drivers/usb/gadget/udc/dummy_hcd.c b/drivers/usb/gadget/udc/dummy_hcd.c</span>
<span class="p_header">index dde44450dfa9..eda66f3b9468 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/dummy_hcd.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/dummy_hcd.c</span>
<span class="p_chunk">@@ -1215,7 +1215,7 @@</span> <span class="p_context"> static int dummy_urb_enqueue(</span>
 	unsigned long	flags;
 	int		rc;
 
<span class="p_del">-	urbp = kmalloc(sizeof *urbp, mem_flags);</span>
<span class="p_add">+	urbp = kmalloc(sizeof(*urbp), mem_flags);</span>
 	if (!urbp)
 		return -ENOMEM;
 	urbp-&gt;urb = urb;
<span class="p_chunk">@@ -2001,7 +2001,7 @@</span> <span class="p_context"> static struct {</span>
 static inline void
 ss_hub_descriptor(struct usb_hub_descriptor *desc)
 {
<span class="p_del">-	memset(desc, 0, sizeof *desc);</span>
<span class="p_add">+	memset(desc, 0, sizeof(*desc));</span>
 	desc-&gt;bDescriptorType = USB_DT_SS_HUB;
 	desc-&gt;bDescLength = 12;
 	desc-&gt;wHubCharacteristics = cpu_to_le16(
<span class="p_chunk">@@ -2014,7 +2014,7 @@</span> <span class="p_context"> ss_hub_descriptor(struct usb_hub_descriptor *desc)</span>
 
 static inline void hub_descriptor(struct usb_hub_descriptor *desc)
 {
<span class="p_del">-	memset(desc, 0, sizeof *desc);</span>
<span class="p_add">+	memset(desc, 0, sizeof(*desc));</span>
 	desc-&gt;bDescriptorType = USB_DT_HUB;
 	desc-&gt;bDescLength = 9;
 	desc-&gt;wHubCharacteristics = cpu_to_le16(
<span class="p_header">diff --git a/drivers/usb/gadget/udc/fsl_udc_core.c b/drivers/usb/gadget/udc/fsl_udc_core.c</span>
<span class="p_header">index aab5221d6c2e..3a3bc7a0e70c 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/fsl_udc_core.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/fsl_udc_core.c</span>
<span class="p_chunk">@@ -682,7 +682,7 @@</span> <span class="p_context"> fsl_alloc_request(struct usb_ep *_ep, gfp_t gfp_flags)</span>
 {
 	struct fsl_req *req = NULL;
 
<span class="p_del">-	req = kzalloc(sizeof *req, gfp_flags);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), gfp_flags);</span>
 	if (!req)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/usb/gadget/udc/goku_udc.c b/drivers/usb/gadget/udc/goku_udc.c</span>
<span class="p_header">index 1fdfec14a3ba..56cd6e31bd03 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/goku_udc.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/goku_udc.c</span>
<span class="p_chunk">@@ -269,7 +269,7 @@</span> <span class="p_context"> goku_alloc_request(struct usb_ep *_ep, gfp_t gfp_flags)</span>
 
 	if (!_ep)
 		return NULL;
<span class="p_del">-	req = kzalloc(sizeof *req, gfp_flags);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), gfp_flags);</span>
 	if (!req)
 		return NULL;
 
<span class="p_chunk">@@ -1766,7 +1766,7 @@</span> <span class="p_context"> static int goku_probe(struct pci_dev *pdev, const struct pci_device_id *id)</span>
 	}
 
 	/* alloc, and start init */
<span class="p_del">-	dev = kzalloc (sizeof *dev, GFP_KERNEL);</span>
<span class="p_add">+	dev = kzalloc (sizeof(*dev), GFP_KERNEL);</span>
 	if (dev == NULL){
 		pr_debug(&quot;enomem %s\n&quot;, pci_name(pdev));
 		retval = -ENOMEM;
<span class="p_header">diff --git a/drivers/usb/gadget/udc/mv_u3d_core.c b/drivers/usb/gadget/udc/mv_u3d_core.c</span>
<span class="p_header">index dafe74eb9ade..c9213ad44475 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/mv_u3d_core.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/mv_u3d_core.c</span>
<span class="p_chunk">@@ -680,7 +680,7 @@</span> <span class="p_context"> mv_u3d_alloc_request(struct usb_ep *_ep, gfp_t gfp_flags)</span>
 {
 	struct mv_u3d_req *req = NULL;
 
<span class="p_del">-	req = kzalloc(sizeof *req, gfp_flags);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), gfp_flags);</span>
 	if (!req)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/usb/gadget/udc/mv_udc_core.c b/drivers/usb/gadget/udc/mv_udc_core.c</span>
<span class="p_header">index 81b6229c7805..c60c1bdcb385 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/mv_udc_core.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/mv_udc_core.c</span>
<span class="p_chunk">@@ -610,7 +610,7 @@</span> <span class="p_context"> mv_alloc_request(struct usb_ep *_ep, gfp_t gfp_flags)</span>
 {
 	struct mv_req *req = NULL;
 
<span class="p_del">-	req = kzalloc(sizeof *req, gfp_flags);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), gfp_flags);</span>
 	if (!req)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/usb/gadget/udc/omap_udc.c b/drivers/usb/gadget/udc/omap_udc.c</span>
<span class="p_header">index 9b7d39484ed3..86b77117f648 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/omap_udc.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/omap_udc.c</span>
<span class="p_chunk">@@ -2150,7 +2150,7 @@</span> <span class="p_context"> static void proc_ep_show(struct seq_file *s, struct omap_ep *ep)</span>
 	use_ep(ep, 0);
 
 	if (use_dma &amp;&amp; ep-&gt;has_dma)
<span class="p_del">-		snprintf(buf, sizeof buf, &quot;(%cxdma%d lch%d) &quot;,</span>
<span class="p_add">+		snprintf(buf, sizeof(buf), &quot;(%cxdma%d lch%d) &quot;,</span>
 			(ep-&gt;bEndpointAddress &amp; USB_DIR_IN) ? &#39;t&#39; : &#39;r&#39;,
 			ep-&gt;dma_channel - 1, ep-&gt;lch);
 	else
<span class="p_chunk">@@ -2570,8 +2570,8 @@</span> <span class="p_context"> omap_ep_setup(char *name, u8 addr, u8 type,</span>
 	BUG_ON(buf &gt; 2048);
 
 	/* set up driver data structures */
<span class="p_del">-	BUG_ON(strlen(name) &gt;= sizeof ep-&gt;name);</span>
<span class="p_del">-	strlcpy(ep-&gt;name, name, sizeof ep-&gt;name);</span>
<span class="p_add">+	BUG_ON(strlen(name) &gt;= sizeof(ep-&gt;name));</span>
<span class="p_add">+	strlcpy(ep-&gt;name, name, sizeof(ep-&gt;name));</span>
 	INIT_LIST_HEAD(&amp;ep-&gt;queue);
 	INIT_LIST_HEAD(&amp;ep-&gt;iso);
 	ep-&gt;bEndpointAddress = addr;
<span class="p_header">diff --git a/drivers/usb/gadget/udc/pch_udc.c b/drivers/usb/gadget/udc/pch_udc.c</span>
<span class="p_header">index 7a04157ff579..3c5399d03ed0 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/pch_udc.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/pch_udc.c</span>
<span class="p_chunk">@@ -1776,7 +1776,7 @@</span> <span class="p_context"> static struct usb_request *pch_udc_alloc_request(struct usb_ep *usbep,</span>
 		return NULL;
 	ep = container_of(usbep, struct pch_udc_ep, ep);
 	dev = ep-&gt;dev;
<span class="p_del">-	req = kzalloc(sizeof *req, gfp);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), gfp);</span>
 	if (!req)
 		return NULL;
 	req-&gt;req.dma = DMA_ADDR_INVALID;
<span class="p_chunk">@@ -2098,7 +2098,7 @@</span> <span class="p_context"> static void pch_udc_init_setup_buff(struct pch_udc_stp_dma_desc *td_stp)</span>
 	if (!td_stp)
 		return;
 	td_stp-&gt;reserved = ++pky_marker;
<span class="p_del">-	memset(&amp;td_stp-&gt;request, 0xFF, sizeof td_stp-&gt;request);</span>
<span class="p_add">+	memset(&amp;td_stp-&gt;request, 0xFF, sizeof(td_stp-&gt;request));</span>
 	td_stp-&gt;status = PCH_UDC_BS_HST_RDY;
 }
 
<span class="p_chunk">@@ -2656,7 +2656,7 @@</span> <span class="p_context"> static void pch_udc_svc_intf_interrupt(struct pch_udc_dev *dev)</span>
 							 UDC_DEVSTS_ALT_SHIFT;
 	dev-&gt;set_cfg_not_acked = 1;
 	/* Construct the usb request for gadget driver and inform it */
<span class="p_del">-	memset(&amp;dev-&gt;setup_data, 0 , sizeof dev-&gt;setup_data);</span>
<span class="p_add">+	memset(&amp;dev-&gt;setup_data, 0 , sizeof(dev-&gt;setup_data));</span>
 	dev-&gt;setup_data.bRequest = USB_REQ_SET_INTERFACE;
 	dev-&gt;setup_data.bRequestType = USB_RECIP_INTERFACE;
 	dev-&gt;setup_data.wValue = cpu_to_le16(dev-&gt;cfg_data.cur_alt);
<span class="p_chunk">@@ -2695,7 +2695,7 @@</span> <span class="p_context"> static void pch_udc_svc_cfg_interrupt(struct pch_udc_dev *dev)</span>
 	dev-&gt;cfg_data.cur_cfg = (dev_stat &amp; UDC_DEVSTS_CFG_MASK) &gt;&gt;
 				UDC_DEVSTS_CFG_SHIFT;
 	/* make usb request for gadget driver */
<span class="p_del">-	memset(&amp;dev-&gt;setup_data, 0 , sizeof dev-&gt;setup_data);</span>
<span class="p_add">+	memset(&amp;dev-&gt;setup_data, 0 , sizeof(dev-&gt;setup_data));</span>
 	dev-&gt;setup_data.bRequest = USB_REQ_SET_CONFIGURATION;
 	dev-&gt;setup_data.wValue = cpu_to_le16(dev-&gt;cfg_data.cur_cfg);
 	/* program the NE registers */
<span class="p_chunk">@@ -2886,7 +2886,7 @@</span> <span class="p_context"> static void pch_udc_pcd_reinit(struct pch_udc_dev *dev)</span>
 	INIT_LIST_HEAD(&amp;dev-&gt;gadget.ep_list);
 
 	/* Initialize the endpoints structures */
<span class="p_del">-	memset(dev-&gt;ep, 0, sizeof dev-&gt;ep);</span>
<span class="p_add">+	memset(dev-&gt;ep, 0, sizeof(dev-&gt;ep));</span>
 	for (i = 0; i &lt; PCH_UDC_EP_NUM; i++) {
 		struct pch_udc_ep *ep = &amp;dev-&gt;ep[i];
 		ep-&gt;dev = dev;
<span class="p_chunk">@@ -3144,7 +3144,7 @@</span> <span class="p_context"> static int pch_udc_probe(struct pci_dev *pdev,</span>
 	struct pch_udc_dev	*dev;
 
 	/* init */
<span class="p_del">-	dev = kzalloc(sizeof *dev, GFP_KERNEL);</span>
<span class="p_add">+	dev = kzalloc(sizeof(*dev), GFP_KERNEL);</span>
 	if (!dev) {
 		pr_err(&quot;%s: no memory for device structure\n&quot;, __func__);
 		return -ENOMEM;
<span class="p_header">diff --git a/drivers/usb/gadget/udc/pxa25x_udc.c b/drivers/usb/gadget/udc/pxa25x_udc.c</span>
<span class="p_header">index b82cb14850b6..e02c0feff6d6 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/pxa25x_udc.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/pxa25x_udc.c</span>
<span class="p_chunk">@@ -1748,7 +1748,7 @@</span> <span class="p_context"> pxa25x_udc_irq(int irq, void *_dev)</span>
 			} else {
 				DBG(DBG_VERBOSE, &quot;USB reset end\n&quot;);
 				dev-&gt;gadget.speed = USB_SPEED_FULL;
<span class="p_del">-				memset(&amp;dev-&gt;stats, 0, sizeof dev-&gt;stats);</span>
<span class="p_add">+				memset(&amp;dev-&gt;stats, 0, sizeof(dev-&gt;stats));</span>
 				/* driver and endpoints are still reset */
 			}
 
<span class="p_header">diff --git a/drivers/usb/gadget/udc/pxa27x_udc.c b/drivers/usb/gadget/udc/pxa27x_udc.c</span>
<span class="p_header">index 001a3b74a993..78234c87e180 100644</span>
<span class="p_header">--- a/drivers/usb/gadget/udc/pxa27x_udc.c</span>
<span class="p_header">+++ b/drivers/usb/gadget/udc/pxa27x_udc.c</span>
<span class="p_chunk">@@ -646,7 +646,7 @@</span> <span class="p_context"> pxa_ep_alloc_request(struct usb_ep *_ep, gfp_t gfp_flags)</span>
 {
 	struct pxa27x_request *req;
 
<span class="p_del">-	req = kzalloc(sizeof *req, gfp_flags);</span>
<span class="p_add">+	req = kzalloc(sizeof(*req), gfp_flags);</span>
 	if (!req)
 		return NULL;
 
<span class="p_chunk">@@ -2299,7 +2299,7 @@</span> <span class="p_context"> static void irq_udc_reset(struct pxa_udc *udc)</span>
 		stop_activity(udc, udc-&gt;driver);
 	}
 	udc-&gt;gadget.speed = USB_SPEED_FULL;
<span class="p_del">-	memset(&amp;udc-&gt;stats, 0, sizeof udc-&gt;stats);</span>
<span class="p_add">+	memset(&amp;udc-&gt;stats, 0, sizeof(udc-&gt;stats));</span>
 
 	nuke(ep, -EPROTO);
 	ep_write_UDCCSR(ep, UDCCSR0_FTF | UDCCSR0_OPC);
<span class="p_header">diff --git a/drivers/usb/host/ehci-dbg.c b/drivers/usb/host/ehci-dbg.c</span>
<span class="p_header">index b7d623f1523c..6bc854d6271e 100644</span>
<span class="p_header">--- a/drivers/usb/host/ehci-dbg.c</span>
<span class="p_header">+++ b/drivers/usb/host/ehci-dbg.c</span>
<span class="p_chunk">@@ -306,19 +306,19 @@</span> <span class="p_context"> dbg_port_buf (char *buf, unsigned len, const char *label, int port, u32 status)</span>
 /* functions have the &quot;wrong&quot; filename when they&#39;re output... */
 #define dbg_status(ehci, label, status) { \
 	char _buf [80]; \
<span class="p_del">-	dbg_status_buf (_buf, sizeof _buf, label, status); \</span>
<span class="p_add">+	dbg_status_buf (_buf, sizeof(_buf), label, status); \</span>
 	ehci_dbg (ehci, &quot;%s\n&quot;, _buf); \
 }
 
 #define dbg_cmd(ehci, label, command) { \
 	char _buf [80]; \
<span class="p_del">-	dbg_command_buf (_buf, sizeof _buf, label, command); \</span>
<span class="p_add">+	dbg_command_buf (_buf, sizeof(_buf), label, command); \</span>
 	ehci_dbg (ehci, &quot;%s\n&quot;, _buf); \
 }
 
 #define dbg_port(ehci, label, port, status) { \
 	char _buf [80]; \
<span class="p_del">-	dbg_port_buf (_buf, sizeof _buf, label, port, status); \</span>
<span class="p_add">+	dbg_port_buf (_buf, sizeof(_buf), label, port, status); \</span>
 	ehci_dbg (ehci, &quot;%s\n&quot;, _buf); \
 }
 
<span class="p_chunk">@@ -635,7 +635,7 @@</span> <span class="p_context"> static ssize_t fill_periodic_buffer(struct debug_buffer *buf)</span>
 	unsigned		i;
 	__hc32			tag;
 
<span class="p_del">-	seen = kmalloc(DBG_SCHED_LIMIT * sizeof *seen, GFP_ATOMIC);</span>
<span class="p_add">+	seen = kmalloc(DBG_SCHED_LIMIT * sizeof(*seen), GFP_ATOMIC);</span>
 	if (!seen)
 		return 0;
 	seen_count = 0;
<span class="p_chunk">@@ -875,19 +875,19 @@</span> <span class="p_context"> static ssize_t fill_registers_buffer(struct debug_buffer *buf)</span>
 	next += temp;
 
 	/* Operational Registers */
<span class="p_del">-	temp = dbg_status_buf (scratch, sizeof scratch, label,</span>
<span class="p_add">+	temp = dbg_status_buf (scratch, sizeof(scratch), label,</span>
 			ehci_readl(ehci, &amp;ehci-&gt;regs-&gt;status));
 	temp = scnprintf (next, size, fmt, temp, scratch);
 	size -= temp;
 	next += temp;
 
<span class="p_del">-	temp = dbg_command_buf (scratch, sizeof scratch, label,</span>
<span class="p_add">+	temp = dbg_command_buf (scratch, sizeof(scratch), label,</span>
 			ehci_readl(ehci, &amp;ehci-&gt;regs-&gt;command));
 	temp = scnprintf (next, size, fmt, temp, scratch);
 	size -= temp;
 	next += temp;
 
<span class="p_del">-	temp = dbg_intr_buf (scratch, sizeof scratch, label,</span>
<span class="p_add">+	temp = dbg_intr_buf (scratch, sizeof(scratch), label,</span>
 			ehci_readl(ehci, &amp;ehci-&gt;regs-&gt;intr_enable));
 	temp = scnprintf (next, size, fmt, temp, scratch);
 	size -= temp;
<span class="p_chunk">@@ -899,7 +899,7 @@</span> <span class="p_context"> static ssize_t fill_registers_buffer(struct debug_buffer *buf)</span>
 	next += temp;
 
 	for (i = 1; i &lt;= HCS_N_PORTS (ehci-&gt;hcs_params); i++) {
<span class="p_del">-		temp = dbg_port_buf (scratch, sizeof scratch, label, i,</span>
<span class="p_add">+		temp = dbg_port_buf (scratch, sizeof(scratch), label, i,</span>
 				ehci_readl(ehci,
 					&amp;ehci-&gt;regs-&gt;port_status[i - 1]));
 		temp = scnprintf (next, size, fmt, temp, scratch);
<span class="p_header">diff --git a/drivers/usb/host/ehci-mem.c b/drivers/usb/host/ehci-mem.c</span>
<span class="p_header">index 4de43011df23..84f8e3823c4b 100644</span>
<span class="p_header">--- a/drivers/usb/host/ehci-mem.c</span>
<span class="p_header">+++ b/drivers/usb/host/ehci-mem.c</span>
<span class="p_chunk">@@ -38,7 +38,7 @@</span> <span class="p_context"></span>
 static inline void ehci_qtd_init(struct ehci_hcd *ehci, struct ehci_qtd *qtd,
 				  dma_addr_t dma)
 {
<span class="p_del">-	memset (qtd, 0, sizeof *qtd);</span>
<span class="p_add">+	memset (qtd, 0, sizeof(*qtd));</span>
 	qtd-&gt;qtd_dma = dma;
 	qtd-&gt;hw_token = cpu_to_hc32(ehci, QTD_STS_HALT);
 	qtd-&gt;hw_next = EHCI_LIST_END(ehci);
<span class="p_chunk">@@ -82,14 +82,14 @@</span> <span class="p_context"> static struct ehci_qh *ehci_qh_alloc (struct ehci_hcd *ehci, gfp_t flags)</span>
 	struct ehci_qh		*qh;
 	dma_addr_t		dma;
 
<span class="p_del">-	qh = kzalloc(sizeof *qh, GFP_ATOMIC);</span>
<span class="p_add">+	qh = kzalloc(sizeof(*qh), GFP_ATOMIC);</span>
 	if (!qh)
 		goto done;
 	qh-&gt;hw = (struct ehci_qh_hw *)
 		dma_pool_alloc(ehci-&gt;qh_pool, flags, &amp;dma);
 	if (!qh-&gt;hw)
 		goto fail;
<span class="p_del">-	memset(qh-&gt;hw, 0, sizeof *qh-&gt;hw);</span>
<span class="p_add">+	memset(qh-&gt;hw, 0, sizeof(*qh-&gt;hw));</span>
 	qh-&gt;qh_dma = dma;
 	// INIT_LIST_HEAD (&amp;qh-&gt;qh_list);
 	INIT_LIST_HEAD (&amp;qh-&gt;qtd_list);
<span class="p_chunk">@@ -139,7 +139,7 @@</span> <span class="p_context"> static void ehci_mem_cleanup (struct ehci_hcd *ehci)</span>
 
 	if (ehci-&gt;periodic)
 		dma_free_coherent (ehci_to_hcd(ehci)-&gt;self.controller,
<span class="p_del">-			ehci-&gt;periodic_size * sizeof (u32),</span>
<span class="p_add">+			ehci-&gt;periodic_size * sizeof(u32),</span>
 			ehci-&gt;periodic, ehci-&gt;periodic_dma);
 	ehci-&gt;periodic = NULL;
 
<span class="p_header">diff --git a/drivers/usb/host/ehci-sched.c b/drivers/usb/host/ehci-sched.c</span>
<span class="p_header">index f9a332775c47..288df035dcbc 100644</span>
<span class="p_header">--- a/drivers/usb/host/ehci-sched.c</span>
<span class="p_header">+++ b/drivers/usb/host/ehci-sched.c</span>
<span class="p_chunk">@@ -1026,7 +1026,7 @@</span> <span class="p_context"> iso_stream_alloc (gfp_t mem_flags)</span>
 {
 	struct ehci_iso_stream *stream;
 
<span class="p_del">-	stream = kzalloc(sizeof *stream, mem_flags);</span>
<span class="p_add">+	stream = kzalloc(sizeof(*stream), mem_flags);</span>
 	if (likely (stream != NULL)) {
 		INIT_LIST_HEAD(&amp;stream-&gt;td_list);
 		INIT_LIST_HEAD(&amp;stream-&gt;free_list);
<span class="p_chunk">@@ -1194,7 +1194,7 @@</span> <span class="p_context"> static struct ehci_iso_sched *</span>
 iso_sched_alloc (unsigned packets, gfp_t mem_flags)
 {
 	struct ehci_iso_sched	*iso_sched;
<span class="p_del">-	int			size = sizeof *iso_sched;</span>
<span class="p_add">+	int			size = sizeof(*iso_sched);</span>
 
 	size += packets * sizeof (struct ehci_iso_packet);
 	iso_sched = kzalloc(size, mem_flags);
<span class="p_chunk">@@ -1313,7 +1313,7 @@</span> <span class="p_context"> itd_urb_transaction (</span>
 			}
 		}
 
<span class="p_del">-		memset (itd, 0, sizeof *itd);</span>
<span class="p_add">+		memset (itd, 0, sizeof(*itd));</span>
 		itd-&gt;itd_dma = itd_dma;
 		itd-&gt;frame = NO_FRAME;
 		list_add (&amp;itd-&gt;itd_list, &amp;sched-&gt;td_list);
<span class="p_chunk">@@ -2106,7 +2106,7 @@</span> <span class="p_context"> sitd_urb_transaction (</span>
 			}
 		}
 
<span class="p_del">-		memset (sitd, 0, sizeof *sitd);</span>
<span class="p_add">+		memset (sitd, 0, sizeof(*sitd));</span>
 		sitd-&gt;sitd_dma = sitd_dma;
 		sitd-&gt;frame = NO_FRAME;
 		list_add (&amp;sitd-&gt;sitd_list, &amp;iso_sched-&gt;td_list);
<span class="p_header">diff --git a/drivers/usb/host/isp116x-hcd.c b/drivers/usb/host/isp116x-hcd.c</span>
<span class="p_header">index d089b3fb7a13..473eaf2aa2f5 100644</span>
<span class="p_header">--- a/drivers/usb/host/isp116x-hcd.c</span>
<span class="p_header">+++ b/drivers/usb/host/isp116x-hcd.c</span>
<span class="p_chunk">@@ -702,7 +702,7 @@</span> <span class="p_context"> static int isp116x_urb_enqueue(struct usb_hcd *hcd,</span>
 	}
 	/* avoid all allocations within spinlocks: request or endpoint */
 	if (!hep-&gt;hcpriv) {
<span class="p_del">-		ep = kzalloc(sizeof *ep, mem_flags);</span>
<span class="p_add">+		ep = kzalloc(sizeof(*ep), mem_flags);</span>
 		if (!ep)
 			return -ENOMEM;
 	}
<span class="p_header">diff --git a/drivers/usb/host/isp1362-hcd.c b/drivers/usb/host/isp1362-hcd.c</span>
<span class="p_header">index 6cf82ee460a6..cba181199b06 100644</span>
<span class="p_header">--- a/drivers/usb/host/isp1362-hcd.c</span>
<span class="p_header">+++ b/drivers/usb/host/isp1362-hcd.c</span>
<span class="p_chunk">@@ -1247,7 +1247,7 @@</span> <span class="p_context"> static int isp1362_urb_enqueue(struct usb_hcd *hcd,</span>
 
 	/* avoid all allocations within spinlocks: request or endpoint */
 	if (!hep-&gt;hcpriv) {
<span class="p_del">-		ep = kzalloc(sizeof *ep, mem_flags);</span>
<span class="p_add">+		ep = kzalloc(sizeof(*ep), mem_flags);</span>
 		if (!ep)
 			return -ENOMEM;
 	}
<span class="p_header">diff --git a/drivers/usb/host/ohci-dbg.c b/drivers/usb/host/ohci-dbg.c</span>
<span class="p_header">index c3eded317495..ee2efb47abcb 100644</span>
<span class="p_header">--- a/drivers/usb/host/ohci-dbg.c</span>
<span class="p_header">+++ b/drivers/usb/host/ohci-dbg.c</span>
<span class="p_chunk">@@ -491,7 +491,7 @@</span> <span class="p_context"> static ssize_t fill_periodic_buffer(struct debug_buffer *buf)</span>
 	char			*next;
 	unsigned		i;
 
<span class="p_del">-	seen = kmalloc(DBG_SCHED_LIMIT * sizeof *seen, GFP_ATOMIC);</span>
<span class="p_add">+	seen = kmalloc(DBG_SCHED_LIMIT * sizeof(*seen), GFP_ATOMIC);</span>
 	if (!seen)
 		return 0;
 	seen_count = 0;
<span class="p_header">diff --git a/drivers/usb/host/ohci-hcd.c b/drivers/usb/host/ohci-hcd.c</span>
<span class="p_header">index 04dcedfdebf8..072fdfebb712 100644</span>
<span class="p_header">--- a/drivers/usb/host/ohci-hcd.c</span>
<span class="p_header">+++ b/drivers/usb/host/ohci-hcd.c</span>
<span class="p_chunk">@@ -986,7 +986,7 @@</span> <span class="p_context"> static void ohci_stop (struct usb_hcd *hcd)</span>
 	ohci_mem_cleanup (ohci);
 	if (ohci-&gt;hcca) {
 		dma_free_coherent (hcd-&gt;self.controller,
<span class="p_del">-				sizeof *ohci-&gt;hcca,</span>
<span class="p_add">+				sizeof(*ohci-&gt;hcca),</span>
 				ohci-&gt;hcca, ohci-&gt;hcca_dma);
 		ohci-&gt;hcca = NULL;
 		ohci-&gt;hcca_dma = 0;
<span class="p_header">diff --git a/drivers/usb/host/ohci-mem.c b/drivers/usb/host/ohci-mem.c</span>
<span class="p_header">index c9e315c6808a..3c19658565ef 100644</span>
<span class="p_header">--- a/drivers/usb/host/ohci-mem.c</span>
<span class="p_header">+++ b/drivers/usb/host/ohci-mem.c</span>
<span class="p_chunk">@@ -91,7 +91,7 @@</span> <span class="p_context"> td_alloc (struct ohci_hcd *hc, gfp_t mem_flags)</span>
 	td = dma_pool_alloc (hc-&gt;td_cache, mem_flags, &amp;dma);
 	if (td) {
 		/* in case hc fetches it, make it look dead */
<span class="p_del">-		memset (td, 0, sizeof *td);</span>
<span class="p_add">+		memset (td, 0, sizeof(*td));</span>
 		td-&gt;hwNextTD = cpu_to_hc32 (hc, dma);
 		td-&gt;td_dma = dma;
 		/* hashed in td_fill */
<span class="p_chunk">@@ -124,7 +124,7 @@</span> <span class="p_context"> ed_alloc (struct ohci_hcd *hc, gfp_t mem_flags)</span>
 
 	ed = dma_pool_alloc (hc-&gt;ed_cache, mem_flags, &amp;dma);
 	if (ed) {
<span class="p_del">-		memset (ed, 0, sizeof (*ed));</span>
<span class="p_add">+		memset (ed, 0, sizeof(*ed));</span>
 		INIT_LIST_HEAD (&amp;ed-&gt;td_list);
 		ed-&gt;dma = dma;
 	}
<span class="p_header">diff --git a/drivers/usb/host/oxu210hp-hcd.c b/drivers/usb/host/oxu210hp-hcd.c</span>
<span class="p_header">index bc74aca8a54c..ec5dc4ac4c16 100644</span>
<span class="p_header">--- a/drivers/usb/host/oxu210hp-hcd.c</span>
<span class="p_header">+++ b/drivers/usb/host/oxu210hp-hcd.c</span>
<span class="p_chunk">@@ -204,19 +204,19 @@</span> <span class="p_context"> dbg_port_buf(char *buf, unsigned len, const char *label, int port, u32 status)</span>
 /* functions have the &quot;wrong&quot; filename when they&#39;re output... */
 #define dbg_status(oxu, label, status) { \
 	char _buf[80]; \
<span class="p_del">-	dbg_status_buf(_buf, sizeof _buf, label, status); \</span>
<span class="p_add">+	dbg_status_buf(_buf, sizeof(_buf), label, status); \</span>
 	oxu_dbg(oxu, &quot;%s\n&quot;, _buf); \
 }
 
 #define dbg_cmd(oxu, label, command) { \
 	char _buf[80]; \
<span class="p_del">-	dbg_command_buf(_buf, sizeof _buf, label, command); \</span>
<span class="p_add">+	dbg_command_buf(_buf, sizeof(_buf), label, command); \</span>
 	oxu_dbg(oxu, &quot;%s\n&quot;, _buf); \
 }
 
 #define dbg_port(oxu, label, port, status) { \
 	char _buf[80]; \
<span class="p_del">-	dbg_port_buf(_buf, sizeof _buf, label, port, status); \</span>
<span class="p_add">+	dbg_port_buf(_buf, sizeof(_buf), label, port, status); \</span>
 	oxu_dbg(oxu, &quot;%s\n&quot;, _buf); \
 }
 
<span class="p_chunk">@@ -549,7 +549,7 @@</span> <span class="p_context"> static void oxu_buf_free(struct oxu_hcd *oxu, struct ehci_qtd *qtd)</span>
 
 static inline void ehci_qtd_init(struct ehci_qtd *qtd, dma_addr_t dma)
 {
<span class="p_del">-	memset(qtd, 0, sizeof *qtd);</span>
<span class="p_add">+	memset(qtd, 0, sizeof(*qtd));</span>
 	qtd-&gt;qtd_dma = dma;
 	qtd-&gt;hw_token = cpu_to_le32(QTD_STS_HALT);
 	qtd-&gt;hw_next = EHCI_LIST_END;
<span class="p_chunk">@@ -585,7 +585,7 @@</span> <span class="p_context"> static struct ehci_qtd *ehci_qtd_alloc(struct oxu_hcd *oxu)</span>
 
 	if (i &lt; QTD_NUM) {
 		qtd = (struct ehci_qtd *) &amp;oxu-&gt;mem-&gt;qtd_pool[i];
<span class="p_del">-		memset(qtd, 0, sizeof *qtd);</span>
<span class="p_add">+		memset(qtd, 0, sizeof(*qtd));</span>
 
 		qtd-&gt;hw_token = cpu_to_le32(QTD_STS_HALT);
 		qtd-&gt;hw_next = EHCI_LIST_END;
<span class="p_chunk">@@ -642,7 +642,7 @@</span> <span class="p_context"> static struct ehci_qh *oxu_qh_alloc(struct oxu_hcd *oxu)</span>
 
 	if (i &lt; QHEAD_NUM) {
 		qh = (struct ehci_qh *) &amp;oxu-&gt;mem-&gt;qh_pool[i];
<span class="p_del">-		memset(qh, 0, sizeof *qh);</span>
<span class="p_add">+		memset(qh, 0, sizeof(*qh));</span>
 
 		kref_init(&amp;qh-&gt;kref);
 		qh-&gt;oxu = oxu;
<span class="p_header">diff --git a/drivers/usb/host/sl811-hcd.c b/drivers/usb/host/sl811-hcd.c</span>
<span class="p_header">index fd2a11473be7..67dce2d559e7 100644</span>
<span class="p_header">--- a/drivers/usb/host/sl811-hcd.c</span>
<span class="p_header">+++ b/drivers/usb/host/sl811-hcd.c</span>
<span class="p_chunk">@@ -810,7 +810,7 @@</span> <span class="p_context"> static int sl811h_urb_enqueue(</span>
 
 	/* avoid all allocations within spinlocks */
 	if (!hep-&gt;hcpriv) {
<span class="p_del">-		ep = kzalloc(sizeof *ep, mem_flags);</span>
<span class="p_add">+		ep = kzalloc(sizeof(*ep), mem_flags);</span>
 		if (ep == NULL)
 			return -ENOMEM;
 	}
<span class="p_header">diff --git a/drivers/usb/host/xhci-mem.c b/drivers/usb/host/xhci-mem.c</span>
<span class="p_header">index 5cd080e0a685..01c9f4d944e2 100644</span>
<span class="p_header">--- a/drivers/usb/host/xhci-mem.c</span>
<span class="p_header">+++ b/drivers/usb/host/xhci-mem.c</span>
<span class="p_chunk">@@ -43,7 +43,7 @@</span> <span class="p_context"> static struct xhci_segment *xhci_segment_alloc(struct xhci_hcd *xhci,</span>
 	dma_addr_t	dma;
 	int		i;
 
<span class="p_del">-	seg = kzalloc(sizeof *seg, flags);</span>
<span class="p_add">+	seg = kzalloc(sizeof(*seg), flags);</span>
 	if (!seg)
 		return NULL;
 
<span class="p_chunk">@@ -365,7 +365,7 @@</span> <span class="p_context"> static struct xhci_ring *xhci_ring_alloc(struct xhci_hcd *xhci,</span>
 	struct xhci_ring	*ring;
 	int ret;
 
<span class="p_del">-	ring = kzalloc(sizeof *(ring), flags);</span>
<span class="p_add">+	ring = kzalloc(sizeof(*(ring)), flags);</span>
 	if (!ring)
 		return NULL;
 
<span class="p_chunk">@@ -2375,7 +2375,7 @@</span> <span class="p_context"> int xhci_mem_init(struct xhci_hcd *xhci, gfp_t flags)</span>
 			GFP_KERNEL);
 	if (!xhci-&gt;dcbaa)
 		goto fail;
<span class="p_del">-	memset(xhci-&gt;dcbaa, 0, sizeof *(xhci-&gt;dcbaa));</span>
<span class="p_add">+	memset(xhci-&gt;dcbaa, 0, sizeof(*(xhci-&gt;dcbaa)));</span>
 	xhci-&gt;dcbaa-&gt;dma = dma;
 	xhci_dbg_trace(xhci, trace_xhci_dbg_init,
 			&quot;// Device context base array address = 0x%llx (DMA), %p (virt)&quot;,
<span class="p_header">diff --git a/drivers/usb/musb/cppi_dma.c b/drivers/usb/musb/cppi_dma.c</span>
<span class="p_header">index cc134109b056..0e78fec163a0 100644</span>
<span class="p_header">--- a/drivers/usb/musb/cppi_dma.c</span>
<span class="p_header">+++ b/drivers/usb/musb/cppi_dma.c</span>
<span class="p_chunk">@@ -1305,7 +1305,7 @@</span> <span class="p_context"> cppi_dma_controller_create(struct musb *musb, void __iomem *mregs)</span>
 	struct platform_device	*pdev = to_platform_device(dev);
 	int			irq = platform_get_irq_byname(pdev, &quot;dma&quot;);
 
<span class="p_del">-	controller = kzalloc(sizeof *controller, GFP_KERNEL);</span>
<span class="p_add">+	controller = kzalloc(sizeof(*controller), GFP_KERNEL);</span>
 	if (!controller)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/usb/musb/musb_gadget.c b/drivers/usb/musb/musb_gadget.c</span>
<span class="p_header">index 87bd578799a8..e4561f765a03 100644</span>
<span class="p_header">--- a/drivers/usb/musb/musb_gadget.c</span>
<span class="p_header">+++ b/drivers/usb/musb/musb_gadget.c</span>
<span class="p_chunk">@@ -1189,7 +1189,7 @@</span> <span class="p_context"> struct usb_request *musb_alloc_request(struct usb_ep *ep, gfp_t gfp_flags)</span>
 	struct musb		*musb = musb_ep-&gt;musb;
 	struct musb_request	*request = NULL;
 
<span class="p_del">-	request = kzalloc(sizeof *request, gfp_flags);</span>
<span class="p_add">+	request = kzalloc(sizeof(*request), gfp_flags);</span>
 	if (!request) {
 		dev_dbg(musb-&gt;controller, &quot;not enough memory\n&quot;);
 		return NULL;
<span class="p_chunk">@@ -1744,7 +1744,7 @@</span> <span class="p_context"> init_peripheral_ep(struct musb *musb, struct musb_ep *ep, u8 epnum, int is_in)</span>
 {
 	struct musb_hw_ep	*hw_ep = musb-&gt;endpoints + epnum;
 
<span class="p_del">-	memset(ep, 0, sizeof *ep);</span>
<span class="p_add">+	memset(ep, 0, sizeof(*ep));</span>
 
 	ep-&gt;current_epnum = epnum;
 	ep-&gt;musb = musb;
<span class="p_header">diff --git a/drivers/usb/musb/musb_gadget_ep0.c b/drivers/usb/musb/musb_gadget_ep0.c</span>
<span class="p_header">index 10d30afe4a3c..a87ae60d991b 100644</span>
<span class="p_header">--- a/drivers/usb/musb/musb_gadget_ep0.c</span>
<span class="p_header">+++ b/drivers/usb/musb/musb_gadget_ep0.c</span>
<span class="p_chunk">@@ -602,7 +602,7 @@</span> <span class="p_context"> musb_read_setup(struct musb *musb, struct usb_ctrlrequest *req)</span>
 	struct musb_request	*r;
 	void __iomem		*regs = musb-&gt;control_ep-&gt;regs;
 
<span class="p_del">-	musb_read_fifo(&amp;musb-&gt;endpoints[0], sizeof *req, (u8 *)req);</span>
<span class="p_add">+	musb_read_fifo(&amp;musb-&gt;endpoints[0], sizeof(*req), (u8 *)req);</span>
 
 	/* NOTE:  earlier 2.6 versions changed setup packets to host
 	 * order, but now USB packets always stay in USB byte order.
<span class="p_header">diff --git a/drivers/usb/musb/musb_host.c b/drivers/usb/musb/musb_host.c</span>
<span class="p_header">index 795a45b1b25b..9d3ca7ba782d 100644</span>
<span class="p_header">--- a/drivers/usb/musb/musb_host.c</span>
<span class="p_header">+++ b/drivers/usb/musb/musb_host.c</span>
<span class="p_chunk">@@ -2230,7 +2230,7 @@</span> <span class="p_context"> static int musb_urb_enqueue(</span>
 	 * REVISIT consider a dedicated qh kmem_cache, so it&#39;s harder
 	 * for bugs in other kernel code to break this driver...
 	 */
<span class="p_del">-	qh = kzalloc(sizeof *qh, mem_flags);</span>
<span class="p_add">+	qh = kzalloc(sizeof(*qh), mem_flags);</span>
 	if (!qh) {
 		spin_lock_irqsave(&amp;musb-&gt;lock, flags);
 		usb_hcd_unlink_urb_from_ep(hcd, urb);
<span class="p_header">diff --git a/drivers/usb/phy/phy-isp1301-omap.c b/drivers/usb/phy/phy-isp1301-omap.c</span>
<span class="p_header">index 3af263cc0caa..b084c4113e74 100644</span>
<span class="p_header">--- a/drivers/usb/phy/phy-isp1301-omap.c</span>
<span class="p_header">+++ b/drivers/usb/phy/phy-isp1301-omap.c</span>
<span class="p_chunk">@@ -1496,11 +1496,11 @@</span> <span class="p_context"> isp1301_probe(struct i2c_client *i2c, const struct i2c_device_id *id)</span>
 	if (the_transceiver)
 		return 0;
 
<span class="p_del">-	isp = kzalloc(sizeof *isp, GFP_KERNEL);</span>
<span class="p_add">+	isp = kzalloc(sizeof(*isp), GFP_KERNEL);</span>
 	if (!isp)
 		return 0;
 
<span class="p_del">-	isp-&gt;phy.otg = kzalloc(sizeof *isp-&gt;phy.otg, GFP_KERNEL);</span>
<span class="p_add">+	isp-&gt;phy.otg = kzalloc(sizeof(*isp-&gt;phy.otg), GFP_KERNEL);</span>
 	if (!isp-&gt;phy.otg) {
 		kfree(isp);
 		return 0;
<span class="p_header">diff --git a/drivers/usb/renesas_usbhs/mod_gadget.c b/drivers/usb/renesas_usbhs/mod_gadget.c</span>
<span class="p_header">index 657f9672ceba..00a92274f949 100644</span>
<span class="p_header">--- a/drivers/usb/renesas_usbhs/mod_gadget.c</span>
<span class="p_header">+++ b/drivers/usb/renesas_usbhs/mod_gadget.c</span>
<span class="p_chunk">@@ -643,7 +643,7 @@</span> <span class="p_context"> static struct usb_request *usbhsg_ep_alloc_request(struct usb_ep *ep,</span>
 {
 	struct usbhsg_request *ureq;
 
<span class="p_del">-	ureq = kzalloc(sizeof *ureq, gfp_flags);</span>
<span class="p_add">+	ureq = kzalloc(sizeof(*ureq), gfp_flags);</span>
 	if (!ureq)
 		return NULL;
 
<span class="p_header">diff --git a/drivers/usb/serial/pl2303.c b/drivers/usb/serial/pl2303.c</span>
<span class="p_header">index ae682e4eeaef..5183e53e7111 100644</span>
<span class="p_header">--- a/drivers/usb/serial/pl2303.c</span>
<span class="p_header">+++ b/drivers/usb/serial/pl2303.c</span>
<span class="p_chunk">@@ -742,13 +742,13 @@</span> <span class="p_context"> static int pl2303_ioctl(struct tty_struct *tty,</span>
 
 	switch (cmd) {
 	case TIOCGSERIAL:
<span class="p_del">-		memset(&amp;ser, 0, sizeof ser);</span>
<span class="p_add">+		memset(&amp;ser, 0, sizeof(ser));</span>
 		ser.type = PORT_16654;
 		ser.line = port-&gt;minor;
 		ser.port = port-&gt;port_number;
 		ser.baud_base = 460800;
 
<span class="p_del">-		if (copy_to_user((void __user *)arg, &amp;ser, sizeof ser))</span>
<span class="p_add">+		if (copy_to_user((void __user *)arg, &amp;ser, sizeof(ser)))</span>
 			return -EFAULT;
 
 		return 0;
<span class="p_header">diff --git a/drivers/usb/storage/sddr55.c b/drivers/usb/storage/sddr55.c</span>
<span class="p_header">index e5e0a25ecd96..f5c6c48bb044 100644</span>
<span class="p_header">--- a/drivers/usb/storage/sddr55.c</span>
<span class="p_header">+++ b/drivers/usb/storage/sddr55.c</span>
<span class="p_chunk">@@ -813,16 +813,16 @@</span> <span class="p_context"> static int sddr55_transport(struct scsi_cmnd *srb, struct us_data *us)</span>
 			     info-&gt;sense_data[12],
 			     info-&gt;sense_data[13]);
 
<span class="p_del">-		memcpy (ptr, info-&gt;sense_data, sizeof info-&gt;sense_data);</span>
<span class="p_add">+		memcpy (ptr, info-&gt;sense_data, sizeof(info-&gt;sense_data));</span>
 		ptr[0] = 0x70;
 		ptr[7] = 11;
<span class="p_del">-		usb_stor_set_xfer_buf (ptr, sizeof info-&gt;sense_data, srb);</span>
<span class="p_del">-		memset (info-&gt;sense_data, 0, sizeof info-&gt;sense_data);</span>
<span class="p_add">+		usb_stor_set_xfer_buf (ptr, sizeof(info-&gt;sense_data), srb);</span>
<span class="p_add">+		memset (info-&gt;sense_data, 0, sizeof(info-&gt;sense_data));</span>
 
 		return USB_STOR_TRANSPORT_GOOD;
 	}
 
<span class="p_del">-	memset (info-&gt;sense_data, 0, sizeof info-&gt;sense_data);</span>
<span class="p_add">+	memset (info-&gt;sense_data, 0, sizeof(info-&gt;sense_data));</span>
 
 	/* Dummy up a response for INQUIRY since SDDR55 doesn&#39;t
 	   respond to INQUIRY commands */
<span class="p_chunk">@@ -890,7 +890,7 @@</span> <span class="p_context"> static int sddr55_transport(struct scsi_cmnd *srb, struct us_data *us)</span>
 
 	if (srb-&gt;cmnd[0] == MODE_SENSE_10) {
 
<span class="p_del">-		memcpy(ptr, mode_page_01, sizeof mode_page_01);</span>
<span class="p_add">+		memcpy(ptr, mode_page_01, sizeof(mode_page_01));</span>
 		ptr[3] = (info-&gt;read_only || info-&gt;force_read_only) ? 0x80 : 0;
 		usb_stor_set_xfer_buf(ptr, sizeof(mode_page_01), srb);
 
<span class="p_header">diff --git a/drivers/vhost/net.c b/drivers/vhost/net.c</span>
<span class="p_header">index 9eda69e40678..9ab1644086c2 100644</span>
<span class="p_header">--- a/drivers/vhost/net.c</span>
<span class="p_header">+++ b/drivers/vhost/net.c</span>
<span class="p_chunk">@@ -620,8 +620,8 @@</span> <span class="p_context"> static void handle_rx(struct vhost_net *net)</span>
 
 		num_buffers = cpu_to_vhost16(vq, headcount);
 		if (likely(mergeable) &amp;&amp;
<span class="p_del">-		    copy_to_iter(&amp;num_buffers, sizeof num_buffers,</span>
<span class="p_del">-				 &amp;fixup) != sizeof num_buffers) {</span>
<span class="p_add">+		    copy_to_iter(&amp;num_buffers, sizeof(num_buffers),</span>
<span class="p_add">+				 &amp;fixup) != sizeof(num_buffers)) {</span>
 			vq_err(vq, &quot;Failed num_buffers write&quot;);
 			vhost_discard_vq_desc(vq, headcount);
 			break;
<span class="p_chunk">@@ -679,9 +679,9 @@</span> <span class="p_context"> static int vhost_net_open(struct inode *inode, struct file *f)</span>
 	struct vhost_virtqueue **vqs;
 	int i;
 
<span class="p_del">-	n = kmalloc(sizeof *n, GFP_KERNEL | __GFP_NOWARN | __GFP_REPEAT);</span>
<span class="p_add">+	n = kmalloc(sizeof(*n), GFP_KERNEL | __GFP_NOWARN | __GFP_REPEAT);</span>
 	if (!n) {
<span class="p_del">-		n = vmalloc(sizeof *n);</span>
<span class="p_add">+		n = vmalloc(sizeof(*n));</span>
 		if (!n)
 			return -ENOMEM;
 	}
<span class="p_chunk">@@ -814,7 +814,7 @@</span> <span class="p_context"> static struct socket *get_raw_socket(int fd)</span>
 		struct sockaddr_ll sa;
 		char  buf[MAX_ADDR_LEN];
 	} uaddr;
<span class="p_del">-	int uaddr_len = sizeof uaddr, r;</span>
<span class="p_add">+	int uaddr_len = sizeof(uaddr), r;</span>
 	struct socket *sock = sockfd_lookup(fd, &amp;r);
 
 	if (!sock)
<span class="p_chunk">@@ -1060,16 +1060,16 @@</span> <span class="p_context"> static long vhost_net_ioctl(struct file *f, unsigned int ioctl,</span>
 
 	switch (ioctl) {
 	case VHOST_NET_SET_BACKEND:
<span class="p_del">-		if (copy_from_user(&amp;backend, argp, sizeof backend))</span>
<span class="p_add">+		if (copy_from_user(&amp;backend, argp, sizeof(backend)))</span>
 			return -EFAULT;
 		return vhost_net_set_backend(n, backend.index, backend.fd);
 	case VHOST_GET_FEATURES:
 		features = VHOST_NET_FEATURES;
<span class="p_del">-		if (copy_to_user(featurep, &amp;features, sizeof features))</span>
<span class="p_add">+		if (copy_to_user(featurep, &amp;features, sizeof(features)))</span>
 			return -EFAULT;
 		return 0;
 	case VHOST_SET_FEATURES:
<span class="p_del">-		if (copy_from_user(&amp;features, featurep, sizeof features))</span>
<span class="p_add">+		if (copy_from_user(&amp;features, featurep, sizeof(features)))</span>
 			return -EFAULT;
 		if (features &amp; ~VHOST_NET_FEATURES)
 			return -EOPNOTSUPP;
<span class="p_header">diff --git a/drivers/vhost/scsi.c b/drivers/vhost/scsi.c</span>
<span class="p_header">index 29cfc57d496e..05410866c556 100644</span>
<span class="p_header">--- a/drivers/vhost/scsi.c</span>
<span class="p_header">+++ b/drivers/vhost/scsi.c</span>
<span class="p_chunk">@@ -1488,21 +1488,21 @@</span> <span class="p_context"> vhost_scsi_ioctl(struct file *f,</span>
 
 	switch (ioctl) {
 	case VHOST_SCSI_SET_ENDPOINT:
<span class="p_del">-		if (copy_from_user(&amp;backend, argp, sizeof backend))</span>
<span class="p_add">+		if (copy_from_user(&amp;backend, argp, sizeof(backend)))</span>
 			return -EFAULT;
 		if (backend.reserved != 0)
 			return -EOPNOTSUPP;
 
 		return vhost_scsi_set_endpoint(vs, &amp;backend);
 	case VHOST_SCSI_CLEAR_ENDPOINT:
<span class="p_del">-		if (copy_from_user(&amp;backend, argp, sizeof backend))</span>
<span class="p_add">+		if (copy_from_user(&amp;backend, argp, sizeof(backend)))</span>
 			return -EFAULT;
 		if (backend.reserved != 0)
 			return -EOPNOTSUPP;
 
 		return vhost_scsi_clear_endpoint(vs, &amp;backend);
 	case VHOST_SCSI_GET_ABI_VERSION:
<span class="p_del">-		if (copy_to_user(argp, &amp;abi_version, sizeof abi_version))</span>
<span class="p_add">+		if (copy_to_user(argp, &amp;abi_version, sizeof(abi_version)))</span>
 			return -EFAULT;
 		return 0;
 	case VHOST_SCSI_SET_EVENTS_MISSED:
<span class="p_chunk">@@ -1521,11 +1521,11 @@</span> <span class="p_context"> vhost_scsi_ioctl(struct file *f,</span>
 		return 0;
 	case VHOST_GET_FEATURES:
 		features = VHOST_SCSI_FEATURES;
<span class="p_del">-		if (copy_to_user(featurep, &amp;features, sizeof features))</span>
<span class="p_add">+		if (copy_to_user(featurep, &amp;features, sizeof(features)))</span>
 			return -EFAULT;
 		return 0;
 	case VHOST_SET_FEATURES:
<span class="p_del">-		if (copy_from_user(&amp;features, featurep, sizeof features))</span>
<span class="p_add">+		if (copy_from_user(&amp;features, featurep, sizeof(features)))</span>
 			return -EFAULT;
 		return vhost_scsi_set_features(vs, features);
 	default:
<span class="p_header">diff --git a/drivers/vhost/test.c b/drivers/vhost/test.c</span>
<span class="p_header">index f2882ac98726..c3a1b505906c 100644</span>
<span class="p_header">--- a/drivers/vhost/test.c</span>
<span class="p_header">+++ b/drivers/vhost/test.c</span>
<span class="p_chunk">@@ -101,7 +101,7 @@</span> <span class="p_context"> static void handle_vq_kick(struct vhost_work *work)</span>
 
 static int vhost_test_open(struct inode *inode, struct file *f)
 {
<span class="p_del">-	struct vhost_test *n = kmalloc(sizeof *n, GFP_KERNEL);</span>
<span class="p_add">+	struct vhost_test *n = kmalloc(sizeof(*n), GFP_KERNEL);</span>
 	struct vhost_dev *dev;
 	struct vhost_virtqueue **vqs;
 
<span class="p_chunk">@@ -268,17 +268,17 @@</span> <span class="p_context"> static long vhost_test_ioctl(struct file *f, unsigned int ioctl,</span>
 	int r;
 	switch (ioctl) {
 	case VHOST_TEST_RUN:
<span class="p_del">-		if (copy_from_user(&amp;test, argp, sizeof test))</span>
<span class="p_add">+		if (copy_from_user(&amp;test, argp, sizeof(test)))</span>
 			return -EFAULT;
 		return vhost_test_run(n, test);
 	case VHOST_GET_FEATURES:
 		features = VHOST_FEATURES;
<span class="p_del">-		if (copy_to_user(featurep, &amp;features, sizeof features))</span>
<span class="p_add">+		if (copy_to_user(featurep, &amp;features, sizeof(features)))</span>
 			return -EFAULT;
 		return 0;
 	case VHOST_SET_FEATURES:
 		printk(KERN_ERR &quot;1\n&quot;);
<span class="p_del">-		if (copy_from_user(&amp;features, featurep, sizeof features))</span>
<span class="p_add">+		if (copy_from_user(&amp;features, featurep, sizeof(features)))</span>
 			return -EFAULT;
 		printk(KERN_ERR &quot;2\n&quot;);
 		if (features &amp; ~VHOST_FEATURES)
<span class="p_header">diff --git a/drivers/vhost/vhost.c b/drivers/vhost/vhost.c</span>
<span class="p_header">index ad2146a9ab2d..1381964b02dd 100644</span>
<span class="p_header">--- a/drivers/vhost/vhost.c</span>
<span class="p_header">+++ b/drivers/vhost/vhost.c</span>
<span class="p_chunk">@@ -347,10 +347,10 @@</span> <span class="p_context"> static long vhost_dev_alloc_iovecs(struct vhost_dev *dev)</span>
 
 	for (i = 0; i &lt; dev-&gt;nvqs; ++i) {
 		vq = dev-&gt;vqs[i];
<span class="p_del">-		vq-&gt;indirect = kmalloc(sizeof *vq-&gt;indirect * UIO_MAXIOV,</span>
<span class="p_add">+		vq-&gt;indirect = kmalloc(sizeof(*vq-&gt;indirect) * UIO_MAXIOV,</span>
 				       GFP_KERNEL);
<span class="p_del">-		vq-&gt;log = kmalloc(sizeof *vq-&gt;log * UIO_MAXIOV, GFP_KERNEL);</span>
<span class="p_del">-		vq-&gt;heads = kmalloc(sizeof *vq-&gt;heads * UIO_MAXIOV, GFP_KERNEL);</span>
<span class="p_add">+		vq-&gt;log = kmalloc(sizeof(*vq-&gt;log) * UIO_MAXIOV, GFP_KERNEL);</span>
<span class="p_add">+		vq-&gt;heads = kmalloc(sizeof(*vq-&gt;heads) * UIO_MAXIOV, GFP_KERNEL);</span>
 		if (!vq-&gt;indirect || !vq-&gt;log || !vq-&gt;heads)
 			goto err_nomem;
 	}
<span class="p_chunk">@@ -631,11 +631,11 @@</span> <span class="p_context"> static int vq_access_ok(struct vhost_virtqueue *vq, unsigned int num,</span>
 			struct vring_used __user *used)
 {
 	size_t s = vhost_has_feature(vq, VIRTIO_RING_F_EVENT_IDX) ? 2 : 0;
<span class="p_del">-	return access_ok(VERIFY_READ, desc, num * sizeof *desc) &amp;&amp;</span>
<span class="p_add">+	return access_ok(VERIFY_READ, desc, num * sizeof(*desc)) &amp;&amp;</span>
 	       access_ok(VERIFY_READ, avail,
<span class="p_del">-			 sizeof *avail + num * sizeof *avail-&gt;ring + s) &amp;&amp;</span>
<span class="p_add">+			 sizeof(*avail) + num * sizeof(*avail-&gt;ring) + s) &amp;&amp;</span>
 	       access_ok(VERIFY_WRITE, used,
<span class="p_del">-			sizeof *used + num * sizeof *used-&gt;ring + s);</span>
<span class="p_add">+			sizeof(*used) + num * sizeof(*used-&gt;ring) + s);</span>
 }
 
 /* Can we log writes? */
<span class="p_chunk">@@ -656,8 +656,8 @@</span> <span class="p_context"> static int vq_log_access_ok(struct vhost_virtqueue *vq,</span>
 	return vq_memory_access_ok(log_base, vq-&gt;memory,
 				   vhost_has_feature(vq, VHOST_F_LOG_ALL)) &amp;&amp;
 		(!vq-&gt;log_used || log_access_ok(log_base, vq-&gt;log_addr,
<span class="p_del">-					sizeof *vq-&gt;used +</span>
<span class="p_del">-					vq-&gt;num * sizeof *vq-&gt;used-&gt;ring + s));</span>
<span class="p_add">+					sizeof(*vq-&gt;used) +</span>
<span class="p_add">+					vq-&gt;num * sizeof(*vq-&gt;used-&gt;ring) + s));</span>
 }
 
 /* Can we start vq? */
<span class="p_chunk">@@ -706,7 +706,7 @@</span> <span class="p_context"> static long vhost_set_memory(struct vhost_dev *d, struct vhost_memory __user *m)</span>
 
 	memcpy(newmem, &amp;mem, size);
 	if (copy_from_user(newmem-&gt;regions, m-&gt;regions,
<span class="p_del">-			   mem.nregions * sizeof *m-&gt;regions)) {</span>
<span class="p_add">+			   mem.nregions * sizeof(*m-&gt;regions))) {</span>
 		kvfree(newmem);
 		return -EFAULT;
 	}
<span class="p_chunk">@@ -761,7 +761,7 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 			r = -EBUSY;
 			break;
 		}
<span class="p_del">-		if (copy_from_user(&amp;s, argp, sizeof s)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;s, argp, sizeof(s))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -778,7 +778,7 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 			r = -EBUSY;
 			break;
 		}
<span class="p_del">-		if (copy_from_user(&amp;s, argp, sizeof s)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;s, argp, sizeof(s))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -793,11 +793,11 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 	case VHOST_GET_VRING_BASE:
 		s.index = idx;
 		s.num = vq-&gt;last_avail_idx;
<span class="p_del">-		if (copy_to_user(argp, &amp;s, sizeof s))</span>
<span class="p_add">+		if (copy_to_user(argp, &amp;s, sizeof(s)))</span>
 			r = -EFAULT;
 		break;
 	case VHOST_SET_VRING_ADDR:
<span class="p_del">-		if (copy_from_user(&amp;a, argp, sizeof a)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;a, argp, sizeof(a))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -839,8 +839,8 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 			/* Also validate log access for used ring if enabled. */
 			if ((a.flags &amp; (0x1 &lt;&lt; VHOST_VRING_F_LOG)) &amp;&amp;
 			    !log_access_ok(vq-&gt;log_base, a.log_guest_addr,
<span class="p_del">-					   sizeof *vq-&gt;used +</span>
<span class="p_del">-					   vq-&gt;num * sizeof *vq-&gt;used-&gt;ring)) {</span>
<span class="p_add">+					   sizeof(*vq-&gt;used) +</span>
<span class="p_add">+					   vq-&gt;num * sizeof(*vq-&gt;used-&gt;ring))) {</span>
 				r = -EINVAL;
 				break;
 			}
<span class="p_chunk">@@ -853,7 +853,7 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 		vq-&gt;used = (void __user *)(unsigned long)a.used_user_addr;
 		break;
 	case VHOST_SET_VRING_KICK:
<span class="p_del">-		if (copy_from_user(&amp;f, argp, sizeof f)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;f, argp, sizeof(f))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -869,7 +869,7 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 			filep = eventfp;
 		break;
 	case VHOST_SET_VRING_CALL:
<span class="p_del">-		if (copy_from_user(&amp;f, argp, sizeof f)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;f, argp, sizeof(f))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -888,7 +888,7 @@</span> <span class="p_context"> long vhost_vring_ioctl(struct vhost_dev *d, int ioctl, void __user *argp)</span>
 			filep = eventfp;
 		break;
 	case VHOST_SET_VRING_ERR:
<span class="p_del">-		if (copy_from_user(&amp;f, argp, sizeof f)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;f, argp, sizeof(f))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -960,7 +960,7 @@</span> <span class="p_context"> long vhost_dev_ioctl(struct vhost_dev *d, unsigned int ioctl, void __user *argp)</span>
 		r = vhost_set_memory(d, argp);
 		break;
 	case VHOST_SET_LOG_BASE:
<span class="p_del">-		if (copy_from_user(&amp;p, argp, sizeof p)) {</span>
<span class="p_add">+		if (copy_from_user(&amp;p, argp, sizeof(p))) {</span>
 			r = -EFAULT;
 			break;
 		}
<span class="p_chunk">@@ -1126,7 +1126,7 @@</span> <span class="p_context"> static int vhost_update_used_flags(struct vhost_virtqueue *vq)</span>
 		used = &amp;vq-&gt;used-&gt;flags;
 		log_write(vq-&gt;log_base, vq-&gt;log_addr +
 			  (used - (void __user *)vq-&gt;used),
<span class="p_del">-			  sizeof vq-&gt;used-&gt;flags);</span>
<span class="p_add">+			  sizeof(vq-&gt;used-&gt;flags));</span>
 		if (vq-&gt;log_ctx)
 			eventfd_signal(vq-&gt;log_ctx, 1);
 	}
<span class="p_chunk">@@ -1145,7 +1145,7 @@</span> <span class="p_context"> static int vhost_update_avail_event(struct vhost_virtqueue *vq, u16 avail_event)</span>
 		used = vhost_avail_event(vq);
 		log_write(vq-&gt;log_base, vq-&gt;log_addr +
 			  (used - (void __user *)vq-&gt;used),
<span class="p_del">-			  sizeof *vhost_avail_event(vq));</span>
<span class="p_add">+			  sizeof(*vhost_avail_event(vq)));</span>
 		if (vq-&gt;log_ctx)
 			eventfd_signal(vq-&gt;log_ctx, 1);
 	}
<span class="p_chunk">@@ -1167,7 +1167,7 @@</span> <span class="p_context"> int vhost_init_used(struct vhost_virtqueue *vq)</span>
 	if (r)
 		return r;
 	vq-&gt;signalled_used_valid = false;
<span class="p_del">-	if (!access_ok(VERIFY_READ, &amp;vq-&gt;used-&gt;idx, sizeof vq-&gt;used-&gt;idx))</span>
<span class="p_add">+	if (!access_ok(VERIFY_READ, &amp;vq-&gt;used-&gt;idx, sizeof(vq-&gt;used-&gt;idx)))</span>
 		return -EFAULT;
 	r = __get_user(last_used_idx, &amp;vq-&gt;used-&gt;idx);
 	if (r)
<span class="p_chunk">@@ -1245,11 +1245,11 @@</span> <span class="p_context"> static int get_indirect(struct vhost_virtqueue *vq,</span>
 	int ret;
 
 	/* Sanity check */
<span class="p_del">-	if (unlikely(len % sizeof desc)) {</span>
<span class="p_add">+	if (unlikely(len % sizeof(desc))) {</span>
 		vq_err(vq, &quot;Invalid length in indirect descriptor: &quot;
 		       &quot;len 0x%llx not multiple of 0x%zx\n&quot;,
 		       (unsigned long long)len,
<span class="p_del">-		       sizeof desc);</span>
<span class="p_add">+		       sizeof(desc));</span>
 		return -EINVAL;
 	}
 
<span class="p_chunk">@@ -1265,7 +1265,7 @@</span> <span class="p_context"> static int get_indirect(struct vhost_virtqueue *vq,</span>
 	 * architectures only need a compiler barrier here. */
 	read_barrier_depends();
 
<span class="p_del">-	count = len / sizeof desc;</span>
<span class="p_add">+	count = len / sizeof(desc);</span>
 	/* Buffers are chained via a 16 bit next field, so
 	 * we can have at most 2^16 of these. */
 	if (unlikely(count &gt; USHRT_MAX + 1)) {
<span class="p_chunk">@@ -1285,12 +1285,12 @@</span> <span class="p_context"> static int get_indirect(struct vhost_virtqueue *vq,</span>
 		if (unlikely(copy_from_iter(&amp;desc, sizeof(desc), &amp;from) !=
 			     sizeof(desc))) {
 			vq_err(vq, &quot;Failed indirect descriptor: idx %d, %zx\n&quot;,
<span class="p_del">-			       i, (size_t)vhost64_to_cpu(vq, indirect-&gt;addr) + i * sizeof desc);</span>
<span class="p_add">+			       i, (size_t)vhost64_to_cpu(vq, indirect-&gt;addr) + i * sizeof(desc));</span>
 			return -EINVAL;
 		}
 		if (unlikely(desc.flags &amp; cpu_to_vhost16(vq, VRING_DESC_F_INDIRECT))) {
 			vq_err(vq, &quot;Nested indirect descriptor: idx %d, %zx\n&quot;,
<span class="p_del">-			       i, (size_t)vhost64_to_cpu(vq, indirect-&gt;addr) + i * sizeof desc);</span>
<span class="p_add">+			       i, (size_t)vhost64_to_cpu(vq, indirect-&gt;addr) + i * sizeof(desc));</span>
 			return -EINVAL;
 		}
 
<span class="p_chunk">@@ -1404,7 +1404,7 @@</span> <span class="p_context"> int vhost_get_vq_desc(struct vhost_virtqueue *vq,</span>
 			       i, vq-&gt;num, head);
 			return -EINVAL;
 		}
<span class="p_del">-		ret = __copy_from_user(&amp;desc, vq-&gt;desc + i, sizeof desc);</span>
<span class="p_add">+		ret = __copy_from_user(&amp;desc, vq-&gt;desc + i, sizeof(desc));</span>
 		if (unlikely(ret)) {
 			vq_err(vq, &quot;Failed to get descriptor: idx %d addr %p\n&quot;,
 			       i, vq-&gt;desc + i);
<span class="p_chunk">@@ -1500,7 +1500,7 @@</span> <span class="p_context"> static int __vhost_add_used_n(struct vhost_virtqueue *vq,</span>
 			vq_err(vq, &quot;Failed to write used len&quot;);
 			return -EFAULT;
 		}
<span class="p_del">-	} else if (__copy_to_user(used, heads, count * sizeof *used)) {</span>
<span class="p_add">+	} else if (__copy_to_user(used, heads, count * sizeof(*used))) {</span>
 		vq_err(vq, &quot;Failed to write used&quot;);
 		return -EFAULT;
 	}
<span class="p_chunk">@@ -1511,7 +1511,7 @@</span> <span class="p_context"> static int __vhost_add_used_n(struct vhost_virtqueue *vq,</span>
 		log_write(vq-&gt;log_base,
 			  vq-&gt;log_addr +
 			   ((void __user *)used - (void __user *)vq-&gt;used),
<span class="p_del">-			  count * sizeof *used);</span>
<span class="p_add">+			  count * sizeof(*used));</span>
 	}
 	old = vq-&gt;last_used_idx;
 	new = (vq-&gt;last_used_idx += count);
<span class="p_chunk">@@ -1552,7 +1552,7 @@</span> <span class="p_context"> int vhost_add_used_n(struct vhost_virtqueue *vq, struct vring_used_elem *heads,</span>
 		/* Log used index update. */
 		log_write(vq-&gt;log_base,
 			  vq-&gt;log_addr + offsetof(struct vring_used, idx),
<span class="p_del">-			  sizeof vq-&gt;used-&gt;idx);</span>
<span class="p_add">+			  sizeof(vq-&gt;used-&gt;idx));</span>
 		if (vq-&gt;log_ctx)
 			eventfd_signal(vq-&gt;log_ctx, 1);
 	}
<span class="p_header">diff --git a/drivers/video/console/sticore.c b/drivers/video/console/sticore.c</span>
<span class="p_header">index 7da1ad03acb5..dbbe9c2db686 100644</span>
<span class="p_header">--- a/drivers/video/console/sticore.c</span>
<span class="p_header">+++ b/drivers/video/console/sticore.c</span>
<span class="p_chunk">@@ -284,7 +284,7 @@</span> <span class="p_context"> static char default_sti_path[21] __read_mostly;</span>
 static int sti_setup(char *str)
 {
 	if (str)
<span class="p_del">-		strlcpy (default_sti_path, str, sizeof (default_sti_path));</span>
<span class="p_add">+		strlcpy (default_sti_path, str, sizeof(default_sti_path));</span>
 	
 	return 1;
 }
<span class="p_chunk">@@ -733,7 +733,7 @@</span> <span class="p_context"> static int sti_read_rom(int wordmode, struct sti_struct *sti,</span>
 	struct sti_rom *raw = NULL;
 	unsigned long revno;
 
<span class="p_del">-	cooked = kmalloc(sizeof *cooked, GFP_KERNEL);</span>
<span class="p_add">+	cooked = kmalloc(sizeof(*cooked), GFP_KERNEL);</span>
 	if (!cooked)
 		goto out_err;
 
<span class="p_header">diff --git a/drivers/video/fbdev/carminefb.c b/drivers/video/fbdev/carminefb.c</span>
<span class="p_header">index 65f7c15f5fdb..1cba1c271b59 100644</span>
<span class="p_header">--- a/drivers/video/fbdev/carminefb.c</span>
<span class="p_header">+++ b/drivers/video/fbdev/carminefb.c</span>
<span class="p_chunk">@@ -545,7 +545,7 @@</span> <span class="p_context"> static int alloc_carmine_fb(void __iomem *regs, void __iomem *smem_base,</span>
 	struct fb_info *info;
 	struct carmine_fb *par;
 
<span class="p_del">-	info = framebuffer_alloc(sizeof *par, device);</span>
<span class="p_add">+	info = framebuffer_alloc(sizeof(*par), device);</span>
 	if (!info)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -618,7 +618,7 @@</span> <span class="p_context"> static int carminefb_probe(struct pci_dev *dev, const struct pci_device_id *ent)</span>
 		return ret;
 
 	ret = -ENOMEM;
<span class="p_del">-	hw = kzalloc(sizeof *hw, GFP_KERNEL);</span>
<span class="p_add">+	hw = kzalloc(sizeof(*hw), GFP_KERNEL);</span>
 	if (!hw)
 		goto err_enable_pci;
 
<span class="p_header">diff --git a/drivers/video/fbdev/omap2/omapfb/omapfb-main.c b/drivers/video/fbdev/omap2/omapfb/omapfb-main.c</span>
<span class="p_header">index d3af01c94a58..e6b20d009762 100644</span>
<span class="p_header">--- a/drivers/video/fbdev/omap2/omapfb/omapfb-main.c</span>
<span class="p_header">+++ b/drivers/video/fbdev/omap2/omapfb/omapfb-main.c</span>
<span class="p_chunk">@@ -1378,7 +1378,7 @@</span> <span class="p_context"> static int omapfb_alloc_fbmem(struct fb_info *fbi, unsigned long size,</span>
 
 	rg-&gt;paddr = 0;
 	rg-&gt;vaddr = NULL;
<span class="p_del">-	memset(&amp;rg-&gt;vrfb, 0, sizeof rg-&gt;vrfb);</span>
<span class="p_add">+	memset(&amp;rg-&gt;vrfb, 0, sizeof(rg-&gt;vrfb));</span>
 	rg-&gt;size = 0;
 	rg-&gt;type = 0;
 	rg-&gt;alloc = false;
<span class="p_header">diff --git a/drivers/video/fbdev/tmiofb.c b/drivers/video/fbdev/tmiofb.c</span>
<span class="p_header">index 7fb4e321a431..2fa438e4f96e 100644</span>
<span class="p_header">--- a/drivers/video/fbdev/tmiofb.c</span>
<span class="p_header">+++ b/drivers/video/fbdev/tmiofb.c</span>
<span class="p_chunk">@@ -518,7 +518,7 @@</span> <span class="p_context"> static int tmiofb_ioctl(struct fb_info *fbi,</span>
 		void __user *argp = (void __user *) arg;
 
 		tmiofb_vblank(fbi, &amp;vblank);
<span class="p_del">-		if (copy_to_user(argp, &amp;vblank, sizeof vblank))</span>
<span class="p_add">+		if (copy_to_user(argp, &amp;vblank, sizeof(vblank)))</span>
 			return -EFAULT;
 		return 0;
 	}
<span class="p_header">diff --git a/drivers/virtio/virtio_balloon.c b/drivers/virtio/virtio_balloon.c</span>
<span class="p_header">index 0c3691f46575..c8da32af4195 100644</span>
<span class="p_header">--- a/drivers/virtio/virtio_balloon.c</span>
<span class="p_header">+++ b/drivers/virtio/virtio_balloon.c</span>
<span class="p_chunk">@@ -410,7 +410,7 @@</span> <span class="p_context"> static int init_vqs(struct virtio_balloon *vb)</span>
 		 * Prime this virtqueue with one buffer so the hypervisor can
 		 * use it to signal us later (it can&#39;t be broken yet!).
 		 */
<span class="p_del">-		sg_init_one(&amp;sg, vb-&gt;stats, sizeof vb-&gt;stats);</span>
<span class="p_add">+		sg_init_one(&amp;sg, vb-&gt;stats, sizeof(vb-&gt;stats));</span>
 		if (virtqueue_add_outbuf(vb-&gt;stats_vq, &amp;sg, 1, vb, GFP_KERNEL)
 		    &lt; 0)
 			BUG();
<span class="p_header">diff --git a/drivers/virtio/virtio_mmio.c b/drivers/virtio/virtio_mmio.c</span>
<span class="p_header">index 745c6ee1bb3e..a17b3788733e 100644</span>
<span class="p_header">--- a/drivers/virtio/virtio_mmio.c</span>
<span class="p_header">+++ b/drivers/virtio/virtio_mmio.c</span>
<span class="p_chunk">@@ -174,21 +174,21 @@</span> <span class="p_context"> static void vm_get(struct virtio_device *vdev, unsigned offset,</span>
 	switch (len) {
 	case 1:
 		b = readb(base + offset);
<span class="p_del">-		memcpy(buf, &amp;b, sizeof b);</span>
<span class="p_add">+		memcpy(buf, &amp;b, sizeof(b));</span>
 		break;
 	case 2:
 		w = cpu_to_le16(readw(base + offset));
<span class="p_del">-		memcpy(buf, &amp;w, sizeof w);</span>
<span class="p_add">+		memcpy(buf, &amp;w, sizeof(w));</span>
 		break;
 	case 4:
 		l = cpu_to_le32(readl(base + offset));
<span class="p_del">-		memcpy(buf, &amp;l, sizeof l);</span>
<span class="p_add">+		memcpy(buf, &amp;l, sizeof(l));</span>
 		break;
 	case 8:
 		l = cpu_to_le32(readl(base + offset));
<span class="p_del">-		memcpy(buf, &amp;l, sizeof l);</span>
<span class="p_del">-		l = cpu_to_le32(ioread32(base + offset + sizeof l));</span>
<span class="p_del">-		memcpy(buf + sizeof l, &amp;l, sizeof l);</span>
<span class="p_add">+		memcpy(buf, &amp;l, sizeof(l));</span>
<span class="p_add">+		l = cpu_to_le32(ioread32(base + offset + sizeof(l)));</span>
<span class="p_add">+		memcpy(buf + sizeof(l), &amp;l, sizeof(l));</span>
 		break;
 	default:
 		BUG();
<span class="p_chunk">@@ -216,22 +216,22 @@</span> <span class="p_context"> static void vm_set(struct virtio_device *vdev, unsigned offset,</span>
 
 	switch (len) {
 	case 1:
<span class="p_del">-		memcpy(&amp;b, buf, sizeof b);</span>
<span class="p_add">+		memcpy(&amp;b, buf, sizeof(b));</span>
 		writeb(b, base + offset);
 		break;
 	case 2:
<span class="p_del">-		memcpy(&amp;w, buf, sizeof w);</span>
<span class="p_add">+		memcpy(&amp;w, buf, sizeof(w));</span>
 		writew(le16_to_cpu(w), base + offset);
 		break;
 	case 4:
<span class="p_del">-		memcpy(&amp;l, buf, sizeof l);</span>
<span class="p_add">+		memcpy(&amp;l, buf, sizeof(l));</span>
 		writel(le32_to_cpu(l), base + offset);
 		break;
 	case 8:
<span class="p_del">-		memcpy(&amp;l, buf, sizeof l);</span>
<span class="p_add">+		memcpy(&amp;l, buf, sizeof(l));</span>
 		writel(le32_to_cpu(l), base + offset);
<span class="p_del">-		memcpy(&amp;l, buf + sizeof l, sizeof l);</span>
<span class="p_del">-		writel(le32_to_cpu(l), base + offset + sizeof l);</span>
<span class="p_add">+		memcpy(&amp;l, buf + sizeof(l), sizeof(l));</span>
<span class="p_add">+		writel(le32_to_cpu(l), base + offset + sizeof(l));</span>
 		break;
 	default:
 		BUG();
<span class="p_header">diff --git a/drivers/virtio/virtio_pci_common.c b/drivers/virtio/virtio_pci_common.c</span>
<span class="p_header">index f6bed86c17f9..41fda6695c36 100644</span>
<span class="p_header">--- a/drivers/virtio/virtio_pci_common.c</span>
<span class="p_header">+++ b/drivers/virtio/virtio_pci_common.c</span>
<span class="p_chunk">@@ -147,16 +147,16 @@</span> <span class="p_context"> static int vp_request_msix_vectors(struct virtio_device *vdev, int nvectors,</span>
 
 	vp_dev-&gt;msix_vectors = nvectors;
 
<span class="p_del">-	vp_dev-&gt;msix_entries = kmalloc(nvectors * sizeof *vp_dev-&gt;msix_entries,</span>
<span class="p_add">+	vp_dev-&gt;msix_entries = kmalloc(nvectors * sizeof(*vp_dev-&gt;msix_entries),</span>
 				       GFP_KERNEL);
 	if (!vp_dev-&gt;msix_entries)
 		goto error;
<span class="p_del">-	vp_dev-&gt;msix_names = kmalloc(nvectors * sizeof *vp_dev-&gt;msix_names,</span>
<span class="p_add">+	vp_dev-&gt;msix_names = kmalloc(nvectors * sizeof(*vp_dev-&gt;msix_names),</span>
 				     GFP_KERNEL);
 	if (!vp_dev-&gt;msix_names)
 		goto error;
 	vp_dev-&gt;msix_affinity_masks
<span class="p_del">-		= kzalloc(nvectors * sizeof *vp_dev-&gt;msix_affinity_masks,</span>
<span class="p_add">+		= kzalloc(nvectors * sizeof(*vp_dev-&gt;msix_affinity_masks),</span>
 			  GFP_KERNEL);
 	if (!vp_dev-&gt;msix_affinity_masks)
 		goto error;
<span class="p_chunk">@@ -176,7 +176,7 @@</span> <span class="p_context"> static int vp_request_msix_vectors(struct virtio_device *vdev, int nvectors,</span>
 
 	/* Set the vector used for configuration */
 	v = vp_dev-&gt;msix_used_vectors;
<span class="p_del">-	snprintf(vp_dev-&gt;msix_names[v], sizeof *vp_dev-&gt;msix_names,</span>
<span class="p_add">+	snprintf(vp_dev-&gt;msix_names[v], sizeof(*vp_dev-&gt;msix_names),</span>
 		 &quot;%s-config&quot;, name);
 	err = request_irq(vp_dev-&gt;msix_entries[v].vector,
 			  vp_config_changed, 0, vp_dev-&gt;msix_names[v],
<span class="p_chunk">@@ -195,7 +195,7 @@</span> <span class="p_context"> static int vp_request_msix_vectors(struct virtio_device *vdev, int nvectors,</span>
 	if (!per_vq_vectors) {
 		/* Shared vector for all VQs */
 		v = vp_dev-&gt;msix_used_vectors;
<span class="p_del">-		snprintf(vp_dev-&gt;msix_names[v], sizeof *vp_dev-&gt;msix_names,</span>
<span class="p_add">+		snprintf(vp_dev-&gt;msix_names[v], sizeof(*vp_dev-&gt;msix_names),</span>
 			 &quot;%s-virtqueues&quot;, name);
 		err = request_irq(vp_dev-&gt;msix_entries[v].vector,
 				  vp_vring_interrupt, 0, vp_dev-&gt;msix_names[v],
<span class="p_chunk">@@ -228,7 +228,7 @@</span> <span class="p_context"> static struct virtqueue *vp_setup_vq(struct virtio_device *vdev, unsigned index,</span>
 				     u16 msix_vec)
 {
 	struct virtio_pci_device *vp_dev = to_vp_device(vdev);
<span class="p_del">-	struct virtio_pci_vq_info *info = kmalloc(sizeof *info, GFP_KERNEL);</span>
<span class="p_add">+	struct virtio_pci_vq_info *info = kmalloc(sizeof(*info), GFP_KERNEL);</span>
 	struct virtqueue *vq;
 	unsigned long flags;
 
<span class="p_chunk">@@ -304,7 +304,7 @@</span> <span class="p_context"> static int vp_try_to_find_vqs(struct virtio_device *vdev, unsigned nvqs,</span>
 	u16 msix_vec;
 	int i, err, nvectors, allocated_vectors;
 
<span class="p_del">-	vp_dev-&gt;vqs = kmalloc(nvqs * sizeof *vp_dev-&gt;vqs, GFP_KERNEL);</span>
<span class="p_add">+	vp_dev-&gt;vqs = kmalloc(nvqs * sizeof(*vp_dev-&gt;vqs), GFP_KERNEL);</span>
 	if (!vp_dev-&gt;vqs)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -353,7 +353,7 @@</span> <span class="p_context"> static int vp_try_to_find_vqs(struct virtio_device *vdev, unsigned nvqs,</span>
 
 		/* allocate per-vq irq if available and necessary */
 		snprintf(vp_dev-&gt;msix_names[msix_vec],
<span class="p_del">-			 sizeof *vp_dev-&gt;msix_names,</span>
<span class="p_add">+			 sizeof(*vp_dev-&gt;msix_names),</span>
 			 &quot;%s-%s&quot;,
 			 dev_name(&amp;vp_dev-&gt;vdev.dev), names[i]);
 		err = request_irq(vp_dev-&gt;msix_entries[msix_vec].vector,
<span class="p_header">diff --git a/drivers/virtio/virtio_pci_modern.c b/drivers/virtio/virtio_pci_modern.c</span>
<span class="p_header">index c0c11fad4611..edbc6f9c89b4 100644</span>
<span class="p_header">--- a/drivers/virtio/virtio_pci_modern.c</span>
<span class="p_header">+++ b/drivers/virtio/virtio_pci_modern.c</span>
<span class="p_chunk">@@ -188,21 +188,21 @@</span> <span class="p_context"> static void vp_get(struct virtio_device *vdev, unsigned offset,</span>
 	switch (len) {
 	case 1:
 		b = ioread8(vp_dev-&gt;device + offset);
<span class="p_del">-		memcpy(buf, &amp;b, sizeof b);</span>
<span class="p_add">+		memcpy(buf, &amp;b, sizeof(b));</span>
 		break;
 	case 2:
 		w = cpu_to_le16(ioread16(vp_dev-&gt;device + offset));
<span class="p_del">-		memcpy(buf, &amp;w, sizeof w);</span>
<span class="p_add">+		memcpy(buf, &amp;w, sizeof(w));</span>
 		break;
 	case 4:
 		l = cpu_to_le32(ioread32(vp_dev-&gt;device + offset));
<span class="p_del">-		memcpy(buf, &amp;l, sizeof l);</span>
<span class="p_add">+		memcpy(buf, &amp;l, sizeof(l));</span>
 		break;
 	case 8:
 		l = cpu_to_le32(ioread32(vp_dev-&gt;device + offset));
<span class="p_del">-		memcpy(buf, &amp;l, sizeof l);</span>
<span class="p_del">-		l = cpu_to_le32(ioread32(vp_dev-&gt;device + offset + sizeof l));</span>
<span class="p_del">-		memcpy(buf + sizeof l, &amp;l, sizeof l);</span>
<span class="p_add">+		memcpy(buf, &amp;l, sizeof(l));</span>
<span class="p_add">+		l = cpu_to_le32(ioread32(vp_dev-&gt;device + offset + sizeof(l)));</span>
<span class="p_add">+		memcpy(buf + sizeof(l), &amp;l, sizeof(l));</span>
 		break;
 	default:
 		BUG();
<span class="p_chunk">@@ -223,22 +223,22 @@</span> <span class="p_context"> static void vp_set(struct virtio_device *vdev, unsigned offset,</span>
 
 	switch (len) {
 	case 1:
<span class="p_del">-		memcpy(&amp;b, buf, sizeof b);</span>
<span class="p_add">+		memcpy(&amp;b, buf, sizeof(b));</span>
 		iowrite8(b, vp_dev-&gt;device + offset);
 		break;
 	case 2:
<span class="p_del">-		memcpy(&amp;w, buf, sizeof w);</span>
<span class="p_add">+		memcpy(&amp;w, buf, sizeof(w));</span>
 		iowrite16(le16_to_cpu(w), vp_dev-&gt;device + offset);
 		break;
 	case 4:
<span class="p_del">-		memcpy(&amp;l, buf, sizeof l);</span>
<span class="p_add">+		memcpy(&amp;l, buf, sizeof(l));</span>
 		iowrite32(le32_to_cpu(l), vp_dev-&gt;device + offset);
 		break;
 	case 8:
<span class="p_del">-		memcpy(&amp;l, buf, sizeof l);</span>
<span class="p_add">+		memcpy(&amp;l, buf, sizeof(l));</span>
 		iowrite32(le32_to_cpu(l), vp_dev-&gt;device + offset);
<span class="p_del">-		memcpy(&amp;l, buf + sizeof l, sizeof l);</span>
<span class="p_del">-		iowrite32(le32_to_cpu(l), vp_dev-&gt;device + offset + sizeof l);</span>
<span class="p_add">+		memcpy(&amp;l, buf + sizeof(l), sizeof(l));</span>
<span class="p_add">+		iowrite32(le32_to_cpu(l), vp_dev-&gt;device + offset + sizeof(l));</span>
 		break;
 	default:
 		BUG();
<span class="p_header">diff --git a/fs/autofs4/expire.c b/fs/autofs4/expire.c</span>
<span class="p_header">index 1cebc3c52fa5..cba6666a7546 100644</span>
<span class="p_header">--- a/fs/autofs4/expire.c</span>
<span class="p_header">+++ b/fs/autofs4/expire.c</span>
<span class="p_chunk">@@ -531,7 +531,7 @@</span> <span class="p_context"> int autofs4_expire_run(struct super_block *sb,</span>
 	struct dentry *dentry;
 	int ret = 0;
 
<span class="p_del">-	memset(&amp;pkt,0,sizeof pkt);</span>
<span class="p_add">+	memset(&amp;pkt,0,sizeof(pkt));</span>
 
 	pkt.hdr.proto_version = sbi-&gt;version;
 	pkt.hdr.type = autofs_ptype_expire;
<span class="p_header">diff --git a/fs/autofs4/waitq.c b/fs/autofs4/waitq.c</span>
<span class="p_header">index 35b755e79c2d..57ce5c76c790 100644</span>
<span class="p_header">--- a/fs/autofs4/waitq.c</span>
<span class="p_header">+++ b/fs/autofs4/waitq.c</span>
<span class="p_chunk">@@ -105,7 +105,7 @@</span> <span class="p_context"> static void autofs4_notify_daemon(struct autofs_sb_info *sbi,</span>
 	DPRINTK(&quot;wait id = 0x%08lx, name = %.*s, type=%d&quot;,
 		(unsigned long) wq-&gt;wait_queue_token, wq-&gt;name.len, wq-&gt;name.name, type);
 
<span class="p_del">-	memset(&amp;pkt,0,sizeof pkt); /* For security reasons */</span>
<span class="p_add">+	memset(&amp;pkt,0,sizeof(pkt)); /* For security reasons */</span>
 
 	pkt.hdr.proto_version = sbi-&gt;version;
 	pkt.hdr.type = type;
<span class="p_header">diff --git a/fs/binfmt_elf.c b/fs/binfmt_elf.c</span>
<span class="p_header">index 051ea4809c14..1630d4b00f22 100644</span>
<span class="p_header">--- a/fs/binfmt_elf.c</span>
<span class="p_header">+++ b/fs/binfmt_elf.c</span>
<span class="p_chunk">@@ -265,7 +265,7 @@</span> <span class="p_context"> create_elf_tables(struct linux_binprm *bprm, struct elfhdr *exec,</span>
 #undef NEW_AUX_ENT
 	/* AT_NULL is zero; clear the rest too */
 	memset(&amp;elf_info[ei_index], 0,
<span class="p_del">-	       sizeof current-&gt;mm-&gt;saved_auxv - ei_index * sizeof elf_info[0]);</span>
<span class="p_add">+	       sizeof(current-&gt;mm-&gt;saved_auxv) - ei_index * sizeof(elf_info[0]));</span>
 
 	/* And advance past the AT_NULL entry.  */
 	ei_index += 2;
<span class="p_chunk">@@ -1297,7 +1297,7 @@</span> <span class="p_context"> static unsigned long vma_dump_size(struct vm_area_struct *vma,</span>
 			u32 cmp;
 			char elfmag[SELFMAG];
 		} magic;
<span class="p_del">-		BUILD_BUG_ON(SELFMAG != sizeof word);</span>
<span class="p_add">+		BUILD_BUG_ON(SELFMAG != sizeof(word));</span>
 		magic.elfmag[EI_MAG0] = ELFMAG0;
 		magic.elfmag[EI_MAG1] = ELFMAG1;
 		magic.elfmag[EI_MAG2] = ELFMAG2;
<span class="p_header">diff --git a/fs/char_dev.c b/fs/char_dev.c</span>
<span class="p_header">index 24b142569ca9..ed640ad2e2b8 100644</span>
<span class="p_header">--- a/fs/char_dev.c</span>
<span class="p_header">+++ b/fs/char_dev.c</span>
<span class="p_chunk">@@ -537,7 +537,7 @@</span> <span class="p_context"> struct cdev *cdev_alloc(void)</span>
  */
 void cdev_init(struct cdev *cdev, const struct file_operations *fops)
 {
<span class="p_del">-	memset(cdev, 0, sizeof *cdev);</span>
<span class="p_add">+	memset(cdev, 0, sizeof(*cdev));</span>
 	INIT_LIST_HEAD(&amp;cdev-&gt;list);
 	kobject_init(&amp;cdev-&gt;kobj, &amp;ktype_cdev_default);
 	cdev-&gt;ops = fops;
<span class="p_header">diff --git a/fs/cifs/connect.c b/fs/cifs/connect.c</span>
<span class="p_header">index 4fbd92d2e113..7edfa47b7ead 100644</span>
<span class="p_header">--- a/fs/cifs/connect.c</span>
<span class="p_header">+++ b/fs/cifs/connect.c</span>
<span class="p_chunk">@@ -3705,7 +3705,7 @@</span> <span class="p_context"> cifs_mount(struct cifs_sb_info *cifs_sb, struct smb_vol *volume_info)</span>
 		goto mount_fail_check;
 
 	/* now, hang the tcon off of the superblock */
<span class="p_del">-	tlink = kzalloc(sizeof *tlink, GFP_KERNEL);</span>
<span class="p_add">+	tlink = kzalloc(sizeof(*tlink), GFP_KERNEL);</span>
 	if (tlink == NULL) {
 		rc = -ENOMEM;
 		goto mount_fail_check;
<span class="p_header">diff --git a/fs/compat.c b/fs/compat.c</span>
<span class="p_header">index a71936a3f4cb..82d351098ab1 100644</span>
<span class="p_header">--- a/fs/compat.c</span>
<span class="p_header">+++ b/fs/compat.c</span>
<span class="p_chunk">@@ -212,7 +212,7 @@</span> <span class="p_context"> COMPAT_SYSCALL_DEFINE2(newfstat, unsigned int, fd,</span>
 static int put_compat_statfs(struct compat_statfs __user *ubuf, struct kstatfs *kbuf)
 {
 	
<span class="p_del">-	if (sizeof ubuf-&gt;f_blocks == 4) {</span>
<span class="p_add">+	if (sizeof(ubuf-&gt;f_blocks) == 4) {</span>
 		if ((kbuf-&gt;f_blocks | kbuf-&gt;f_bfree | kbuf-&gt;f_bavail |
 		     kbuf-&gt;f_bsize | kbuf-&gt;f_frsize) &amp; 0xffffffff00000000ULL)
 			return -EOVERFLOW;
<span class="p_chunk">@@ -267,7 +267,7 @@</span> <span class="p_context"> COMPAT_SYSCALL_DEFINE2(fstatfs, unsigned int, fd, struct compat_statfs __user *,</span>
 
 static int put_compat_statfs64(struct compat_statfs64 __user *ubuf, struct kstatfs *kbuf)
 {
<span class="p_del">-	if (sizeof ubuf-&gt;f_blocks == 4) {</span>
<span class="p_add">+	if (sizeof(ubuf-&gt;f_blocks) == 4) {</span>
 		if ((kbuf-&gt;f_blocks | kbuf-&gt;f_bfree | kbuf-&gt;f_bavail |
 		     kbuf-&gt;f_bsize | kbuf-&gt;f_frsize) &amp; 0xffffffff00000000ULL)
 			return -EOVERFLOW;
<span class="p_chunk">@@ -693,7 +693,7 @@</span> <span class="p_context"> static void *do_ncp_super_data_conv(void *raw_data)</span>
 		n-&gt;file_mode = c_n-&gt;file_mode;
 		n-&gt;gid = c_n-&gt;gid;
 		n-&gt;uid = c_n-&gt;uid;
<span class="p_del">-		memmove (n-&gt;mounted_vol, c_n-&gt;mounted_vol, (sizeof (c_n-&gt;mounted_vol) + 3 * sizeof (unsigned int)));</span>
<span class="p_add">+		memmove (n-&gt;mounted_vol, c_n-&gt;mounted_vol, (sizeof(c_n-&gt;mounted_vol) + 3 * sizeof (unsigned int)));</span>
 		n-&gt;wdog_pid = c_n-&gt;wdog_pid;
 		n-&gt;mounted_uid = c_n-&gt;mounted_uid;
 	} else if (version == 4) {
<span class="p_header">diff --git a/fs/hpfs/namei.c b/fs/hpfs/namei.c</span>
<span class="p_header">index 506765afa1a3..4c4fb25f6c67 100644</span>
<span class="p_header">--- a/fs/hpfs/namei.c</span>
<span class="p_header">+++ b/fs/hpfs/namei.c</span>
<span class="p_chunk">@@ -43,7 +43,7 @@</span> <span class="p_context"> static int hpfs_mkdir(struct inode *dir, struct dentry *dentry, umode_t mode)</span>
 	dnode = hpfs_alloc_dnode(dir-&gt;i_sb, fno, &amp;dno, &amp;qbh0);
 	if (!dnode)
 		goto bail1;
<span class="p_del">-	memset(&amp;dee, 0, sizeof dee);</span>
<span class="p_add">+	memset(&amp;dee, 0, sizeof(dee));</span>
 	dee.directory = 1;
 	if (!(mode &amp; 0222)) dee.read_only = 1;
 	/*dee.archive = 0;*/
<span class="p_chunk">@@ -145,7 +145,7 @@</span> <span class="p_context"> static int hpfs_create(struct inode *dir, struct dentry *dentry, umode_t mode, b</span>
 	fnode = hpfs_alloc_fnode(dir-&gt;i_sb, hpfs_i(dir)-&gt;i_dno, &amp;fno, &amp;bh);
 	if (!fnode)
 		goto bail;
<span class="p_del">-	memset(&amp;dee, 0, sizeof dee);</span>
<span class="p_add">+	memset(&amp;dee, 0, sizeof(dee));</span>
 	if (!(mode &amp; 0222)) dee.read_only = 1;
 	dee.archive = 1;
 	dee.hidden = name[0] == &#39;.&#39;;
<span class="p_chunk">@@ -232,7 +232,7 @@</span> <span class="p_context"> static int hpfs_mknod(struct inode *dir, struct dentry *dentry, umode_t mode, de</span>
 	fnode = hpfs_alloc_fnode(dir-&gt;i_sb, hpfs_i(dir)-&gt;i_dno, &amp;fno, &amp;bh);
 	if (!fnode)
 		goto bail;
<span class="p_del">-	memset(&amp;dee, 0, sizeof dee);</span>
<span class="p_add">+	memset(&amp;dee, 0, sizeof(dee));</span>
 	if (!(mode &amp; 0222)) dee.read_only = 1;
 	dee.archive = 1;
 	dee.hidden = name[0] == &#39;.&#39;;
<span class="p_chunk">@@ -309,7 +309,7 @@</span> <span class="p_context"> static int hpfs_symlink(struct inode *dir, struct dentry *dentry, const char *sy</span>
 	fnode = hpfs_alloc_fnode(dir-&gt;i_sb, hpfs_i(dir)-&gt;i_dno, &amp;fno, &amp;bh);
 	if (!fnode)
 		goto bail;
<span class="p_del">-	memset(&amp;dee, 0, sizeof dee);</span>
<span class="p_add">+	memset(&amp;dee, 0, sizeof(dee));</span>
 	dee.archive = 1;
 	dee.hidden = name[0] == &#39;.&#39;;
 	dee.fnode = cpu_to_le32(fno);
<span class="p_header">diff --git a/fs/isofs/inode.c b/fs/isofs/inode.c</span>
<span class="p_header">index bcd2d41b318a..fc615ea62d5b 100644</span>
<span class="p_header">--- a/fs/isofs/inode.c</span>
<span class="p_header">+++ b/fs/isofs/inode.c</span>
<span class="p_chunk">@@ -628,7 +628,7 @@</span> <span class="p_context"> static int isofs_fill_super(struct super_block *s, void *data, int silent)</span>
 		 * ISO CDs can match hdp-&gt;id==HS_STANDARD_ID as well. To ensure
 		 * proper identification in this case, we first check for ISO.
 		 */
<span class="p_del">-		if (strncmp (vdp-&gt;id, ISO_STANDARD_ID, sizeof vdp-&gt;id) == 0) {</span>
<span class="p_add">+		if (strncmp (vdp-&gt;id, ISO_STANDARD_ID, sizeof(vdp-&gt;id)) == 0) {</span>
 			if (isonum_711(vdp-&gt;type) == ISO_VD_END)
 				break;
 			if (isonum_711(vdp-&gt;type) == ISO_VD_PRIMARY) {
<span class="p_chunk">@@ -663,7 +663,7 @@</span> <span class="p_context"> static int isofs_fill_super(struct super_block *s, void *data, int silent)</span>
 			}
 #endif
 		} else {
<span class="p_del">-			if (strncmp (hdp-&gt;id, HS_STANDARD_ID, sizeof hdp-&gt;id) == 0) {</span>
<span class="p_add">+			if (strncmp (hdp-&gt;id, HS_STANDARD_ID, sizeof(hdp-&gt;id)) == 0) {</span>
 				if (isonum_711(hdp-&gt;type) != ISO_VD_PRIMARY)
 					goto out_freebh;
 
<span class="p_header">diff --git a/fs/proc/task_mmu.c b/fs/proc/task_mmu.c</span>
<span class="p_header">index 85d16c67c33e..0afebfeea006 100644</span>
<span class="p_header">--- a/fs/proc/task_mmu.c</span>
<span class="p_header">+++ b/fs/proc/task_mmu.c</span>
<span class="p_chunk">@@ -724,7 +724,7 @@</span> <span class="p_context"> static int show_smap(struct seq_file *m, void *v, int is_pid)</span>
 		.private = &amp;mss,
 	};
 
<span class="p_del">-	memset(&amp;mss, 0, sizeof mss);</span>
<span class="p_add">+	memset(&amp;mss, 0, sizeof(mss));</span>
 
 #ifdef CONFIG_SHMEM
 	if (vma-&gt;vm_file &amp;&amp; shmem_mapping(vma-&gt;vm_file-&gt;f_mapping)) {
<span class="p_header">diff --git a/fs/pstore/inode.c b/fs/pstore/inode.c</span>
<span class="p_header">index dc645b66cd79..a4616d824574 100644</span>
<span class="p_header">--- a/fs/pstore/inode.c</span>
<span class="p_header">+++ b/fs/pstore/inode.c</span>
<span class="p_chunk">@@ -329,7 +329,7 @@</span> <span class="p_context"> int pstore_mkfile(enum pstore_type_id type, char *psname, u64 id, int count,</span>
 		goto fail;
 	inode-&gt;i_mode = S_IFREG | 0444;
 	inode-&gt;i_fop = &amp;pstore_file_operations;
<span class="p_del">-	private = kmalloc(sizeof *private + size, GFP_KERNEL);</span>
<span class="p_add">+	private = kmalloc(sizeof(*private) + size, GFP_KERNEL);</span>
 	if (!private)
 		goto fail_alloc;
 	private-&gt;type = type;
<span class="p_header">diff --git a/fs/statfs.c b/fs/statfs.c</span>
<span class="p_header">index 083dc0ac9140..825542123b3c 100644</span>
<span class="p_header">--- a/fs/statfs.c</span>
<span class="p_header">+++ b/fs/statfs.c</span>
<span class="p_chunk">@@ -110,7 +110,7 @@</span> <span class="p_context"> static int do_statfs_native(struct kstatfs *st, struct statfs __user *p)</span>
 	if (sizeof(buf) == sizeof(*st))
 		memcpy(&amp;buf, st, sizeof(*st));
 	else {
<span class="p_del">-		if (sizeof buf.f_blocks == 4) {</span>
<span class="p_add">+		if (sizeof(buf.f_blocks) == 4) {</span>
 			if ((st-&gt;f_blocks | st-&gt;f_bfree | st-&gt;f_bavail |
 			     st-&gt;f_bsize | st-&gt;f_frsize) &amp;
 			    0xffffffff00000000ULL)
<span class="p_header">diff --git a/fs/xfs/uuid.c b/fs/xfs/uuid.c</span>
<span class="p_header">index b83f76b6d410..b7af65af0046 100644</span>
<span class="p_header">--- a/fs/xfs/uuid.c</span>
<span class="p_header">+++ b/fs/xfs/uuid.c</span>
<span class="p_chunk">@@ -51,7 +51,7 @@</span> <span class="p_context"> uuid_is_nil(uuid_t *uuid)</span>
 	if (uuid == NULL)
 		return 0;
 	/* implied check of version number here... */
<span class="p_del">-	for (i = 0; i &lt; sizeof *uuid; i++)</span>
<span class="p_add">+	for (i = 0; i &lt; sizeof(*uuid); i++)</span>
 		if (*cp++) return 0;	/* not nil */
 	return 1;	/* is nil */
 }
<span class="p_header">diff --git a/init/initramfs.c b/init/initramfs.c</span>
<span class="p_header">index b32ad7d97ac9..fc6097672e05 100644</span>
<span class="p_header">--- a/init/initramfs.c</span>
<span class="p_header">+++ b/init/initramfs.c</span>
<span class="p_chunk">@@ -488,7 +488,7 @@</span> <span class="p_context"> static char * __init unpack_to_rootfs(char *buf, unsigned long len)</span>
 				error(&quot;decompressor failed&quot;);
 		} else if (compress_name) {
 			if (!message) {
<span class="p_del">-				snprintf(msg_buf, sizeof msg_buf,</span>
<span class="p_add">+				snprintf(msg_buf, sizeof(msg_buf),</span>
 					 &quot;compression method %s not configured&quot;,
 					 compress_name);
 				message = msg_buf;
<span class="p_header">diff --git a/ipc/compat_mq.c b/ipc/compat_mq.c</span>
<span class="p_header">index ef6f91cc4490..27496d912ae0 100644</span>
<span class="p_header">--- a/ipc/compat_mq.c</span>
<span class="p_header">+++ b/ipc/compat_mq.c</span>
<span class="p_chunk">@@ -25,7 +25,7 @@</span> <span class="p_context"> struct compat_mq_attr {</span>
 static inline int get_compat_mq_attr(struct mq_attr *attr,
 			const struct compat_mq_attr __user *uattr)
 {
<span class="p_del">-	if (!access_ok(VERIFY_READ, uattr, sizeof *uattr))</span>
<span class="p_add">+	if (!access_ok(VERIFY_READ, uattr, sizeof(*uattr)))</span>
 		return -EFAULT;
 
 	return __get_user(attr-&gt;mq_flags, &amp;uattr-&gt;mq_flags)
<span class="p_chunk">@@ -37,7 +37,7 @@</span> <span class="p_context"> static inline int get_compat_mq_attr(struct mq_attr *attr,</span>
 static inline int put_compat_mq_attr(const struct mq_attr *attr,
 			struct compat_mq_attr __user *uattr)
 {
<span class="p_del">-	if (clear_user(uattr, sizeof *uattr))</span>
<span class="p_add">+	if (clear_user(uattr, sizeof(*uattr)))</span>
 		return -EFAULT;
 
 	return __put_user(attr-&gt;mq_flags, &amp;uattr-&gt;mq_flags)
<span class="p_header">diff --git a/kernel/fork.c b/kernel/fork.c</span>
<span class="p_header">index 2e391c754ae7..30e04d28bff4 100644</span>
<span class="p_header">--- a/kernel/fork.c</span>
<span class="p_header">+++ b/kernel/fork.c</span>
<span class="p_chunk">@@ -1143,7 +1143,7 @@</span> <span class="p_context"> static int copy_signal(unsigned long clone_flags, struct task_struct *tsk)</span>
 	sig-&gt;real_timer.function = it_real_fn;
 
 	task_lock(current-&gt;group_leader);
<span class="p_del">-	memcpy(sig-&gt;rlim, current-&gt;signal-&gt;rlim, sizeof sig-&gt;rlim);</span>
<span class="p_add">+	memcpy(sig-&gt;rlim, current-&gt;signal-&gt;rlim, sizeof(sig-&gt;rlim));</span>
 	task_unlock(current-&gt;group_leader);
 
 	posix_cpu_timers_init_group(sig);
<span class="p_header">diff --git a/kernel/power/suspend_test.c b/kernel/power/suspend_test.c</span>
<span class="p_header">index 084452e34a12..14e002e0d16e 100644</span>
<span class="p_header">--- a/kernel/power/suspend_test.c</span>
<span class="p_header">+++ b/kernel/power/suspend_test.c</span>
<span class="p_chunk">@@ -84,7 +84,7 @@</span> <span class="p_context"> static void __init test_wakealarm(struct rtc_device *rtc, suspend_state_t state)</span>
 	}
 	rtc_tm_to_time(&amp;alm.time, &amp;now);
 
<span class="p_del">-	memset(&amp;alm, 0, sizeof alm);</span>
<span class="p_add">+	memset(&amp;alm, 0, sizeof(alm));</span>
 	rtc_time_to_tm(now + TEST_SUSPEND_SECONDS, &amp;alm.time);
 	alm.enabled = true;
 
<span class="p_header">diff --git a/kernel/ptrace.c b/kernel/ptrace.c</span>
<span class="p_header">index 2341efe7fe02..fd06700cd933 100644</span>
<span class="p_header">--- a/kernel/ptrace.c</span>
<span class="p_header">+++ b/kernel/ptrace.c</span>
<span class="p_chunk">@@ -877,7 +877,7 @@</span> <span class="p_context"> int ptrace_request(struct task_struct *child, long request,</span>
 		break;
 
 	case PTRACE_SETSIGINFO:
<span class="p_del">-		if (copy_from_user(&amp;siginfo, datavp, sizeof siginfo))</span>
<span class="p_add">+		if (copy_from_user(&amp;siginfo, datavp, sizeof(siginfo)))</span>
 			ret = -EFAULT;
 		else
 			ret = ptrace_setsiginfo(child, &amp;siginfo);
<span class="p_chunk">@@ -1181,7 +1181,7 @@</span> <span class="p_context"> int compat_ptrace_request(struct task_struct *child, compat_long_t request,</span>
 		break;
 
 	case PTRACE_SETSIGINFO:
<span class="p_del">-		memset(&amp;siginfo, 0, sizeof siginfo);</span>
<span class="p_add">+		memset(&amp;siginfo, 0, sizeof(siginfo));</span>
 		if (copy_siginfo_from_user32(
 			    &amp;siginfo, (struct compat_siginfo __user *) datap))
 			ret = -EFAULT;
<span class="p_header">diff --git a/kernel/signal.c b/kernel/signal.c</span>
<span class="p_header">index f3f1f7a972fd..13b267a99fea 100644</span>
<span class="p_header">--- a/kernel/signal.c</span>
<span class="p_header">+++ b/kernel/signal.c</span>
<span class="p_chunk">@@ -1900,7 +1900,7 @@</span> <span class="p_context"> static void ptrace_do_notify(int signr, int exit_code, int why)</span>
 {
 	siginfo_t info;
 
<span class="p_del">-	memset(&amp;info, 0, sizeof info);</span>
<span class="p_add">+	memset(&amp;info, 0, sizeof(info));</span>
 	info.si_signo = signr;
 	info.si_code = exit_code;
 	info.si_pid = task_pid_vnr(current);
<span class="p_header">diff --git a/kernel/sys.c b/kernel/sys.c</span>
<span class="p_header">index 78947de6f969..b6a4bcc0f815 100644</span>
<span class="p_header">--- a/kernel/sys.c</span>
<span class="p_header">+++ b/kernel/sys.c</span>
<span class="p_chunk">@@ -1546,7 +1546,7 @@</span> <span class="p_context"> static void k_getrusage(struct task_struct *p, int who, struct rusage *r)</span>
 	cputime_t tgutime, tgstime, utime, stime;
 	unsigned long maxrss = 0;
 
<span class="p_del">-	memset((char *)r, 0, sizeof (*r));</span>
<span class="p_add">+	memset((char *)r, 0, sizeof(*r));</span>
 	utime = stime = 0;
 
 	if (who == RUSAGE_THREAD) {
<span class="p_header">diff --git a/kernel/time/posix-cpu-timers.c b/kernel/time/posix-cpu-timers.c</span>
<span class="p_header">index f5e86d282d52..eb1760020a3f 100644</span>
<span class="p_header">--- a/kernel/time/posix-cpu-timers.c</span>
<span class="p_header">+++ b/kernel/time/posix-cpu-timers.c</span>
<span class="p_chunk">@@ -1301,7 +1301,7 @@</span> <span class="p_context"> static int do_cpu_nanosleep(const clockid_t which_clock, int flags,</span>
 	/*
 	 * Set up a temporary timer and then wait for it to go off.
 	 */
<span class="p_del">-	memset(&amp;timer, 0, sizeof timer);</span>
<span class="p_add">+	memset(&amp;timer, 0, sizeof(timer));</span>
 	spin_lock_init(&amp;timer.it_lock);
 	timer.it_clock = which_clock;
 	timer.it_overrun = -1;
<span class="p_chunk">@@ -1310,7 +1310,7 @@</span> <span class="p_context"> static int do_cpu_nanosleep(const clockid_t which_clock, int flags,</span>
 	if (!error) {
 		static struct itimerspec zero_it;
 
<span class="p_del">-		memset(it, 0, sizeof *it);</span>
<span class="p_add">+		memset(it, 0, sizeof(*it));</span>
 		it-&gt;it_value = *rqtp;
 
 		spin_lock_irq(&amp;timer.it_lock);
<span class="p_chunk">@@ -1403,7 +1403,7 @@</span> <span class="p_context"> static int posix_cpu_nsleep(const clockid_t which_clock, int flags,</span>
 		/*
 		 * Report back to the user the time still remaining.
 		 */
<span class="p_del">-		if (rmtp &amp;&amp; copy_to_user(rmtp, &amp;it.it_value, sizeof *rmtp))</span>
<span class="p_add">+		if (rmtp &amp;&amp; copy_to_user(rmtp, &amp;it.it_value, sizeof(*rmtp)))</span>
 			return -EFAULT;
 
 		restart_block-&gt;fn = posix_cpu_nsleep_restart;
<span class="p_chunk">@@ -1430,7 +1430,7 @@</span> <span class="p_context"> static long posix_cpu_nsleep_restart(struct restart_block *restart_block)</span>
 		/*
 		 * Report back to the user the time still remaining.
 		 */
<span class="p_del">-		if (rmtp &amp;&amp; copy_to_user(rmtp, &amp;it.it_value, sizeof *rmtp))</span>
<span class="p_add">+		if (rmtp &amp;&amp; copy_to_user(rmtp, &amp;it.it_value, sizeof(*rmtp)))</span>
 			return -EFAULT;
 
 		restart_block-&gt;nanosleep.expires = timespec_to_ns(&amp;t);
<span class="p_header">diff --git a/lib/mpi/mpi-pow.c b/lib/mpi/mpi-pow.c</span>
<span class="p_header">index 5464c8744ea9..a0367b6c2c85 100644</span>
<span class="p_header">--- a/lib/mpi/mpi-pow.c</span>
<span class="p_header">+++ b/lib/mpi/mpi-pow.c</span>
<span class="p_chunk">@@ -164,7 +164,7 @@</span> <span class="p_context"> int mpi_powm(MPI res, MPI base, MPI exp, MPI mod)</span>
 		if (!xp)
 			goto enomem;
 
<span class="p_del">-		memset(&amp;karactx, 0, sizeof karactx);</span>
<span class="p_add">+		memset(&amp;karactx, 0, sizeof(karactx));</span>
 		negative_result = (ep[0] &amp; 1) &amp;&amp; base-&gt;sign;
 
 		i = esize - 1;
<span class="p_header">diff --git a/lib/mpi/mpih-mul.c b/lib/mpi/mpih-mul.c</span>
<span class="p_header">index 7c841719fdfb..8fc5b5cb0e2f 100644</span>
<span class="p_header">--- a/lib/mpi/mpih-mul.c</span>
<span class="p_header">+++ b/lib/mpi/mpih-mul.c</span>
<span class="p_chunk">@@ -385,7 +385,7 @@</span> <span class="p_context"> mpihelp_mul_karatsuba_case(mpi_ptr_t prodp,</span>
 				return -ENOMEM;
 		} else {
 			if (!ctx-&gt;next) {
<span class="p_del">-				ctx-&gt;next = kzalloc(sizeof *ctx, GFP_KERNEL);</span>
<span class="p_add">+				ctx-&gt;next = kzalloc(sizeof(*ctx), GFP_KERNEL);</span>
 				if (!ctx-&gt;next)
 					return -ENOMEM;
 			}
<span class="p_chunk">@@ -488,7 +488,7 @@</span> <span class="p_context"> mpihelp_mul(mpi_ptr_t prodp, mpi_ptr_t up, mpi_size_t usize,</span>
 		return 0;
 	}
 
<span class="p_del">-	memset(&amp;ctx, 0, sizeof ctx);</span>
<span class="p_add">+	memset(&amp;ctx, 0, sizeof(ctx));</span>
 	if (mpihelp_mul_karatsuba_case(prodp, up, usize, vp, vsize, &amp;ctx) &lt; 0)
 		return -ENOMEM;
 	mpihelp_release_karatsuba_ctx(&amp;ctx);
<span class="p_header">diff --git a/lib/mpi/mpiutil.c b/lib/mpi/mpiutil.c</span>
<span class="p_header">index 314f4dfa603e..aeadcce5d2e0 100644</span>
<span class="p_header">--- a/lib/mpi/mpiutil.c</span>
<span class="p_header">+++ b/lib/mpi/mpiutil.c</span>
<span class="p_chunk">@@ -31,7 +31,7 @@</span> <span class="p_context"> MPI mpi_alloc(unsigned nlimbs)</span>
 {
 	MPI a;
 
<span class="p_del">-	a = kmalloc(sizeof *a, GFP_KERNEL);</span>
<span class="p_add">+	a = kmalloc(sizeof(*a), GFP_KERNEL);</span>
 	if (!a)
 		return a;
 
<span class="p_header">diff --git a/net/9p/trans_rdma.c b/net/9p/trans_rdma.c</span>
<span class="p_header">index 52b4a2f993f2..3cd4c1ea4a5c 100644</span>
<span class="p_header">--- a/net/9p/trans_rdma.c</span>
<span class="p_header">+++ b/net/9p/trans_rdma.c</span>
<span class="p_chunk">@@ -455,7 +455,7 @@</span> <span class="p_context"> static int rdma_request(struct p9_client *client, struct p9_req_t *req)</span>
 	}
 
 	/* Allocate an fcall for the reply */
<span class="p_del">-	rpl_context = kmalloc(sizeof *rpl_context, GFP_NOFS);</span>
<span class="p_add">+	rpl_context = kmalloc(sizeof(*rpl_context), GFP_NOFS);</span>
 	if (!rpl_context) {
 		err = -ENOMEM;
 		goto recv_error;
<span class="p_chunk">@@ -484,7 +484,7 @@</span> <span class="p_context"> static int rdma_request(struct p9_client *client, struct p9_req_t *req)</span>
 
 dont_need_post_recv:
 	/* Post the request */
<span class="p_del">-	c = kmalloc(sizeof *c, GFP_NOFS);</span>
<span class="p_add">+	c = kmalloc(sizeof(*c), GFP_NOFS);</span>
 	if (!c) {
 		err = -ENOMEM;
 		goto send_error;
<span class="p_chunk">@@ -709,7 +709,7 @@</span> <span class="p_context"> rdma_create_trans(struct p9_client *client, const char *addr, char *args)</span>
 		goto error;
 
 	/* Create the Queue Pair */
<span class="p_del">-	memset(&amp;qp_attr, 0, sizeof qp_attr);</span>
<span class="p_add">+	memset(&amp;qp_attr, 0, sizeof(qp_attr));</span>
 	qp_attr.event_handler = qp_event_handler;
 	qp_attr.qp_context = client;
 	qp_attr.cap.max_send_wr = opts.sq_depth;
<span class="p_header">diff --git a/net/atm/br2684.c b/net/atm/br2684.c</span>
<span class="p_header">index aa0047c5c467..975825678dfb 100644</span>
<span class="p_header">--- a/net/atm/br2684.c</span>
<span class="p_header">+++ b/net/atm/br2684.c</span>
<span class="p_chunk">@@ -362,7 +362,7 @@</span> <span class="p_context"> static int br2684_setfilt(struct atm_vcc *atmvcc, void __user * arg)</span>
 	struct br2684_vcc *brvcc;
 	struct br2684_filter_set fs;
 
<span class="p_del">-	if (copy_from_user(&amp;fs, arg, sizeof fs))</span>
<span class="p_add">+	if (copy_from_user(&amp;fs, arg, sizeof(fs)))</span>
 		return -EFAULT;
 	if (fs.ifspec.method != BR2684_FIND_BYNOTHING) {
 		/*
<span class="p_chunk">@@ -536,7 +536,7 @@</span> <span class="p_context"> static int br2684_regvcc(struct atm_vcc *atmvcc, void __user * arg)</span>
 	struct atm_backend_br2684 be;
 	int err;
 
<span class="p_del">-	if (copy_from_user(&amp;be, arg, sizeof be))</span>
<span class="p_add">+	if (copy_from_user(&amp;be, arg, sizeof(be)))</span>
 		return -EFAULT;
 	brvcc = kzalloc(sizeof(struct br2684_vcc), GFP_KERNEL);
 	if (!brvcc)
<span class="p_chunk">@@ -668,7 +668,7 @@</span> <span class="p_context"> static int br2684_create(void __user *arg)</span>
 
 	pr_debug(&quot;\n&quot;);
 
<span class="p_del">-	if (copy_from_user(&amp;ni, arg, sizeof ni))</span>
<span class="p_add">+	if (copy_from_user(&amp;ni, arg, sizeof(ni)))</span>
 		return -EFAULT;
 
 	if (ni.media &amp; BR2684_FLAG_ROUTED)
<span class="p_header">diff --git a/net/atm/pppoatm.c b/net/atm/pppoatm.c</span>
<span class="p_header">index c4e09846d1de..963670812cbb 100644</span>
<span class="p_header">--- a/net/atm/pppoatm.c</span>
<span class="p_header">+++ b/net/atm/pppoatm.c</span>
<span class="p_chunk">@@ -400,7 +400,7 @@</span> <span class="p_context"> static int pppoatm_assign_vcc(struct atm_vcc *atmvcc, void __user *arg)</span>
 	 * prototypical one used to initialize them
 	 */
 	static const DECLARE_TASKLET(tasklet_proto, pppoatm_wakeup_sender, 0);
<span class="p_del">-	if (copy_from_user(&amp;be, arg, sizeof be))</span>
<span class="p_add">+	if (copy_from_user(&amp;be, arg, sizeof(be)))</span>
 		return -EFAULT;
 	if (be.encaps != PPPOATM_ENCAPS_AUTODETECT &amp;&amp;
 	    be.encaps != PPPOATM_ENCAPS_VC &amp;&amp; be.encaps != PPPOATM_ENCAPS_LLC)
<span class="p_header">diff --git a/net/compat.c b/net/compat.c</span>
<span class="p_header">index 5cfd26a0006f..59851e30aa3a 100644</span>
<span class="p_header">--- a/net/compat.c</span>
<span class="p_header">+++ b/net/compat.c</span>
<span class="p_chunk">@@ -243,7 +243,7 @@</span> <span class="p_context"> int put_cmsg_compat(struct msghdr *kmsg, int level, int type, int len, void *dat</span>
 	cmhdr.cmsg_type = type;
 	cmhdr.cmsg_len = cmlen;
 
<span class="p_del">-	if (copy_to_user(cm, &amp;cmhdr, sizeof cmhdr))</span>
<span class="p_add">+	if (copy_to_user(cm, &amp;cmhdr, sizeof(cmhdr)))</span>
 		return -EFAULT;
 	if (copy_to_user(CMSG_COMPAT_DATA(cm), data, cmlen - sizeof(struct compat_cmsghdr)))
 		return -EFAULT;
<span class="p_header">diff --git a/net/core/scm.c b/net/core/scm.c</span>
<span class="p_header">index 14596fb37172..bddc9ded93e5 100644</span>
<span class="p_header">--- a/net/core/scm.c</span>
<span class="p_header">+++ b/net/core/scm.c</span>
<span class="p_chunk">@@ -230,7 +230,7 @@</span> <span class="p_context"> int put_cmsg(struct msghdr * msg, int level, int type, int len, void *data)</span>
 	cmhdr.cmsg_len = cmlen;
 
 	err = -EFAULT;
<span class="p_del">-	if (copy_to_user(cm, &amp;cmhdr, sizeof cmhdr))</span>
<span class="p_add">+	if (copy_to_user(cm, &amp;cmhdr, sizeof(cmhdr)))</span>
 		goto out;
 	if (copy_to_user(CMSG_DATA(cm), data, cmlen - sizeof(struct cmsghdr)))
 		goto out;
<span class="p_header">diff --git a/net/openvswitch/flow_table.c b/net/openvswitch/flow_table.c</span>
<span class="p_header">index d073fff82fdb..3f3645078913 100644</span>
<span class="p_header">--- a/net/openvswitch/flow_table.c</span>
<span class="p_header">+++ b/net/openvswitch/flow_table.c</span>
<span class="p_chunk">@@ -60,7 +60,7 @@</span> <span class="p_context"> void ovs_flow_mask_key(struct sw_flow_key *dst, const struct sw_flow_key *src,</span>
 		       bool full, const struct sw_flow_mask *mask)
 {
 	int start = full ? 0 : mask-&gt;range.start;
<span class="p_del">-	int len = full ? sizeof *dst : range_n_bytes(&amp;mask-&gt;range);</span>
<span class="p_add">+	int len = full ? sizeof(*dst) : range_n_bytes(&amp;mask-&gt;range);</span>
 	const long *m = (const long *)((const u8 *)&amp;mask-&gt;key + start);
 	const long *s = (const long *)((const u8 *)src + start);
 	long *d = (long *)((u8 *)dst + start);
<span class="p_header">diff --git a/net/rds/ib_rdma.c b/net/rds/ib_rdma.c</span>
<span class="p_header">index a2340748ec86..3d7680f6d8cb 100644</span>
<span class="p_header">--- a/net/rds/ib_rdma.c</span>
<span class="p_header">+++ b/net/rds/ib_rdma.c</span>
<span class="p_chunk">@@ -131,7 +131,7 @@</span> <span class="p_context"> static int rds_ib_add_ipaddr(struct rds_ib_device *rds_ibdev, __be32 ipaddr)</span>
 {
 	struct rds_ib_ipaddr *i_ipaddr;
 
<span class="p_del">-	i_ipaddr = kmalloc(sizeof *i_ipaddr, GFP_KERNEL);</span>
<span class="p_add">+	i_ipaddr = kmalloc(sizeof(*i_ipaddr), GFP_KERNEL);</span>
 	if (!i_ipaddr)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/net/rds/iw.c b/net/rds/iw.c</span>
<span class="p_header">index f4a9fff829e0..ec68e0b0307e 100644</span>
<span class="p_header">--- a/net/rds/iw.c</span>
<span class="p_header">+++ b/net/rds/iw.c</span>
<span class="p_chunk">@@ -65,7 +65,7 @@</span> <span class="p_context"> static void rds_iw_add_one(struct ib_device *device)</span>
 	if (device-&gt;node_type != RDMA_NODE_RNIC)
 		return;
 
<span class="p_del">-	rds_iwdev = kmalloc(sizeof *rds_iwdev, GFP_KERNEL);</span>
<span class="p_add">+	rds_iwdev = kmalloc(sizeof(*rds_iwdev), GFP_KERNEL);</span>
 	if (!rds_iwdev)
 		return;
 
<span class="p_header">diff --git a/net/rds/iw_rdma.c b/net/rds/iw_rdma.c</span>
<span class="p_header">index b09a40c1adce..341999a626dd 100644</span>
<span class="p_header">--- a/net/rds/iw_rdma.c</span>
<span class="p_header">+++ b/net/rds/iw_rdma.c</span>
<span class="p_chunk">@@ -147,7 +147,7 @@</span> <span class="p_context"> static int rds_iw_add_cm_id(struct rds_iw_device *rds_iwdev, struct rdma_cm_id *</span>
 {
 	struct rds_iw_cm_id *i_cm_id;
 
<span class="p_del">-	i_cm_id = kmalloc(sizeof *i_cm_id, GFP_KERNEL);</span>
<span class="p_add">+	i_cm_id = kmalloc(sizeof(*i_cm_id), GFP_KERNEL);</span>
 	if (!i_cm_id)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/net/sunrpc/xprtrdma/svc_rdma_sendto.c b/net/sunrpc/xprtrdma/svc_rdma_sendto.c</span>
<span class="p_header">index df57f3ce6cd2..70db517e7c7f 100644</span>
<span class="p_header">--- a/net/sunrpc/xprtrdma/svc_rdma_sendto.c</span>
<span class="p_header">+++ b/net/sunrpc/xprtrdma/svc_rdma_sendto.c</span>
<span class="p_chunk">@@ -280,7 +280,7 @@</span> <span class="p_context"> static int send_write(struct svcxprt_rdma *xprt, struct svc_rqst *rqstp,</span>
 	}
 
 	/* Prepare WRITE WR */
<span class="p_del">-	memset(&amp;write_wr, 0, sizeof write_wr);</span>
<span class="p_add">+	memset(&amp;write_wr, 0, sizeof(write_wr));</span>
 	ctxt-&gt;wr_op = IB_WR_RDMA_WRITE;
 	write_wr.wr.wr_id = (unsigned long)ctxt;
 	write_wr.wr.sg_list = &amp;sge[0];
<span class="p_chunk">@@ -542,7 +542,7 @@</span> <span class="p_context"> static int send_reply(struct svcxprt_rdma *rdma,</span>
 		pr_err(&quot;svcrdma: Too many sges (%d)\n&quot;, sge_no);
 		goto err;
 	}
<span class="p_del">-	memset(&amp;send_wr, 0, sizeof send_wr);</span>
<span class="p_add">+	memset(&amp;send_wr, 0, sizeof(send_wr));</span>
 	ctxt-&gt;wr_op = IB_WR_SEND;
 	send_wr.wr_id = (unsigned long)ctxt;
 	send_wr.sg_list = ctxt-&gt;sge;
<span class="p_header">diff --git a/net/sunrpc/xprtrdma/svc_rdma_transport.c b/net/sunrpc/xprtrdma/svc_rdma_transport.c</span>
<span class="p_header">index 5763825d09bf..ac3e796eeae6 100644</span>
<span class="p_header">--- a/net/sunrpc/xprtrdma/svc_rdma_transport.c</span>
<span class="p_header">+++ b/net/sunrpc/xprtrdma/svc_rdma_transport.c</span>
<span class="p_chunk">@@ -642,7 +642,7 @@</span> <span class="p_context"> static void sq_comp_handler(struct ib_cq *cq, void *cq_context)</span>
 static struct svcxprt_rdma *rdma_create_xprt(struct svc_serv *serv,
 					     int listener)
 {
<span class="p_del">-	struct svcxprt_rdma *cma_xprt = kzalloc(sizeof *cma_xprt, GFP_KERNEL);</span>
<span class="p_add">+	struct svcxprt_rdma *cma_xprt = kzalloc(sizeof(*cma_xprt), GFP_KERNEL);</span>
 
 	if (!cma_xprt)
 		return NULL;
<span class="p_chunk">@@ -1090,7 +1090,7 @@</span> <span class="p_context"> static struct svc_xprt *svc_rdma_accept(struct svc_xprt *xprt)</span>
 		goto errout;
 	}
 
<span class="p_del">-	memset(&amp;qp_attr, 0, sizeof qp_attr);</span>
<span class="p_add">+	memset(&amp;qp_attr, 0, sizeof(qp_attr));</span>
 	qp_attr.event_handler = qp_event_handler;
 	qp_attr.qp_context = &amp;newxprt-&gt;sc_xprt;
 	qp_attr.cap.max_send_wr = newxprt-&gt;sc_sq_depth;
<span class="p_chunk">@@ -1182,7 +1182,7 @@</span> <span class="p_context"> static struct svc_xprt *svc_rdma_accept(struct svc_xprt *xprt)</span>
 
 	/* Accept Connection */
 	set_bit(RDMAXPRT_CONN_PENDING, &amp;newxprt-&gt;sc_flags);
<span class="p_del">-	memset(&amp;conn_param, 0, sizeof conn_param);</span>
<span class="p_add">+	memset(&amp;conn_param, 0, sizeof(conn_param));</span>
 	conn_param.responder_resources = 0;
 	conn_param.initiator_depth = newxprt-&gt;sc_ord;
 	ret = rdma_accept(newxprt-&gt;sc_cm_id, &amp;conn_param);
<span class="p_chunk">@@ -1455,7 +1455,7 @@</span> <span class="p_context"> void svc_rdma_send_error(struct svcxprt_rdma *xprt, struct rpcrdma_msg *rmsgp,</span>
 	ctxt-&gt;sge[0].length = length;
 
 	/* Prepare SEND WR */
<span class="p_del">-	memset(&amp;err_wr, 0, sizeof err_wr);</span>
<span class="p_add">+	memset(&amp;err_wr, 0, sizeof(err_wr));</span>
 	ctxt-&gt;wr_op = IB_WR_SEND;
 	err_wr.wr_id = (unsigned long)ctxt;
 	err_wr.sg_list = ctxt-&gt;sge;
<span class="p_header">diff --git a/security/keys/encrypted-keys/encrypted.c b/security/keys/encrypted-keys/encrypted.c</span>
<span class="p_header">index 696ccfa08d10..37688d7581f6 100644</span>
<span class="p_header">--- a/security/keys/encrypted-keys/encrypted.c</span>
<span class="p_header">+++ b/security/keys/encrypted-keys/encrypted.c</span>
<span class="p_chunk">@@ -47,8 +47,8 @@</span> <span class="p_context"> static const char key_format_ecryptfs[] = &quot;ecryptfs&quot;;</span>
 static unsigned int ivsize;
 static int blksize;
 
<span class="p_del">-#define KEY_TRUSTED_PREFIX_LEN (sizeof (KEY_TRUSTED_PREFIX) - 1)</span>
<span class="p_del">-#define KEY_USER_PREFIX_LEN (sizeof (KEY_USER_PREFIX) - 1)</span>
<span class="p_add">+#define KEY_TRUSTED_PREFIX_LEN (sizeof(KEY_TRUSTED_PREFIX) - 1)</span>
<span class="p_add">+#define KEY_USER_PREFIX_LEN (sizeof(KEY_USER_PREFIX) - 1)</span>
 #define KEY_ECRYPTFS_DESC_LEN 16
 #define HASH_SIZE SHA256_DIGEST_SIZE
 #define MAX_DATA_SIZE 4096
<span class="p_chunk">@@ -482,7 +482,7 @@</span> <span class="p_context"> static int derived_key_encrypt(struct encrypted_key_payload *epayload,</span>
 		goto out;
 	dump_decrypted_data(epayload);
 
<span class="p_del">-	memset(pad, 0, sizeof pad);</span>
<span class="p_add">+	memset(pad, 0, sizeof(pad));</span>
 	sg_init_table(sg_in, 2);
 	sg_set_buf(&amp;sg_in[0], epayload-&gt;decrypted_data,
 		   epayload-&gt;decrypted_datalen);
<span class="p_chunk">@@ -513,7 +513,7 @@</span> <span class="p_context"> static int datablob_hmac_append(struct encrypted_key_payload *epayload,</span>
 		goto out;
 
 	digest = epayload-&gt;format + epayload-&gt;datablob_len;
<span class="p_del">-	ret = calc_hmac(digest, derived_key, sizeof derived_key,</span>
<span class="p_add">+	ret = calc_hmac(digest, derived_key, sizeof(derived_key),</span>
 			epayload-&gt;format, epayload-&gt;datablob_len);
 	if (!ret)
 		dump_hmac(NULL, digest, HASH_SIZE);
<span class="p_chunk">@@ -543,11 +543,11 @@</span> <span class="p_context"> static int datablob_hmac_verify(struct encrypted_key_payload *epayload,</span>
 	} else
 		p = epayload-&gt;format;
 
<span class="p_del">-	ret = calc_hmac(digest, derived_key, sizeof derived_key, p, len);</span>
<span class="p_add">+	ret = calc_hmac(digest, derived_key, sizeof(derived_key), p, len);</span>
 	if (ret &lt; 0)
 		goto out;
 	ret = memcmp(digest, epayload-&gt;format + epayload-&gt;datablob_len,
<span class="p_del">-		     sizeof digest);</span>
<span class="p_add">+		     sizeof(digest));</span>
 	if (ret) {
 		ret = -EINVAL;
 		dump_hmac(&quot;datablob&quot;,
<span class="p_chunk">@@ -577,13 +577,13 @@</span> <span class="p_context"> static int derived_key_decrypt(struct encrypted_key_payload *epayload,</span>
 		goto out;
 	dump_encrypted_data(epayload, encrypted_datalen);
 
<span class="p_del">-	memset(pad, 0, sizeof pad);</span>
<span class="p_add">+	memset(pad, 0, sizeof(pad));</span>
 	sg_init_table(sg_in, 1);
 	sg_init_table(sg_out, 2);
 	sg_set_buf(sg_in, epayload-&gt;encrypted_data, encrypted_datalen);
 	sg_set_buf(&amp;sg_out[0], epayload-&gt;decrypted_data,
 		   epayload-&gt;decrypted_datalen);
<span class="p_del">-	sg_set_buf(&amp;sg_out[1], pad, sizeof pad);</span>
<span class="p_add">+	sg_set_buf(&amp;sg_out[1], pad, sizeof(pad));</span>
 
 	ret = crypto_blkcipher_decrypt(&amp;desc, sg_out, sg_in, encrypted_datalen);
 	crypto_free_blkcipher(desc.tfm);
<span class="p_chunk">@@ -695,7 +695,7 @@</span> <span class="p_context"> static int encrypted_key_decrypt(struct encrypted_key_payload *epayload,</span>
 	if (ret &lt; 0)
 		goto out;
 
<span class="p_del">-	ret = derived_key_decrypt(epayload, derived_key, sizeof derived_key);</span>
<span class="p_add">+	ret = derived_key_decrypt(epayload, derived_key, sizeof(derived_key));</span>
 	if (ret &lt; 0)
 		pr_err(&quot;encrypted_key: failed to decrypt key (%d)\n&quot;, ret);
 out:
<span class="p_chunk">@@ -923,7 +923,7 @@</span> <span class="p_context"> static long encrypted_read(const struct key *key, char __user *buffer,</span>
 	if (ret &lt; 0)
 		goto out;
 
<span class="p_del">-	ret = derived_key_encrypt(epayload, derived_key, sizeof derived_key);</span>
<span class="p_add">+	ret = derived_key_encrypt(epayload, derived_key, sizeof(derived_key));</span>
 	if (ret &lt; 0)
 		goto out;
 
<span class="p_header">diff --git a/security/keys/trusted.c b/security/keys/trusted.c</span>
<span class="p_header">index 0dcab20cdacd..5428c679598f 100644</span>
<span class="p_header">--- a/security/keys/trusted.c</span>
<span class="p_header">+++ b/security/keys/trusted.c</span>
<span class="p_chunk">@@ -214,11 +214,11 @@</span> <span class="p_context"> static int TSS_checkhmac1(unsigned char *buffer,</span>
 	if (ret &lt; 0)
 		goto out;
 	ret = crypto_shash_update(&amp;sdesc-&gt;shash, (const u8 *)&amp;result,
<span class="p_del">-				  sizeof result);</span>
<span class="p_add">+				  sizeof(result));</span>
 	if (ret &lt; 0)
 		goto out;
 	ret = crypto_shash_update(&amp;sdesc-&gt;shash, (const u8 *)&amp;ordinal,
<span class="p_del">-				  sizeof ordinal);</span>
<span class="p_add">+				  sizeof(ordinal));</span>
 	if (ret &lt; 0)
 		goto out;
 	va_start(argp, keylen);
<span class="p_chunk">@@ -306,11 +306,11 @@</span> <span class="p_context"> static int TSS_checkhmac2(unsigned char *buffer,</span>
 	if (ret &lt; 0)
 		goto out;
 	ret = crypto_shash_update(&amp;sdesc-&gt;shash, (const u8 *)&amp;result,
<span class="p_del">-				  sizeof result);</span>
<span class="p_add">+				  sizeof(result));</span>
 	if (ret &lt; 0)
 		goto out;
 	ret = crypto_shash_update(&amp;sdesc-&gt;shash, (const u8 *)&amp;ordinal,
<span class="p_del">-				  sizeof ordinal);</span>
<span class="p_add">+				  sizeof(ordinal));</span>
 	if (ret &lt; 0)
 		goto out;
 
<span class="p_chunk">@@ -476,7 +476,7 @@</span> <span class="p_context"> static int tpm_seal(struct tpm_buf *tb, uint16_t keytype,</span>
 	int i;
 
 	/* alloc some work space for all the hashes */
<span class="p_del">-	td = kmalloc(sizeof *td, GFP_KERNEL);</span>
<span class="p_add">+	td = kmalloc(sizeof(*td), GFP_KERNEL);</span>
 	if (!td)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -665,7 +665,7 @@</span> <span class="p_context"> static int key_seal(struct trusted_key_payload *p,</span>
 	struct tpm_buf *tb;
 	int ret;
 
<span class="p_del">-	tb = kzalloc(sizeof *tb, GFP_KERNEL);</span>
<span class="p_add">+	tb = kzalloc(sizeof(*tb), GFP_KERNEL);</span>
 	if (!tb)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -691,7 +691,7 @@</span> <span class="p_context"> static int key_unseal(struct trusted_key_payload *p,</span>
 	struct tpm_buf *tb;
 	int ret;
 
<span class="p_del">-	tb = kzalloc(sizeof *tb, GFP_KERNEL);</span>
<span class="p_add">+	tb = kzalloc(sizeof(*tb), GFP_KERNEL);</span>
 	if (!tb)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -922,7 +922,7 @@</span> <span class="p_context"> static struct trusted_key_options *trusted_options_alloc(void)</span>
 	if (tpm2 &lt; 0)
 		return NULL;
 
<span class="p_del">-	options = kzalloc(sizeof *options, GFP_KERNEL);</span>
<span class="p_add">+	options = kzalloc(sizeof(*options), GFP_KERNEL);</span>
 	if (options) {
 		/* set any non-zero defaults */
 		options-&gt;keytype = SRK_keytype;
<span class="p_chunk">@@ -938,10 +938,10 @@</span> <span class="p_context"> static struct trusted_key_payload *trusted_payload_alloc(struct key *key)</span>
 	struct trusted_key_payload *p = NULL;
 	int ret;
 
<span class="p_del">-	ret = key_payload_reserve(key, sizeof *p);</span>
<span class="p_add">+	ret = key_payload_reserve(key, sizeof(*p));</span>
 	if (ret &lt; 0)
 		return p;
<span class="p_del">-	p = kzalloc(sizeof *p, GFP_KERNEL);</span>
<span class="p_add">+	p = kzalloc(sizeof(*p), GFP_KERNEL);</span>
 	if (p)
 		p-&gt;migratable = 1; /* migratable by default */
 	return p;
<span class="p_header">diff --git a/security/selinux/hooks.c b/security/selinux/hooks.c</span>
<span class="p_header">index f8110cfd80ff..d8a3cf6fa0c8 100644</span>
<span class="p_header">--- a/security/selinux/hooks.c</span>
<span class="p_header">+++ b/security/selinux/hooks.c</span>
<span class="p_chunk">@@ -2523,7 +2523,7 @@</span> <span class="p_context"> static void selinux_bprm_committed_creds(struct linux_binprm *bprm)</span>
 	 */
 	rc = avc_has_perm(osid, sid, SECCLASS_PROCESS, PROCESS__SIGINH, NULL);
 	if (rc) {
<span class="p_del">-		memset(&amp;itimer, 0, sizeof itimer);</span>
<span class="p_add">+		memset(&amp;itimer, 0, sizeof(itimer));</span>
 		for (i = 0; i &lt; 3; i++)
 			do_setitimer(i, &amp;itimer, NULL);
 		spin_lock_irq(&amp;current-&gt;sighand-&gt;siglock);
<span class="p_chunk">@@ -3025,7 +3025,7 @@</span> <span class="p_context"> static int selinux_inode_setotherxattr(struct dentry *dentry, const char *name)</span>
 	const struct cred *cred = current_cred();
 
 	if (!strncmp(name, XATTR_SECURITY_PREFIX,
<span class="p_del">-		     sizeof XATTR_SECURITY_PREFIX - 1)) {</span>
<span class="p_add">+		     sizeof(XATTR_SECURITY_PREFIX) - 1)) {</span>
 		if (!strcmp(name, XATTR_NAME_CAPS)) {
 			if (!capable(CAP_SETFCAP))
 				return -EPERM;
<span class="p_header">diff --git a/security/selinux/ss/conditional.c b/security/selinux/ss/conditional.c</span>
<span class="p_header">index 456e1a9bcfde..e60f7855f4ce 100644</span>
<span class="p_header">--- a/security/selinux/ss/conditional.c</span>
<span class="p_header">+++ b/security/selinux/ss/conditional.c</span>
<span class="p_chunk">@@ -230,7 +230,7 @@</span> <span class="p_context"> int cond_read_bool(struct policydb *p, struct hashtab *h, void *fp)</span>
 	if (!booldatum)
 		return -ENOMEM;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc)
 		goto err;
 
<span class="p_chunk">@@ -457,7 +457,7 @@</span> <span class="p_context"> int cond_read_list(struct policydb *p, void *fp)</span>
 	u32 i, len;
 	int rc;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc)
 		return rc;
 
<span class="p_header">diff --git a/security/selinux/ss/ebitmap.c b/security/selinux/ss/ebitmap.c</span>
<span class="p_header">index 57644b1dc42e..e9c45692d6e4 100644</span>
<span class="p_header">--- a/security/selinux/ss/ebitmap.c</span>
<span class="p_header">+++ b/security/selinux/ss/ebitmap.c</span>
<span class="p_chunk">@@ -350,7 +350,7 @@</span> <span class="p_context"> int ebitmap_read(struct ebitmap *e, void *fp)</span>
 
 	ebitmap_init(e);
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc &lt; 0)
 		goto out;
 
<span class="p_header">diff --git a/security/selinux/ss/policydb.c b/security/selinux/ss/policydb.c</span>
<span class="p_header">index 992a31530825..79ddb86b180e 100644</span>
<span class="p_header">--- a/security/selinux/ss/policydb.c</span>
<span class="p_header">+++ b/security/selinux/ss/policydb.c</span>
<span class="p_chunk">@@ -1056,7 +1056,7 @@</span> <span class="p_context"> static int context_read_and_validate(struct context *c,</span>
 	__le32 buf[3];
 	int rc;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc) {
 		printk(KERN_ERR &quot;SELinux: context truncated\n&quot;);
 		goto out;
<span class="p_chunk">@@ -1122,7 +1122,7 @@</span> <span class="p_context"> static int perm_read(struct policydb *p, struct hashtab *h, void *fp)</span>
 	if (!perdatum)
 		goto bad;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc)
 		goto bad;
 
<span class="p_chunk">@@ -1156,7 +1156,7 @@</span> <span class="p_context"> static int common_read(struct policydb *p, struct hashtab *h, void *fp)</span>
 	if (!comdatum)
 		goto bad;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc)
 		goto bad;
 
<span class="p_chunk">@@ -1285,8 +1285,7 @@</span> <span class="p_context"> static int read_cons_helper(struct policydb *p,</span>
 					return rc;
 				if (p-&gt;policyvers &gt;=
 					POLICYDB_VERSION_CONSTRAINT_NAMES) {
<span class="p_del">-						e-&gt;type_names = kzalloc(sizeof</span>
<span class="p_del">-						(*e-&gt;type_names),</span>
<span class="p_add">+						e-&gt;type_names = kzalloc(sizeof(*e-&gt;type_names),</span>
 						GFP_KERNEL);
 					if (!e-&gt;type_names)
 						return -ENOMEM;
<span class="p_chunk">@@ -1520,7 +1519,7 @@</span> <span class="p_context"> static int mls_read_level(struct mls_level *lp, void *fp)</span>
 
 	memset(lp, 0, sizeof(*lp));
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc) {
 		printk(KERN_ERR &quot;SELinux: mls: truncated level\n&quot;);
 		return rc;
<span class="p_chunk">@@ -1599,7 +1598,7 @@</span> <span class="p_context"> static int sens_read(struct policydb *p, struct hashtab *h, void *fp)</span>
 	if (!levdatum)
 		goto bad;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc)
 		goto bad;
 
<span class="p_chunk">@@ -1641,7 +1640,7 @@</span> <span class="p_context"> static int cat_read(struct policydb *p, struct hashtab *h, void *fp)</span>
 	if (!catdatum)
 		goto bad;
 
<span class="p_del">-	rc = next_entry(buf, fp, sizeof buf);</span>
<span class="p_add">+	rc = next_entry(buf, fp, sizeof(buf));</span>
 	if (rc)
 		goto bad;
 
<span class="p_header">diff --git a/sound/core/sound.c b/sound/core/sound.c</span>
<span class="p_header">index 175f9e4e01c8..e35344c87b8a 100644</span>
<span class="p_header">--- a/sound/core/sound.c</span>
<span class="p_header">+++ b/sound/core/sound.c</span>
<span class="p_chunk">@@ -268,7 +268,7 @@</span> <span class="p_context"> int snd_register_device(int type, struct snd_card *card, int dev,</span>
 	if (snd_BUG_ON(!device))
 		return -EINVAL;
 
<span class="p_del">-	preg = kmalloc(sizeof *preg, GFP_KERNEL);</span>
<span class="p_add">+	preg = kmalloc(sizeof(*preg), GFP_KERNEL);</span>
 	if (preg == NULL)
 		return -ENOMEM;
 	preg-&gt;type = type;
<span class="p_header">diff --git a/sound/soc/codecs/tlv320aic26.c b/sound/soc/codecs/tlv320aic26.c</span>
<span class="p_header">index 2c904d7150ad..e5fca13c264b 100644</span>
<span class="p_header">--- a/sound/soc/codecs/tlv320aic26.c</span>
<span class="p_header">+++ b/sound/soc/codecs/tlv320aic26.c</span>
<span class="p_chunk">@@ -346,7 +346,7 @@</span> <span class="p_context"> static int aic26_spi_probe(struct spi_device *spi)</span>
 	dev_dbg(&amp;spi-&gt;dev, &quot;probing tlv320aic26 spi device\n&quot;);
 
 	/* Allocate driver data */
<span class="p_del">-	aic26 = devm_kzalloc(&amp;spi-&gt;dev, sizeof *aic26, GFP_KERNEL);</span>
<span class="p_add">+	aic26 = devm_kzalloc(&amp;spi-&gt;dev, sizeof(*aic26), GFP_KERNEL);</span>
 	if (!aic26)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/sound/soc/codecs/wm8983.c b/sound/soc/codecs/wm8983.c</span>
<span class="p_header">index 7350ff654bbf..35b5d04c375d 100644</span>
<span class="p_header">--- a/sound/soc/codecs/wm8983.c</span>
<span class="p_header">+++ b/sound/soc/codecs/wm8983.c</span>
<span class="p_chunk">@@ -1006,7 +1006,7 @@</span> <span class="p_context"> static int wm8983_spi_probe(struct spi_device *spi)</span>
 	struct wm8983_priv *wm8983;
 	int ret;
 
<span class="p_del">-	wm8983 = devm_kzalloc(&amp;spi-&gt;dev, sizeof *wm8983, GFP_KERNEL);</span>
<span class="p_add">+	wm8983 = devm_kzalloc(&amp;spi-&gt;dev, sizeof(*wm8983), GFP_KERNEL);</span>
 	if (!wm8983)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1046,7 +1046,7 @@</span> <span class="p_context"> static int wm8983_i2c_probe(struct i2c_client *i2c,</span>
 	struct wm8983_priv *wm8983;
 	int ret;
 
<span class="p_del">-	wm8983 = devm_kzalloc(&amp;i2c-&gt;dev, sizeof *wm8983, GFP_KERNEL);</span>
<span class="p_add">+	wm8983 = devm_kzalloc(&amp;i2c-&gt;dev, sizeof(*wm8983), GFP_KERNEL);</span>
 	if (!wm8983)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/sound/soc/codecs/wm8985.c b/sound/soc/codecs/wm8985.c</span>
<span class="p_header">index 9918152a03c7..0ef374b714ac 100644</span>
<span class="p_header">--- a/sound/soc/codecs/wm8985.c</span>
<span class="p_header">+++ b/sound/soc/codecs/wm8985.c</span>
<span class="p_chunk">@@ -1068,7 +1068,7 @@</span> <span class="p_context"> static int wm8985_spi_probe(struct spi_device *spi)</span>
 	struct wm8985_priv *wm8985;
 	int ret;
 
<span class="p_del">-	wm8985 = devm_kzalloc(&amp;spi-&gt;dev, sizeof *wm8985, GFP_KERNEL);</span>
<span class="p_add">+	wm8985 = devm_kzalloc(&amp;spi-&gt;dev, sizeof(*wm8985), GFP_KERNEL);</span>
 	if (!wm8985)
 		return -ENOMEM;
 
<span class="p_chunk">@@ -1109,7 +1109,7 @@</span> <span class="p_context"> static int wm8985_i2c_probe(struct i2c_client *i2c,</span>
 	struct wm8985_priv *wm8985;
 	int ret;
 
<span class="p_del">-	wm8985 = devm_kzalloc(&amp;i2c-&gt;dev, sizeof *wm8985, GFP_KERNEL);</span>
<span class="p_add">+	wm8985 = devm_kzalloc(&amp;i2c-&gt;dev, sizeof(*wm8985), GFP_KERNEL);</span>
 	if (!wm8985)
 		return -ENOMEM;
 
<span class="p_header">diff --git a/sound/soc/fsl/mpc5200_dma.c b/sound/soc/fsl/mpc5200_dma.c</span>
<span class="p_header">index 0b82e209b6e3..bc310ec4aa74 100644</span>
<span class="p_header">--- a/sound/soc/fsl/mpc5200_dma.c</span>
<span class="p_header">+++ b/sound/soc/fsl/mpc5200_dma.c</span>
<span class="p_chunk">@@ -386,7 +386,7 @@</span> <span class="p_context"> int mpc5200_audio_dma_create(struct platform_device *op)</span>
 	}
 
 	/* Allocate and initialize the driver private data */
<span class="p_del">-	psc_dma = kzalloc(sizeof *psc_dma, GFP_KERNEL);</span>
<span class="p_add">+	psc_dma = kzalloc(sizeof(*psc_dma), GFP_KERNEL);</span>
 	if (!psc_dma) {
 		ret = -ENOMEM;
 		goto out_unmap;
<span class="p_chunk">@@ -394,7 +394,7 @@</span> <span class="p_context"> int mpc5200_audio_dma_create(struct platform_device *op)</span>
 
 	/* Get the PSC ID */
 	prop = of_get_property(op-&gt;dev.of_node, &quot;cell-index&quot;, &amp;size);
<span class="p_del">-	if (!prop || size &lt; sizeof *prop) {</span>
<span class="p_add">+	if (!prop || size &lt; sizeof(*prop)) {</span>
 		ret = -ENODEV;
 		goto out_free;
 	}
<span class="p_chunk">@@ -404,11 +404,11 @@</span> <span class="p_context"> int mpc5200_audio_dma_create(struct platform_device *op)</span>
 	psc_dma-&gt;id = be32_to_cpu(*prop);
 	psc_dma-&gt;irq = irq;
 	psc_dma-&gt;psc_regs = regs;
<span class="p_del">-	psc_dma-&gt;fifo_regs = regs + sizeof *psc_dma-&gt;psc_regs;</span>
<span class="p_add">+	psc_dma-&gt;fifo_regs = regs + sizeof(*psc_dma-&gt;psc_regs);</span>
 	psc_dma-&gt;dev = &amp;op-&gt;dev;
 	psc_dma-&gt;playback.psc_dma = psc_dma;
 	psc_dma-&gt;capture.psc_dma = psc_dma;
<span class="p_del">-	snprintf(psc_dma-&gt;name, sizeof psc_dma-&gt;name, &quot;PSC%u&quot;, psc_dma-&gt;id);</span>
<span class="p_add">+	snprintf(psc_dma-&gt;name, sizeof(psc_dma-&gt;name), &quot;PSC%u&quot;, psc_dma-&gt;id);</span>
 
 	/* Find the address of the fifo data registers and setup the
 	 * DMA tasks */
<span class="p_header">diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c</span>
<span class="p_header">index 790ee2bf1a47..ae5c74c78433 100644</span>
<span class="p_header">--- a/sound/soc/soc-core.c</span>
<span class="p_header">+++ b/sound/soc/soc-core.c</span>
<span class="p_chunk">@@ -74,10 +74,10 @@</span> <span class="p_context"> static int min_bytes_needed(unsigned long val)</span>
 	int c = 0;
 	int i;
 
<span class="p_del">-	for (i = (sizeof val * 8) - 1; i &gt;= 0; --i, ++c)</span>
<span class="p_add">+	for (i = (sizeof(val) * 8) - 1; i &gt;= 0; --i, ++c)</span>
 		if (val &amp; (1UL &lt;&lt; i))
 			break;
<span class="p_del">-	c = (sizeof val * 8) - c;</span>
<span class="p_add">+	c = (sizeof(val) * 8) - c;</span>
 	if (!c || (c % 8))
 		c = (c + 8) / 8;
 	else
<span class="p_chunk">@@ -3892,7 +3892,7 @@</span> <span class="p_context"> int snd_soc_of_get_dai_link_codecs(struct device *dev,</span>
 		return num_codecs;
 	}
 	component = devm_kzalloc(dev,
<span class="p_del">-				 sizeof *component * num_codecs,</span>
<span class="p_add">+				 sizeof(*component) * num_codecs,</span>
 				 GFP_KERNEL);
 	if (!component)
 		return -ENOMEM;
<span class="p_header">diff --git a/sound/spi/at73c213.c b/sound/spi/at73c213.c</span>
<span class="p_header">index fac7e6eb9529..cf8571322090 100644</span>
<span class="p_header">--- a/sound/spi/at73c213.c</span>
<span class="p_header">+++ b/sound/spi/at73c213.c</span>
<span class="p_chunk">@@ -970,7 +970,7 @@</span> <span class="p_context"> static int snd_at73c213_probe(struct spi_device *spi)</span>
 	}
 
 	/* Allocate &quot;card&quot; using some unused identifiers. */
<span class="p_del">-	snprintf(id, sizeof id, &quot;at73c213_%d&quot;, board-&gt;ssc_id);</span>
<span class="p_add">+	snprintf(id, sizeof(id), &quot;at73c213_%d&quot;, board-&gt;ssc_id);</span>
 	retval = snd_card_new(&amp;spi-&gt;dev, -1, id, THIS_MODULE,
 			      sizeof(struct snd_at73c213), &amp;card);
 	if (retval &lt; 0)
<span class="p_header">diff --git a/tools/firewire/nosy-dump.c b/tools/firewire/nosy-dump.c</span>
<span class="p_header">index 3179c711bd65..73287dea3026 100644</span>
<span class="p_header">--- a/tools/firewire/nosy-dump.c</span>
<span class="p_header">+++ b/tools/firewire/nosy-dump.c</span>
<span class="p_chunk">@@ -149,7 +149,7 @@</span> <span class="p_context"> subaction_create(uint32_t *data, size_t length)</span>
 	struct subaction *sa;
 
 	/* we put the ack in the subaction struct for easy access. */
<span class="p_del">-	sa = malloc(sizeof *sa - sizeof sa-&gt;packet + length);</span>
<span class="p_add">+	sa = malloc(sizeof(*sa) - sizeof(sa-&gt;packet) + length);</span>
 	if (!sa)
 		exit(EXIT_FAILURE);
 	sa-&gt;ack = data[length / 4 - 1];
<span class="p_chunk">@@ -181,7 +181,7 @@</span> <span class="p_context"> link_transaction_lookup(int request_node, int response_node, int tlabel)</span>
 			return t;
 	}
 
<span class="p_del">-	t = malloc(sizeof *t);</span>
<span class="p_add">+	t = malloc(sizeof(*t));</span>
 	if (!t)
 		exit(EXIT_FAILURE);
 	t-&gt;request_node = request_node;
<span class="p_chunk">@@ -985,13 +985,13 @@</span> <span class="p_context"> int main(int argc, const char *argv[])</span>
 
 	while (run) {
 		if (input != NULL) {
<span class="p_del">-			if (fread(&amp;length, sizeof length, 1, input) != 1)</span>
<span class="p_add">+			if (fread(&amp;length, sizeof(length), 1, input) != 1)</span>
 				return 0;
 			fread(buf, 1, length, input);
 		} else {
 			poll(pollfds, 2, -1);
 			if (pollfds[1].revents) {
<span class="p_del">-				read(STDIN_FILENO, &amp;c, sizeof c);</span>
<span class="p_add">+				read(STDIN_FILENO, &amp;c, sizeof(c));</span>
 				switch (c) {
 				case &#39;q&#39;:
 					if (output != NULL)
<span class="p_chunk">@@ -1001,13 +1001,13 @@</span> <span class="p_context"> int main(int argc, const char *argv[])</span>
 			}
 
 			if (pollfds[0].revents)
<span class="p_del">-				length = read(fd, buf, sizeof buf);</span>
<span class="p_add">+				length = read(fd, buf, sizeof(buf));</span>
 			else
 				continue;
 		}
 
 		if (output != NULL) {
<span class="p_del">-			fwrite(&amp;length, sizeof length, 1, output);</span>
<span class="p_add">+			fwrite(&amp;length, sizeof(length), 1, output);</span>
 			fwrite(buf, 1, length, output);
 		}
 
<span class="p_header">diff --git a/tools/power/cpupower/utils/helpers/msr.c b/tools/power/cpupower/utils/helpers/msr.c</span>
<span class="p_header">index 31a4b24a8bc6..852f18c35b18 100644</span>
<span class="p_header">--- a/tools/power/cpupower/utils/helpers/msr.c</span>
<span class="p_header">+++ b/tools/power/cpupower/utils/helpers/msr.c</span>
<span class="p_chunk">@@ -34,7 +34,7 @@</span> <span class="p_context"> int read_msr(int cpu, unsigned int idx, unsigned long long *val)</span>
 		return -1;
 	if (lseek(fd, idx, SEEK_CUR) == -1)
 		goto err;
<span class="p_del">-	if (read(fd, val, sizeof *val) != sizeof *val)</span>
<span class="p_add">+	if (read(fd, val, sizeof(*val)) != sizeof(*val))</span>
 		goto err;
 	close(fd);
 	return 0;
<span class="p_chunk">@@ -63,7 +63,7 @@</span> <span class="p_context"> int write_msr(int cpu, unsigned int idx, unsigned long long val)</span>
 		return -1;
 	if (lseek(fd, idx, SEEK_CUR) == -1)
 		goto err;
<span class="p_del">-	if (write(fd, &amp;val, sizeof val) != sizeof val)</span>
<span class="p_add">+	if (write(fd, &amp;val, sizeof(val)) != sizeof(val))</span>
 		goto err;
 	close(fd);
 	return 0;
<span class="p_header">diff --git a/tools/power/x86/turbostat/turbostat.c b/tools/power/x86/turbostat/turbostat.c</span>
<span class="p_header">index 0dac7e05a6ac..c5d1cea97d1c 100644</span>
<span class="p_header">--- a/tools/power/x86/turbostat/turbostat.c</span>
<span class="p_header">+++ b/tools/power/x86/turbostat/turbostat.c</span>
<span class="p_chunk">@@ -274,10 +274,10 @@</span> <span class="p_context"> int get_msr(int cpu, off_t offset, unsigned long long *msr)</span>
 	if (fd &lt; 0)
 		err(-1, &quot;%s open failed, try chown or chmod +r /dev/cpu/*/msr, or run as root&quot;, pathname);
 
<span class="p_del">-	retval = pread(fd, msr, sizeof *msr, offset);</span>
<span class="p_add">+	retval = pread(fd, msr, sizeof(*msr), offset);</span>
 	close(fd);
 
<span class="p_del">-	if (retval != sizeof *msr)</span>
<span class="p_add">+	if (retval != sizeof(*msr))</span>
 		err(-1, &quot;%s offset 0x%llx read failed&quot;, pathname, (unsigned long long)offset);
 
 	return 0;
<span class="p_header">diff --git a/tools/power/x86/x86_energy_perf_policy/x86_energy_perf_policy.c b/tools/power/x86/x86_energy_perf_policy/x86_energy_perf_policy.c</span>
<span class="p_header">index 40b3e5482f8a..0cece734cd3e 100644</span>
<span class="p_header">--- a/tools/power/x86/x86_energy_perf_policy/x86_energy_perf_policy.c</span>
<span class="p_header">+++ b/tools/power/x86/x86_energy_perf_policy/x86_energy_perf_policy.c</span>
<span class="p_chunk">@@ -199,9 +199,9 @@</span> <span class="p_context"> unsigned long long get_msr(int cpu, int offset)</span>
 		exit(1);
 	}
 
<span class="p_del">-	retval = pread(fd, &amp;msr, sizeof msr, offset);</span>
<span class="p_add">+	retval = pread(fd, &amp;msr, sizeof(msr), offset);</span>
 
<span class="p_del">-	if (retval != sizeof msr) {</span>
<span class="p_add">+	if (retval != sizeof(msr)) {</span>
 		printf(&quot;pread cpu%d 0x%x = %d\n&quot;, cpu, offset, retval);
 		exit(-2);
 	}
<span class="p_chunk">@@ -223,15 +223,15 @@</span> <span class="p_context"> unsigned long long  put_msr(int cpu, unsigned long long new_msr, int offset)</span>
 		exit(1);
 	}
 
<span class="p_del">-	retval = pread(fd, &amp;old_msr, sizeof old_msr, offset);</span>
<span class="p_del">-	if (retval != sizeof old_msr) {</span>
<span class="p_add">+	retval = pread(fd, &amp;old_msr, sizeof(old_msr), offset);</span>
<span class="p_add">+	if (retval != sizeof(old_msr)) {</span>
 		perror(&quot;pwrite&quot;);
 		printf(&quot;pread cpu%d 0x%x = %d\n&quot;, cpu, offset, retval);
 		exit(-2);
 	}
 
<span class="p_del">-	retval = pwrite(fd, &amp;new_msr, sizeof new_msr, offset);</span>
<span class="p_del">-	if (retval != sizeof new_msr) {</span>
<span class="p_add">+	retval = pwrite(fd, &amp;new_msr, sizeof(new_msr), offset);</span>
<span class="p_add">+	if (retval != sizeof(new_msr)) {</span>
 		perror(&quot;pwrite&quot;);
 		printf(&quot;pwrite cpu%d 0x%x = %d\n&quot;, cpu, offset, retval);
 		exit(-2);
<span class="p_header">diff --git a/tools/spi/spidev_fdx.c b/tools/spi/spidev_fdx.c</span>
<span class="p_header">index 0ea3e51292fc..b304776fb21c 100644</span>
<span class="p_header">--- a/tools/spi/spidev_fdx.c</span>
<span class="p_header">+++ b/tools/spi/spidev_fdx.c</span>
<span class="p_chunk">@@ -24,7 +24,7 @@</span> <span class="p_context"> static void do_read(int fd, int len)</span>
 		len = 2;
 	else if (len &gt; sizeof(buf))
 		len = sizeof(buf);
<span class="p_del">-	memset(buf, 0, sizeof buf);</span>
<span class="p_add">+	memset(buf, 0, sizeof(buf));</span>
 
 	status = read(fd, buf, len);
 	if (status &lt; 0) {
<span class="p_chunk">@@ -51,11 +51,11 @@</span> <span class="p_context"> static void do_msg(int fd, int len)</span>
 	unsigned char		buf[32], *bp;
 	int			status;
 
<span class="p_del">-	memset(xfer, 0, sizeof xfer);</span>
<span class="p_del">-	memset(buf, 0, sizeof buf);</span>
<span class="p_add">+	memset(xfer, 0, sizeof(xfer));</span>
<span class="p_add">+	memset(buf, 0, sizeof(buf));</span>
 
<span class="p_del">-	if (len &gt; sizeof buf)</span>
<span class="p_del">-		len = sizeof buf;</span>
<span class="p_add">+	if (len &gt; sizeof(buf))</span>
<span class="p_add">+		len = sizeof(buf);</span>
 
 	buf[0] = 0xaa;
 	xfer[0].tx_buf = (unsigned long)buf;
<span class="p_header">diff --git a/tools/testing/selftests/vm/thuge-gen.c b/tools/testing/selftests/vm/thuge-gen.c</span>
<span class="p_header">index c87957295f74..3e5c6975c22b 100644</span>
<span class="p_header">--- a/tools/testing/selftests/vm/thuge-gen.c</span>
<span class="p_header">+++ b/tools/testing/selftests/vm/thuge-gen.c</span>
<span class="p_chunk">@@ -96,7 +96,7 @@</span> <span class="p_context"> void show(unsigned long ps)</span>
 		return;
 	printf(&quot;%luMB: &quot;, ps &gt;&gt; 20);
 	fflush(stdout);
<span class="p_del">-	snprintf(buf, sizeof buf,</span>
<span class="p_add">+	snprintf(buf, sizeof(buf),</span>
 		&quot;cat /sys/kernel/mm/hugepages/hugepages-%lukB/free_hugepages&quot;,
 		ps &gt;&gt; 10);
 	system(buf);
<span class="p_chunk">@@ -112,7 +112,7 @@</span> <span class="p_context"> unsigned long read_sysfs(int warn, char *fmt, ...)</span>
 	unsigned long val = 0;
 
 	va_start(ap, fmt);
<span class="p_del">-	vsnprintf(buf, sizeof buf, fmt, ap);</span>
<span class="p_add">+	vsnprintf(buf, sizeof(buf), fmt, ap);</span>
 	va_end(ap);
 
 	f = fopen(buf, &quot;r&quot;);
<span class="p_header">diff --git a/tools/usb/testusb.c b/tools/usb/testusb.c</span>
<span class="p_header">index 0692d99b6d8f..ec342121b75c 100644</span>
<span class="p_header">--- a/tools/usb/testusb.c</span>
<span class="p_header">+++ b/tools/usb/testusb.c</span>
<span class="p_chunk">@@ -151,7 +151,7 @@</span> <span class="p_context"> static int testdev_ffs_ifnum(FILE *fd)</span>
 		if (fread(u.buf + 1, (unsigned char)u.buf[0] - 1, 1, fd) != 1)
 			return -1;
 
<span class="p_del">-		if (u.intf.bLength == sizeof u.intf</span>
<span class="p_add">+		if (u.intf.bLength == sizeof(u.intf)</span>
 		 &amp;&amp; u.intf.bDescriptorType == USB_DT_INTERFACE
 		 &amp;&amp; u.intf.bNumEndpoints == 2
 		 &amp;&amp; u.intf.bInterfaceClass == USB_CLASS_VENDOR_SPEC
<span class="p_chunk">@@ -165,10 +165,10 @@</span> <span class="p_context"> static int testdev_ifnum(FILE *fd)</span>
 {
 	struct usb_device_descriptor dev;
 
<span class="p_del">-	if (fread(&amp;dev, sizeof dev, 1, fd) != 1)</span>
<span class="p_add">+	if (fread(&amp;dev, sizeof(dev), 1, fd) != 1)</span>
 		return -1;
 
<span class="p_del">-	if (dev.bLength != sizeof dev || dev.bDescriptorType != USB_DT_DEVICE)</span>
<span class="p_add">+	if (dev.bLength != sizeof(dev) || dev.bDescriptorType != USB_DT_DEVICE)</span>
 		return -1;
 
 	/* FX2 with (tweaked) bulksrc firmware */
<span class="p_chunk">@@ -265,7 +265,7 @@</span> <span class="p_context"> static int find_testdev(const char *name, const struct stat *sb, int flag)</span>
 	if (ifnum &lt; 0)
 		return 0;
 
<span class="p_del">-	entry = calloc(1, sizeof *entry);</span>
<span class="p_add">+	entry = calloc(1, sizeof(*entry));</span>
 	if (!entry)
 		goto nomem;
 
<span class="p_chunk">@@ -330,8 +330,8 @@</span> <span class="p_context"> static void *handle_testdev (void *arg)</span>
 			char	buf [80];
 			int	err = errno;
 
<span class="p_del">-			if (strerror_r (errno, buf, sizeof buf)) {</span>
<span class="p_del">-				snprintf (buf, sizeof buf, &quot;error %d&quot;, err);</span>
<span class="p_add">+			if (strerror_r (errno, buf, sizeof(buf))) {</span>
<span class="p_add">+				snprintf (buf, sizeof(buf), &quot;error %d&quot;, err);</span>
 				errno = err;
 			}
 			printf (&quot;%s test %d --&gt; %d (%s)\n&quot;,
<span class="p_chunk">@@ -516,7 +516,7 @@</span> <span class="p_context"> int main (int argc, char **argv)</span>
 		fprintf (stderr, &quot;%s: %s may see only control tests\n&quot;,
 				argv [0], device);
 
<span class="p_del">-		memset (&amp;dev, 0, sizeof dev);</span>
<span class="p_add">+		memset (&amp;dev, 0, sizeof(dev));</span>
 		dev.name = device;
 		dev.param = param;
 		dev.forever = forever;
<span class="p_header">diff --git a/tools/virtio/ringtest/main.c b/tools/virtio/ringtest/main.c</span>
<span class="p_header">index 3a5ff438bd62..130e46f7ca91 100644</span>
<span class="p_header">--- a/tools/virtio/ringtest/main.c</span>
<span class="p_header">+++ b/tools/virtio/ringtest/main.c</span>
<span class="p_chunk">@@ -36,8 +36,8 @@</span> <span class="p_context"> void notify(int fd)</span>
 	int r;
 
 	vmexit();
<span class="p_del">-	r = write(fd, &amp;v, sizeof v);</span>
<span class="p_del">-	assert(r == sizeof v);</span>
<span class="p_add">+	r = write(fd, &amp;v, sizeof(v));</span>
<span class="p_add">+	assert(r == sizeof(v));</span>
 	vmentry();
 }
 
<span class="p_chunk">@@ -47,8 +47,8 @@</span> <span class="p_context"> void wait_for_notify(int fd)</span>
 	int r;
 
 	vmexit();
<span class="p_del">-	r = read(fd, &amp;v, sizeof v);</span>
<span class="p_del">-	assert(r == sizeof v);</span>
<span class="p_add">+	r = read(fd, &amp;v, sizeof(v));</span>
<span class="p_add">+	assert(r == sizeof(v));</span>
 	vmentry();
 }
 
<span class="p_header">diff --git a/tools/virtio/ringtest/ring.c b/tools/virtio/ringtest/ring.c</span>
<span class="p_header">index c25c8d248b6b..a62ea4743646 100644</span>
<span class="p_header">--- a/tools/virtio/ringtest/ring.c</span>
<span class="p_header">+++ b/tools/virtio/ringtest/ring.c</span>
<span class="p_chunk">@@ -79,17 +79,17 @@</span> <span class="p_context"> void alloc_ring(void)</span>
 	int ret;
 	int i;
 
<span class="p_del">-	ret = posix_memalign((void **)&amp;ring, 0x1000, ring_size * sizeof *ring);</span>
<span class="p_add">+	ret = posix_memalign((void **)&amp;ring, 0x1000, ring_size * sizeof(*ring));</span>
 	if (ret) {
 		perror(&quot;Unable to allocate ring buffer.\n&quot;);
 		exit(3);
 	}
<span class="p_del">-	event = malloc(sizeof *event);</span>
<span class="p_add">+	event = malloc(sizeof(*event));</span>
 	if (!event) {
 		perror(&quot;Unable to allocate event buffer.\n&quot;);
 		exit(3);
 	}
<span class="p_del">-	memset(event, 0, sizeof *event);</span>
<span class="p_add">+	memset(event, 0, sizeof(*event));</span>
 	guest.avail_idx = 0;
 	guest.kicked_avail_idx = -1;
 	guest.last_used_idx = 0;
<span class="p_chunk">@@ -102,12 +102,12 @@</span> <span class="p_context"> void alloc_ring(void)</span>
 		ring[i] = desc;
 	}
 	guest.num_free = ring_size;
<span class="p_del">-	data = malloc(ring_size * sizeof *data);</span>
<span class="p_add">+	data = malloc(ring_size * sizeof(*data));</span>
 	if (!data) {
 		perror(&quot;Unable to allocate data buffer.\n&quot;);
 		exit(3);
 	}
<span class="p_del">-	memset(data, 0, ring_size * sizeof *data);</span>
<span class="p_add">+	memset(data, 0, ring_size * sizeof(*data));</span>
 }
 
 /* guest side */
<span class="p_header">diff --git a/tools/virtio/ringtest/virtio_ring_0_9.c b/tools/virtio/ringtest/virtio_ring_0_9.c</span>
<span class="p_header">index 47c9a1a18d36..70a2d5016f4e 100644</span>
<span class="p_header">--- a/tools/virtio/ringtest/virtio_ring_0_9.c</span>
<span class="p_header">+++ b/tools/virtio/ringtest/virtio_ring_0_9.c</span>
<span class="p_chunk">@@ -73,12 +73,12 @@</span> <span class="p_context"> void alloc_ring(void)</span>
 	host.used_idx = 0;
 	host.called_used_idx = -1;
 	guest.num_free = ring_size;
<span class="p_del">-	data = malloc(ring_size * sizeof *data);</span>
<span class="p_add">+	data = malloc(ring_size * sizeof(*data));</span>
 	if (!data) {
 		perror(&quot;Unable to allocate data buffer.\n&quot;);
 		exit(3);
 	}
<span class="p_del">-	memset(data, 0, ring_size * sizeof *data);</span>
<span class="p_add">+	memset(data, 0, ring_size * sizeof(*data));</span>
 }
 
 /* guest side */
<span class="p_header">diff --git a/tools/virtio/virtio_test.c b/tools/virtio/virtio_test.c</span>
<span class="p_header">index e0445898f08f..51ea75f7a950 100644</span>
<span class="p_header">--- a/tools/virtio/virtio_test.c</span>
<span class="p_header">+++ b/tools/virtio/virtio_test.c</span>
<span class="p_chunk">@@ -47,8 +47,8 @@</span> <span class="p_context"> bool vq_notify(struct virtqueue *vq)</span>
 	struct vq_info *info = vq-&gt;priv;
 	unsigned long long v = 1;
 	int r;
<span class="p_del">-	r = write(info-&gt;kick, &amp;v, sizeof v);</span>
<span class="p_del">-	assert(r == sizeof v);</span>
<span class="p_add">+	r = write(info-&gt;kick, &amp;v, sizeof(v));</span>
<span class="p_add">+	assert(r == sizeof(v));</span>
 	return true;
 }
 
<span class="p_chunk">@@ -113,7 +113,7 @@</span> <span class="p_context"> static void vq_info_add(struct vdev_info *dev, int num)</span>
 static void vdev_info_init(struct vdev_info* dev, unsigned long long features)
 {
 	int r;
<span class="p_del">-	memset(dev, 0, sizeof *dev);</span>
<span class="p_add">+	memset(dev, 0, sizeof(*dev));</span>
 	dev-&gt;vdev.features = features;
 	dev-&gt;buf_size = 1024;
 	dev-&gt;buf = malloc(dev-&gt;buf_size);
<span class="p_chunk">@@ -123,10 +123,10 @@</span> <span class="p_context"> static void vdev_info_init(struct vdev_info* dev, unsigned long long features)</span>
 	r = ioctl(dev-&gt;control, VHOST_SET_OWNER, NULL);
 	assert(r &gt;= 0);
 	dev-&gt;mem = malloc(offsetof(struct vhost_memory, regions) +
<span class="p_del">-			  sizeof dev-&gt;mem-&gt;regions[0]);</span>
<span class="p_add">+			  sizeof(dev-&gt;mem-&gt;regions[0]));</span>
 	assert(dev-&gt;mem);
 	memset(dev-&gt;mem, 0, offsetof(struct vhost_memory, regions) +
<span class="p_del">-                          sizeof dev-&gt;mem-&gt;regions[0]);</span>
<span class="p_add">+                          sizeof(dev-&gt;mem-&gt;regions[0]));</span>
 	dev-&gt;mem-&gt;nregions = 1;
 	dev-&gt;mem-&gt;regions[0].guest_phys_addr = (long)dev-&gt;buf;
 	dev-&gt;mem-&gt;regions[0].userspace_addr = (long)dev-&gt;buf;
<span class="p_chunk">@@ -146,7 +146,7 @@</span> <span class="p_context"> static void wait_for_interrupt(struct vdev_info *dev)</span>
 	poll(dev-&gt;fds, dev-&gt;nvqs, -1);
 	for (i = 0; i &lt; dev-&gt;nvqs; ++i)
 		if (dev-&gt;fds[i].revents &amp; POLLIN) {
<span class="p_del">-			read(dev-&gt;fds[i].fd, &amp;val, sizeof val);</span>
<span class="p_add">+			read(dev-&gt;fds[i].fd, &amp;val, sizeof(val));</span>
 		}
 }
 
<span class="p_header">diff --git a/usr/gen_init_cpio.c b/usr/gen_init_cpio.c</span>
<span class="p_header">index 225ad244cf88..156101d8d67a 100644</span>
<span class="p_header">--- a/usr/gen_init_cpio.c</span>
<span class="p_header">+++ b/usr/gen_init_cpio.c</span>
<span class="p_chunk">@@ -388,7 +388,7 @@</span> <span class="p_context"> static char *cpio_replace_env(char *new_location)</span>
 	       (end = strchr(start + 2, &#39;}&#39;))) {
 		*start = *end = 0;
 		var = getenv(start + 2);
<span class="p_del">-		snprintf(expanded, sizeof expanded, &quot;%s%s%s&quot;,</span>
<span class="p_add">+		snprintf(expanded, sizeof(expanded), &quot;%s%s%s&quot;,</span>
 			 new_location, var ? var : &quot;&quot;, end + 1);
 		strcpy(new_location, expanded);
 	}

</pre>
</div>




  </div>
  <div id="footer">
   <a href="http://jk.ozlabs.org/projects/patchwork/">patchwork</a>
   patch tracking system
  </div>
 </body>
</html>



